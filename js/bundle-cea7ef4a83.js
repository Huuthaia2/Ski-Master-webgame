!function(){"use strict";class e{static getOrAddComponent(e,t){let i=e.getComponent(t);return null==i&&(i=e.addComponent(t)),i}static removeComponent(e,t){let i=e.getComponent(t);null!=i&&i.destroy()}static isNullOrEmpty(e){return null==e||"string"==typeof e&&""===e}static getChildByName(e,t){if(!t||0==t.length)return null;let i=e,n=null;for(let e=0;e<t.length;e++){let a=t[e];if(null==(n=i.getChildByName(a)))return null;i=n}return n}}class t{constructor(){this.D=["","K","M","B","T","P","E","Z","Y","S"],this.DLen={K:3,M:6,B:9,T:12,P:15,E:18,Z:21,Y:24,S:27},this.arr=[],this.len=0}setByShortString(e){let t,i=e.length,n=i-1,a=0;if(this.arr=[],e.charCodeAt(n)>57){for(t=e.charAt(n),n=0,a=this.DLen[t];n<a;n++)this.arr.push(0);if(n=i-3,46==e.charCodeAt(n))for(this.arr[a-1]=parseInt(e.charAt(i-2));n--;)this.arr.push(parseInt(e.charAt(n)));else for(n=i-1;n--;)this.arr.push(parseInt(e.charAt(n)))}else if(n=i-2,46==e.charCodeAt(n))for(;n--;)this.arr.push(parseInt(e.charAt(n)));else for(n=i;n--;)this.arr.push(parseInt(e.charAt(n)));return this.len=this.arr.length,this}plus(e){let t=[],i=0,n=Math.max(e.len,this.len),a=0,o=0;for(;o<n;o++)a=i,o<this.len&&(a+=this.arr[o]),o<e.len&&(a+=e.arr[o]),a>9?(i=1,a-=10):i=0,t.push(a);return 0!=i&&t.push(i),this.arr=t,this.len=this.arr.length,this}minus(e){let t=[],i=0;if(e.len>this.len||e.len==this.len&&this.arr[this.len-1]<e.arr[this.len-1])t.push(0);else{let n=0,a=this.len,o=0;for(;i<a&&(o=this.arr[i],o-=n,i<e.len&&(o-=e.arr[i]),o<0?(n=1,o+=10):n=0,!(o<0));i++)t.push(o);0!=n&&(t=[0])}i=this.len=t.length;let n=-1;for(;i--&&0==t[i];)n=Math.max(1,i);return n>=0&&t.splice(n,this.len-n),this.arr=t,this.len=this.arr.length,this}multBigUInt(e){t.biR.zero();let i=0;for(;i<e.len;i++)t.bi1.copy(this),t.bi1.mult(e.arr[i]),t.bi1.mult10(i),t.biR.plus(t.bi1);return this.copy(t.biR),this}mult2(e){let i=e+"",n=i.length,a=0;for(t.biR.zero();n--;)t.bi1.copy(this),t.bi1.mult(parseInt(i.charAt(n))),t.bi1.mult10(a++),t.biR.plus(t.bi1);return this.copy(t.biR),this}mult(e){let t=[],i=0,n=0,a=0;for(a=0;a<this.len;a++)(n=this.arr[a]*e+i)>9?(i=Math.floor(n/10),n%=10):i=0,t.push(n);return 0!=i&&t.push(i),this.arr=t,this.len=this.arr.length,this}mult10(e){for(void 0===e&&(e=1);e--;)this.arr.unshift(0);return this.len=this.arr.length,this}present100(e){return this.mult2(e).div10(2),this}div10(e){for(void 0===e&&(e=1);e--;)this.arr.shift();return this.len=this.arr.length,this.len<=0&&this.zero(),this}div(e){let t=!1,i=[],n=0,a=0,o=this.len,r=0;for(;o--;)r=10*n+this.arr[o],a=Math.floor(r/e),(t||a>0)&&(i.push(a),t=!0),n=r%e;return this.len=i.length,0==this.len?(this.arr=[0],this.len=1):(this.arr=i,this.arr.reverse()),this}divPresent(e){let t=this.len-e.len;if(t>=3)return 0;if(t<-3)return 10;let i=Math.max(this.len,e.len),n="",a="";for(t=Math.min(3,i);t--;)--i<this.len&&(n+=this.arr[i]),i<e.len&&(a+=e.arr[i]);return parseFloat(a)/parseFloat(n)}bigger(e){if(this.len>e.len)return!0;if(this.len<e.len)return!1;let t=this.len;for(;t--;){if(this.arr[t]>e.arr[t])return!0;if(this.arr[t]<e.arr[t])return!1}return!1}equal(e){if(this.len!=e.len)return!1;let t=this.len;for(;t--;)if(this.arr[t]!=e.arr[t])return!1;return!0}isZero(){return 1==this.len&&0==this.arr[0]}zero(){return this.arr=[0],this.len=1,this}one(){return this.arr=[1],this.len=1,this}getString(e){void 0===e&&(e="");let t=this.arr.concat();return t.reverse(),t.join(e)}getShortString(){let e=0,t=0,i="",n=0;if(1==(e=this.len)&&0==this.arr[0])return"0";for(t=e%3,n=Math.floor(e/3),0==t&&(t=3,n--),t=e-t;e-- >t;)i+=this.arr[e];return n>0&&this.arr[e]>0&&(i=i+"."+this.arr[e]),i+this.D[n]}getShortString2(){let e=0,t=0,i="",n=0;if(1==(e=this.len)&&0==this.arr[0])return"0";for(t=e%3,n=Math.floor(e/3),0==t&&(t=3,n--),t=e-t;e-- >t;)i+=this.arr[e];return n>0&&(this.arr[e]>0?(i=i+"."+this.arr[e],this.arr[e-1]>0&&(i+=this.arr[e-1])):this.arr[e-1]>0&&(i=i+"."+this.arr[e]+this.arr[e-1])),i+this.D[n]}clone(){let e=new t;return e.arr=this.arr.concat(),e.len=this.len,e}copy(e){return this.arr=e.arr.concat(),this.len=e.len,this}}t.bi1=new t,t.biR=new t,t.tmp=new t;class i{static getTimer(){return(new Date).getTime()}}i.formatTimeMS=(e=>{let t="",i=Math.floor(e/60);return i<10&&(t+="0"),t+=i+":",(e%=60)<10&&(t+="0"),t+Math.floor(e)}),i.get24=(()=>{let e=new Date;return e.setHours(23),e.setMinutes(59),e.setSeconds(59),e.getTime()}),i.getTimerOffset=(e=>{let t=new Date;return t.setDate(t.getDate()+e),t.getTime()});class n{constructor(){this.mTable={},this.mCount=0}get table(){return this.mTable}add(e,t){return!this.containsKey(e)&&(this.mCount++,this.mTable[e]=t,!0)}remove(e){return!!this.containsKey(e)&&(this.mCount--,delete this.mTable[e],!0)}keys(){let e=new Array;for(let t in this.mTable)e.push(t);return e}containsKey(e){return this.mTable.hasOwnProperty(e)}values(){let e=new Array;for(let t in this.mTable)e.push(this.mTable[t]);return e}containesValue(e){for(let t in this.mTable)if(this.mTable[t]==e)return!0;return!1}get count(){return this.mCount}get(e){return this.mTable[e]}set(e,t){this.mTable[e]=t}clear(){this.mTable={},this.mCount=0}toString(){let e="{";for(let t in this.mTable)e+=`\n\t${t} : ${this.mTable[t]}`;return e+"\n}"}}class a{constructor(){this.mArray=[]}get array(){return this.mArray}get count(){return this.mArray.length}add(e){this.mArray.push(e)}unshift(e){this.mArray.unshift(e)}addRange(e){if(e)for(let t of e)this.mArray.push(t)}remove(e){let t=this.mArray.indexOf(e);return t>=0&&this.mArray.splice(t,1),!1}removeAt(e){return e<0||e>=this.mArray.length?(console.error("list removeAt error, index:",e,"this.mArray.length:",this.mArray.length),!1):(this.mArray.splice(e,1),!0)}removeRange(e,t){if(e<0||e>=this.mArray.length)return!1;let i=t+e;return i<0||i>this.mArray.length?(console.error("list removerange error,startIndex:",e,"removeCount:",t,"endIndex:",i),!1):(this.mArray.splice(e,t),!0)}indexOf(e){return this.mArray.indexOf(e)}lastIndexOf(e,t){return this.mArray.lastIndexOf(e,t)}get(e){if(!(e<0||e>=this.mArray.length))return this.mArray[e]}pop(){if(0!=this.mArray.length)return this.mArray.pop()}popFront(){if(0!=this.mArray.length)return this.mArray.shift()}contains(e){return this.mArray.indexOf(e)>=0}sort(e){e&&this.mArray.sort(e)}clear(){this.mArray.splice(0)}reverse(){this.mArray.reverse()}toString(){return"["+this.mArray.join(",")+"]"}toStringSymbol(e){return this.mArray.join(e)}removeFrom(e,t){this.mArray.splice(e,t)}length(){return this.mArray.length}}class o{constructor(e,t){this.eAction=t,this.eCaller=e}invoke(e){this.eAction&&this.eAction.call(this.eCaller,e)}equal(e,t){return this.eCaller==e&&this.eAction==t}}class r{constructor(){this.events=new a}indexOf(e,t){for(let i=0;i<this.events.count;i++){if(this.events.get(i).equal(e,t))return i}return-1}addEntity(e){this.events.add(e)}add(e,t){let i=new o(e,t);this.events.add(i)}remove(e,t){let i=this.indexOf(e,t);i>=0&&this.events.removeAt(i)}invoke(e){this.events.array.forEach((t,i)=>{t.invoke(e)})}Clear(){this.events.clear()}Dispose(){this.events=null}}class s{constructor(){this.dicEvent=new n}addEntityListener(e){let t=this.dicEvent.get(e.stringID);null==t&&(t=new r,this.dicEvent.add(e.stringID,t)),t.addEntity(e)}addListener(e,t,i){let n=this.dicEvent.get(e);null==n&&(n=new r,this.dicEvent.add(e,n)),n.add(t,i)}removeListener(e,t,i){let n=this.dicEvent.get(e);null!=n&&n.remove(t,i)}triggerListener(e,t){let i=this.dicEvent.get(e);null!=i&&i.invoke(t)}clearListener(e){let t=this.dicEvent.get(e);null!=t&&t.Dispose(),this.dicEvent.remove(e)}clearAllListener(){for(let e in this.dicEvent.table)this.dicEvent.table[e].Clear();this.dicEvent.clear()}}class l{}class d{constructor(){this.TimeOut=5e3,this.httpEventId="HttpMgr_Event_Result",this.event=new s}static get instance(){return d.getInstance()}static getInstance(){return null==d.mInstance&&(d.mInstance=new d),d.mInstance}post(e,t,i="json"){this.createHttpRequest(e).send(e,JSON.stringify(t),"post",i,["Content-Type","application/json"])}get(e,t="json",i){Laya.Browser.onVVMiniGame?window.qg.request({url:e,dataType:t,method:"GET",success:t=>{this.onComplete(e,t.data)},fail:(t,i)=>{let n={error:t,code:i};this.onError(e,n)}}):i?this.createHttpRequest(e).send(e,void 0,"get",t,i):this.createHttpRequest(e).send(e,void 0,"get",t)}createHttpRequest(e){let t=new Laya.HttpRequest;return t.http.timeout=this.TimeOut,t.once(Laya.Event.COMPLETE,this,this.onComplete,[e]),t.once(Laya.Event.ERROR,this,this.onError,[e]),t}onComplete(e,t){this.triggerListener(e,!0,t)}onError(e,t){this.triggerListener(e,!1,t)}triggerListener(e,t,i){let n=new l;n.url=e,n.result=t,n.data=i,this.event.triggerListener(this.httpEventId,n)}addListener(e,t){this.event.addListener(this.httpEventId,e,t)}removeListener(e,t){this.event.removeListener(this.httpEventId,e,t)}}class h{static get(e){let t=this.pool.get(e);return null==t&&(t=new e,this.pool.set(e,t)),t}static contains(e){return-1!=this.pool.indexOf(e)}static remove(e){return this.pool.remove(e)}static clear(){this.pool.clear()}}h.pool=new class{constructor(){this.mValues=[],this.mKeys=[]}set(e,t){let i=this.indexOf(e);i>=0?this.mValues[i]=t:(this.mKeys.push(e),this.mValues.push(t))}indexOf(e){let t=this.mKeys.indexOf(e);return t>=0?t:(e="string"==typeof e?Number(e):"number"==typeof e?e.toString():e,this.mKeys.indexOf(e))}get(e){let t=this.indexOf(e);return t<0?null:this.mValues[t]}remove(e){let t=this.indexOf(e);return t>=0&&(this.mKeys.splice(t,1),this.mValues.splice(t,1),!0)}clear(){this.mValues.length=0,this.mKeys.length=0}values(){return this.mValues}keys(){return this.mKeys}};class c{constructor(){this.uid="",this.encryptedData="",this.iv="",this.openid="",this.ip="",this.inviter_gid="",this.oToken=""}static get instance(){return h.get(c)}}class p{static serialize(e,t){let i=[];for(let n in e){if(!e.hasOwnProperty(n))continue;let a=t?`${t}[${n}]`:n,o=e[n];"object"==typeof o?i.push(this.serialize(o,a)):i.push(encodeURIComponent(a)+"="+encodeURIComponent(o))}return i.join("&")}static appendParams(e,t){if(0===Object.keys(t).length)return e;let i=e.match(/\?/)?"&":"?";return`${e}${i}${this.serialize(t)}`}static protocol(){return location.protocol.match(/^https/)?"wss":"ws"}static converGSSocket(e){return"/"!==e.charAt(0)?e:"/"===e.charAt(1)?`${p.protocol()}:${e}`:`${p.protocol()}://${location.host}${e}`}static initArgs(e){this.ucenter=e.ucenter,this.appId=e.appId,this.gsUrl=e.gsUrl,this.version=e.version,this.gamekey=e.gamekey}}class m{}var u,g;m.LANG_DEFAULT="zh_cn",m.LANG_ZH_CN="zh_cn",m.LANG_ZH_TW="zh_tw",m.LANG_EN_US="en_us",m.LANG_HI_IN="hi_in",function(e){e[e.debug=0]="debug",e[e.log=1]="log",e[e.info=2]="info",e[e.warn=3]="warn",e[e.error=4]="error",e[e.none=5]="none"}(u||(u={})),function(e){e[e.dont=0]="dont",e[e.need=1]="need",e[e.must=2]="must"}(g||(g={}));class f{constructor(){this.video=[],this.banner=[],this.box=[],this.interstitial=[],this.gameportal=[],this.gameicon=[],this.gamebanner=[],this.custom=[]}}class y{constructor(){this.gamesBasePath="https://upcdn.ouku3.com/jumpto",this.basePath=[],this.ucenter="",this.matrixUrl="",this.reportUrl="",this.gms="",this.version=0,this.appId="",this.gamekey="",this.ad=null,this.jumptoGameList=[],this.lang=m.LANG_ZH_CN,this.needGetGamelist=!1,this.needGetSwitchList=!1,this.needOKStatis=!1,this.pkg="",this.app_key="",this.needAdConfFromServer=!1,this.api_gamelist="",this.logLevel=u.info,this.games_ald_ouku=!0,this.bbbsReportItemMap={},this.reportAld=!0,this.showVideo=!0,this.gamePortalAd="",this.ucenter="https://ucenter.ouku3.com",this.matrixUrl="https://taurus2.ouku3.com",this.reportUrl="https://taurus2-server.uc10d.com",this.gms="wss://party-server.ouku3.com",this.api_gamelist="/api/games/list",this.version=100,this.ad=new f,this.needAdConfFromServer=!1,this.loginLevel=g.need,this.needGetGamelist=!0,this.logLevel=u.info,this.games_ald_ouku=!0}}class _{constructor(){this.mIsDebug=!1,this.mIsGetAdConf=!1}get IsDebug(){return this.mIsDebug}getConf(){let e=this.mConfWeb;return Laya.Browser.onMiniGame?"object"==typeof tt?e=this.mConfTT:(e=this.mConfWX).needGetGamelist:Laya.Browser.onQQMiniGame?e=this.mConfQQ:Laya.Browser.onVVMiniGame?e=this.mConfVV:Laya.Browser.onQGMiniGame?e=this.mConfQG:Laya.Browser.onTTMiniGame?e=this.mConfTT:"object"==typeof OPPO?e=this.mConfOPPOH5:"object"==typeof FBInstant?"undefined"!=typeof minigame?(console.log("weiyou环境"),e=this.mConfWeiyou):(console.log("FB环境"),e=this.mConfFB):Laya.Render.isConchApp&&(Laya.Browser.onAndroid?e=this.mConfAndroid:Laya.Browser.onIOS&&(e=this.mConfiOS)),e?e.needAdConfFromServer&&!this.mIsGetAdConf&&this.getAdFromServer(e):console.error("conf is not init!"),console.log("参考"),console.log(e),e}getAdFromServer(e){d.instance.addListener(this,this.onSynCompleteAd);let t={action:9e3,gamekey:e.gamekey};d.instance.post(e.ucenter,t)}onSynCompleteAd(e){if(e.result&&0===e.data.code){this.mIsGetAdConf=!0;let t=e.data.adverts;this.setAdConfFromServer(t)}d.instance.removeListener(this,this.onSynCompleteAd)}setAdConfFromServer(e){e&&(e.video&&e.video.length>0&&0==this.getConf().ad.video.length&&(this.getConf().ad.video=e.video),e.banner&&e.banner.length>0&&0==this.getConf().ad.banner.length&&(this.getConf().ad.banner=e.banner),e.interstitial&&e.interstitial.length>0&&0==this.getConf().ad.interstitial.length&&(this.getConf().ad.interstitial=e.interstitial))}}class I{}I.ConfOK=new class extends y{constructor(){super(),this.basePath=[],this.version=107,this.appId="wxeeceed89632e7c26",this.gamekey="55-1-1-1-1",this.ad.video=["adunit-fd51d2568f10b146"],this.ad.banner=["adunit-45ea883a8f0183a1"],this.ad.interstitial=["adunit-93fb6645b20788ac"],this.ad.custom=["adunit-d861a70a71ed8263","adunit-bc5c3cef9f7e3f70","adunit-bc5c3cef9f7e3f70","adunit-d861a70a71ed8263","","adunit-8b89f63651e1832c","adunit-6e339a6a49d9ce4f","adunit-bc5c3cef9f7e3f70"],this.needGetGamelist=!0,this.needGetSwitchList=!0,this.needOKStatis=!0}};class v{}v.ConfOK=new class extends y{constructor(){super(),this.basePath=["https://upcdn.ouku3.com/develop/qqgame/snowball/","https://upcdn.ouku3.com/develop/qqgame/snowball/","https://upcdn.ouku3.com/develop/qqgame/snowball/"],this.version=109,this.appId="1110152385",this.gamekey="7-2",this.ad.video=["77c12c3c8649e00ac2fb10f02262eeeb","a9a03ebc342d2b045a39f3526059aede","73f418fc39797d7c8f553ca36b4e5dd0","b95b3924cbca82e747325fa2013dcee5"],this.ad.banner=["21965f66f61c860b130f4cbfde545dca","953a7e9fc25a249f4b07b8a64de0f455","2eca98b1a2bb57e2febe3c253e74bd78"],this.ad.box=["8919cde7eb6d3cb46cfdf06aec324c20"]}};class w{}w.ConfOK=new class extends y{constructor(){super(),this.basePath=["https://upcdn.ouku3.com/develop/ttgame/snowball/","https://upcdn.ouku3.com/develop/ttgame/snowball/","https://upcdn.ouku3.com/develop/ttgame/snowball/"],this.version=109,this.appId="tt1f2b699680011de5",this.gamekey="7-3",this.ad.video=["mwlmpd208k287ci7nt","4axu9w0c3p715a68c6","180kmdmn6e9f7aea78","27gg16d55d9d2ek8pr"],this.ad.banner=["f2crgd7nceb17hjkfb","489003oa98gd30kaik","1h1b249i0hije0182g"],this.ad.interstitial=["pdn4f17974b9b3aai1"]}};class S{}S.ConfOK=new class extends y{constructor(){super(),this.basePath=[],this.version=100,this.gamekey="7-0",this.loginLevel=g.dont,this.jumptoGameList=[{index:18,appName:"守护雅典娜",icon:"7",appId:"wx0f488cdf10253325",path:"",gamekey:"7-1"},{index:19,appName:"我是弹弹高手",icon:"9",appId:"wxfa487b58a1f4b81e",path:"",gamekey:"9-1"},{index:20,appName:"夺宝猎人",icon:"10",appId:"wxedebed20b3c68037",path:"",gamekey:"10-1"},{index:22,appName:"垃圾挑战",icon:"21",appId:"wxe59c43e3e8de5c14",path:"",gamekey:"21-1"},{index:18,appName:"守护雅典娜",icon:"7",appId:"wx0f488cdf10253325",path:"",gamekey:"7-1"},{index:19,appName:"我是弹弹高手",icon:"9",appId:"wxfa487b58a1f4b81e",path:"",gamekey:"9-1"},{index:18,appName:"守护雅典娜",icon:"7",appId:"wx0f488cdf10253325",path:"",gamekey:"7-1"},{index:19,appName:"我是弹弹高手",icon:"9",appId:"wxfa487b58a1f4b81e",path:"",gamekey:"9-1"},{index:18,appName:"守护雅典娜",icon:"7",appId:"wx0f488cdf10253325",path:"",gamekey:"7-1"},{index:19,appName:"我是弹弹高手",icon:"9",appId:"wxfa487b58a1f4b81e",path:"",gamekey:"9-1"},{index:18,appName:"守护雅典娜",icon:"7",appId:"wx0f488cdf10253325",path:"",gamekey:"7-1"},{index:19,appName:"我是弹弹高手",icon:"9",appId:"wxfa487b58a1f4b81e",path:"",gamekey:"9-1"},{index:18,appName:"守护雅典娜",icon:"7",appId:"wx0f488cdf10253325",path:"",gamekey:"7-1"},{index:19,appName:"我是弹弹高手",icon:"9",appId:"wxfa487b58a1f4b81e",path:"",gamekey:"9-1"},{index:18,appName:"守护雅典娜",icon:"7",appId:"wx0f488cdf10253325",path:"",gamekey:"7-1"},{index:19,appName:"我是弹弹高手",icon:"9",appId:"wxfa487b58a1f4b81e",path:"",gamekey:"9-1"},{index:18,appName:"守护雅典娜",icon:"7",appId:"wx0f488cdf10253325",path:"",gamekey:"7-1"},{index:19,appName:"我是弹弹高手",icon:"9",appId:"wxfa487b58a1f4b81e",path:"",gamekey:"9-1"},{index:18,appName:"守护雅典娜",icon:"7",appId:"wx0f488cdf10253325",path:"",gamekey:"7-1"},{index:19,appName:"我是弹弹高手",icon:"9",appId:"wxfa487b58a1f4b81e",path:"",gamekey:"9-1"},{index:18,appName:"守护雅典娜",icon:"7",appId:"wx0f488cdf10253325",path:"",gamekey:"7-1"},{index:19,appName:"我是弹弹高手",icon:"9",appId:"wxfa487b58a1f4b81e",path:"",gamekey:"9-1"},{index:18,appName:"守护雅典娜",icon:"7",appId:"wx0f488cdf10253325",path:"",gamekey:"7-1"},{index:19,appName:"我是弹弹高手",icon:"9",appId:"wxfa487b58a1f4b81e",path:"",gamekey:"9-1"},{index:18,appName:"守护雅典娜",icon:"7",appId:"wx0f488cdf10253325",path:"",gamekey:"7-1"},{index:19,appName:"我是弹弹高手",icon:"9",appId:"wxfa487b58a1f4b81e",path:"",gamekey:"9-1"},{index:18,appName:"守护雅典娜",icon:"7",appId:"wx0f488cdf10253325",path:"",gamekey:"7-1"},{index:19,appName:"我是弹弹高手",icon:"9",appId:"wxfa487b58a1f4b81e",path:"",gamekey:"9-1"},{index:18,appName:"守护雅典娜",icon:"7",appId:"wx0f488cdf10253325",path:"",gamekey:"7-1"},{index:19,appName:"我是弹弹高手",icon:"9",appId:"wxfa487b58a1f4b81e",path:"",gamekey:"9-1"}]}};class L{}L.ConfOK=new class extends y{constructor(){super(),this.version=107,this.appId="30549379",this.gamekey="55-6-6-1-1",this.ad.video=["334660"],this.ad.banner=["334653"],this.ad.interstitial=[],this.ad.gameportal=["334662","334662","377710","377711"],this.needAdConfFromServer=!1,this.needGetGamelist=!1,this.needGetSwitchList=!0,this.needOKStatis=!0}};class E{}E.ConfOK=new class extends y{constructor(){super(),this.version=107,this.appId="105487987",this.gamekey="55-5-5-1-1",this.ad.video=["71f3e7a3381548cf96b1151fb627c08f"],this.ad.banner=["8e9896ce8cdc4b7e9d99168535fe3d0e"],this.ad.interstitial=["a48e275da57048e1a78ad1585eba2f11"],this.ad.gameportal=["a1ad72d5b508423d90c25a8256306f74","a1ad72d5b508423d90c25a8256306f74","34f0abb5f0074020ab45502d3b22bc14","8466f11bfb2345f09dfcd27b9055ee70"],this.needAdConfFromServer=!1,this.needGetGamelist=!1,this.needGetSwitchList=!0,this.needOKStatis=!0,this.pkg="com.ouku.skiing2.vivominigame",this.app_key="81255222f120747f06fc797cbdd4523c"}};class A{}A.ConfOK=new class extends y{constructor(){super(),this.basePath=[],this.version=100,this.gamekey="55-299-299-100-1",this.needOKStatis=!0,this.loginLevel=g.dont,window.gamekey&&(this.gamekey=window.gamekey)}};class x{}x.ConfOK=new class extends y{constructor(){super(),this.basePath=[],this.version=100,this.gamekey="55-309-309-100-1",this.needOKStatis=!0,this.loginLevel=g.dont}};class T extends _{static get I(){return h.get(T)}constructor(){super(),this.mConfWeb=S.ConfOK,this.mConfWX=I.ConfOK,this.mConfQQ=v.ConfOK,this.mConfTT=w.ConfOK,this.mConfQG=L.ConfOK,this.mConfVV=E.ConfOK,this.mConfAndroid=A.ConfOK,this.mConfWeiyou=x.ConfOK}}class b{constructor(){this.report=!1}static get I(){return h.get(b)}init(){T.I.getConf().reportAld&&(Laya.Browser.onMiniGame&&window.wx.aldSendEvent||Laya.Browser.onQQMiniGame&&window.qq.aldSendEvent||(Laya.Browser.onVVMiniGame||Laya.Browser.onQGMiniGame)&&window.qg.aldSendEvent)?this.report=!0:this.report=!1}sendOpenid(e){this.report&&this.aldSendOpenid(e)}sendEvent(e,t){this.report&&this.aldSendEvent(e,t)}onStartLv(e,t){this.report&&this.aldOnStartLv(e,t)}onRunningLv(e,t,i,n){this.report&&this.aldOnRunningLv(e,t,i,n)}onEndLv(e,t){this.report&&this.aldOnEndLv(e,t)}onInitLevel(e,t,i){this.report&&this.aldOnInitLevel(e,t,i)}onSetLevel(e,t,i){this.report&&this.aldOnSetLevel(e,t,i)}aldSendOpenid(e){window.wx.aldSendOpenid(e)}aldSendEvent(e,t){window.wx.aldSendEvent(e,t)}aldOnStartLv(e,t){window.wx.aldStage.onStart({stageId:e,stageName:`第${e}关`,userId:t})}aldOnEndLv(e,t){window.wx.aldStage.onEnd({stageId:e,stageName:`第${e}关`,userId:t,event:"complete",params:{desc:"end"}})}aldOnRunningLv(e,t,i,n){window.wx.aldStage.onRunning({stageId:e,stageName:`第${e}关`,userId:n,event:t,params:{itemName:i}})}aldOnInitLevel(e,t,i){window.wx.aldLevel.onInitLevel({levelId:e,levelName:`第${e}级`,userId:i,userName:t})}aldOnSetLevel(e,t,i){window.wx.aldLevel.onSetLevel({levelId:e,levelName:`第${e}级`,userId:i,userName:t})}}b.RUNEVENT_RELIFE="复活",b.RELIFETYPE_VIDEO="视频复活",b.RELIFETYPE_SHARE="分享复活",b.RELIFETYPE_DIAMOND="钻石复活";class R{}R.INDEX_SHOW="首页曝光",R.LUCKYDRAW_SHOW="幸运转盘-弹窗曝光",R.LUCKYDRAW_CLICK="幸运转盘-抽奖按钮点击",R.GAME_SHOW="新游试玩-弹窗曝光",R.GAME_PLAY="新游试玩-",R.SIGNIN_SHOW="每日签到-弹窗曝光",R.SIGNIN_VIDEO="每日签到-视频领取",R.SIGNIN_CLICK="每日签到-直接领取",R.SERVICE_SHOW="每日钻石-弹窗曝光",R.SERVICE_BACKFLOW="每日钻石-用户回流",R.SERVICE_CLICK="每日钻石-领钻石按钮点击",R.INVITE_SHOW="邀请好礼-弹窗曝光",R.INVITE_CLICK="邀请好礼-邀请按钮点击",R.COLLECT_SHOW="收藏有礼-弹窗曝光",R.COLLECT_PROVIDE="收藏有礼-奖励发放",R.SUPPLY_VIDEO_COMPLETE="补给宝箱-激励视频播放成功",R.DAYCOIN_SHOW="每日金币-弹窗曝光",R.DAYCOIN_CLICK="每日金币-普通领取",R.DAYCOIN_SHARE="每日金币-分享领取",R.DAYCOIN_VIDEO="每日金币-视频领取",R.RANK_SHOW="好友排行-弹窗曝光",R.RANK_INVITE="好友排行-邀请好友按钮点击",R.RELIFE_SHOW="复活页-曝光",R.RELIFE_CLICK="复活页-复活按钮点击",R.RELIFE_GIVEUP="复活页-放弃复活按钮点击",R.RESULT_SHOW="结算页-曝光",R.RESULT_SUCCESS_CLICK="成功结算页-金币领取",R.RESULT_SUCCESS_GAME_SHOW="成功结算页-游戏推荐-大弹窗曝光",R.RESULT_SUCCESS_GAME_CLICK="成功结算页-游戏推荐-游戏名点击",R.RESULT_FAIL_CLICK="失败结算页-金币领取",R.RESULT_FAIL_SKIP="失败结算页-跳过本关",R.RESULT_FAIL_GAME_SHOW="失败结算页-游戏推荐-大弹窗曝光",R.RESULT_FAIL_GAME_CLICK="失败结算页-游戏推荐-游戏名点击",R.OFFLINE_SHOW="离线收益-弹窗曝光",R.OFFLINE_CLICK="离线收益-按钮点击",R.EXCHANGE_SHOW="兑换金币-弹窗曝光",R.EXCHANGE_CLICK="兑换金币-兑换按钮点击",R.EXCHANGE_CLICKALL="兑换金币-全部兑换按钮点击",R.GAME_BAT_BTN_FIREST_CLICK="进入游戏战斗按钮点击-等级1",R.GAME_BAT_BTN_CLICK="进入游戏战斗按钮点击",R.GAME_BAT_FIREST_SHOW="进入游戏战斗页面-等级1",R.GAME_BAT_SHOW="进入游戏战斗页面",R.COIN_GET="金币获得",R.COIN_USE="金币消耗",R.DIAMOND_GET="钻石获得",R.DIAMOND_USE="钻石消耗",R.MAID_AD_SHOW="导量位—首页跑马灯—曝光",R.MAID_AD_CLIK="导量位—首页跑马灯—点击",R.MAID_AD_ACT="导量位—首页跑马灯—促活",R.GAMEBOX_SHOW="导量位—新游试玩—曝光",R.GAMEBOX_CLIK="导量位—新游试玩—点击",R.GAMEBOX_ACT="导量位—新游试玩—促活",R.PASSLEVEL_SHOW="导量位—通关导量位—曝光",R.PASSLEVEL_CLICK="导量位—通关导量位—点击",R.PASSLEVEL_ACT="导量位—通关导量位—促活",R.RESAULT2_SHOW="导量位—插屏导量位—曝光",R.RESAULT2_CLICK="导量位—插屏导量位—点击",R.RESAULT2_ACT="导量位—插屏导量位—促活";class M{constructor(){this.mSaveKey="",this.mDataLocal=null,this.isSoundMute=!0,this.isMusicMute=!0,this.isVibrateMute=!0,this.coin=new t,this.diamond=20,this.name="",this.level=1,this.logoutTime=0,this.offlineTime=-1,this.mSaveKey=M.ProductName,this.coin.setByShortString("0")}addCoinNum(e,i=!0){return t.tmp.setByShortString(e.toString()),this.addCoin(t.tmp,i)}addCoin(e,t=!0){return this.coin.plus(e),t&&this.save(),b.I.sendEvent(R.COIN_GET,e.getShortString()),!0}subCoinNum(e,i=!0){return t.tmp.setByShortString(e.toString()),this.subCoin(t.tmp,i)}subCoin(e,t=!0){return!(!this.coin.bigger(e)&&!this.coin.equal(e))&&(this.coin.minus(e),t&&this.save(),b.I.sendEvent(R.COIN_USE,e.getShortString()),!0)}addDiamondNum(e,t=!0){this.diamond+=e,t&&this.save(),b.I.sendEvent(R.DIAMOND_GET,e)}subDiamondNum(e,t=!0){return this.diamond>=e&&(this.diamond-=e,t&&this.save(),b.I.sendEvent(R.DIAMOND_USE,e),!0)}readLocal(t){let n="",a=null;Laya.LocalStorage.support&&(n+=Laya.LocalStorage.getItem(this.mSaveKey)),"{"==(n=unescape(n)).charAt(0)?this.mDataLocal=JSON.parse(n):this.mDataLocal={},e.isNullOrEmpty(t)||(a=JSON.parse(t),e.isNullOrEmpty(this.mDataLocal)?this.mDataLocal=a:!e.isNullOrEmpty(this.mDataLocal.logoutTime)&&!e.isNullOrEmpty(a.logoutTime)&&a.logoutTime>this.mDataLocal.logoutTime&&(this.mDataLocal=a)),this.applyLocal(),-1==this.offlineTime&&(this.offlineTime=i.getTimer()-this.mDataLocal.logoutTime)}save(){this.mDataLocal={},this.saveLocal();let e=JSON.stringify(this.mDataLocal);Laya.LocalStorage.support&&Laya.LocalStorage.setItem(this.mSaveKey,e)}getLevel(){return this.level}getCurLevel(){return this.level-1}getCoin(){return this.coin.getString()}saveLocal(){this.mDataLocal.isSoundMute=this.isSoundMute,this.mDataLocal.isMusicMute=this.isMusicMute,this.mDataLocal.isVibrateMute=this.isVibrateMute,this.mDataLocal.logoutTime=i.getTimer(),this.mDataLocal.coin=this.coin.getString(),this.mDataLocal.diamond=this.diamond,this.mDataLocal.name=this.name,this.mDataLocal.level=this.level}applyLocal(){e.isNullOrEmpty(this.mDataLocal.isSoundMute)||(this.isSoundMute=this.mDataLocal.isSoundMute),e.isNullOrEmpty(this.mDataLocal.isMusicMute)||(this.isMusicMute=this.mDataLocal.isMusicMute),e.isNullOrEmpty(this.mDataLocal.isVibrateMute)||(this.isVibrateMute=this.mDataLocal.isVibrateMute),e.isNullOrEmpty(this.mDataLocal.logoutTime)||(this.logoutTime=this.mDataLocal.logoutTime),e.isNullOrEmpty(this.mDataLocal.coin)||this.coin.setByShortString(this.mDataLocal.coin),e.isNullOrEmpty(this.mDataLocal.diamond)||(this.diamond=this.mDataLocal.diamond),e.isNullOrEmpty(this.mDataLocal.name)||(this.name=this.mDataLocal.name),e.isNullOrEmpty(this.mDataLocal.level)?this.level=1:this.level=this.mDataLocal.level}synService(){d.instance.addListener(this,this.onSynComplete);let e={action:1002,gamekey:p.gamekey,uid:c.instance.uid,data:JSON.stringify(this.mDataLocal)};d.instance.post(p.ucenter,e)}onSynComplete(e){e.data.code,d.instance.removeListener(this,this.onSynComplete)}}M.ProductName="moon";class C extends M{constructor(){super(...arguments),this.pifu=0,this.tuowei=13,this.map=11,this.right_left=1,this.effect=1,this.money=100,this.makemoney=0,this.zhangai=0,this.bgm=1,this.shake=1,this.guide=0,this.gameTimes=0}gameStart(){this.gameTimes++}static get I(){return h.get(C)}applyLocal(){super.applyLocal(),e.isNullOrEmpty(this.mDataLocal.money)?this.money=100:this.money=this.mDataLocal.money,e.isNullOrEmpty(this.mDataLocal.makemoney)?this.makemoney=0:this.makemoney=this.mDataLocal.makemoney,e.isNullOrEmpty(this.mDataLocal.pifu)?this.pifu=0:this.pifu=this.mDataLocal.pifu,e.isNullOrEmpty(this.mDataLocal.tuowei)?this.tuowei=13:this.tuowei=this.mDataLocal.tuowei,e.isNullOrEmpty(this.mDataLocal.map)?this.map=11:this.map=this.mDataLocal.map,e.isNullOrEmpty(this.mDataLocal.zhangai)?this.zhangai=0:this.zhangai=this.mDataLocal.zhangai,e.isNullOrEmpty(this.mDataLocal.bgm)?this.bgm=1:this.bgm=this.mDataLocal.bgm,e.isNullOrEmpty(this.mDataLocal.effect)?this.effect=1:this.effect=this.mDataLocal.effect,e.isNullOrEmpty(this.mDataLocal.shake)?this.shake=1:this.shake=this.mDataLocal.shake,e.isNullOrEmpty(this.mDataLocal.right_left)?this.right_left=1:this.right_left=this.mDataLocal.right_left,e.isNullOrEmpty(this.mDataLocal.pifus)?this.pifus=[-1,2,3,4,5,6,7,8,9,10]:this.pifus=this.mDataLocal.pifus,e.isNullOrEmpty(this.mDataLocal.maps)?this.maps=[-1,2]:this.maps=this.mDataLocal.maps,e.isNullOrEmpty(this.mDataLocal.tuoweis)?this.tuoweis=[-1,2,3,4,5,6]:this.tuoweis=this.mDataLocal.tuoweis,e.isNullOrEmpty(this.mDataLocal.guide)?this.guide=0:this.guide=this.mDataLocal.guide}saveLocal(){super.saveLocal(),this.mDataLocal.money=this.money,this.mDataLocal.makemoney=this.makemoney,this.mDataLocal.pifu=this.pifu,this.mDataLocal.tuowei=this.tuowei,this.mDataLocal.map=this.map,this.mDataLocal.zhangai=this.zhangai,this.mDataLocal.bgm=this.bgm,this.mDataLocal.effect=this.effect,this.mDataLocal.shake=this.shake,this.mDataLocal.right_left=this.right_left,this.mDataLocal.pifus=this.pifus,this.mDataLocal.maps=this.maps,this.mDataLocal.tuoweis=this.tuoweis,this.mDataLocal.guide=this.guide}getCoin(){return this.money.toString()}getUnLock(e){var t=[];switch(e){case 0:this.pifus.forEach((e,i,n)=>{-1!=e&&t.push(e)});break;case 1:this.maps.forEach((e,i,n)=>{-1!=e&&t.push(e)});break;case 2:this.tuoweis.forEach((e,i,n)=>{-1!=e&&t.push(e)})}return t}playMusic(e){2==e?Laya.SoundManager.playMusic("sounds/choice.mp3",0):Laya.SoundManager.playMusic("sounds/bgm.mp3",0)}playSound(e="sounds/button2.mp3"){1==this.effect&&Laya.Render.isConchApp&&(e=e.replace("mp3","wav"))}stopSound(e){e&&e.length?Laya.SoundManager.stopSound(e):Laya.SoundManager.stopAllSound()}shock(){1==this.shake&&(Laya.Browser.onMiniGame?wx.vibrateLong({success:()=>{},fail:()=>{},complete:()=>{}}):(Laya.Browser.onQGMiniGame||Laya.Browser.onVVMiniGame)&&qg.vibrateLong({success:()=>{},fail:()=>{},complete:()=>{}}))}setMakemoney(e){this.money+=e*this.makemoney,this.makemoney=0}}C.reliveTimes=0,C.isExit=!1,C.user={openid:"1",token:"2.0xxxxx",timestamp:"1510001111",sign:"xxxxxxxxxxxx",avatarUrl:"comp/head.jpg",nickname:"玩家"};var O,D,V,N,k,P,B,G,F,z,U,H,Y,X,W,K,j,q=Laya.ClassUtils.regClass;!function(e){class t extends Laya.Dialog{constructor(){super()}createChildren(){super.createChildren(),this.createView(t.uiView)}}t.uiView={type:"Dialog",props:{width:720,height:554},compId:2,child:[{type:"Image",props:{y:11,x:40,width:644,skin:"comp/jinpinyouxidi.png",sizeGrid:"10,10,10,10",height:543},compId:3},{type:"Image",props:{y:22,x:0,width:720,skin:"comp/title_zi.png",sizeGrid:"0,73,0,62"},compId:4,child:[{type:"Sprite",props:{y:27,x:124,texture:"comp/xuedian.png"},compId:20},{type:"Sprite",props:{y:27,x:554,texture:"comp/xuedian.png"},compId:21}]},{type:"Sprite",props:{y:6,x:586,texture:"comp/xue2.png"},compId:5},{type:"Sprite",props:{y:0,x:18,texture:"comp/xue1.png"},compId:6},{type:"Image",props:{y:125,x:62,width:600,skin:"comp/neirongdi.png",sizeGrid:"30,54,46,54",height:407},compId:7},{type:"Button",props:{y:431,x:211,width:200,var:"btnCancel",stateNum:1,skin:"comp/anniulan.png",sizeGrid:"0,50,0,49",runtime:"script/gui/ScaleButton.ts",height:80,anchorY:.5,anchorX:.5},compId:26},{type:"Button",props:{y:431,x:505,width:200,var:"btnSure",stateNum:1,skin:"comp/anniulan.png",sizeGrid:"0,50,0,49",runtime:"script/gui/ScaleButton.ts",labelSize:28,height:80,anchorY:.5,anchorX:.5},compId:29},{type:"Label",props:{y:197,x:138,wordWrap:!0,width:444,var:"lblText",height:131,fontSize:34,color:"#2580a0",align:"center"},compId:15},{type:"Label",props:{y:39,text:"Announcement",fontSize:47,color:"#ffffff",centerX:0},compId:14},{type:"Label",props:{y:416,x:475.8203125,text:"sure",strokeColor:"#9c9c9c",stroke:3,fontSize:30,color:"#ffffff"},compId:31},{type:"Label",props:{y:416,x:167.640625,text:"cancel",strokeColor:"#9c9c9c",stroke:3,fontSize:30,color:"#ffffff"},compId:32}],loadList:["comp/jinpinyouxidi.png","comp/title_zi.png","comp/xuedian.png","comp/xue2.png","comp/xue1.png","comp/neirongdi.png","comp/anniulan.png"],loadList3D:[]},e.AlertUI=t,q("ui.AlertUI",t);class i extends Laya.Dialog{constructor(){super()}createChildren(){super.createChildren(),this.createView(i.uiView)}}i.uiView={type:"Dialog",props:{width:720,height:1280},compId:2,child:[{type:"Image",props:{y:113,x:41.5,width:644,skin:"comp/pifudi.png",sizeGrid:"30,46,31,44",height:752},compId:3},{type:"Image",props:{y:125,x:3,width:720,skin:"comp/title_zi.png",sizeGrid:"0,73,0,62"},compId:4,child:[{type:"Label",props:{y:17,text:"Free",fontSize:47,color:"#ffffff",centerX:0},compId:12},{type:"Sprite",props:{y:27,x:227,texture:"comp/xuedian.png"},compId:13},{type:"Sprite",props:{y:27,x:466,texture:"comp/xuedian.png"},compId:14}]},{type:"Sprite",props:{y:109,x:589,texture:"comp/xue2.png"},compId:5},{type:"Sprite",props:{y:103,x:21,texture:"comp/xue1.png"},compId:6},{type:"Button",props:{y:954,x:363,var:"btnFree",stateNum:1,skin:"comp/fh.png",runtime:"script/gui/ScaleButton.ts",anchorY:.5,anchorX:.5},compId:7,child:[{type:"Sprite",props:{y:18,x:39,texture:"comp/shipi.png"},compId:15},{type:"Sprite",props:{y:19,x:136,texture:"comp/mianfeishiyong.png"},compId:16},{type:"Sprite",props:{y:-20,x:-15,texture:"comp/xue1.png"},compId:30}]},{type:"Label",props:{y:1012,x:27,width:671,var:"lbl_close",valign:"middle",underline:!0,text:"No,thanks",mouseEnabled:!0,height:55,fontSize:35,color:"#ffffff",align:"center"},compId:18},{type:"Box",props:{y:788,x:195,var:"box_bar",height:59},compId:19,child:[{type:"Image",props:{y:10.000003335964834,x:194.50000026794896,skin:"comp/progressbg.jpg",rotation:90,anchorY:.5,anchorX:.5},compId:20},{type:"ProgressBar",props:{y:3.000003335964834,x:73.50000026794896,width:241,var:"progress_speed",value:1,skin:"comp/progress_red.png"},compId:21},{type:"Image",props:{y:50.000003335964834,x:194.50000026794896,skin:"comp/progressbg.jpg",rotation:90,anchorY:.5,anchorX:.5},compId:22},{type:"ProgressBar",props:{y:43.000003335964834,x:73.50000026794896,width:241,var:"progress_hp",value:1,skin:"comp/progress_green.png",height:14},compId:23},{type:"Label",props:{y:-1.9999966640351658,x:-27.499999732051037,text:"speed",stroke:1,fontSize:24,color:"#ff0400"},compId:24},{type:"Label",props:{y:38.000003335964834,x:-27.499999732051037,text:"energy",stroke:1,rotation:0,height:18,fontSize:24,color:"#28ff00"},compId:25},{type:"Sprite",props:{y:42.000003335964834,x:123.50000026794896,texture:"comp/progresstag.jpg",rotation:90},compId:26},{type:"Sprite",props:{y:42.000003335964834,x:172.50000026794896,texture:"comp/progresstag.jpg",rotation:90},compId:27},{type:"Sprite",props:{y:42.000003335964834,x:220.50000026794896,texture:"comp/progresstag.jpg",rotation:90},compId:28},{type:"Sprite",props:{y:42.000003335964834,x:269.50000026794896,texture:"comp/progresstag.jpg",rotation:90},compId:29}]},{type:"Button",props:{visible:!1,var:"btnrewan",top:85,stateNum:1,skin:"comp/tuichu1.png",runtime:"script/gui/ScaleButton.ts",right:35,anchorY:.5,anchorX:.5},compId:31}],loadList:["comp/pifudi.png","comp/title_zi.png","comp/xuedian.png","comp/xue2.png","comp/xue1.png","comp/fh.png","comp/shipi.png","comp/mianfeishiyong.png","comp/progressbg.jpg","comp/progress_red.png","comp/progress_green.png","comp/progresstag.jpg","comp/tuichu1.png"],loadList3D:[]},e.FreeUseUI=i,q("ui.FreeUseUI",i);class n extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(n.uiView)}}n.uiView={type:"View",props:{width:461,height:119},compId:2,child:[{type:"Sprite",props:{y:0,x:199,visible:!1,texture:"comp/yingdaodian.png"},compId:3},{type:"Sprite",props:{y:45,x:233,width:143,texture:"comp/yingdaoshou.png",scaleY:.64,scaleX:.64,pivotY:27,pivotX:26,height:101},compId:4},{type:"Sprite",props:{y:19,x:0,texture:"comp/yingdaotiao.png"},compId:5}],animations:[{nodes:[{target:4,keyframes:{x:[{value:233,tweenMethod:"linearNone",tween:!0,target:4,key:"x",index:0},{value:233,tweenMethod:"linearNone",tween:!0,target:4,key:"x",index:10},{value:233,tweenMethod:"linearNone",tween:!0,target:4,key:"x",index:20},{value:344,tweenMethod:"linearNone",tween:!0,target:4,key:"x",index:30},{value:26,tweenMethod:"linearNone",tween:!0,target:4,key:"x",index:40},{value:233,tweenMethod:"linearNone",tween:!0,target:4,key:"x",index:50}],scaleY:[{value:1,tweenMethod:"linearNone",tween:!0,target:4,key:"scaleY",index:0},{value:.6,tweenMethod:"linearNone",tween:!0,target:4,key:"scaleY",index:10},{value:1,tweenMethod:"linearNone",tween:!0,target:4,key:"scaleY",index:20}],scaleX:[{value:1,tweenMethod:"linearNone",tween:!0,target:4,key:"scaleX",index:0},{value:.6,tweenMethod:"linearNone",tween:!0,target:4,key:"scaleX",index:10},{value:1,tweenMethod:"linearNone",tween:!0,target:4,key:"scaleX",index:20}]}},{target:3,keyframes:{visible:[{value:!1,tweenMethod:"linearNone",tween:!1,target:3,key:"visible",index:0},{value:!0,tweenMethod:"linearNone",tween:!1,target:3,key:"visible",index:10},{value:!1,tweenMethod:"linearNone",tween:!1,target:3,key:"visible",index:15}]}}],name:"ani1",id:1,frameRate:20,action:0}],loadList:["comp/yingdaodian.png","comp/yingdaoshou.png","comp/yingdaotiao.png"],loadList3D:[]},e.GuideUI=n,q("ui.GuideUI",n);class a extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(a.uiView)}}a.uiView={type:"View",props:{y:0,width:720,height:1280},compId:2,child:[{type:"Box",props:{x:30,width:660,var:"box_btns",mouseThrough:!0,bottom:106},compId:89,child:[{type:"Image",props:{y:431,x:-21,width:702,visible:!1,skin:"comp/neirongdi.png",sizeGrid:"31,53,43,55",height:188},compId:173},{type:"Button",props:{y:232.5,x:608,var:"btnPifu",stateNum:1,skin:"comp/pf.png",runtime:"script/gui/ScaleButton.ts",anchorY:.5,anchorX:.5},compId:87},{type:"Button",props:{y:232.5,x:54,var:"btnRank",stateNum:1,skin:"comp/ph.png",runtime:"script/gui/ScaleButton.ts",anchorY:.5,anchorX:.5},compId:86},{type:"Button",props:{y:323.5,x:334,var:"btnStart",stateNum:1,skin:"comp/ks.png",runtime:"script/gui/ScaleButton.ts",anchorY:.5,anchorX:.5},compId:88},{type:"Button",props:{y:47,x:54,visible:!1,var:"btnTuijian",stateNum:1,skin:"comp/ztuij.png",runtime:"script/gui/ScaleButton.ts",anchorY:.5,anchorX:.5},compId:84,child:[{type:"Sprite",props:{y:-2,x:77,texture:"comp/baoman2.png"},compId:178,child:[{type:"Label",props:{y:9,x:14,var:"lbl_num",text:"5",fontSize:24,color:"#ffffff"},compId:179}]}]},{type:"Image",props:{y:429,x:-21,width:702,visible:!1,spaceX:20,skin:"comp/tongyongdi.jpg",sizeGrid:"31,53,43,55",repeatY:1,repeatX:4,height:188,elasticEnabled:!1},compId:168},{type:"Sprite",props:{y:186,x:567,width:25,texture:"comp/tishi.png",rotation:-3,pivotY:19,pivotX:13,height:38},compId:180},{type:"Button",props:{y:156,x:330,width:360,visible:!1,var:"btnMore",stateNum:1,skin:"comp/anniulv.png",sizeGrid:"9,22,9,20",runtime:"script/gui/ScaleButton.ts",height:120,anchorY:.5,anchorX:.5},compId:184,child:[{type:"Label",props:{y:30,x:60,text:"更多游戏",fontSize:60,color:"#ffffff",bold:!0},compId:185}]},{type:"Box",props:{width:128,var:"ov_native",top:-64,left:528,height:128},compId:191,child:[{type:"Image",props:{top:0,right:0,name:"icon",left:0,bottom:0,alpha:.8},compId:192},{type:"Box",props:{width:87,var:"ov_native_close",top:-30,right:41,height:30},compId:193,child:[{type:"Box",props:{top:0,right:0,left:-3,bottom:0,bgColor:"#1b1b1b",alpha:.7},compId:194},{type:"Label",props:{text:"广告 X",fontSize:30,color:"#ffffff",centerY:0,centerX:0,bold:!0,alpha:.8},compId:195}]}]}]},{type:"Box",props:{width:131,var:"btn_power",right:18,height:139,bottom:400},compId:112,child:[{type:"Sprite",props:{y:66,x:66,width:132,texture:"comp/jiasu.png",runtime:"script/gui/ScaleButton.ts",pivotY:66,pivotX:66,height:132},compId:113},{type:"Sprite",props:{y:89,x:30,var:"bar1",texture:"comp/jiasu1.png",name:"bar1"},compId:114},{type:"Sprite",props:{y:94,x:52,var:"bar2",texture:"comp/jiasu2.png",name:"bar2"},compId:115},{type:"Sprite",props:{y:83,x:70,var:"bar3",texture:"comp/jiasu3.png",name:"bar3"},compId:116},{type:"Sprite",props:{y:69,x:86,var:"bar4",texture:"comp/jiasu4.png",name:"bar4"},compId:117},{type:"Sprite",props:{y:53,x:96,var:"bar5",texture:"comp/jiasu5.png",name:"bar5"},compId:118}]},{type:"Box",props:{var:"box_match",top:20,left:0},compId:130,child:[{type:"Sprite",props:{y:0,x:0,texture:"comp/ditudi.png"},compId:137},{type:"Sprite",props:{y:180,x:52,var:"robot2",texture:"comp/baoman.png",pivotY:12,pivotX:12},compId:132},{type:"Sprite",props:{y:180,x:88,width:23,var:"mainpalyer",texture:"comp/kongxian.png",pivotY:12,pivotX:12,height:23},compId:133},{type:"Sprite",props:{y:180,x:160,width:23,var:"robot4",texture:"comp/baoman.png",pivotY:12,pivotX:12,height:23},compId:134},{type:"Sprite",props:{y:180,x:16,var:"robot1",texture:"comp/baoman.png",pivotY:12,pivotX:12},compId:135},{type:"Sprite",props:{y:180,x:125,var:"robot3",texture:"comp/baoman.png",pivotY:12,pivotX:12},compId:136}]},{type:"Box",props:{x:224,width:312,var:"box_bar",top:153,height:159},compId:94,child:[{type:"Label",props:{y:30,x:38,width:236,var:"lblScroe",text:"0m",strokeColor:"#282f39",stroke:3,fontSize:60,color:"#03ccff",bold:!0,align:"center"},compId:95},{type:"Label",props:{y:122,width:326,var:"lblPass",text:"has exceeded 0 players",strokeColor:"#282f39",stroke:3,height:30,fontSize:30,color:"#b5b5b5",centerX:0,anchorY:.5,anchorX:.5,align:"center"},compId:96}]},{type:"Box",props:{y:0,x:0,width:720,var:"box_head",top:0},compId:161,child:[{type:"Sprite",props:{y:128,x:81,texture:"comp/logo.png",alpha:0},compId:74},{type:"Button",props:{y:71,x:70,var:"btnShuoming",stateNum:1,skin:"comp/wenhao.png",runtime:"script/gui/ScaleButton.ts",anchorY:.5,anchorX:.5},compId:150},{type:"Button",props:{y:71,x:170,var:"btnSetting",stateNum:1,skin:"comp/sz.png",runtime:"script/gui/ScaleButton.ts",anchorY:.5,anchorX:.5},compId:156},{type:"Button",props:{y:159,x:10,visible:!1,var:"btnrewan",stateNum:1,skin:"comp/tuichu1.png",runtime:"script/gui/ScaleButton.ts",right:17,anchorY:.5,anchorX:.5},compId:174}]},{type:"Image",props:{x:233.9,var:"imgGuide",top:60,skin:"comp/tu_tj.png"},compId:183,child:[{type:"Sprite",props:{y:-18,x:254,texture:"comp/shou.png"},compId:190}]},{type:"Box",props:{width:128,var:"ov_native_battle",top:303,left:76,height:128},compId:201,child:[{type:"Image",props:{top:0,right:0,name:"icon",left:0,bottom:0,alpha:.8},compId:202},{type:"Box",props:{width:87,var:"ov_native_battle_close",top:-30,right:41,height:30},compId:203,child:[{type:"Box",props:{top:0,right:0,left:-3,bottom:0,bgColor:"#1b1b1b",alpha:.7},compId:204},{type:"Label",props:{text:"广告 X",fontSize:30,color:"#ffffff",centerY:0,centerX:0,bold:!0,alpha:.8},compId:205}]}]}],animations:[{nodes:[{target:183,keyframes:{x:[{value:231,tweenMethod:"linearNone",tween:!0,target:183,key:"x",index:0},{value:260,tweenMethod:"linearNone",tween:!0,target:183,key:"x",index:10},{value:231,tweenMethod:"linearNone",tween:!0,target:183,key:"x",index:20}]}},{target:180,keyframes:{rotation:[{value:0,tweenMethod:"linearNone",tween:!0,target:180,key:"rotation",index:0},{value:15,tweenMethod:"linearNone",tween:!0,target:180,key:"rotation",index:5},{value:0,tweenMethod:"linearNone",tween:!0,target:180,key:"rotation",index:10},{value:-15,tweenMethod:"linearNone",tween:!0,target:180,key:"rotation",index:15},{value:0,tweenMethod:"linearNone",tween:!0,target:180,key:"rotation",index:20}]}}],name:"ani1",id:1,frameRate:24,action:0},{nodes:[{target:184,keyframes:{scaleY:[{value:1,tweenMethod:"linearNone",tween:!0,target:184,key:"scaleY",index:0},{value:.8,tweenMethod:"linearNone",tween:!0,target:184,key:"scaleY",index:15},{value:1,tweenMethod:"linearNone",tween:!0,target:184,key:"scaleY",index:30}],scaleX:[{value:1,tweenMethod:"linearNone",tween:!0,target:184,key:"scaleX",index:0},{value:.8,tweenMethod:"linearNone",tween:!0,target:184,key:"scaleX",index:15},{value:1,tweenMethod:"linearNone",tween:!0,target:184,key:"scaleX",index:30}]}}],name:"ani2",id:2,frameRate:24,action:0},{nodes:[],name:"ani3",id:3,frameRate:24,action:0}],loadList:["comp/neirongdi.png","comp/pf.png","comp/ph.png","comp/ks.png","comp/ztuij.png","comp/baoman2.png","comp/tongyongdi.jpg","comp/tishi.png","comp/anniulv.png","comp/jiasu.png","comp/jiasu1.png","comp/jiasu2.png","comp/jiasu3.png","comp/jiasu4.png","comp/jiasu5.png","comp/ditudi.png","comp/baoman.png","comp/kongxian.png","comp/logo.png","comp/wenhao.png","comp/sz.png","comp/tuichu1.png","comp/tu_tj.png","comp/shou.png"],loadList3D:[]},e.HudViewUI=a,q("ui.HudViewUI",a);class o extends Laya.Scene{constructor(){super()}createChildren(){super.createChildren(),this.loadScene("LoadingView")}}e.LoadingViewUI=o,q("ui.LoadingViewUI",o);class r extends Laya.Dialog{constructor(){super()}createChildren(){super.createChildren(),this.createView(r.uiView)}}r.uiView={type:"Dialog",props:{width:720,height:1280},compId:2,child:[{type:"Image",props:{y:191,x:40,width:644,skin:"comp/jinpinyouxidi.png",sizeGrid:"10,10,10,10",height:525},compId:3},{type:"Image",props:{y:202,x:0,width:720,skin:"comp/title_hong.png",sizeGrid:"0,73,0,62"},compId:4,child:[{type:"Label",props:{y:17,text:"Reward",fontSize:47,color:"#ffffff",centerX:0},compId:14},{type:"Sprite",props:{y:27,x:227,texture:"comp/xuedian.png"},compId:15},{type:"Sprite",props:{y:27,x:466,texture:"comp/xuedian.png"},compId:16}]},{type:"Sprite",props:{y:186,x:586,texture:"comp/xue2.png"},compId:5},{type:"Sprite",props:{y:180,x:18,texture:"comp/xue1.png"},compId:6},{type:"Button",props:{x:365,var:"btnRelive",stateNum:1,skin:"comp/fh.png",runtime:"script/gui/ScaleButton.ts",bottom:90,anchorY:.5,anchorX:.5},compId:7,child:[{type:"Sprite",props:{y:-20,x:-15,texture:"comp/xue1.png"},compId:19},{type:"Label",props:{y:27,x:20,width:312,text:"Open",strokeColor:"#9c9c9c",stroke:3,fontSize:40,color:"#ffffff",align:"center"},compId:24}]},{type:"Sprite",props:{y:657,x:276,texture:"comp/jinbi.png"},compId:11},{type:"FontClip",props:{y:661,x:324,var:"lbl_money",value:"+",skin:"comp/shuzi.png",sheet:"+0123456789"},compId:12},{type:"FontClip",props:{y:661,x:352,value:"0",skin:"comp/shuzi.png",sheet:"+0123456789"},compId:13},{type:"ProgressBar",props:{y:750,x:140,width:450,var:"progressBar",value:0,skin:"loading/progress_xx1.png",sizeGrid:"0,20,0,20",height:35},compId:20,child:[{type:"Label",props:{y:7,x:69,width:312,var:"lblValue",text:"100%",fontSize:20,color:"#ffffff",align:"center"},compId:21}]},{type:"Image",props:{y:462,x:365,skin:"comp/guang.png",rotation:0,anchorY:.5,anchorX:.5},compId:25},{type:"Image",props:{y:478,x:373,visible:!1,var:"img_open",skin:"comp/dabaoxiang2.png",anchorY:.5,anchorX:.5},compId:26},{type:"Image",props:{y:543,x:373,var:"img_close",skin:"comp/dabaoxiang.png",rotation:.006666666666666666,anchorY:.5,anchorX:.5},compId:27},{type:"Image",props:{y:823,x:14,width:702,skin:"comp/neirongdi.png",sizeGrid:"31,53,43,55",height:188},compId:28,child:[{type:"List",props:{y:12,x:19,width:663,var:"list2",spaceX:20,repeatY:1,repeatX:4,name:"noinvite",height:174,elasticEnabled:!1},compId:29,child:[{type:"GameBigItem",props:{runtime:"script/gui/rewan/box/GameBigItemRender.ts",renderType:"render"},compId:30},{type:"HScrollBar",props:{name:"scrollBar"},compId:31}]}]}],animations:[{nodes:[{target:25,keyframes:{rotation:[{value:0,tweenMethod:"linearNone",tween:!0,target:25,key:"rotation",index:0},{value:180,tweenMethod:"linearNone",tween:!0,target:25,key:"rotation",index:25},{value:360,tweenMethod:"linearNone",tween:!0,target:25,key:"rotation",index:50}]}}],name:"ani1",id:1,frameRate:24,action:0},{nodes:[{target:26,keyframes:{scaleY:[{value:.5,tweenMethod:"linearNone",tween:!0,target:26,key:"scaleY",index:0},{value:1,tweenMethod:"linearNone",tween:!0,target:26,key:"scaleY",index:10}]}}],name:"ani2",id:2,frameRate:24,action:0},{nodes:[{target:27,keyframes:{rotation:[{value:.006666666666666666,tweenMethod:"linearNone",tween:!0,target:27,key:"rotation",index:0},{value:45,tweenMethod:"linearNone",tween:!0,target:27,key:"rotation",index:3},{value:0,tweenMethod:"linearNone",tween:!0,target:27,key:"rotation",index:6},{value:-45,tweenMethod:"linearNone",tween:!0,target:27,key:"rotation",index:9},{value:.01,tweenMethod:"linearNone",tween:!0,target:27,key:"rotation",index:12},{value:0,tweenMethod:"linearNone",tween:!0,target:27,key:"rotation",index:18}]}}],name:"ani3",id:3,frameRate:24,action:0}],loadList:["comp/jinpinyouxidi.png","comp/title_hong.png","comp/xuedian.png","comp/xue2.png","comp/xue1.png","comp/fh.png","comp/jinbi.png","comp/shuzi.png","loading/progress_xx1.png","comp/guang.png","comp/dabaoxiang2.png","comp/dabaoxiang.png","comp/neirongdi.png"],loadList3D:[]},e.MissTakeUI=r,q("ui.MissTakeUI",r);class s extends Laya.Dialog{constructor(){super()}createChildren(){super.createChildren(),this.createView(s.uiView)}}s.uiView={type:"Dialog",props:{width:720,height:1280},compId:2,child:[{type:"Image",props:{y:0,x:0,width:720,var:"bg",skin:"comp/di.jpg",sizeGrid:"600,0,600,0",height:1280},compId:63},{type:"Image",props:{y:752,x:50,width:625,skin:"comp/tongyongdi.jpg",sizeGrid:"10,10,10,10",height:354,alpha:1},compId:23},{type:"Tab",props:{y:1105,x:53,var:"tabTitle",strokeColors:"#058ed5,#d53b05,#058ed5",stateNum:2,space:12,skin:"comp/tab.png",selectedIndex:0,labels:"Role,Map,Track",labelStroke:3,labelSize:37,labelColors:"#ffffff,#ffffff,#ffffff"},compId:22},{type:"Image",props:{y:763,x:3,width:720,skin:"comp/title_huang.png",sizeGrid:"0,73,0,62"},compId:24,child:[{type:"Label",props:{y:16.5,x:314.28515625,text:"Skin",fontSize:47,drawCallOptimize:!0,color:"#ffffff"},compId:30},{type:"Sprite",props:{y:27,x:237,texture:"comp/xuedian.png"},compId:31},{type:"Sprite",props:{y:27,x:446,texture:"comp/xuedian.png"},compId:32}]},{type:"Sprite",props:{y:748,x:589,texture:"comp/xue2.png"},compId:40},{type:"Sprite",props:{y:744,x:21,texture:"comp/xue1.png"},compId:41},{type:"Sprite",props:{y:536,x:622,var:"btnRight",texture:"comp/zuoyou.png"},compId:42},{type:"Sprite",props:{y:632,x:98,var:"btnLeft",texture:"comp/zuoyou.png",rotation:180,pivotY:.5,pivotX:.5},compId:43},{type:"Button",props:{x:0,var:"btnClose",top:24,stateNum:1,skin:"comp/guanbi.png",name:"close"},compId:49},{type:"List",props:{y:882,x:63,width:600,var:"list",spaceX:5,repeatY:1,repeatX:4,height:210},compId:33,child:[{type:"HScrollBar",props:{name:"scrollBar"},compId:52},{type:"PifuBox",props:{y:0,x:0,renderType:"render",runtime:"script/gui/box/PifuBox.ts"},compId:70}]},{type:"Box",props:{y:687,x:192,var:"box_bar",height:59},compId:71,child:[{type:"Image",props:{y:10.000003335964834,x:124.50000026794896,skin:"comp/progressbg.jpg",rotation:90,anchorY:.5,anchorX:.5},compId:53},{type:"ProgressBar",props:{y:3.000003335964834,x:3.5000002679489626,width:241,var:"progress_speed",value:1,skin:"comp/progress_red.png"},compId:21},{type:"Image",props:{y:40.000003335964834,x:124.50000026794896,skin:"comp/progressbg.jpg",rotation:90,anchorY:.5,anchorX:.5},compId:62},{type:"ProgressBar",props:{y:33.000003335964834,x:3.5000002679489626,width:241,var:"progress_hp",value:1,skin:"comp/progress_green.png",height:14},compId:55},{type:"Label",props:{y:3335964834150218e-21,x:262.50000026794896,text:"speed",strokeColor:"#282f39",stroke:3,fontSize:18,color:"#ffffff"},compId:13},{type:"Label",props:{y:31,x:263,width:61,text:"energy",strokeColor:"#282f39",stroke:3,rotation:0,height:18,fontSize:18,color:"#28ff00"},compId:56},{type:"Sprite",props:{y:32.000003335964834,x:53.50000026794896,texture:"comp/progresstag.jpg",rotation:90},compId:65},{type:"Sprite",props:{y:32.000003335964834,x:102.50000026794896,texture:"comp/progresstag.jpg",rotation:90},compId:66},{type:"Sprite",props:{y:32.000003335964834,x:150.50000026794896,texture:"comp/progresstag.jpg",rotation:90},compId:67},{type:"Sprite",props:{y:32.000003335964834,x:199.50000026794896,texture:"comp/progresstag.jpg",rotation:90},compId:68}]},{type:"Image",props:{top:49,skin:"comp/jinbidi.png",right:20},compId:75,child:[{type:"Sprite",props:{y:-1,x:7,texture:"comp/jinbi.png"},compId:73},{type:"Label",props:{y:3,x:44,width:105,var:"lbl_money",text:"-",strokeColor:"#6b5750",stroke:2,height:30,fontSize:30,color:"#fdf133",align:"center"},compId:74}]},{type:"Image",props:{width:512,var:"img",top:148,height:512,centerX:0},compId:76},{type:"Label",props:{y:93.5,x:176,width:356,visible:!1,var:"lblMap",height:47,fontSize:47,drawCallOptimize:!0,color:"#ffffff",align:"center"},compId:77},{type:"Button",props:{visible:!1,var:"btnrewan",top:85,stateNum:1,skin:"comp/tuichu1.png",runtime:"script/gui/ScaleButton.ts",right:35,anchorY:.5,anchorX:.5},compId:78},{type:"Box",props:{width:128,var:"ov_native",top:190,left:53,height:128,alpha:0},compId:79,child:[{type:"Image",props:{top:0,right:0,name:"icon",left:0,bottom:0,alpha:.8},compId:80},{type:"Box",props:{width:87,var:"ov_native_close",top:-30,right:41,height:30},compId:81,child:[{type:"Box",props:{top:0,right:0,left:-3,bottom:0,bgColor:"#1b1b1b",alpha:.7},compId:82},{type:"Label",props:{text:"广告 X",fontSize:30,color:"#ffffff",centerY:0,centerX:0,bold:!0,alpha:.8},compId:83}]}]}],loadList:["comp/di.jpg","comp/tongyongdi.jpg","comp/tab.png","comp/title_huang.png","comp/xuedian.png","comp/xue2.png","comp/xue1.png","comp/zuoyou.png","comp/guanbi.png","comp/progressbg.jpg","comp/progress_red.png","comp/progress_green.png","comp/progresstag.jpg","comp/jinbidi.png","comp/jinbi.png","comp/tuichu1.png"],loadList3D:[]},e.PifuViewUI=s,q("ui.PifuViewUI",s);class l extends Laya.Dialog{constructor(){super()}createChildren(){super.createChildren(),this.createView(l.uiView)}}l.uiView={type:"Dialog",props:{x:0,width:720,height:1280},compId:2,child:[{type:"Box",props:{x:29,width:691,visible:!1,var:"box1",height:230,bottom:90},compId:41,child:[{type:"Button",props:{y:175,x:339,var:"btnSpeed",stateNum:1,skin:"comp/fh.png",runtime:"script/gui/ScaleButton.ts",anchorY:.5,anchorX:.5},compId:35,child:[{type:"Sprite",props:{y:-20,x:-15,texture:"comp/xue1.png"},compId:37},{type:"Label",props:{y:34,x:20,width:312,text:"加速开始",strokeColor:"#9c9c9c",stroke:3,fontSize:40,color:"#ffffff",align:"center"},compId:38}]},{type:"ProgressBar",props:{y:-290,x:100,width:450,var:"progressBar",value:0,skin:"loading/progress_xx1.png",sizeGrid:"0,20,0,20",height:35},compId:36,child:[{type:"Label",props:{y:7,x:69,width:312,var:"lblValue",text:"100%",fontSize:20,color:"#ffffff",align:"center"},compId:39}]}]},{type:"Box",props:{y:288,x:0,var:"box2"},compId:40,child:[{type:"Image",props:{y:1,x:40,width:644,skin:"comp/jinpinyouxidi.png",sizeGrid:"10,10,10,10",height:702},compId:4},{type:"Image",props:{y:22,x:0,width:720,skin:"comp/title_lv.png",sizeGrid:"0,73,0,62"},compId:5,child:[{type:"Label",props:{y:17,x:151,width:417,text:"matching...1s",height:47,fontSize:47,color:"#ffffff",align:"center"},compId:23}]},{type:"Sprite",props:{y:6,x:586,texture:"comp/xue2.png"},compId:6},{type:"Sprite",props:{y:0,x:18,texture:"comp/xue1.png"},compId:7},{type:"List",props:{y:152,x:77,var:"list",spaceY:10,spaceX:30,repeatY:4,repeatX:4},compId:29,child:[{type:"PipeiBox",props:{y:0,x:0,runtime:"script/gui/box/PipeiBox.ts",renderType:"render"},compId:34}]}]}],loadList:["comp/fh.png","comp/xue1.png","loading/progress_xx1.png","comp/jinpinyouxidi.png","comp/title_lv.png","comp/xue2.png"],loadList3D:[]},e.PipeiViewUI=l,q("ui.PipeiViewUI",l);class d extends Laya.Dialog{constructor(){super()}createChildren(){super.createChildren(),this.createView(d.uiView)}}d.uiView={type:"Dialog",props:{y:0,width:720,height:1280},compId:2,child:[{type:"Image",props:{y:0,x:0,width:720,var:"bg",skin:"comp/di.jpg",sizeGrid:"600,0,600,0",height:1280},compId:167},{type:"Image",props:{y:134,x:38,width:643,skin:"comp/jinpinyouxidi.png",sizeGrid:"34,47,47,50",height:1062,alpha:.6},compId:10},{type:"Image",props:{y:150,x:0,width:720,skin:"comp/title_hong.png",sizeGrid:"0,73,0,62"},compId:12,child:[{type:"Label",props:{y:18,x:289,text:"排行榜",fontSize:47,color:"#ffffff"},compId:14},{type:"Sprite",props:{y:28,x:233,texture:"comp/xuedian.png"},compId:15},{type:"Sprite",props:{y:28,x:453,texture:"comp/xuedian.png"},compId:16},{type:"Sprite",props:{y:-15,x:585,texture:"comp/xue2.png"},compId:120},{type:"Sprite",props:{y:-20,x:16,texture:"comp/xue1.png"},compId:121}]},{type:"Button",props:{x:0,var:"btnClose",top:25,stateNum:1,skin:"comp/guanbi.png",name:"close"},compId:122},{type:"WXOpenDataViewer",props:{y:257,x:60,width:600,var:"openView",iconSign:"wx",height:915,runtime:"laya.ui.WXOpenDataViewer"},compId:123},{type:"Button",props:{visible:!1,var:"btnrewan",top:85,stateNum:1,skin:"comp/tuichu1.png",runtime:"script/gui/ScaleButton.ts",right:35,anchorY:.5,anchorX:.5},compId:168}],loadList:["comp/di.jpg","comp/jinpinyouxidi.png","comp/title_hong.png","comp/xuedian.png","comp/xue2.png","comp/xue1.png","comp/guanbi.png","comp/tuichu1.png"],loadList3D:[]},e.RankViewUI=d,q("ui.RankViewUI",d);class h extends Laya.Dialog{constructor(){super()}createChildren(){super.createChildren(),this.createView(h.uiView)}}h.uiView={type:"Dialog",props:{width:720,height:1280},compId:2,child:[{type:"Image",props:{y:131,x:40,width:644,skin:"comp/jinpinyouxidi.png",sizeGrid:"10,10,10,10",height:290},compId:4},{type:"Image",props:{y:142,x:0,width:720,skin:"comp/title_hong.png",sizeGrid:"0,73,0,62"},compId:5,child:[{type:"Label",props:{y:17,text:"Score",fontSize:47,color:"#ffffff",centerX:0},compId:23},{type:"Sprite",props:{y:27,x:227,texture:"comp/xuedian.png"},compId:24},{type:"Sprite",props:{y:27,x:466,texture:"comp/xuedian.png"},compId:25}]},{type:"Sprite",props:{y:126,x:586,texture:"comp/xue2.png"},compId:6},{type:"Sprite",props:{y:120,x:18,texture:"comp/xue1.png"},compId:7},{type:"Image",props:{y:428,x:40,width:644,visible:!1,skin:"comp/jinpinyouxidi.png",sizeGrid:"10,10,10,10",height:350},compId:26},{type:"Label",props:{y:241,x:130,width:464,var:"lblScore",text:"23445",strokeColor:"#0a5e8c",stroke:3,height:90,fontSize:90,color:"#ff6f20",align:"center"},compId:29},{type:"Label",props:{y:356,x:476,width:118,var:"lblPass",text:"5",strokeColor:"#0a5e8c",stroke:3,height:34,fontSize:34,color:"#ff6f20"},compId:31},{type:"Label",props:{y:354,x:191.1689453125,text:"disuse players：",fontSize:34,color:"#2580a0"},compId:33},{type:"List",props:{y:440,x:76,width:573,var:"list1",spaceY:5,spaceX:15,runtime:"moon/core/ui/extension/ListEx.ts",repeatY:3,repeatX:5,height:319,elasticEnabled:!1},compId:47,child:[{type:"Box",props:{y:0,x:5,width:100,name:"render",height:100},compId:58,child:[{type:"Image",props:{width:100,skin:"moon/1.png",name:"img_icon",height:100,centerY:0,centerX:0},compId:59}]}]},{type:"Label",props:{y:30,x:276.5,width:166,var:"lblTimes",text:"5",strokeColor:"#0a5e8c",stroke:3,height:90,fontSize:90,color:"#0debff",align:"center"},compId:55},{type:"Box",props:{x:3,var:"box_miss",bottom:300},compId:57,child:[{type:"Button",props:{y:74.5,x:335.5,var:"btnRelive",stateNum:1,skin:"comp/fh.png",runtime:"script/gui/ScaleButton.ts",anchorY:.5,anchorX:.5},compId:38,child:[{type:"Sprite",props:{y:18,x:39,texture:"comp/shipi.png"},compId:41},{type:"Sprite",props:{y:20,x:113,texture:"comp/yuandihuhuo.png"},compId:42},{type:"Sprite",props:{y:-20,x:-15,texture:"comp/xue1.png"},compId:43}]},{type:"Label",props:{y:132.5,x:0,width:671,var:"lbl_normal",valign:"middle",underline:!0,text:"simple  rescure",mouseEnabled:!0,height:55,fontSize:35,color:"#ffffff",align:"center"},compId:30},{type:"Button",props:{y:70.5,x:606,visible:!1,var:"btnShare",stateNum:1,skin:"comp/fenxian.png",runtime:"script/gui/ScaleButton.ts",anchorY:.5,anchorX:.5},compId:40}]},{type:"Box",props:{width:128,var:"ov_native2",top:158,left:48,height:128,alpha:0},compId:63,child:[{type:"Image",props:{top:0,right:0,name:"icon",left:0,bottom:0,alpha:.8},compId:64},{type:"Box",props:{width:87,var:"ov_native_close",top:-30,right:41,height:30},compId:65,child:[{type:"Box",props:{top:0,right:0,left:-3,bottom:0,bgColor:"#1b1b1b",alpha:.7},compId:66},{type:"Label",props:{text:"广告 X",fontSize:30,color:"#ffffff",centerY:0,centerX:0,bold:!0,alpha:.8},compId:67}]}]},{type:"Box",props:{width:569,var:"ov_native",top:440,height:317,centerX:2},compId:73,child:[{type:"Image",props:{top:0,right:0,name:"icon",left:0,bottom:0,alpha:.8},compId:74},{type:"Image",props:{y:-8,x:519.5,var:"btn_close",skin:"moon/ad/results2/btn_close.png",name:"btn_close"},compId:75},{type:"Box",props:{width:99,right:470,height:60,bottom:0},compId:76,child:[{type:"Box",props:{top:0,right:0,left:0,bottom:0,bgColor:"#1b1b1b",alpha:.7},compId:77},{type:"Label",props:{text:"广告",fontSize:40,color:"#ffffff",centerY:0,centerX:0,bold:!0,alpha:.8},compId:78}]}]}],loadList:["comp/jinpinyouxidi.png","comp/title_hong.png","comp/xuedian.png","comp/xue2.png","comp/xue1.png","moon/1.png","comp/fh.png","comp/shipi.png","comp/yuandihuhuo.png","comp/fenxian.png","moon/ad/results2/btn_close.png"],loadList3D:[]},e.ReLiveViewUI=h,q("ui.ReLiveViewUI",h);class c extends Laya.Dialog{constructor(){super()}createChildren(){super.createChildren(),this.createView(c.uiView)}}c.uiView={type:"Dialog",props:{width:720,height:1280},compId:2,child:[{type:"Image",props:{y:251,x:118,width:487,skin:"comp/jinpinyouxidi.png",sizeGrid:"10,10,10,10",height:525},compId:3},{type:"Image",props:{y:262,x:76,width:571,skin:"comp/title_hong.png",sizeGrid:"0,73,0,62",height:105},compId:4,child:[{type:"Label",props:{y:17,text:"Reward",fontSize:47,color:"#ffffff",centerX:0},compId:7},{type:"Sprite",props:{y:27,x:147,texture:"comp/xuedian.png"},compId:8},{type:"Sprite",props:{y:27,x:386,texture:"comp/xuedian.png"},compId:9}]},{type:"Sprite",props:{y:246,x:511,texture:"comp/xue2.png"},compId:5},{type:"Sprite",props:{y:240,x:91,texture:"comp/xue1.png"},compId:6},{type:"Button",props:{y:867,x:365,var:"btnRelive",stateNum:1,skin:"comp/fh.png",runtime:"script/gui/ScaleButton.ts",anchorY:.5,anchorX:.5},compId:10,child:[{type:"Sprite",props:{y:18,x:39,texture:"comp/shipi.png"},compId:29},{type:"Sprite",props:{y:20,x:127,texture:"comp/3beijianli.png"},compId:30},{type:"Sprite",props:{y:-20,x:-15,texture:"comp/xue1.png"},compId:38}]},{type:"Label",props:{y:928,x:29,width:671,var:"lbl_thanks",valign:"middle",underline:!0,text:"normal reward",mouseEnabled:!0,height:55,fontSize:35,color:"#ffffff",align:"center"},compId:11},{type:"Image",props:{y:532,x:365,skin:"comp/guang.png",rotation:50.4,anchorY:.5,anchorX:.5},compId:26},{type:"Image",props:{y:645,x:260,visible:!1,var:"img_open",skin:"comp/dabaoxiang2.png",anchorY:1},compId:28},{type:"Image",props:{y:543,x:373,var:"img_close",skin:"comp/dabaoxiang.png",rotation:.006666666666666666,anchorY:.5,anchorX:.5},compId:27},{type:"Sprite",props:{y:717,x:286,texture:"comp/jinbi.png"},compId:39},{type:"FontClip",props:{y:721,x:334,var:"lbl_money",value:"+",skin:"comp/shuzi.png",sheet:"+0123456789"},compId:44},{type:"FontClip",props:{y:721,x:362,value:"0",skin:"comp/shuzi.png",sheet:"+0123456789"},compId:45},{type:"Button",props:{visible:!1,var:"btnrewan",top:120,stateNum:1,skin:"comp/tuichu1.png",runtime:"script/gui/ScaleButton.ts",right:17,anchorY:.5,anchorX:.5},compId:46},{type:"Box",props:{width:128,var:"ov_native",left:107,height:128,alpha:0},compId:49,child:[{type:"Image",props:{top:0,right:0,name:"icon",left:0,bottom:0,alpha:.8},compId:50},{type:"Box",props:{width:87,var:"ov_native_close",top:-30,right:41,height:30},compId:51,child:[{type:"Box",props:{top:0,right:0,left:-3,bottom:0,bgColor:"#1b1b1b",alpha:.7},compId:52},{type:"Label",props:{text:"广告 X",fontSize:30,color:"#ffffff",centerY:0,centerX:0,bold:!0,alpha:.8},compId:53}]}]}],animations:[{nodes:[{target:26,keyframes:{rotation:[{value:0,tweenMethod:"linearNone",tween:!0,target:26,key:"rotation",index:0},{value:180,tweenMethod:"linearNone",tween:!0,target:26,key:"rotation",index:25},{value:360,tweenMethod:"linearNone",tween:!0,target:26,key:"rotation",index:50}]}}],name:"ani1",id:1,frameRate:24,action:0},{nodes:[{target:28,keyframes:{y:[{value:546,tweenMethod:"linearNone",tween:!0,target:28,key:"y",index:0},{value:546,tweenMethod:"linearNone",tween:!0,target:28,key:"y",index:10},{value:546,tweenMethod:"linearNone",tween:!0,target:28,key:"y",index:50}],x:[{value:487,tweenMethod:"linearNone",tween:!0,target:28,key:"x",index:0},{value:487,tweenMethod:"linearNone",tween:!0,target:28,key:"x",index:10},{value:487,tweenMethod:"linearNone",tween:!0,target:28,key:"x",index:50}],scaleY:[{value:.5,tweenMethod:"linearNone",tween:!0,target:28,key:"scaleY",index:0},{value:1,tweenMethod:"linearNone",tween:!0,target:28,key:"scaleY",index:10}],anchorY:[{value:.5,tweenMethod:"linearNone",tween:!0,target:28,key:"anchorY",index:0}],anchorX:[{value:1,tweenMethod:"linearNone",tween:!0,target:28,key:"anchorX",index:0}]}}],name:"ani2",id:2,frameRate:24,action:0},{nodes:[{target:27,keyframes:{rotation:[{value:0,tweenMethod:"linearNone",tween:!0,target:27,key:"rotation",index:0},{value:45,tweenMethod:"linearNone",tween:!0,target:27,key:"rotation",index:3},{value:0,tweenMethod:"linearNone",tween:!0,target:27,key:"rotation",index:6},{value:-45,tweenMethod:"linearNone",tween:!0,target:27,key:"rotation",index:9},{value:.01,tweenMethod:"linearNone",tween:!0,target:27,key:"rotation",index:12},{value:0,tweenMethod:"linearNone",tween:!0,target:27,key:"rotation",index:18}]}}],name:"ani3",id:3,frameRate:24,action:0}],loadList:["comp/jinpinyouxidi.png","comp/title_hong.png","comp/xuedian.png","comp/xue2.png","comp/xue1.png","comp/fh.png","comp/shipi.png","comp/3beijianli.png","comp/guang.png","comp/dabaoxiang2.png","comp/dabaoxiang.png","comp/jinbi.png","comp/shuzi.png","comp/tuichu1.png"],loadList3D:[]},e.RewardUI=c,q("ui.RewardUI",c);class p extends Laya.Dialog{constructor(){super()}createChildren(){super.createChildren(),this.createView(p.uiView)}}p.uiView={type:"Dialog",props:{width:720,visible:!0,height:1280},compId:2,child:[{type:"Image",props:{y:271,x:40,width:644,skin:"comp/jinpinyouxidi.png",sizeGrid:"10,10,10,10",height:543},compId:12},{type:"Image",props:{y:282,x:0,width:720,skin:"comp/title_zi.png",sizeGrid:"0,73,0,62"},compId:4,child:[{type:"Sprite",props:{y:27,x:237,texture:"comp/xuedian.png"},compId:9},{type:"Sprite",props:{y:27,x:446,texture:"comp/xuedian.png"},compId:10}]},{type:"Sprite",props:{y:266,x:586,texture:"comp/xue2.png"},compId:5},{type:"Sprite",props:{y:260,x:18,texture:"comp/xue1.png"},compId:6},{type:"Image",props:{y:385,x:62,width:600,skin:"comp/neirongdi.png",sizeGrid:"30,54,46,54",height:407},compId:15},{type:"Sprite",props:{y:438,x:164,texture:"comp/yx.png"},compId:18},{type:"Sprite",props:{y:523,x:164,texture:"comp/yy.png"},compId:19},{type:"Sprite",props:{y:612,x:164,visible:!1,texture:"comp/zd.png"},compId:20},{type:"Sprite",props:{y:436,x:457,var:"btnBg",texture:"comp/kg1.png"},compId:16,child:[{type:"Sprite",props:{y:6,x:64,var:"tag1",texture:"comp/kg2.png"},compId:17}]},{type:"Sprite",props:{y:523,x:457,var:"btnEffect",texture:"comp/kg1.png"},compId:24,child:[{type:"Sprite",props:{y:6,x:64,var:"tag2",texture:"comp/kg2.png"},compId:25}]},{type:"Sprite",props:{y:609,x:457,visible:!1,var:"btnShake",texture:"comp/kg1.png"},compId:26,child:[{type:"Sprite",props:{y:6,x:64,var:"tag3",texture:"comp/kg2.png"},compId:27}]},{type:"Label",props:{y:299,text:"Setting",fontSize:47,color:"#ffffff",centerX:0},compId:8},{type:"Label",props:{y:444,x:289,text:"music",fontSize:34,color:"#2580a0"},compId:21},{type:"Label",props:{y:533,x:289,text:"sound",fontSize:34,color:"#2580a0"},compId:22},{type:"Label",props:{y:621,x:289,visible:!1,text:"shake",fontSize:34,color:"#2580a0"},compId:23},{type:"Label",props:{y:823,x:11,width:702,valign:"middle",underline:!0,text:"back",name:"close",mouseEnabled:!0,height:55,fontSize:35,color:"#ffffff",align:"center"},compId:11},{type:"Label",props:{y:704.5,x:164,width:279,var:"lblOprate",text:"right speed up",height:34,fontSize:34,color:"#2580a0"},compId:29},{type:"Sprite",props:{y:696,x:457,var:"btnOprate",texture:"comp/kg1.png"},compId:30,child:[{type:"Sprite",props:{y:6,x:64,var:"tag4",texture:"comp/kg2.png"},compId:31}]},{type:"Button",props:{visible:!1,var:"btnrewan",top:85,stateNum:1,skin:"comp/tuichu1.png",runtime:"script/gui/ScaleButton.ts",right:35,anchorY:.5,anchorX:.5},compId:32}],loadList:["comp/jinpinyouxidi.png","comp/title_zi.png","comp/xuedian.png","comp/xue2.png","comp/xue1.png","comp/neirongdi.png","comp/yx.png","comp/yy.png","comp/zd.png","comp/kg1.png","comp/kg2.png","comp/tuichu1.png"],loadList3D:[]},e.SettingViewUI=p,q("ui.SettingViewUI",p);class m extends Laya.Dialog{constructor(){super()}createChildren(){super.createChildren(),this.createView(m.uiView)}}m.uiView={type:"Dialog",props:{width:720,height:1280},compId:2,child:[{type:"Image",props:{y:92,x:47,width:626,skin:"comp/jinpinyouxidi.png",sizeGrid:"10,10,10,10",height:1014},compId:16},{type:"Image",props:{y:207,x:70,width:580,skin:"comp/neirongdi.png",sizeGrid:"30,54,46,54",height:871},compId:17},{type:"Image",props:{y:104,x:-.5,width:720,skin:"comp/title_huang.png",sizeGrid:"0,73,0,62"},compId:4},{type:"Sprite",props:{y:92,x:576.5,texture:"comp/xue2.png"},compId:5},{type:"Sprite",props:{y:86,x:17,texture:"comp/xue1.png"},compId:6},{type:"Label",props:{y:234,x:92,wordWrap:!0,width:536,text:"1. Move left and right to avoid flags, snowballs, obstacles",height:41,fontSize:34,color:"#2580a0"},compId:10},{type:"Label",props:{y:375,x:92,wordWrap:!0,width:520,text:"2. Acceleration belts and jumping platforms can get faster speed and go directly over obstacles",height:34,fontSize:34,color:"#2580a0"},compId:11},{type:"Label",props:{y:675,x:92,wordWrap:!0,width:520,text:"4. The small rocket can make the player get faster speed immediately, and the reasonable use of the small rocket can continue to glide at high speed",padding:"0",height:34,fontSize:34,color:"#2580a0"},compId:12},{type:"Label",props:{y:550,x:92,wordWrap:!0,width:520,text:"3. Hit the snowflakes to get energy to accelerate",height:34,fontSize:34,color:"#2580a0"},compId:14},{type:"Label",props:{y:117,x:99.5,width:507,text:"Explanation",height:47,fontSize:47,color:"#ffffff",align:"center"},compId:8},{type:"Label",props:{y:1106,x:43,width:633,valign:"middle",underline:!0,text:"I know",name:"close",mouseEnabled:!0,height:55,fontSize:35,color:"#ffffff",align:"center"},compId:15},{type:"Label",props:{y:905,x:100,wordWrap:!0,width:520,text:"5. Gossip, you can get extra gold coins by surpassing other players, and the more gold coins you get at the end",height:34,fontSize:34,color:"#2580a0"},compId:18},{type:"Button",props:{visible:!1,var:"btnrewan",top:85,stateNum:1,skin:"comp/tuichu1.png",runtime:"script/gui/ScaleButton.ts",right:35,anchorY:.5,anchorX:.5},compId:19}],loadList:["comp/jinpinyouxidi.png","comp/neirongdi.png","comp/title_huang.png","comp/xue2.png","comp/xue1.png","comp/tuichu1.png"],loadList3D:[]},e.ShuomingUI=m,q("ui.ShuomingUI",m);class u extends Laya.Dialog{constructor(){super()}createChildren(){super.createChildren(),this.createView(u.uiView)}}u.uiView={type:"Dialog",props:{y:0,width:619,height:651},compId:2,child:[{type:"Image",props:{y:7,x:45,width:530,skin:"comp/jinpinyouxidi.png",sizeGrid:"34,47,47,50",height:584},compId:30},{type:"Image",props:{y:23,x:-1,width:620,skin:"comp/title_hong.png",sizeGrid:"0,73,0,62",height:105},compId:36,child:[{type:"Label",props:{y:25,x:258,text:"精品推荐",fontSize:26,color:"#ffffff"},compId:37},{type:"Sprite",props:{y:25,x:220,texture:"comp/xuedian.png"},compId:38},{type:"Sprite",props:{y:25,x:369,texture:"comp/xuedian.png"},compId:39}]},{type:"Sprite",props:{y:7,x:484,texture:"comp/xue2.png"},compId:40},{type:"Sprite",props:{y:3,x:16,texture:"comp/xue1.png"},compId:41},{type:"List",props:{y:133,x:77,var:"list",spaceY:20,spaceX:20,repeatY:3,repeatX:4,elasticEnabled:!1},compId:31,child:[{type:"VScrollBar",props:{name:"scrollBar"},compId:47},{type:"GameItem",props:{y:0,x:0,runtime:"script/gui/rewan/box/GameItemRender.ts",renderType:"render"},compId:51}]},{type:"Label",props:{y:596,x:8,width:602,valign:"middle",underline:!0,text:"返  回",name:"close",mouseEnabled:!0,height:55,fontSize:35,color:"#ffffff",align:"center"},compId:46}],loadList:["comp/jinpinyouxidi.png","comp/title_hong.png","comp/xuedian.png","comp/xue2.png","comp/xue1.png"],loadList3D:[]},e.TuijianViewUI=u,q("ui.TuijianViewUI",u);class g extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(g.uiView)}}g.uiView={type:"View",props:{width:80,height:80},compId:2,child:[{type:"Sprite",props:{y:0,x:0,texture:"comp/zaizaidi.png",alpha:.5},compId:5},{type:"Image",props:{y:40,x:40,skin:"comp/zaijiazhong.png",anchorY:.5,anchorX:.5},compId:4}],animations:[{nodes:[{target:4,keyframes:{rotation:[{value:0,tweenMethod:"linearNone",tween:!0,target:4,key:"rotation",index:0},{value:-180,tweenMethod:"linearNone",tween:!0,target:4,key:"rotation",index:25},{value:-360,tweenMethod:"linearNone",tween:!0,target:4,key:"rotation",index:50}]}}],name:"ani1",id:1,frameRate:24,action:0}],loadList:["comp/zaizaidi.png","comp/zaijiazhong.png"],loadList3D:[]},e.WaitingUI=g,q("ui.WaitingUI",g)}(O||(O={})),function(e){!function(e){class t extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(t.uiView)}}t.uiView={type:"View",props:{width:137,height:38},compId:2,child:[{type:"Sprite",props:{y:0,x:0,texture:"comp/jinbi.png"},compId:3},{type:"FontClip",props:{y:3,x:72,var:"labelcoin",value:"5",skin:"comp/shuzi.png",sheet:"+0123456789"},compId:5},{type:"FontClip",props:{y:3,x:44,value:"+",skin:"comp/shuzi.png",sheet:"+0123456789"},compId:7}],loadList:["comp/jinbi.png","comp/shuzi.png"],loadList3D:[]},e.CoinItemUI=t,q("ui.box.CoinItemUI",t);class i extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(i.uiView)}}i.uiView={type:"View",props:{width:120,runtime:"script/gui/box/HeadBox.ts",height:120},compId:2,child:[{type:"Sprite",props:{y:0,x:0,width:120,texture:"comp/touxiangdi.png",height:120},compId:5},{type:"Image",props:{y:10,x:10,width:100,var:"headImg",skin:"comp/logo_mini.png",sizeGrid:"0,0,0,0",height:100},compId:7}],loadList:["comp/touxiangdi.png","comp/logo_mini.png"],loadList3D:[]},e.HeadBoxUI=i,q("ui.box.HeadBoxUI",i);class n extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(n.uiView)}}n.uiView={type:"View",props:{width:149,runtime:"script/gui/box/PifuBox.ts",height:214},compId:2,child:[{type:"Image",props:{y:7,x:3,width:146,skin:"comp/neirongdi.png",sizeGrid:"29,50,36,48",height:150},compId:4},{type:"Sprite",props:{y:17,x:10,width:129,texture:"comp/tongyongdi.jpg",height:129},compId:14},{type:"Image",props:{y:17,x:10,width:129,var:"sptTex",height:129},compId:11},{type:"Image",props:{y:11,x:4,width:140,visible:!1,var:"boxSelect",skin:"comp/xuanzhong.png",sizeGrid:"50,50,50,50",name:"selectBox",height:140},compId:12,child:[{type:"Sprite",props:{y:41,x:42,texture:"comp/xuanzhe.png"},compId:7}]},{type:"Button",props:{y:188,x:74,width:145,var:"btnActive",stateNum:1,skin:"comp/anniulan.png",sizeGrid:"21,50,19,49",runtime:"script/gui/ScaleButton.ts",height:51,anchorY:.5,anchorX:.5},compId:16},{type:"Image",props:{y:170,x:16,width:36,var:"img_jinbi",skin:"comp/jinbi.png",height:36},compId:17},{type:"Sprite",props:{y:0,x:0,visible:!1,texture:"comp/biaoqian.png"},compId:8,child:[{type:"Label",props:{y:0,x:1,width:35,var:"labelNum",text:"1",height:30,fontSize:30,color:"#ffffff",align:"center"},compId:9}]},{type:"Label",props:{y:173,x:52,width:87,var:"labelCost",text:"-",strokeColor:"#6b5750",stroke:3,mouseEnabled:!1,height:30,fontSize:30,color:"#fdf133",align:"center"},compId:10}],loadList:["comp/neirongdi.png","comp/tongyongdi.jpg","comp/xuanzhong.png","comp/xuanzhe.png","comp/anniulan.png","comp/jinbi.png","comp/biaoqian.png"],loadList3D:[]},e.PifuBoxUI=n,q("ui.box.PifuBoxUI",n);class a extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(a.uiView)}}a.uiView={type:"View",props:{width:120,height:120},compId:2,child:[{type:"Sprite",props:{y:0,x:0,width:120,texture:"comp/touxiangdi.png",height:120},compId:4},{type:"Image",props:{y:10,x:10,width:100,var:"headImg",skin:"comp/zaizaidi.png",sizeGrid:"10,10,10,10",height:100},compId:9},{type:"Image",props:{y:63,x:60,var:"img_load",skin:"comp/zaijiazhong.png",anchorY:.5,anchorX:.5},compId:6}],animations:[{nodes:[{target:6,keyframes:{rotation:[{value:0,tweenMethod:"linearNone",tween:!0,target:6,key:"rotation",index:0},{value:-180,tweenMethod:"linearNone",tween:!0,target:6,key:"rotation",index:15},{value:-360,tweenMethod:"linearNone",tween:!0,target:6,key:"rotation",index:30}]}}],name:"ani1",id:1,frameRate:24,action:2}],loadList:["comp/touxiangdi.png","comp/zaizaidi.png","comp/zaijiazhong.png"],loadList3D:[]},e.PipeiBoxUI=a,q("ui.box.PipeiBoxUI",a)}(e.box||(e.box={}))}(O||(O={})),function(e){!function(e){!function(e){class t extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(t.uiView)}}t.uiView={type:"View",props:{width:100,height:128},compId:2,child:[{type:"Image",props:{y:0,x:0,width:100,var:"gameIcon",skin:"comp/logo_mini.png",height:100},compId:4,child:[{type:"Image",props:{y:5,x:5,skin:"rewan/frame_08.png",renderType:"mask"},compId:6}]},{type:"Label",props:{y:104,x:-22,width:144,var:"txt_name",text:"游戏名字六字",height:24,fontSize:24,color:"#ffffff",align:"center"},compId:5}],loadList:["comp/logo_mini.png","rewan/frame_08.png"],loadList3D:[]},e.FakeBoxUI=t,q("ui.rewan.box.FakeBoxUI",t);class i extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(i.uiView)}}i.uiView={type:"View",props:{width:140,height:168},compId:2,child:[{type:"Image",props:{y:0,x:0,width:140,var:"gameIcon",height:140},compId:8},{type:"Text",props:{y:146,x:4,width:131,var:"txt_name",height:22,fontSize:20,color:"#000000",align:"center",runtime:"laya.display.Text"},compId:9}],loadList:[],loadList3D:[]},e.GameBigItemUI=i,q("ui.rewan.box.GameBigItemUI",i);class n extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(n.uiView)}}n.uiView={type:"View",props:{y:-1,x:0,width:100,height:125},compId:2,child:[{type:"Image",props:{y:50,x:50,width:100,var:"gameIcon",height:100,anchorY:.5,anchorX:.5},compId:9},{type:"Text",props:{y:105,x:-10,width:120,var:"txt_name",height:20,fontSize:20,color:"#000000",align:"center",runtime:"laya.display.Text"},compId:11}],animations:[{nodes:[{target:9,keyframes:{rotation:[{value:0,tweenMethod:"linearNone",tween:!0,target:9,key:"rotation",index:0},{value:30,tweenMethod:"linearNone",tween:!0,target:9,key:"rotation",index:5},{value:0,tweenMethod:"linearNone",tween:!0,target:9,key:"rotation",index:10},{value:-30,tweenMethod:"linearNone",tween:!0,target:9,key:"rotation",index:15},{value:-.1,tweenMethod:"linearNone",tween:!0,target:9,key:"rotation",index:20},{value:0,tweenMethod:"linearNone",tween:!0,target:9,key:"rotation",index:40}]}}],name:"ani1",id:1,frameRate:24,action:0}],loadList:[],loadList3D:[]},e.GameItemUI=n,q("ui.rewan.box.GameItemUI",n);class a extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(a.uiView)}}a.uiView={type:"View",props:{width:183,height:253},compId:2,child:[{type:"Image",props:{y:20,x:0,width:171,skin:"rewan/bgitem.png",sizeGrid:"25,27,30,26",height:233},compId:12},{type:"Image",props:{y:24,x:4,width:162,var:"img_head",skin:"rewan/type8.png",sizeGrid:"0,50,0,50",height:40},compId:11},{type:"Image",props:{y:68.5,x:5,width:160,var:"gameIcon",height:160},compId:4},{type:"Sprite",props:{y:0,x:120,texture:"rewan/hot.png"},compId:9},{type:"Label",props:{y:33.5,x:7,var:"txt_name",text:"游戏名字六个字",fontSize:22,color:"#ffffff",align:"center"},compId:5},{type:"Label",props:{y:230.5,x:28,width:110,var:"txt_num",text:"111111人玩",height:18,fontSize:18,color:"#3e5c97",align:"center"},compId:6},{type:"Label",props:{y:8,x:127,width:50,var:"txt_hot",text:"热门",height:18,fontSize:18,color:"#ffffff",align:"center"},compId:10}],loadList:["rewan/bgitem.png","rewan/type8.png","rewan/hot.png"],loadList3D:[]},e.GameItemRewanUI=a,q("ui.rewan.box.GameItemRewanUI",a)}(e.box||(e.box={}))}(e.rewan||(e.rewan={}))}(O||(O={})),function(e){!function(e){class t extends Laya.Dialog{constructor(){super()}createChildren(){super.createChildren(),this.createView(t.uiView)}}t.uiView={type:"Dialog",props:{width:633,height:752},compId:2,child:[{type:"Image",props:{y:0,x:16,width:600,skin:"comp/duihuakuang2.png",sizeGrid:"58,22,16,26",height:415},compId:4},{type:"Sprite",props:{y:345,x:17,width:597,texture:"comp/progresstag.jpg",alpha:.6},compId:34},{type:"Label",props:{y:697,x:0,width:633,var:"txt_close",valign:"middle",underline:!0,text:"谢谢，下次吧",name:"close",mouseEnabled:!0,height:55,fontSize:35,color:"#ffa80d",align:"center"},compId:31},{type:"Label",props:{y:122,x:210,width:189,text:"您的好友：",height:30,fontSize:24,color:"#828282",align:"left"},compId:6},{type:"Label",props:{y:198,x:322,width:198,var:"txt_game",text:"物理的游戏",height:30,fontSize:30,color:"#6388aa",align:"center"},compId:10},{type:"Label",props:{y:349,x:19,width:594,var:"txt_accept",valign:"middle",text:"接受",name:"close",mouseEnabled:!0,height:59,fontSize:35,color:"#000000",bold:!0,align:"center"},compId:33},{type:"Label",props:{y:11,x:239,text:"好友邀请",fontSize:38,color:"#4a4a4a",bold:!0,align:"center"},compId:39},{type:"WXOpenDataViewer",props:{y:-168,x:16,width:600,var:"openView",iconSign:"wx",height:915,runtime:"laya.ui.WXOpenDataViewer"},compId:40},{type:"Label",props:{y:201,x:210,width:133,text:"邀请你加入",height:30,fontSize:24,color:"#828282",align:"left"},compId:41}],loadList:["comp/duihuakuang2.png","comp/progresstag.jpg"],loadList3D:[]},e.FriendInviteUI=t,q("ui.rewan.FriendInviteUI",t);class i extends Laya.Dialog{constructor(){super()}createChildren(){super.createChildren(),this.createView(i.uiView)}}i.uiView={type:"Dialog",props:{y:0,width:720,height:1280},compId:2,child:[{type:"Image",props:{y:0,x:0,skin:"comp/di.jpg"},compId:6},{type:"List",props:{x:40,width:648,var:"gameList",top:400,spaceY:5,spaceX:50,repeatY:3,repeatX:3,height:912,bottom:8},compId:8,child:[{type:"GameItemRewan",props:{y:0,x:0,runtime:"script/gui/rewan/box/GameItemRenderRewan.ts",renderType:"render"},compId:30},{type:"VScrollBar",props:{name:"scrollBar"},compId:29}]},{type:"Sprite",props:{y:29,x:199,texture:"rewan/2019hot.png"},compId:15},{type:"Image",props:{y:150,x:40,width:646,skin:"rewan/group2.png",sizeGrid:"59,25,19,151",height:191},compId:18},{type:"Image",props:{y:360,x:40,width:646,skin:"rewan/group1.png",sizeGrid:"0,18,0,158",height:36},compId:19},{type:"Label",props:{y:162,x:51,text:"好友乐玩",fontSize:24,color:"#3e5c97",align:"center"},compId:20},{type:"Label",props:{y:366,x:53,text:"爆款热游",fontSize:24,color:"#3e5c97",align:"center"},compId:21},{type:"Sprite",props:{y:160,x:155,texture:"rewan/star.png"},compId:22},{type:"Sprite",props:{y:362,x:153,texture:"rewan/hoticon.png"},compId:24},{type:"List",props:{y:200,x:67,var:"gameList2",spaceX:20,repeatY:1,repeatX:5,height:140},compId:28,child:[{type:"GameItem",props:{y:0,x:0,runtime:"script/gui/rewan/box/GameItemRender.ts",renderType:"render"},compId:35}]},{type:"Image",props:{skin:"comp/tongyongdi.jpg",sizeGrid:"0,0,0,0",right:0,left:0,bottom:0},compId:43},{type:"Button",props:{y:20,x:388,var:"btnContinue",stateNum:1,skin:"comp/fh.png",runtime:"script/gui/ScaleButton.ts",bottom:0,anchorY:.5,anchorX:.5},compId:40,child:[{type:"Sprite",props:{y:-20,x:-15,texture:"comp/xue1.png"},compId:41},{type:"Label",props:{y:34,x:20,width:312,text:"继续游戏",strokeColor:"#9c9c9c",stroke:3,fontSize:40,color:"#ffffff",align:"center"},compId:42}]},{type:"Button",props:{x:0,var:"btnReturn",top:15,stateNum:1,skin:"comp/guanbi.png"},compId:44}],loadList:["comp/di.jpg","rewan/2019hot.png","rewan/group2.png","rewan/group1.png","rewan/star.png","rewan/hoticon.png","comp/tongyongdi.jpg","comp/fh.png","comp/xue1.png","comp/guanbi.png"],loadList3D:[]},e.RewanUI=i,q("ui.rewan.RewanUI",i);class n extends Laya.Dialog{constructor(){super()}createChildren(){super.createChildren(),this.createView(n.uiView)}}n.uiView={type:"Dialog",props:{width:720,runtime:"script/gui/ScaleButton.ts",height:1280},compId:2,child:[{type:"Image",props:{y:0,x:0,width:720,skin:"rewan/frame_00.jpg",height:1280},compId:38},{type:"Image",props:{y:45,x:145,var:"btnReturn",top:30,skin:"rewan/img_00.png",left:20,anchorY:.5,anchorX:.5},compId:4},{type:"Image",props:{y:165,x:122,skin:"rewan/img_03.png"},compId:6},{type:"Image",props:{y:144,x:45,width:630,skin:"rewan/frame_10.png",height:75},compId:42},{type:"Image",props:{y:165,x:68,skin:"rewan/img_02.png"},compId:30},{type:"Sprite",props:{y:473,x:585,texture:"rewan/frame_07.png"},compId:36},{type:"Box",props:{y:669,x:40},compId:40,child:[{type:"Image",props:{x:5,skin:"rewan/img_04.png"},compId:7},{type:"List",props:{y:70,var:"list2",spaceY:50,spaceX:80,repeatY:3,repeatX:4},compId:34,child:[{type:"FakeBox",props:{runtime:"script/gui/rewan/box/FakeBoxItemRender.ts",renderType:"render"},compId:35},{type:"VScrollBar",props:{y:-60,x:10,name:"scrollBar"},compId:47}]}]},{type:"Box",props:{y:249,x:40},compId:41,child:[{type:"Image",props:{x:5,skin:"rewan/img_05.png"},compId:8},{type:"List",props:{y:41,var:"list1",spaceY:50,spaceX:80,repeatY:2,repeatX:4,name:"list1"},compId:33,child:[{type:"FakeBox",props:{runtime:"script/gui/rewan/box/FakeBoxItemRender.ts",renderType:"render"},compId:31}]}]}],loadList:["rewan/frame_00.jpg","rewan/img_00.png","rewan/img_03.png","rewan/frame_10.png","rewan/img_02.png","rewan/frame_07.png","rewan/img_04.png","rewan/img_05.png"],loadList3D:[]},e.Rewan2UI=n,q("ui.rewan.Rewan2UI",n)}(e.rewan||(e.rewan={}))}(O||(O={})),function(e){!function(e){class t extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(t.uiView)}}t.uiView={type:"View",props:{width:750,height:1334},compId:2,child:[{type:"Image",props:{var:"b",top:0,skin:"activity/common_bg5.png",sizeGrid:"2,2,2,2",right:0,left:0,bottom:0,alpha:1},compId:20},{type:"Box",props:{y:0,x:10,width:799,var:"boxDrouble",height:550,centerY:0,centerX:0},compId:3,child:[{type:"Image",props:{y:-47,x:66,width:666,skin:"activity/nn1.png",sizeGrid:"58,58,58,58",height:689,centerY:22,centerX:0},compId:4},{type:"Image",props:{y:-36,x:77,width:646,skin:"activity/bg_nn2.png",height:665},compId:26},{type:"Label",props:{y:-14,x:164,width:473,var:"txt_title",text:"每日金币",height:47,fontSize:42,font:"黑体",color:"#ffffff",bold:!0,align:"center"},compId:6},{type:"Button",props:{y:114,width:590,var:"btnGetCoin1",stateNum:1,skin:"activity/common_btn3.png",sizeGrid:"42,42,42,42",height:130,centerX:0},compId:7,child:[{type:"Label",props:{y:30,x:140,width:280,var:"it021",valign:"middle",text:"普通领取9.6k",strokeColor:"#326636",stroke:3,height:67,fontSize:40,font:"黑体",color:"#ffffff",bold:!0,align:"center"},compId:8},{type:"Image",props:{skin:"activity/icon_gold.png",scaleY:.7,scaleX:.7,centerY:-5,centerX:199},compId:9}]},{type:"Button",props:{y:426,x:105,width:590,var:"btnGetCoin3",stateNum:1,skin:"activity/common_btn1.png",sizeGrid:"42,42,42,42",height:130,centerX:0},compId:10,child:[{type:"Label",props:{y:25,x:140,width:280,var:"it022",valign:"middle",text:"看视频领取4倍",strokeColor:"#7a5620",stroke:3,height:67,fontSize:40,font:"黑体",color:"#ffffff",bold:!0,align:"center"},compId:12},{type:"Image",props:{y:-280,skin:"activity/icon_gold.png",scaleY:.7,scaleX:.7,centerY:-5,centerX:199},compId:13}]},{type:"Button",props:{y:271,width:590,var:"btnGetShare",stateNum:1,skin:"activity/common_btn3.png",sizeGrid:"42,42,42,42",height:130,centerX:0},compId:16,child:[{type:"Label",props:{y:31.5,x:130,width:280,var:"it023",valign:"middle",text:"分享领取4倍",strokeColor:"#326636",stroke:3,height:67,fontSize:40,font:"黑体",color:"#ffffff",bold:!0,align:"center"},compId:17},{type:"Image",props:{skin:"activity/icon_gold.png",scaleY:.7,scaleX:.7,centerY:-5,centerX:199},compId:18}]},{type:"Sprite",props:{y:-74,x:150,texture:"activity/nn5.png"},compId:29},{type:"Sprite",props:{y:-24,x:639,var:"btn_close",texture:"activity/btn_close.png"},compId:30},{type:"Sprite",props:{y:-74,x:574,texture:"activity/nn5.png"},compId:34}]}],loadList:["activity/common_bg5.png","activity/nn1.png","activity/bg_nn2.png","activity/common_btn3.png","activity/icon_gold.png","activity/common_btn1.png","activity/nn5.png","activity/btn_close.png"],loadList3D:[]},e.MoonBoxDoubleUI=t,q("ui.view.MoonBoxDoubleUI",t);class i extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(i.uiView)}}i.uiView={type:"View",props:{width:750,height:1334},compId:2,child:[{type:"Image",props:{var:"b",top:0,skin:"activity/common_bg5.png",sizeGrid:"2,2,2,2",right:0,left:0,bottom:0,alpha:1},compId:3},{type:"Image",props:{width:666,skin:"activity/nn1.png",sizeGrid:"58,58,58,58",height:1089,centerY:6,centerX:5},compId:4,child:[{type:"Image",props:{y:8,x:12,width:646,skin:"activity/bg_nn2.png",height:1066},compId:5,child:[{type:"Label",props:{y:21,x:4,width:638,text:"收藏有礼指南",height:52,fontSize:42,font:"黑体",color:"#ffffff",bold:!0,align:"center"},compId:6}]},{type:"Image",props:{y:128,width:597,skin:"activity/common_bg2.png",sizeGrid:"30,21,20,31",height:66,centerX:2},compId:7,child:[{type:"Label",props:{y:15,x:38,width:513,var:"txt_getInfo",height:38,fontSize:32,font:"黑体",color:"#ffffff",align:"center"},compId:8},{type:"Image",props:{y:0,x:516,width:76,skin:"activity/icon_diamond.png",scaleY:.8,scaleX:.8,height:80},compId:9}]},{type:"Sprite",props:{y:-25,x:84,texture:"activity/nn5.png"},compId:38},{type:"Sprite",props:{y:20,x:574,var:"btn_close",texture:"activity/btn_close.png"},compId:39},{type:"Sprite",props:{y:-25,x:509,texture:"activity/nn5.png"},compId:40},{type:"Image",props:{y:505,x:27,width:602,skin:"share/collect1.png",height:204,centerX:0},compId:30},{type:"Image",props:{y:856,x:27,width:602,skin:"share/collect3.png",height:170,centerX:0},compId:33},{type:"Image",props:{y:255,x:27,width:602,skin:"share/collect2.png",height:170,centerX:0},compId:27},{type:"Label",props:{y:201,x:35,width:331,text:"第一步: 点击右上角",height:48,fontSize:36,font:"黑体",color:"#925c3e",centerY:-313,centerX:-128,align:"left"},compId:25},{type:"Label",props:{y:201,x:369,width:180,text:"三角标识",height:48,fontSize:36,font:"黑体",color:"#ff6c34",centerY:-313,centerX:131,align:"left"},compId:26},{type:"Label",props:{y:437,x:35,width:225,text:"第二步: 点击",height:48,fontSize:36,font:"黑体",color:"#925c3e",centerY:-77,centerX:-181,align:"left"},compId:28},{type:"Label",props:{y:437,x:262,width:201,text:"添加到桌面",height:48,fontSize:36,font:"黑体",color:"#ff6c34",centerY:-77,centerX:34,align:"left"},compId:29},{type:"Label",props:{y:725,x:34,wordWrap:!0,width:578,text:"第三步：关闭游戏，在                     找到 “完美投篮”并进入，就可以获得钻石 奖励啦！",height:145,fontSize:36,font:"黑体",color:"#925c3e",centerY:259,centerX:-5,align:"left"},compId:31},{type:"Label",props:{y:724,x:399,width:211,text:"我的小程序",height:48,fontSize:36,font:"黑体",color:"#ff6c34",centerY:210,centerX:176,align:"left"},compId:32}]}],loadList:["activity/common_bg5.png","activity/nn1.png","activity/bg_nn2.png","activity/common_bg2.png","activity/icon_diamond.png","activity/nn5.png","activity/btn_close.png","share/collect1.png","share/collect3.png","share/collect2.png"],loadList3D:[]},e.MoonCollectAndUI=i,q("ui.view.MoonCollectAndUI",i);class n extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(n.uiView)}}n.uiView={type:"View",props:{width:750,height:1334},compId:2,child:[{type:"Image",props:{var:"b",top:0,skin:"activity/common_bg5.png",sizeGrid:"2,2,2,2",right:0,left:0,bottom:0,alpha:1},compId:3},{type:"Image",props:{width:666,skin:"activity/nn1.png",sizeGrid:"58,58,58,58",height:1089,centerY:5,centerX:4},compId:4,child:[{type:"Image",props:{y:12,x:11,width:646,skin:"activity/bg_nn2.png",height:1066},compId:5,child:[{type:"Label",props:{y:20,x:4,width:638,text:"收藏有礼指南",height:52,fontSize:42,font:"黑体",color:"#ffffff",bold:!0,align:"center"},compId:6}]},{type:"Image",props:{y:132,width:597,skin:"activity/common_bg2.png",sizeGrid:"30,21,20,31",height:66,centerX:2},compId:7,child:[{type:"Label",props:{y:15,x:38,width:513,var:"txt_getInfo",height:38,fontSize:32,font:"黑体",color:"#ffffff",align:"center"},compId:8},{type:"Image",props:{y:0,x:516,width:76,skin:"activity/icon_diamond.png",scaleY:.8,scaleX:.8,height:80},compId:9}]},{type:"Image",props:{y:258,x:32,width:602,skin:"share/collect2.png",height:170,centerX:0},compId:13},{type:"Image",props:{y:507,x:32,width:602,skin:"share/collect4.png",height:204,centerX:0},compId:16},{type:"Sprite",props:{y:-24,x:84,texture:"activity/nn5.png"},compId:38},{type:"Image",props:{y:858,x:32,width:602,skin:"share/collect5.png",height:170,centerX:0},compId:19},{type:"Sprite",props:{y:20,x:574,var:"btn_close",texture:"activity/btn_close.png"},compId:39},{type:"Sprite",props:{y:-23,x:509,texture:"activity/nn5.png"},compId:40},{type:"Label",props:{x:41,width:363,text:"第一步: 点击右上角",height:44,fontSize:36,font:"黑体",color:"#925c3e",centerY:-317,centerX:-111,align:"left"},compId:11},{type:"Label",props:{x:353,width:166,text:"三角标识",height:39,fontSize:36,font:"黑体",color:"#ff6c34",centerY:-317,centerX:103,align:"left"},compId:12},{type:"Label",props:{x:41,width:205,text:"第二步: 点击",height:48,fontSize:36,font:"黑体",color:"#925c3e",centerY:-75,centerX:-190,align:"left"},compId:14},{type:"Label",props:{x:246,width:190,text:"添加到桌面",height:48,fontSize:36,font:"黑体",color:"#ff6c34",centerY:-75,centerX:8,align:"left"},compId:15},{type:"Label",props:{x:41,wordWrap:!0,width:584,text:"第三步：关闭游戏，在                 找到 “完美投篮”并进入，就可以获得钻石 奖励啦！",height:145,fontSize:36,font:"黑体",color:"#925c3e",centerY:259,centerX:0,align:"left"},compId:17},{type:"Label",props:{x:405,width:211,text:"手机桌面",height:48,fontSize:36,font:"黑体",color:"#ff6c34",centerY:208,centerX:177,align:"left"},compId:18}]}],loadList:["activity/common_bg5.png","activity/nn1.png","activity/bg_nn2.png","activity/common_bg2.png","activity/icon_diamond.png","share/collect2.png","share/collect4.png","activity/nn5.png","share/collect5.png","activity/btn_close.png"],loadList3D:[]},e.MoonCollectiOSUI=n,q("ui.view.MoonCollectiOSUI",n);class a extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(a.uiView)}}a.uiView={type:"View",props:{width:750,height:1334},compId:2,child:[{type:"Image",props:{y:0,x:0,var:"b",top:0,skin:"activity/common_bg5.png",sizeGrid:"2,2,2,2",right:0,left:0,bottom:0},compId:3},{type:"Box",props:{width:744,var:"pDuiHuan",height:639,centerY:0,centerX:0},compId:4,child:[{type:"Image",props:{y:1,x:42,width:666,var:"winBg",skin:"activity/nn1.png",sizeGrid:"58,58,58,58",height:638},compId:5},{type:"Image",props:{y:13,x:52,width:646,skin:"activity/bg_nn2.png",height:491},compId:6},{type:"Image",props:{y:354,x:77,width:596,skin:"activity/common_bg2.png",sizeGrid:"25,26,28,27",height:93},compId:7},{type:"Image",props:{y:159,width:549,skin:"activity/777.png",sizeGrid:"0,62,0,69",scaleY:1.1,scaleX:1.1,height:131,centerX:0},compId:8},{type:"Sprite",props:{y:-29.5,x:124.5,texture:"activity/nn5.png"},compId:23},{type:"Sprite",props:{y:21,x:616,var:"btn_close",texture:"activity/btn_close.png"},compId:24},{type:"Sprite",props:{y:-24,x:551,texture:"activity/nn5.png"},compId:25},{type:"Button",props:{y:514,width:308,var:"btn_exchangeAll",stateNum:1,skin:"activity/common_btn1.png",sizeGrid:"42,42,42,42",right:60,height:108},compId:29,child:[{type:"Label",props:{y:21.5,width:280,var:"txt_exchangeAll",valign:"middle",text:"全部兑换",strokeColor:"#9e5410",stroke:3,height:67,fontSize:40,font:"黑体",color:"#ffffff",centerX:0,bold:!0,align:"center"},compId:30}]},{type:"Button",props:{y:514,width:308,var:"btnDuiHuan",stateNum:1,skin:"activity/common_btn3.png",sizeGrid:"42,42,42,42",left:60,height:108},compId:9,child:[{type:"Label",props:{y:21.5,width:280,var:"txt_exchange",valign:"middle",text:"兑换",strokeColor:"#9e5410",stroke:3,height:67,fontSize:40,font:"黑体",color:"#ffffff",centerX:0,bold:!0,align:"center"},compId:26}]},{type:"Image",props:{y:237,x:145,var:"btnJian",skin:"activity/888.png",sizeGrid:"18,18,18,18",pivotY:64,pivotX:50},compId:11,child:[{type:"Image",props:{y:55,x:39,width:40,skin:"activity/jj.png",height:11},compId:12}]},{type:"Image",props:{y:237,x:586,var:"btnJia",skin:"activity/888.png",sizeGrid:"18,18,18,18",pivotY:64,pivotX:50},compId:13,child:[{type:"Image",props:{y:34,x:37,skin:"activity/pp.png"},compId:14}]},{type:"Box",props:{y:354,x:77,width:597,var:"labelBox",height:94},compId:15,child:[{type:"Image",props:{y:6.5,x:200.5,width:77,var:"exchangeGold",skin:"activity/icon_diamond.png",height:73},compId:16},{type:"Image",props:{y:12,x:520,var:"icRes",skin:"activity/icon_gold.png",scaleY:.6,scaleX:.6},compId:17},{type:"Image",props:{y:28,x:277.5,skin:"activity/999.png"},compId:18},{type:"Label",props:{y:5,x:19,width:186,var:"itNumZuan",valign:"middle",text:"利用 1",height:86,fontSize:36,font:"黑体",color:"#ffffff",bold:!0,align:"center"},compId:19},{type:"Label",props:{y:4,x:324,width:200,var:"itNumResult",valign:"middle",text:"获得 3K",height:86,fontSize:36,font:"黑体",color:"#ffffff",bold:!0,align:"center"},compId:20}]},{type:"Label",props:{y:26,x:130.5,width:489,var:"exchangeTitle",valign:"middle",text:"兑换金币",height:63,fontSize:42,font:"黑体",color:"#ffffff",bold:!0,align:"center"},compId:21},{type:"Label",props:{y:190,x:259,width:232,var:"itNum",valign:"middle",text:"99",height:86,fontSize:60,color:"#ffffff",bold:!0,align:"center"},compId:22}]}],loadList:["activity/common_bg5.png","activity/nn1.png","activity/bg_nn2.png","activity/common_bg2.png","activity/777.png","activity/nn5.png","activity/btn_close.png","activity/common_btn1.png","activity/common_btn3.png","activity/888.png","activity/jj.png","activity/pp.png","activity/icon_diamond.png","activity/icon_gold.png","activity/999.png"],loadList3D:[]},e.MoonExchangeUI=a,q("ui.view.MoonExchangeUI",a);class o extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(o.uiView)}}o.uiView={type:"View",props:{width:750,height:1334},compId:2,child:[{type:"Image",props:{var:"b",top:0,skin:"activity/common_bg5.png",sizeGrid:"2,2,2,2",right:0,left:0,bottom:0,alpha:1},compId:3},{type:"Image",props:{width:666,skin:"activity/nn1.png",sizeGrid:"58,58,58,58",mouseThrough:!1,height:1160,centerY:-1,centerX:0},compId:4,child:[{type:"Image",props:{width:646,skin:"activity/bg_nn2.png",height:894,centerY:-123,centerX:2},compId:7,child:[{type:"List",props:{y:118,width:622,var:"list",spaceY:5,spaceX:30,repeatX:1,name:"render",height:738,centerX:-1},compId:9,child:[{type:"Box",props:{y:0,x:4,width:618,renderType:"render",height:143},compId:53,child:[{type:"Image",props:{width:613,skin:"activity/common_bg2.png",sizeGrid:"19,16,18,21",height:137},compId:40},{type:"Image",props:{width:100,var:"img_icon",sizeGrid:"7,7,8,5",scaleY:1,scaleX:1,name:"img_icon",height:100,centerY:-3,centerX:-234},compId:41},{type:"Image",props:{y:65,x:464,width:235,visible:!0,var:"btn_try",skin:"activity/common_btn1.png",sizeGrid:"42,42,42,42",pivotY:46.5,pivotX:107,name:"btn_try",height:96},compId:42,child:[{type:"Label",props:{y:26,width:157,valign:"middle",text:"试玩",strokeColor:"#c85d21",stroke:3,scaleY:1,scaleX:1,height:40,fontSize:32,font:"黑体",color:"#ffffff",centerX:0,bold:!0,align:"center"},compId:47},{type:"Image",props:{y:4,x:148,visible:!1,skin:"activity/icon_diamond.png",scaleY:.7,scaleX:.7},compId:48}]},{type:"Label",props:{y:43.5,x:165,width:209,var:"txt_name",valign:"middle",text:"游戏名字",scaleY:1,scaleX:1,name:"txt_name",height:50,fontSize:32,font:"黑体",color:"#ffffff",bold:!0,align:"left"},compId:43},{type:"Image",props:{y:86,x:480,width:235,var:"btn_got",skin:"activity/common_btn1.png",sizeGrid:"42,42,42,42",pivotY:46.5,pivotX:107,name:"btn_got",height:96},compId:44,child:[{type:"Label",props:{y:23.5,width:157,valign:"middle",text:"已领取",strokeColor:"#cf802e",scaleY:1,scaleX:1,height:45,fontSize:32,font:"黑体",color:"#a3621c",centerX:0,bold:!0,align:"center"},compId:49}]},{type:"Image",props:{y:80,x:480,width:235,visible:!1,var:"btn_tryed",skin:"activity/common_btn1.png",sizeGrid:"42,42,42,42",pivotY:46.5,pivotX:107,name:"btn_tryed",height:96},compId:45,child:[{type:"Label",props:{y:47,width:171,valign:"middle",text:"立即试玩",strokeColor:"#b97022",stroke:3,scaleY:1,scaleX:1,pivotY:21,pivotX:86,height:41,fontSize:32,font:"黑体",color:"#ffffff",centerX:0,bold:!0,align:"center"},compId:50}]},{type:"Image",props:{width:235,visible:!1,var:"btn_get",skin:"activity/common_btn3.png",sizeGrid:"42,42,42,42",right:107,pivotY:46.5,pivotX:107,name:"btn_get",height:96,centerY:-5},compId:46,child:[{type:"Label",props:{y:29,width:124,valign:"middle",text:"领取10",strokeColor:"#cf802e",scaleY:1,scaleX:1,height:35,fontSize:32,font:"黑体",color:"#ffffff",centerX:-34,bold:!0,align:"center"},compId:51},{type:"Image",props:{y:4.5,x:139,visible:!0,skin:"activity/icon_diamond.png",scaleY:.7,scaleX:.7},compId:52}]}]}]}]},{type:"Sprite",props:{y:-28,x:87.5,texture:"activity/nn5.png"},compId:24},{type:"Sprite",props:{y:22,x:576,var:"btn_close",texture:"activity/btn_close.png"},compId:25},{type:"Sprite",props:{y:-28,x:511,texture:"activity/nn5.png"},compId:26},{type:"Label",props:{y:32,x:100,width:467,text:"新游试玩",height:47,fontSize:42,font:"黑体",color:"#ffffff",bold:!0,align:"center"},compId:6},{type:"Label",props:{y:1105,width:329,text:"猜你喜欢",height:40,fontSize:36,font:"黑体",color:"#77f9ff",centerX:0,align:"center"},compId:11},{type:"Image",props:{y:912,width:150,var:"btn_guess0",skin:"activity/common_bg4.png",sizeGrid:"24,25,23,22",height:175,centerX:-238},compId:12,child:[{type:"Image",props:{x:340,width:100,var:"img_icon0",scaleY:1,scaleX:1,height:100,centerY:-21,centerX:0},compId:13},{type:"Label",props:{width:149,var:"txt_name0",text:"游戏名字",height:36,fontSize:28,font:"黑体",color:"#ffffff",centerY:62,centerX:0,bold:!1,align:"center"},compId:14}]},{type:"Image",props:{y:912,width:150,var:"btn_guess1",skin:"activity/common_bg4.png",sizeGrid:"24,25,23,22",height:175,centerX:-79},compId:15,child:[{type:"Image",props:{y:23,x:-160,width:100,var:"img_icon1",scaleY:1,scaleX:1,height:100,centerY:-21,centerX:0},compId:16},{type:"Label",props:{y:138,x:-184,width:149,var:"txt_name1",text:"游戏名字",height:36,fontSize:28,font:"黑体",color:"#ffffff",centerY:62,centerX:0,align:"center"},compId:17}]},{type:"Image",props:{y:912,width:150,var:"btn_guess2",skin:"activity/common_bg4.png",sizeGrid:"24,25,23,22",height:175,centerX:80},compId:18,child:[{type:"Image",props:{y:23,x:-160,width:100,var:"img_icon2",scaleY:1,scaleX:1,height:100,centerY:-21,centerX:0},compId:19},{type:"Label",props:{y:138,x:-184,width:149,var:"txt_name2",text:"游戏名字",height:36,fontSize:28,font:"黑体",color:"#ffffff",centerY:62,centerX:0,align:"center"},compId:20}]},{type:"Image",props:{y:912,width:150,var:"btn_guess3",skin:"activity/common_bg4.png",sizeGrid:"24,25,23,22",height:175,centerX:239},compId:21,child:[{type:"Image",props:{y:27,x:-160,width:100,var:"img_icon3",scaleY:1,scaleX:1,height:100,centerY:-21,centerX:0},compId:22},{type:"Label",props:{y:142,x:-184,width:149,var:"txt_name3",text:"游戏名字",height:36,fontSize:28,font:"黑体",color:"#ffffff",centerY:62,centerX:0,align:"center"},compId:23}]}]}],loadList:["activity/common_bg5.png","activity/nn1.png","activity/bg_nn2.png","activity/common_bg2.png","activity/common_btn1.png","activity/icon_diamond.png","activity/common_btn3.png","activity/nn5.png","activity/btn_close.png","activity/common_bg4.png"],loadList3D:[]},e.MoonGameUI=o,q("ui.view.MoonGameUI",o);class r extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(r.uiView)}}r.uiView={type:"View",props:{width:720,name:"bg",height:1280},compId:2,child:[{type:"Image",props:{y:346,x:100,width:530,skin:"comp/jinpinyouxidi.png",scaleY:1,scaleX:1,height:584},compId:3,child:[{type:"Image",props:{width:530,height:584,centerX:0,bottom:10},compId:22,child:[{type:"List",props:{width:477,var:"list",top:87,spaceY:10,spaceX:10,runtime:"moon/core/ui/extension/ListEx.ts",repeatX:4,centerX:0,bottom:30},compId:10,child:[{type:"Box",props:{y:0,x:0,width:110,scaleY:1,scaleX:1,name:"render",height:110},compId:11,child:[{type:"Image",props:{width:110,visible:!0,skin:"moon/1.png",scaleY:1,scaleX:1,name:"img_icon",left:5,height:110},compId:13},{type:"Label",props:{y:160,x:64,width:140,visible:!1,valign:"middle",text:"我是弹弹高手",strokeColor:"#ffffff",stroke:1,name:"name",fontSize:22,font:"Arial",color:"#000000",centerX:0,bold:!0,anchorY:.5,anchorX:.5,align:"center"},compId:14}]}]}]},{type:"Image",props:{y:-10,x:-45,width:620,skin:"comp/title_hong.png",sizeGrid:"0,73,0,62",height:105},compId:28,child:[{type:"Label",props:{y:25,x:258,text:"精品推荐",fontSize:26,color:"#ffffff"},compId:29},{type:"Sprite",props:{y:25,x:220,texture:"comp/xuedian.png"},compId:30},{type:"Sprite",props:{y:25,x:369,texture:"comp/xuedian.png"},compId:31}]},{type:"Image",props:{y:0,x:479,var:"btn_close",top:0,skin:"moon/ad/gamebox/close.png",scaleY:2,scaleX:2,right:-13},compId:16}]},{type:"Sprite",props:{y:320,x:539,texture:"comp/xue2.png"},compId:32},{type:"Sprite",props:{y:316,x:70,texture:"comp/xue1.png"},compId:33}],loadList:["comp/jinpinyouxidi.png","moon/1.png","comp/title_hong.png","comp/xuedian.png","moon/ad/gamebox/close.png","comp/xue2.png","comp/xue1.png"],loadList3D:[]},e.MoonGameBoxUI=r,q("ui.view.MoonGameBoxUI",r);class s extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(s.uiView)}}s.uiView={type:"View",props:{width:750,mouseThrough:!0,height:1334},compId:2,child:[{type:"Box",props:{y:415,width:523,var:"newgame",right:-366,height:660},compId:3,child:[{type:"Image",props:{width:523,var:"bg",skin:"activity/newgame_frame1.png",sizeGrid:"28,17,16,33",right:0,height:660,centerY:0},compId:4,child:[{type:"Image",props:{y:-31,x:14,width:136,var:"img_text",skin:"activity/newgame_text.png",height:40},compId:22}]},{type:"Image",props:{y:571,x:-42,width:47,var:"btn_open",skin:"activity/newgame_frame2.png",height:90},compId:5,child:[{type:"Image",props:{y:65,x:34,var:"img_arrow",skin:"activity/999.png",rotation:-180,centerY:0,centerX:0,anchorY:.5,anchorX:.5},compId:6}]},{type:"List",props:{width:501,var:"list",spaceY:10,spaceX:10,repeatY:4,repeatX:4,name:"render",height:621,centerY:0,centerX:0},compId:7,child:[{type:"Box",props:{renderType:"render"},compId:23,child:[{type:"Image",props:{width:117,skin:"activity/common_bg2.png",sizeGrid:"25,26,28,27",name:"btn_game",height:148,centerY:1,centerX:4},compId:24,child:[{type:"Image",props:{width:84,name:"img_icon",height:84,centerY:-19,centerX:0},compId:25},{type:"Label",props:{y:109,x:9.5,width:98,overflow:"hidden",name:"txt_name",height:27,fontSize:24,color:"#ffffff",align:"center"},compId:26}]}]}]},{type:"Box",props:{y:16,x:21,width:129,var:"box",height:628},compId:9,child:[{type:"Image",props:{y:0,x:3,width:117,var:"btn_game0",skin:"activity/common_bg2.png",sizeGrid:"25,26,28,27",height:148},compId:10,child:[{type:"Image",props:{width:84,var:"img_icon0",height:84,centerY:-19,centerX:0},compId:11},{type:"Label",props:{y:107,x:10,width:98,var:"txt_name0",overflow:"hidden",height:27,fontSize:24,color:"#ffffff",align:"center"},compId:12}]},{type:"Image",props:{y:160,x:3,width:117,var:"btn_game1",skin:"activity/common_bg2.png",sizeGrid:"25,26,28,27",height:148},compId:13,child:[{type:"Image",props:{width:84,var:"img_icon1",height:84,centerY:-19,centerX:0},compId:14},{type:"Label",props:{y:107,x:10,width:98,var:"txt_name1",overflow:"hidden",height:27,fontSize:24,color:"#ffffff",align:"center"},compId:15}]},{type:"Image",props:{y:320,x:3,width:117,var:"btn_game2",skin:"activity/common_bg2.png",sizeGrid:"25,26,28,27",height:148},compId:16,child:[{type:"Image",props:{width:84,var:"img_icon2",height:84,centerY:-19,centerX:0},compId:17},{type:"Label",props:{y:107,x:10,width:98,var:"txt_name2",overflow:"hidden",height:27,fontSize:24,color:"#ffffff",align:"center"},compId:18}]},{type:"Image",props:{y:480,x:3,width:117,var:"btn_game3",skin:"activity/common_bg2.png",sizeGrid:"25,26,28,27",height:148},compId:19,child:[{type:"Image",props:{width:84,var:"img_icon3",height:84,centerY:-21,centerX:0},compId:20},{type:"Label",props:{y:107,x:10,width:98,var:"txt_name3",overflow:"hidden",height:27,fontSize:24,color:"#ffffff",align:"center"},compId:21}]}]}]}],loadList:["activity/newgame_frame1.png","activity/newgame_text.png","activity/newgame_frame2.png","activity/999.png","activity/common_bg2.png"],loadList3D:[]},e.MoonGameSideBarUI=s,q("ui.view.MoonGameSideBarUI",s);class l extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(l.uiView)}}l.uiView={type:"View",props:{width:750,height:1334},compId:2,child:[{type:"Image",props:{y:0,x:0,var:"b",top:0,skin:"activity/common_bg5.png",sizeGrid:"2,2,2,2",right:0,left:0,bottom:0,alpha:1},compId:4},{type:"Box",props:{centerY:-145,centerX:0,anchorY:.5,anchorX:.5},compId:6,child:[{type:"Animation",props:{y:-1,x:0,var:"getAni",source:"animation/fx_glow.ani"},compId:3}]},{type:"Image",props:{width:179,var:"img_ball",skin:"gskin/Ball0.png",height:179,centerY:-147,centerX:0,anchorY:.5,anchorX:.5},compId:5,child:[{type:"Image",props:{y:0,x:0,width:179,visible:!1,var:"img_basket",skin:"gskin/Basket6_1.png",height:179},compId:10}]},{type:"Label",props:{y:851,x:375,width:389,text:"恭喜获得新的皮肤!",height:70,fontSize:50,color:"#ffffff",centerY:184,centerX:0,anchorY:.5,anchorX:.5,align:"center"},compId:7},{type:"Image",props:{var:"img_gx",skin:"activity-i/z9.png",centerY:-447,centerX:0},compId:8},{type:"Button",props:{width:310,var:"btn",stateNum:1,skin:"activity/common_btn1.png",sizeGrid:"42,42,42,42",height:95,centerY:300,centerX:0},compId:11,child:[{type:"Label",props:{y:38,width:156,valign:"middle",text:"立刻使用",strokeColor:"#c06c1e",stroke:3,pivotY:26,height:61,fontSize:38,font:"黑体",color:"#ffffff",centerX:0,bold:!0,align:"left"},compId:13}]}],animations:[{nodes:[{target:5,keyframes:{skewY:[{value:0,tweenMethod:"linearNone",tween:!0,target:5,key:"skewY",index:0},{value:0,tweenMethod:"linearNone",tween:!0,target:5,key:"skewY",index:13}],skewX:[{value:0,tweenMethod:"linearNone",tween:!0,target:5,key:"skewX",index:0},{value:0,tweenMethod:"linearNone",tween:!0,target:5,key:"skewX",index:13}],scaleY:[{value:0,tweenMethod:"linearNone",tween:!0,target:5,key:"scaleY",index:0},{value:1,tweenMethod:"linearNone",tween:!0,target:5,key:"scaleY",index:13},{value:.8,tweenMethod:"linearNone",tween:!0,target:5,key:"scaleY",index:17},{value:.8,tweenMethod:"linearNone",tween:!0,target:5,label:null,key:"scaleY",index:20}],scaleX:[{value:0,tweenMethod:"linearNone",tween:!0,target:5,key:"scaleX",index:0},{value:1,tweenMethod:"linearNone",tween:!0,target:5,key:"scaleX",index:13},{value:.8,tweenMethod:"linearNone",tween:!0,target:5,key:"scaleX",index:17},{value:.8,tweenMethod:"linearNone",tween:!0,target:5,label:null,key:"scaleX",index:20}],rotation:[{value:0,tweenMethod:"linearNone",tween:!0,target:5,key:"rotation",index:0},{value:0,tweenMethod:"linearNone",tween:!0,target:5,key:"rotation",index:17},{value:0,tweenMethod:"linearNone",tween:!0,target:5,key:"rotation",index:20},{value:-30,tweenMethod:"linearNone",tween:!0,target:5,key:"rotation",index:24},{value:30,tweenMethod:"linearNone",tween:!0,target:5,key:"rotation",index:29},{value:0,tweenMethod:"linearNone",tween:!0,target:5,key:"rotation",index:34}]}},{target:7,keyframes:{scaleY:[{value:0,tweenMethod:"linearNone",tween:!0,target:7,key:"scaleY",index:0},{value:1,tweenMethod:"linearNone",tween:!0,target:7,key:"scaleY",index:13},{value:.8,tweenMethod:"linearNone",tween:!0,target:7,key:"scaleY",index:17}],scaleX:[{value:0,tweenMethod:"linearNone",tween:!0,target:7,key:"scaleX",index:0},{value:1,tweenMethod:"linearNone",tween:!0,target:7,key:"scaleX",index:13},{value:.8,tweenMethod:"linearNone",tween:!0,target:7,key:"scaleX",index:17}]}}],name:"ani1",id:1,frameRate:30,action:0}],loadList:["activity/common_bg5.png","animation/fx_glow.ani","gskin/Ball0.png","gskin/Basket6_1.png","activity-i/z9.png","activity/common_btn1.png"],loadList3D:[]},e.MoonGetSkinUI=l,q("ui.view.MoonGetSkinUI",l);class d extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(d.uiView)}}d.uiView={type:"View",props:{width:750,height:1334},compId:2,child:[{type:"Image",props:{y:812,x:130.5,skin:"common/mugen_001.png"},compId:36},{type:"Image",props:{y:939,x:118,skin:"common/hand_001.png",scaleY:.15,scaleX:.15},compId:35}],animations:[{nodes:[{target:35,keyframes:{y:[{value:936,tweenMethod:"linearNone",tween:!0,target:35,key:"y",index:0},{value:999,tweenMethod:"linearNone",tween:!0,target:35,key:"y",index:3},{value:1042,tweenMethod:"linearNone",tween:!0,target:35,key:"y",index:6},{value:1004,tweenMethod:"linearNone",tween:!0,target:35,key:"y",index:9},{value:936,tweenMethod:"linearNone",tween:!0,target:35,key:"y",index:12},{value:852,tweenMethod:"linearNone",tween:!0,target:35,key:"y",index:15},{value:822,tweenMethod:"linearNone",tween:!0,target:35,key:"y",index:18},{value:853,tweenMethod:"linearNone",tween:!0,target:35,key:"y",index:21},{value:936,tweenMethod:"linearNone",tween:!0,target:35,key:"y",index:24},{value:980,tweenMethod:"linearNone",tween:!0,target:35,key:"y",index:27},{value:1041,tweenMethod:"linearNone",tween:!0,target:35,key:"y",index:30},{value:1001,tweenMethod:"linearNone",tween:!0,target:35,key:"y",index:33},{value:936,tweenMethod:"linearNone",tween:!0,target:35,key:"y",index:36},{value:847,tweenMethod:"linearNone",tween:!0,target:35,key:"y",index:39},{value:822,tweenMethod:"linearNone",tween:!0,target:35,key:"y",index:42},{value:864,tweenMethod:"linearNone",tween:!0,target:35,key:"y",index:45},{value:936,tweenMethod:"linearNone",tween:!0,target:35,key:"y",index:48}],x:[{value:121,tweenMethod:"linearNone",tween:!0,target:35,key:"x",index:0},{value:145,tweenMethod:"linearNone",tween:!0,target:35,key:"x",index:3},{value:227,tweenMethod:"linearNone",tween:!0,target:35,key:"x",index:6},{value:308,tweenMethod:"linearNone",tween:!0,target:35,key:"x",index:9},{value:350,tweenMethod:"linearNone",tween:!0,target:35,key:"x",index:12},{value:392,tweenMethod:"linearNone",tween:!0,target:35,key:"x",index:15},{value:469,tweenMethod:"linearNone",tween:!0,target:35,key:"x",index:18},{value:544,tweenMethod:"linearNone",tween:!0,target:35,key:"x",index:21},{value:581,tweenMethod:"linearNone",tween:!0,target:35,key:"x",index:24},{value:566.5,tweenMethod:"linearNone",tween:!0,target:35,key:"x",index:27},{value:473,tweenMethod:"linearNone",tween:!0,target:35,key:"x",index:30},{value:385,tweenMethod:"linearNone",tween:!0,target:35,key:"x",index:33},{value:350,tweenMethod:"linearNone",tween:!0,target:35,key:"x",index:36},{value:295,tweenMethod:"linearNone",tween:!0,target:35,key:"x",index:39},{value:228,tweenMethod:"linearNone",tween:!0,target:35,key:"x",index:42},{value:150,tweenMethod:"linearNone",tween:!0,target:35,key:"x",index:45},{value:120,tweenMethod:"linearNone",tween:!0,target:35,key:"x",index:48}]}}],name:"Ani_Gesture",id:1,frameRate:24,action:0}],loadList:["common/mugen_001.png","common/hand_001.png"],loadList3D:[]},e.MoonGuideGestureViewUI=d,q("ui.view.MoonGuideGestureViewUI",d);class h extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(h.uiView)}}h.uiView={type:"View",props:{width:750,top:0,right:0,mouseThrough:!0,left:0,height:1334,bottom:0},compId:2,child:[{type:"Button",props:{var:"btn_shake",stateNum:1,skin:"activity/vibrate_on.png",pivotY:47,pivotX:47,mouseThrough:!1,left:23,height:94,bottom:328},compId:5},{type:"Button",props:{width:94,var:"btn_sound",stateNum:1,skin:"activity/sound_on.png",pivotY:47,pivotX:47,left:23,height:94,bottom:438},compId:6},{type:"Button",props:{width:123,var:"btn_gift",top:450,stateNum:1,skin:"activity/giftbox2.png",left:23},compId:85,child:[{type:"Sprite",props:{y:0,x:88,var:"red_gift",texture:"activity/icon_red_point.png"},compId:97}]},{type:"Button",props:{width:94,var:"btn_rank",stateNum:1,skin:"activity/rank.png",pivotY:47,pivotX:47,left:23,height:94,bottom:219},compId:8},{type:"Box",props:{width:131,visible:!1,var:"gameGround",top:143,mouseThrough:!1,left:23,hitTestPrior:!0,height:127},compId:35,child:[{type:"Sprite",props:{y:0,x:0,var:"btnGameGround",texture:"activity/game_ground.png"},compId:36,child:[{type:"Sprite",props:{y:0,x:104,var:"groundTip",texture:"activity/icon_red_point.png"},compId:37}]}]},{type:"Box",props:{width:123,var:"addFriend",top:294,right:23,height:127},compId:47,child:[{type:"Sprite",props:{y:0,x:0,var:"friendBtn",texture:"activity/addFriend.png"},compId:48,child:[{type:"Sprite",props:{y:0,x:88,var:"friendTip",texture:"activity/icon_red_point.png"},compId:49}]}]},{type:"Box",props:{width:154,var:"coin",right:36,height:216,bottom:245},compId:50,child:[{type:"Image",props:{y:5,x:3.15771484375,width:147,skin:"activity/plate.png",height:209},compId:51},{type:"Label",props:{y:144,x:32.15771484375,width:89,var:"itCoinVal",text:"0",height:32,fontSize:32,color:"#fffb8a",bold:!0,align:"center"},compId:54},{type:"Image",props:{y:-2,x:-4,var:"pgsCoin",skin:"activity/coinLight.png"},compId:86,child:[{type:"Sprite",props:{y:81,x:80,width:61.6,visible:!1,name:"sp",height:16,alpha:1},compId:87}]},{type:"Sprite",props:{y:19,x:17,visible:!0,var:"btn_coin",texture:"activity/icon_gold.png"},compId:53}]},{type:"Box",props:{width:123,var:"btnGem",top:450,right:23,height:124},compId:58,child:[{type:"Sprite",props:{var:"imgSupply",texture:"activity/supply.png"},compId:59},{type:"Sprite",props:{y:0,x:88,var:"gemTip",texture:"activity/icon_red_point2.png"},compId:62,child:[{type:"Label",props:{y:12.25,x:13.3125,width:30,var:"supply_num",text:"10",strokeColor:"#8e3b30",stroke:3,fontSize:26,font:"黑体",color:"#ffffff",bold:!0},compId:63}]},{type:"Image",props:{x:-276,width:268,var:"supply_remind",skin:"activity/supply_fra.png",height:72,centerY:0},compId:69,child:[{type:"Label",props:{y:22,text:"大量补给箱来袭!",fontSize:28,font:"黑体",color:"#ffffff",centerX:0},compId:61}]}]},{type:"Box",props:{visible:!1,var:"box_games",top:294,left:23},compId:38,child:[{type:"Button",props:{var:"btn_games",stateNum:1,skin:"activity/btn_games.png"},compId:71,child:[{type:"Sprite",props:{y:0,x:88,var:"red_games",texture:"activity/icon_red_point.png"},compId:40}]}]},{type:"Box",props:{width:123,var:"box_service",top:143,right:23,height:124},compId:32,child:[{type:"Sprite",props:{var:"btn_service",texture:"activity/btn_kefu.png"},compId:33,child:[{type:"Sprite",props:{y:0,x:88,var:"red_service",texture:"activity/icon_red_point.png"},compId:34}]}]}],animations:[{nodes:[],name:"shakeBall",id:1,frameRate:30,action:0},{nodes:[],name:"beginFont",id:2,frameRate:24,action:0},{nodes:[{target:69,keyframes:{x:[{value:-276,tweenMethod:"linearNone",tween:!0,target:69,key:"x",index:0},{value:-293,tweenMethod:"linearNone",tween:!0,target:69,key:"x",index:5},{value:-276,tweenMethod:"linearNone",tween:!0,target:69,key:"x",index:10},{value:-293,tweenMethod:"linearNone",tween:!0,target:69,key:"x",index:15},{value:-276,tweenMethod:"linearNone",tween:!0,target:69,key:"x",index:20},{value:-276,tweenMethod:"linearNone",tween:!0,target:69,label:null,key:"x",index:35}]}}],name:"ani_shakeBox",id:3,frameRate:24,action:0}],loadList:["activity/vibrate_on.png","activity/sound_on.png","activity/giftbox2.png","activity/icon_red_point.png","activity/rank.png","activity/game_ground.png","activity/addFriend.png","activity/plate.png","activity/coinLight.png","activity/icon_gold.png","activity/supply.png","activity/icon_red_point2.png","activity/supply_fra.png","activity/btn_games.png","activity/btn_kefu.png"],loadList3D:[]},e.MoonIndexUI=h,q("ui.view.MoonIndexUI",h);class c extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(c.uiView)}}c.uiView={type:"View",props:{width:750,height:1334},compId:2,child:[{type:"Image",props:{var:"b",top:0,skin:"activity/common_bg5.png",sizeGrid:"2,2,2,2",right:0,left:0,bottom:0,alpha:1},compId:3},{type:"Image",props:{width:666,skin:"activity/nn1.png",sizeGrid:"58,58,58,58",height:1065,centerY:-12,centerX:0},compId:4,child:[{type:"Image",props:{width:646,skin:"activity/bg_nn2.png",height:875,centerY:-83,centerX:0},compId:7,child:[{type:"Text",props:{y:22,x:3,width:642,var:"txt_title",text:"邀请好友领钻石",height:48,fontSize:42,font:"黑体",color:"#ffffff",bold:!0,align:"center",runtime:"laya.display.Text"},compId:8}]},{type:"Sprite",props:{y:-28.5,x:86,texture:"activity/nn5.png"},compId:32},{type:"Sprite",props:{y:22,x:575,var:"btn_close",texture:"activity/btn_close.png"},compId:33},{type:"Sprite",props:{y:-28,x:510,texture:"activity/nn5.png"},compId:34},{type:"Label",props:{width:626,var:"txt_info",text:"新用户通过您的邀请来到游戏，即可获得钻石",height:35,fontSize:28,font:"黑体",color:"#ffffff",centerY:382,centerX:2,align:"center"},compId:10},{type:"Button",props:{width:509,var:"btn_share",stateNum:1,skin:"activity/common_btn1.png",sizeGrid:"42,42,42,42",height:104,centerY:461,centerX:2},compId:11,child:[{type:"Image",props:{skin:"activity/icon_diamond.png",scaleY:.7,scaleX:.7,centerY:-4,centerX:190},compId:12},{type:"Label",props:{y:28,x:90,width:347,var:"txt_shareBtn",text:"邀请好友领钻石",strokeColor:"#783d20",stroke:3,height:48,fontSize:42,font:"黑体",color:"#ffffff",bold:!0},compId:13}]},{type:"Label",props:{width:494,visible:!1,var:"lbl_id",text:"我的ID:",overflow:"hidden",height:45,fontSize:36,font:"黑体",color:"#5cacff",centerY:515,centerX:0,align:"center"},compId:17},{type:"Image",props:{y:118,width:641,var:"img_rank",height:755,centerX:0},compId:5,child:[{type:"List",props:{width:616,var:"list",spaceY:5,spaceX:30,repeatY:0,repeatX:1,name:"render",height:717,centerY:-7,centerX:1},compId:18,child:[{type:"Box",props:{y:-1,width:617,renderType:"render",height:116,centerX:0},compId:19,child:[{type:"Image",props:{y:-1,width:617,skin:"activity/common_bg2.png",sizeGrid:"19,16,18,21",name:"img_bg",height:116,centerX:0},compId:20,child:[{type:"Label",props:{y:38,x:3,width:75,valign:"middle",text:"999",scaleY:1,scaleX:1,name:"lbl_index",height:39,fontSize:36,color:"#ffffff",align:"center"},compId:25},{type:"Image",props:{x:84,width:68,skin:"activity/icon4.png",sizeGrid:"7,7,8,5",name:"img_head",height:68,centerY:0},compId:21},{type:"Label",props:{y:36,x:166,width:275,visible:!1,valign:"middle",text:"XXX",scaleY:1,scaleX:1,overflow:"hidden",name:"lbl_name",height:40,fontSize:36,color:"#ffffff",align:"left"},compId:26},{type:"Label",props:{y:41,x:163,width:209,visible:!1,var:"lbl_info",valign:"middle",text:"邀请+200",scaleY:1,scaleX:1,name:"lbl_info",height:39,fontSize:36,font:"黑体",color:"#ffffff",align:"left"},compId:30,child:[{type:"Image",props:{y:-6,x:163,skin:"activity/icon_diamond.png",scaleY:.5,scaleX:.5},compId:31}]}]},{type:"Image",props:{y:23,x:449,width:244,skin:"activity/common_btn1.png",sizeGrid:"50,50,48,50",scaleY:.6,scaleX:.6,name:"btn_get",height:113},compId:22,child:[{type:"Image",props:{y:16,x:159,width:102,skin:"activity/icon_diamond.png",scaleY:.7,scaleX:.7,height:102},compId:23},{type:"Label",props:{y:35,x:45,width:95,text:"领取",strokeColor:"#af6018",stroke:4,height:44,fontSize:36,font:"黑体",color:"#ffffff",align:"center"},compId:24}]},{type:"Image",props:{y:22,x:449,width:244,visible:!1,skin:"activity/common_btn1.png",scaleY:.6,scaleX:.6,name:"btn_not",height:113,gray:!0},compId:28,child:[{type:"Label",props:{y:32.5,x:52,width:140,text:"未邀请",height:40,fontSize:36,font:"黑体",color:"#ffffff",align:"center"},compId:29}]},{type:"Label",props:{x:472,width:75,visible:!1,valign:"middle",text:"已领取",scaleY:1,scaleX:1,name:"lbl_has",height:25,fontSize:36,color:"#024181",centerY:2,align:"center"},compId:27}]}]}]}]}],loadList:["activity/common_bg5.png","activity/nn1.png","activity/bg_nn2.png","activity/nn5.png","activity/btn_close.png","activity/common_btn1.png","activity/icon_diamond.png","activity/common_bg2.png","activity/icon4.png"],loadList3D:[]},e.MoonInviteUI=c,q("ui.view.MoonInviteUI",c);class p extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(p.uiView)}}p.uiView={type:"View",props:{width:750,height:1334},compId:1,child:[{type:"Box",props:{y:0,x:383,width:523,var:"levelbox",scaleY:.7,scaleX:.7,pivotX:262,height:284},compId:44,child:[{type:"Image",props:{y:172,x:259.4,width:185,visible:!0,skin:"activity/z3.png",scaleY:1,scaleX:1,pivotY:84,pivotX:92,height:185,alpha:1},compId:4},{type:"Image",props:{y:171,x:459.4,visible:!0,skin:"activity/z3.png",scaleY:.6,scaleX:.6,pivotY:84,pivotX:92,alpha:0},compId:16},{type:"Image",props:{y:174,x:259.4,scaleY:1,scaleX:1,pivotY:91,pivotX:99},compId:3,child:[{type:"Image",props:{y:98,x:98,var:"romateImg1",skin:"activity/z2.png",rotation:0,pivotY:97,pivotX:98.5},compId:37},{type:"Image",props:{y:99,x:98,width:163,var:"romateImg2",skin:"activity/z6.png",rotation:0,pivotY:82,pivotX:82,height:163},compId:33},{type:"Image",props:{y:-83,x:60,var:"b1",skin:"activity/boss.png"},compId:5},{type:"Label",props:{y:99,x:99,width:167,var:"it1",valign:"middle",text:"100",pivotY:60,pivotX:86,height:111,fontSize:80,color:"#93ffff",bold:!0,align:"center"},compId:38}]},{type:"Image",props:{y:157,x:343.4,visible:!0,skin:"activity/z5.png",scaleY:.8,scaleX:.8,pivotY:27,pivotX:15},compId:7},{type:"Image",props:{y:172,x:459.4,skin:"activity/z2.png",scaleY:.6,scaleX:.6,pivotY:91,pivotX:99},compId:9,child:[{type:"Image",props:{y:-83,x:60,var:"b2",skin:"activity/boss.png"},compId:8},{type:"Image",props:{y:16,x:17,skin:"activity/z6.png"},compId:36},{type:"Label",props:{y:104,x:100,width:190,var:"it2",valign:"middle",text:"100",pivotY:79,pivotX:97,height:137,fontSize:80,color:"#93ffff",bold:!0,align:"center"},compId:40}]},{type:"Image",props:{y:172,x:59.39999999999998,visible:!0,var:"l",skin:"activity/z2.png",scaleY:.6,scaleX:.6,pivotY:91,pivotX:99,alpha:1},compId:10,child:[{type:"Image",props:{y:-83,x:60,var:"b0",skin:"activity/boss.png"},compId:12},{type:"Image",props:{y:15,x:17,skin:"activity/z6.png"},compId:34},{type:"Label",props:{y:87,x:99,width:182,var:"it0",valign:"middle",text:"100",pivotY:61,pivotX:93,height:135,fontSize:80,color:"#93ffff",bold:!0,align:"center"},compId:39}]},{type:"Image",props:{y:152,x:512.4,skin:"activity/z2.png",scaleY:.4,scaleX:.4,pivotY:91,pivotX:99,alpha:0},compId:13,child:[{type:"Sprite",props:{y:91,x:99,var:"it3"},compId:17},{type:"Image",props:{y:-83,x:60,var:"b3",skin:"activity/boss.png"},compId:14},{type:"Text",props:{y:73,x:66,width:69,text:"text",height:42,fontSize:40,runtime:"laya.display.Text"},compId:41}]},{type:"Image",props:{y:172,x:419.4,visible:!0,skin:"activity/z5.png",scaleY:0,scaleX:0,pivotY:27,pivotX:15},compId:15},{type:"Box",props:{y:75,x:155.39999999999998,width:210,var:"area",mouseEnabled:!0,height:196},compId:20},{type:"Image",props:{y:157,x:105.39999999999998,visible:!0,var:"dotInLeft",skin:"activity/z4.png",scaleY:.8,scaleX:.8,pivotY:22,pivotX:12},compId:42}]}],animations:[{nodes:[{target:9,keyframes:{y:[{value:0,tweenMethod:"linearNone",tween:!0,target:9,key:"y",index:0},{value:0,tweenMethod:"linearNone",tween:!0,target:9,key:"y",index:30}],x:[{value:200,tweenMethod:"linearNone",tween:!0,target:9,key:"x",index:0},{value:0,tweenMethod:"linearNone",tween:!0,target:9,key:"x",index:30}],scaleY:[{value:.6,tweenMethod:"linearNone",tween:!0,target:9,key:"scaleY",index:0},{value:1,tweenMethod:"linearNone",tween:!0,target:9,key:"scaleY",index:30}],scaleX:[{value:.6,tweenMethod:"linearNone",tween:!0,target:9,key:"scaleX",index:0},{value:1,tweenMethod:"linearNone",tween:!0,target:9,key:"scaleX",index:30}]}},{target:3,keyframes:{y:[{value:0,tweenMethod:"linearNone",tween:!0,target:3,key:"y",index:0},{value:0,tweenMethod:"linearNone",tween:!0,target:3,key:"y",index:30}],x:[{value:0,tweenMethod:"linearNone",tween:!0,target:3,key:"x",index:0},{value:-200,tweenMethod:"linearNone",tween:!0,target:3,key:"x",index:30}],scaleY:[{value:1,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleY",index:0},{value:.6,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleY",index:30}],scaleX:[{value:1,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleX",index:0},{value:.6,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleX",index:30}]}},{target:10,keyframes:{y:[{value:0,tweenMethod:"linearNone",tween:!0,target:10,key:"y",index:0},{value:-20,tweenMethod:"linearNone",tween:!0,target:10,key:"y",index:30}],x:[{value:-200,tweenMethod:"linearNone",tween:!0,target:10,key:"x",index:0},{value:-253,tweenMethod:"linearNone",tween:!0,target:10,key:"x",index:30}],visible:[{value:!0,tweenMethod:"linearNone",tween:!1,target:10,key:"visible",index:0},{value:!1,tweenMethod:"linearNone",tween:!1,target:10,key:"visible",index:30}],scaleY:[{value:.6,tweenMethod:"linearNone",tween:!0,target:10,key:"scaleY",index:0},{value:.4,tweenMethod:"linearNone",tween:!0,target:10,key:"scaleY",index:30}],scaleX:[{value:.6,tweenMethod:"linearNone",tween:!0,target:10,key:"scaleX",index:0},{value:.4,tweenMethod:"linearNone",tween:!0,target:10,key:"scaleX",index:30}],alpha:[{value:1,tweenMethod:"linearNone",tween:!0,target:10,key:"alpha",index:0},{value:0,tweenMethod:"linearNone",tween:!0,target:10,key:"alpha",index:30}]}},{target:15,keyframes:{x:[{value:160,tweenMethod:"linearNone",tween:!0,target:15,key:"x",index:0},{value:160,tweenMethod:"linearNone",tween:!0,target:15,key:"x",index:20},{value:120,tweenMethod:"linearNone",tween:!0,target:15,key:"x",index:30}],visible:[{value:!0,tweenMethod:"linearNone",tween:!1,target:15,key:"visible",index:0},{value:!1,tweenMethod:"linearNone",tween:!1,target:15,key:"visible",index:30}],scaleY:[{value:0,tweenMethod:"linearNone",tween:!1,target:15,key:"scaleY",index:0},{value:0,tweenMethod:"linearNone",tween:!0,target:15,key:"scaleY",index:20},{value:1,tweenMethod:"linearNone",tween:!0,target:15,key:"scaleY",index:30}],scaleX:[{value:0,tweenMethod:"linearNone",tween:!1,target:15,key:"scaleX",index:0},{value:0,tweenMethod:"linearNone",tween:!0,target:15,key:"scaleX",index:20},{value:1,tweenMethod:"linearNone",tween:!0,target:15,key:"scaleX",index:30}]}},{target:4,keyframes:{x:[{value:0,tweenMethod:"linearNone",tween:!0,target:4,key:"x",index:0},{value:-200,tweenMethod:"linearNone",tween:!0,target:4,key:"x",index:30}],visible:[{value:!0,tweenMethod:"linearNone",tween:!1,target:4,key:"visible",index:0},{value:!1,tweenMethod:"linearNone",tween:!1,target:4,key:"visible",index:30}],scaleY:[{value:1,tweenMethod:"linearNone",tween:!0,target:4,key:"scaleY",index:0},{value:.6,tweenMethod:"linearNone",tween:!0,target:4,key:"scaleY",index:30}],scaleX:[{value:1,tweenMethod:"linearNone",tween:!0,target:4,key:"scaleX",index:0},{value:.6,tweenMethod:"linearNone",tween:!0,target:4,key:"scaleX",index:30}],alpha:[{value:1,tweenMethod:"linearNone",tween:!0,target:4,key:"alpha",index:0},{value:0,tweenMethod:"linearNone",tween:!0,target:4,key:"alpha",index:30}]}},{target:16,keyframes:{y:[{value:5,tweenMethod:"linearNone",tween:!0,target:16,key:"y",index:0}],x:[{value:138,tweenMethod:"linearNone",tween:!0,target:16,key:"x",index:0},{value:0,tweenMethod:"linearNone",tween:!0,target:16,key:"x",index:30}],visible:[{value:!0,tweenMethod:"linearNone",tween:!1,target:16,key:"visible",index:0}],scaleY:[{value:.6,tweenMethod:"linearNone",tween:!0,target:16,key:"scaleY",index:0},{value:1,tweenMethod:"linearNone",tween:!0,target:16,key:"scaleY",index:30}],scaleX:[{value:.6,tweenMethod:"linearNone",tween:!0,target:16,key:"scaleX",index:0},{value:1,tweenMethod:"linearNone",tween:!0,target:16,key:"scaleX",index:30}],alpha:[{value:0,tweenMethod:"linearNone",tween:!0,target:16,key:"alpha",index:0},{value:1,tweenMethod:"linearNone",tween:!0,target:16,key:"alpha",index:30}]}},{target:17,keyframes:{var:[{value:"t3",tweenMethod:"linearNone",tween:!1,target:17,key:"var",index:0},{value:"it3",tweenMethod:"linearNone",tween:!1,target:17,key:"var",index:30}]}},{target:7,keyframes:{y:[{value:-11,tweenMethod:"linearNone",tween:!0,target:7,key:"y",index:0},{value:-10,tweenMethod:"linearNone",tween:!0,target:7,key:"y",index:30}],x:[{value:82.5,tweenMethod:"linearNone",tween:!0,target:7,key:"x",index:0},{value:123.5,tweenMethod:"linearNone",tween:!0,target:7,key:"x",index:30}],visible:[{value:!0,tweenMethod:"linearNone",tween:!1,target:7,key:"visible",index:0},{value:!1,tweenMethod:"linearNone",tween:!1,target:7,key:"visible",index:1},{value:!0,tweenMethod:"linearNone",tween:!1,target:7,key:"visible",index:30}]}},{target:42,keyframes:{y:[{value:-21,tweenMethod:"linearNone",tween:!0,target:42,key:"y",index:0}],x:[{value:-160,tweenMethod:"linearNone",tween:!0,target:42,key:"x",index:0},{value:120,tweenMethod:"linearNone",tween:!0,target:42,key:"x",index:1},{value:-160,tweenMethod:"linearNone",tween:!0,target:42,key:"x",index:30}],visible:[{value:!0,tweenMethod:"linearNone",tween:!1,target:42,key:"visible",index:0},{value:!0,tweenMethod:"linearNone",tween:!1,target:42,key:"visible",index:30}]}}],name:"animLevel",id:1,frameRate:60,action:0},{nodes:[{target:10,keyframes:{scaleY:[{value:0,tweenMethod:"backOut",tween:!0,target:10,key:"scaleY",index:0},{value:.6,tweenMethod:"linearNone",tween:!0,target:10,key:"scaleY",index:20}],scaleX:[{value:0,tweenMethod:"backOut",tween:!0,target:10,key:"scaleX",index:0},{value:.6,tweenMethod:"linearNone",tween:!0,target:10,key:"scaleX",index:20}]}},{target:3,keyframes:{scaleY:[{value:0,tweenMethod:"linearNone",tween:!1,target:3,key:"scaleY",index:0},{value:0,tweenMethod:"backOut",tween:!0,target:3,key:"scaleY",index:10},{value:1,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleY",index:30}],scaleX:[{value:0,tweenMethod:"linearNone",tween:!1,target:3,key:"scaleX",index:0},{value:0,tweenMethod:"backOut",tween:!0,target:3,key:"scaleX",index:10},{value:1,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleX",index:30}]}},{target:9,keyframes:{scaleY:[{value:0,tweenMethod:"linearNone",tween:!1,target:9,key:"scaleY",index:0},{value:0,tweenMethod:"backOut",tween:!0,target:9,key:"scaleY",index:20},{value:.6,tweenMethod:"linearNone",tween:!0,target:9,key:"scaleY",index:40}],scaleX:[{value:0,tweenMethod:"linearNone",tween:!1,target:9,key:"scaleX",index:0},{value:0,tweenMethod:"backOut",tween:!0,target:9,key:"scaleX",index:20},{value:.6,tweenMethod:"linearNone",tween:!0,target:9,key:"scaleX",index:40}]}},{target:4,keyframes:{alpha:[{value:0,tweenMethod:"linearNone",tween:!0,target:4,key:"alpha",index:0},{value:0,tweenMethod:"linearNone",tween:!0,target:4,key:"alpha",index:10},{value:1,tweenMethod:"linearNone",tween:!0,target:4,key:"alpha",index:30}]}},{target:42,keyframes:{x:[{value:-160,tweenMethod:"linearNone",tween:!0,target:42,key:"x",index:0}]}}],name:"animLevelShow",id:2,frameRate:60,action:0},{nodes:[{target:10,keyframes:{scaleY:[{value:.6,tweenMethod:"backIn",tween:!0,target:10,key:"scaleY",index:0},{value:0,tweenMethod:"linearNone",tween:!0,target:10,key:"scaleY",index:15}],scaleX:[{value:.6,tweenMethod:"backIn",tween:!0,target:10,key:"scaleX",index:0},{value:0,tweenMethod:"linearNone",tween:!0,target:10,key:"scaleX",index:15}]}},{target:9,keyframes:{scaleY:[{value:.6,tweenMethod:"backIn",tween:!0,target:9,key:"scaleY",index:0},{value:0,tweenMethod:"linearNone",tween:!0,target:9,key:"scaleY",index:15}],scaleX:[{value:.6,tweenMethod:"backIn",tween:!0,target:9,key:"scaleX",index:0},{value:0,tweenMethod:"linearNone",tween:!0,target:9,key:"scaleX",index:15}]}},{target:3,keyframes:{scaleY:[{value:1,tweenMethod:"linearNone",tween:!1,target:3,key:"scaleY",index:0},{value:1,tweenMethod:"backIn",tween:!0,target:3,key:"scaleY",index:15},{value:0,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleY",index:35}],scaleX:[{value:1,tweenMethod:"linearNone",tween:!1,target:3,key:"scaleX",index:0},{value:1,tweenMethod:"backIn",tween:!0,target:3,key:"scaleX",index:15},{value:0,tweenMethod:"linearNone",tween:!0,target:3,key:"scaleX",index:35}]}},{target:4,keyframes:{scaleY:[{value:1,tweenMethod:"linearNone",tween:!1,target:4,key:"scaleY",index:0},{value:1,tweenMethod:"backIn",tween:!0,target:4,key:"scaleY",index:15},{value:0,tweenMethod:"linearNone",tween:!0,target:4,key:"scaleY",index:35}],scaleX:[{value:1,tweenMethod:"linearNone",tween:!1,target:4,key:"scaleX",index:0},{value:1,tweenMethod:"backIn",tween:!0,target:4,key:"scaleX",index:15},{value:0,tweenMethod:"linearNone",tween:!0,target:4,key:"scaleX",index:35}]}},{target:42,keyframes:{x:[{value:-160,tweenMethod:"linearNone",tween:!0,target:42,key:"x",index:0}],scaleY:[{value:.6,tweenMethod:"linearNone",tween:!0,target:42,key:"scaleY",index:0},{value:1,tweenMethod:"linearNone",tween:!0,target:42,key:"scaleY",index:5},{value:.9,tweenMethod:"linearNone",tween:!0,target:42,key:"scaleY",index:15},{value:0,tweenMethod:"linearNone",tween:!0,target:42,key:"scaleY",index:35}],scaleX:[{value:.6,tweenMethod:"linearNone",tween:!0,target:42,key:"scaleX",index:0},{value:1,tweenMethod:"linearNone",tween:!0,target:42,key:"scaleX",index:5},{value:.9,tweenMethod:"linearNone",tween:!0,target:42,key:"scaleX",index:15},{value:0,tweenMethod:"linearNone",tween:!0,target:42,key:"scaleX",index:35}]}},{target:7,keyframes:{x:[{value:120,tweenMethod:"linearNone",tween:!0,target:7,key:"x",index:0},{value:120,tweenMethod:"linearNone",tween:!0,target:7,key:"x",index:5}],scaleY:[{value:.6,tweenMethod:"linearNone",tween:!0,target:7,key:"scaleY",index:0},{value:1,tweenMethod:"linearNone",tween:!0,target:7,key:"scaleY",index:5},{value:.9,tweenMethod:"linearNone",tween:!0,target:7,key:"scaleY",index:15},{value:0,tweenMethod:"linearNone",tween:!0,target:7,key:"scaleY",index:35}],scaleX:[{value:.6,tweenMethod:"linearNone",tween:!0,target:7,key:"scaleX",index:0},{value:1,tweenMethod:"linearNone",tween:!0,target:7,key:"scaleX",index:5},{value:.9,tweenMethod:"linearNone",tween:!0,target:7,key:"scaleX",index:15},{value:0,tweenMethod:"linearNone",tween:!0,target:7,key:"scaleX",index:35}]}}],name:"animLevelHide",id:3,frameRate:60,action:0}],loadList:["activity/z3.png","activity/z2.png","activity/z6.png","activity/boss.png","activity/z5.png","activity/z4.png"],loadList3D:[]},e.MoonLevelUI=p,q("ui.view.MoonLevelUI",p);class m extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(m.uiView)}}m.uiView={type:"View",props:{width:750,height:1334},compId:2,child:[{type:"Image",props:{var:"b",top:0,skin:"activity/common_bg5.png",right:0,left:0,bottom:0},compId:10},{type:"Image",props:{top:0,skin:"wxlocal/bg0.png",right:0,left:0,bottom:0},compId:11},{type:"List",props:{width:715,var:"listguan",top:230,spaceY:30,spaceX:30,right:16,repeatY:15,repeatX:3,name:"render",left:19,height:1104,bottom:0},compId:13,child:[{type:"Box",props:{y:0,x:0,renderType:"render"},compId:14,child:[{type:"Sprite",props:{y:0,x:0,texture:"gui/bg_002.png"},compId:21},{type:"Label",props:{y:11,x:10,width:197,valign:"middle",text:"99",name:"lab",height:194,fontSize:100,color:"#ffffff",bold:!0,align:"center"},compId:17}]}]},{type:"Sprite",props:{y:184,x:0,width:750,texture:"activity/bg_006.png",height:30},compId:18},{type:"Button",props:{y:59,x:28,stateNum:1,skin:"activity/btn_close.png"},compId:20},{type:"Sprite",props:{y:45,x:600,var:"btn_status",texture:"activity/vibrate_on.png"},compId:22},{type:"Button",props:{y:52,x:207,width:130,var:"btn_cn",stateNum:1,skin:"gui/btn_002.png",height:80},compId:23,child:[{type:"Label",props:{y:19,x:17.5,width:95,valign:"middle",text:"中文",height:42,fontSize:35,color:"#ffffff",align:"center"},compId:24}]},{type:"Button",props:{y:52,x:399,width:130,var:"btn_en",stateNum:1,skin:"gui/btn_003.png",height:80},compId:25,child:[{type:"Label",props:{y:19,x:17.5,width:95,valign:"middle",text:"英文",height:42,fontSize:35,color:"#ffffff",align:"center"},compId:26}]}],loadList:["activity/common_bg5.png","wxlocal/bg0.png","gui/bg_002.png","activity/bg_006.png","activity/btn_close.png","activity/vibrate_on.png","gui/btn_002.png","gui/btn_003.png"],loadList3D:[]},e.MoonLevelShowUI=m,q("ui.view.MoonLevelShowUI",m);class u extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(u.uiView)}}u.uiView={type:"View",props:{width:750,height:1334},compId:1,child:[{type:"Image",props:{var:"b",top:0,skin:"activity/common_bg5.png",sizeGrid:"2,2,2,2",right:0,left:0,bottom:0,alpha:1},compId:4},{type:"Image",props:{width:666,var:"bg",skin:"activity/nn1.png",sizeGrid:"58,58,58,58",height:777,centerY:37,centerX:0},compId:5,child:[{type:"Image",props:{y:13,x:10,width:646,skin:"activity/bg_nn2.png",height:749},compId:127},{type:"Label",props:{y:38,x:34,width:583,var:"txt_title",text:"免费宝石",height:42,fontSize:42,font:"黑体",color:"#ffffff",bold:!0,align:"center"},compId:52},{type:"Sprite",props:{y:-24,x:83.5,texture:"activity/nn5.png"},compId:128},{type:"Sprite",props:{y:26,x:572,var:"btn_close",texture:"activity/btn_close.png"},compId:129},{type:"Sprite",props:{y:-24,x:507,texture:"activity/nn5.png"},compId:130},{type:"Image",props:{y:139,x:43,var:"img0",skin:"activity/01.png"},compId:6,child:[{type:"Image",props:{y:0,x:0,visible:!1,var:"choosebg1",skin:"activity/05.png"},compId:56},{type:"Image",props:{y:69,x:88.5,var:"pz1",skin:"activity/icon_diamond.png",pivotY:59,pivotX:59},compId:29},{type:"Label",props:{y:142,x:88.5,width:158,var:"dt1",valign:"middle",text:"99",pivotY:20,pivotX:79,name:"dt1",height:40,fontSize:40,font:"SimHei",color:"#ffffff",bold:!0,align:"center"},compId:131}]},{type:"Image",props:{y:139,x:247,var:"img1",skin:"activity/01.png"},compId:7,child:[{type:"Image",props:{y:0,x:0,visible:!1,var:"choosebg2",skin:"activity/05.png"},compId:57},{type:"Image",props:{y:68,x:88.5,var:"pz2",skin:"activity/icon_diamond.png",pivotY:59,pivotX:59},compId:32},{type:"Label",props:{y:142,x:90,width:157,var:"dt2",valign:"middle",text:"99",pivotY:20,pivotX:79,name:"dt2",height:40,fontSize:40,font:"SimHei",color:"#ffffff",bold:!0,align:"center"},compId:19}]},{type:"Image",props:{y:139,x:450,skin:"activity/01.png"},compId:8,child:[{type:"Image",props:{y:0,x:0,visible:!1,var:"choosebg3",skin:"activity/05.png"},compId:58},{type:"Image",props:{y:68,x:88.5,var:"pz3",skin:"activity/shop2.png",pivotY:59,pivotX:59},compId:35},{type:"Label",props:{y:141,x:89,width:158,var:"dt3",valign:"middle",text:"99",pivotY:20,pivotX:79,name:"dt3",height:40,fontSize:40,font:"SimHei",color:"#ffffff",bold:!0,align:"center"},compId:20}]},{type:"Image",props:{y:344,x:450,skin:"activity/01.png"},compId:9,child:[{type:"Image",props:{y:0,x:0,visible:!1,var:"choosebg4",skin:"activity/05.png"},compId:59},{type:"Image",props:{y:69,x:88.5,var:"pz4",skin:"activity/shop2.png",pivotY:59,pivotX:59},compId:38},{type:"Label",props:{y:141,x:89,width:157,var:"dt4",valign:"middle",text:"99",pivotY:20,pivotX:79,name:"dt4",height:40,fontSize:40,font:"SimHei",color:"#ffffff",bold:!0,align:"center"},compId:21}]},{type:"Image",props:{y:551,x:450,skin:"activity/01.png"},compId:10,child:[{type:"Image",props:{y:0,x:0,visible:!1,var:"choosebg5",skin:"activity/05.png"},compId:60},{type:"Image",props:{y:68,x:88.5,var:"pz5",skin:"activity/icon_diamond.png",pivotY:59,pivotX:59},compId:41},{type:"Label",props:{y:142,x:90,width:157,var:"dt5",valign:"middle",text:"99",pivotY:20,pivotX:79,name:"dt5",height:40,fontSize:40,font:"SimHei",color:"#ffffff",bold:!0,align:"center"},compId:22}]},{type:"Image",props:{y:551,x:247,skin:"activity/01.png"},compId:11,child:[{type:"Image",props:{y:0,x:0,visible:!1,var:"choosebg6",skin:"activity/05.png"},compId:61},{type:"Image",props:{y:69,x:88.5,var:"pz6",skin:"activity/icon_diamond.png",pivotY:59,pivotX:59},compId:44},{type:"Label",props:{y:142,x:88,width:157,var:"dt6",valign:"middle",text:"99",pivotY:20,pivotX:79,name:"dt6",height:40,fontSize:40,font:"SimHei",color:"#ffffff",bold:!0,align:"center"},compId:23}]},{type:"Image",props:{y:551,x:43,skin:"activity/01.png"},compId:12,child:[{type:"Image",props:{y:0,x:0,visible:!1,var:"choosebg7",skin:"activity/05.png"},compId:62},{type:"Image",props:{y:68.5,x:88.5,var:"pz7",skin:"activity/shop2.png",pivotY:59,pivotX:59},compId:47},{type:"Label",props:{y:141,x:88,width:158,var:"dt7",valign:"middle",text:"99",pivotY:20,pivotX:79,name:"dt7",height:40,fontSize:40,font:"SimHei",color:"#ffffff",bold:!0,align:"center"},compId:24}]},{type:"Image",props:{y:343,x:43,skin:"activity/01.png"},compId:13,child:[{type:"Image",props:{y:0,x:0,visible:!1,var:"choosebg8",skin:"activity/05.png"},compId:63},{type:"Image",props:{y:69,x:88.5,var:"pz8",skin:"activity/shop4.png",pivotY:59,pivotX:59},compId:50},{type:"Label",props:{y:142,x:88,width:158,var:"dt8",valign:"middle",text:"99",pivotY:20,pivotX:79,name:"dt8",height:40,fontSize:40,font:"SimHei",color:"#ffffff",bold:!0,align:"center"},compId:25}]},{type:"Image",props:{y:434.5,x:336.5,width:203,var:"huxi",skin:"activity/bth_011.png",pivotY:102,pivotX:102,height:203,alpha:.6},compId:53},{type:"Image",props:{y:435.5,x:337.5,width:165,var:"startBtn",skin:"activity/bth_022.png",scaleY:1,scaleX:1,pivotY:84,pivotX:83,height:167},compId:14},{type:"Image",props:{y:131,x:37,width:191,var:"highLight",skin:"activity/04.png",height:191},compId:16},{type:"Label",props:{y:768,x:3,width:665,visible:!1,var:"chance",valign:"middle",text:"可用次数:4",strokeColor:"#ffffff",stroke:0,height:42,fontSize:32,font:"黑体",color:"#ffffff",bold:!0,align:"center"},compId:17},{type:"Label",props:{y:837,x:336.5,width:555,visible:!1,var:"tip",valign:"middle",pivotY:21,pivotX:278,height:42,fontSize:32,color:"#dac8ff",align:"center"},compId:51}]}],loadList:["activity/common_bg5.png","activity/nn1.png","activity/bg_nn2.png","activity/nn5.png","activity/btn_close.png","activity/01.png","activity/05.png","activity/icon_diamond.png","activity/shop2.png","activity/shop4.png","activity/bth_011.png","activity/bth_022.png","activity/04.png"],loadList3D:[]},e.MoonLuckyDrawUI=u,q("ui.view.MoonLuckyDrawUI",u);class g extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(g.uiView)}}g.uiView={type:"View",props:{width:720,mouseThrough:!0,height:1280},compId:2,child:[{type:"Panel",props:{var:"bg",top:0,right:0,left:0,bottom:0},compId:16},{type:"List",props:{width:136,var:"List_Game1",top:250,spaceY:10,runtime:"moon/core/ui/extension/ListEx.ts",repeatX:1,left:18,height:390},compId:3,child:[{type:"Box",props:{y:0,width:120,name:"render",height:120,centerX:0},compId:5,child:[{type:"Image",props:{width:120,skin:"moon/ad/icon/bg_bubble.png",height:120,centerY:0,centerX:0},compId:10},{type:"Image",props:{width:100,skin:"moon/1.png",name:"Img_Game",height:100,centerY:0,centerX:0},compId:6,child:[{type:"Image",props:{top:-3,skin:"moon/ad/icon/bg_bubble_up.png",right:-3},compId:11},{type:"Image",props:{skin:"moon/ad/icon/bg_bubble_down.png",left:-3,bottom:-3},compId:12}]}]}]},{type:"List",props:{width:136,var:"List_Game2",top:250,spaceY:10,runtime:"moon/core/ui/extension/ListEx.ts",right:18,repeatX:1,height:390},compId:4,child:[{type:"Box",props:{y:0,width:120,name:"render",height:120,centerX:0},compId:7,child:[{type:"Image",props:{width:120,skin:"moon/ad/icon/bg_bubble.png",height:120,centerY:0,centerX:0},compId:13},{type:"Image",props:{width:100,skin:"moon/1.png",name:"Img_Game",height:100,centerY:0,centerX:0},compId:8,child:[{type:"Image",props:{top:-3,skin:"moon/ad/icon/bg_bubble_up.png",right:-3},compId:14},{type:"Image",props:{skin:"moon/ad/icon/bg_bubble_down.png",left:-3,bottom:-3},compId:15}]}]}]}],loadList:["moon/ad/icon/bg_bubble.png","moon/1.png","moon/ad/icon/bg_bubble_up.png","moon/ad/icon/bg_bubble_down.png"],loadList3D:[]},e.MoonMainAdUI=g,q("ui.view.MoonMainAdUI",g);class f extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(f.uiView)}}f.uiView={type:"View",props:{width:1920,mouseThrough:!0,height:1080},compId:2,child:[{type:"Panel",props:{width:1920,var:"bg",top:0,left:-11,height:1080},compId:16},{type:"List",props:{y:180,width:136,var:"List_Game1",top:180,spaceY:10,runtime:"moon/core/ui/extension/ListEx.ts",repeatX:1,left:60,height:565},compId:17,child:[{type:"Box",props:{y:0,width:132,name:"render",height:132,centerX:0},compId:20,child:[{type:"Image",props:{width:132,skin:"moon/ad/icon/bg_bubble.png",height:132,centerY:0,centerX:0},compId:21},{type:"Image",props:{width:112,name:"Img_Game",height:112,centerY:0,centerX:0},compId:22,child:[{type:"Image",props:{top:-3,skin:"moon/ad/icon/bg_bubble_up.png",right:-3},compId:23},{type:"Image",props:{skin:"moon/ad/icon/bg_bubble_down.png",left:-3,bottom:-3},compId:24}]}]}]},{type:"List",props:{y:180,x:1748,width:132,var:"List_Game2",top:180,spaceY:10,runtime:"moon/core/ui/extension/ListEx.ts",right:40,repeatX:1,height:566},compId:18,child:[{type:"Box",props:{y:0,width:132,name:"render",height:132,centerX:0},compId:25,child:[{type:"Image",props:{width:132,skin:"moon/ad/icon/bg_bubble.png",height:132,centerY:0,centerX:0},compId:26},{type:"Image",props:{width:112,name:"Img_Game",height:112,centerY:0,centerX:0},compId:27,child:[{type:"Image",props:{top:-3,skin:"moon/ad/icon/bg_bubble_up.png",right:-3},compId:28},{type:"Image",props:{skin:"moon/ad/icon/bg_bubble_down.png",left:-3,bottom:-3},compId:29}]}]}]},{type:"List",props:{y:0,x:0,width:762,var:"List_Game3",top:37,spaceX:10,runtime:"moon/core/ui/extension/ListEx.ts",right:250,repeatY:1,height:136},compId:19,child:[{type:"Box",props:{y:0,x:10,width:132,name:"render",height:132},compId:30,child:[{type:"Image",props:{width:132,skin:"moon/ad/icon/bg_bubble.png",height:132,centerY:0,centerX:0},compId:31},{type:"Image",props:{width:112,name:"Img_Game",height:112,centerY:0,centerX:0},compId:32,child:[{type:"Image",props:{top:-3,skin:"moon/ad/icon/bg_bubble_up.png",right:-3},compId:33},{type:"Image",props:{skin:"moon/ad/icon/bg_bubble_down.png",left:-3,bottom:-3},compId:34}]}]}]},{type:"Box",props:{width:176,var:"ov_native2",top:218,left:132,height:172},compId:35,child:[{type:"Image",props:{top:0,right:0,name:"icon",left:0,bottom:0,alpha:.8},compId:37},{type:"Box",props:{width:87,var:"ov_native_close",top:-30,right:88,height:30},compId:38,child:[{type:"Box",props:{top:0,right:0,left:-3,bottom:0,bgColor:"#1b1b1b",alpha:.7},compId:39},{type:"Label",props:{text:"广告 X",fontSize:30,color:"#ffffff",centerY:0,centerX:0,bold:!0,alpha:.8},compId:40}]}]},{type:"Box",props:{width:800,var:"ov_native",top:16,height:178,centerX:310},compId:36,child:[{type:"Image",props:{width:684,top:0,right:0,name:"icon",left:0,height:178,bottom:0,alpha:.8},compId:41},{type:"Image",props:{y:0,x:0,var:"btn_close",skin:"moon/ad/results2/btn_close.png",name:"btn_close"},compId:42},{type:"Box",props:{y:118,x:585,width:99,right:0,height:60,bottom:0},compId:43,child:[{type:"Box",props:{top:0,right:0,left:0,bottom:0,bgColor:"#1b1b1b",alpha:.7},compId:44},{type:"Label",props:{text:"广告",fontSize:40,color:"#ffffff",centerY:0,centerX:0,bold:!0,alpha:.8},compId:45}]}]}],loadList:["moon/ad/icon/bg_bubble.png","moon/ad/icon/bg_bubble_up.png","moon/ad/icon/bg_bubble_down.png","moon/ad/results2/btn_close.png"],loadList3D:[]},e.MoonMainAd2UI=f,q("ui.view.MoonMainAd2UI",f);class y extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(y.uiView)}}y.uiView={type:"View",props:{width:750,height:1334},compId:2,child:[{type:"Image",props:{y:0,x:0,var:"b",top:0,skin:"activity/common_bg5.png",sizeGrid:"2,2,2,2",right:0,left:0,bottom:0,alpha:1},compId:3},{type:"Image",props:{x:55,width:667,var:"bg",skin:"activity/nn1.png",height:544,centerY:0},compId:4,child:[{type:"Image",props:{y:12,x:11,width:646,skin:"activity/bg_nn2.png",height:386},compId:5,child:[{type:"Label",props:{y:12,x:86.5,width:473,var:"txt_title",valign:"middle",text:"离线收益",height:64,fontSize:42,font:"黑体",color:"#ffffff",align:"center"},compId:6}]},{type:"Button",props:{y:408,x:79,width:509,var:"btn_double",stateNum:1,skin:"activity/common_btn1.png",height:117},compId:33,child:[{type:"Label",props:{y:37,x:201,var:"lbl_double",text:"双倍领取",strokeColor:"#a86013",stroke:3,fontSize:42,font:"黑体",color:"#ffffff",bold:!0,align:"center"},compId:34},{type:"Sprite",props:{y:22,x:75,texture:"activity/icvideo2.png",scaleY:1.3,scaleX:1.3},compId:35}]},{type:"Sprite",props:{y:24,x:574,var:"btn_close",texture:"activity/btn_close.png"},compId:14},{type:"Image",props:{width:613,skin:"activity/common_bg2.png",sizeGrid:"19,16,18,21",height:172,centerY:1,centerX:1},compId:22,child:[{type:"Sprite",props:{y:27,x:461,texture:"activity/icon_gold.png"},compId:30}]},{type:"Label",props:{y:132,x:85,width:486,var:"txt_title2",valign:"middle",text:"离线期间的收益",strokeColor:"#a86013",height:48,fontSize:36,font:"黑体",color:"#8271b7",bold:!0,align:"center"},compId:28},{type:"Label",props:{y:212,x:154,width:357,var:"coin",valign:"middle",text:"123",strokeColor:"#a86013",height:117,fontSize:55,font:"黑体",color:"#ffffff",bold:!0,align:"center"},compId:29},{type:"Label",props:{y:576,x:254.5,var:"get_reward",valign:"middle",text:"普通领取",name:"get_reward",fontSize:40,font:"黑体",color:"#fbf8f8",bold:!0,align:"center"},compId:32}]}],loadList:["activity/common_bg5.png","activity/nn1.png","activity/bg_nn2.png","activity/common_btn1.png","activity/icvideo2.png","activity/btn_close.png","activity/common_bg2.png","activity/icon_gold.png"],loadList3D:[]},e.MoonOffLineUI=y,q("ui.view.MoonOffLineUI",y);class _ extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(_.uiView)}}_.uiView={type:"View",props:{width:750,height:1334,centerY:0,centerX:0},compId:2,child:[{type:"Image",props:{var:"b",top:0,skin:"activity/common_bg5.png",sizeGrid:"2,2,2,2",right:0,left:0,bottom:0,alpha:1},compId:50},{type:"Box",props:{width:717,height:860,centerY:0,centerX:0},compId:5,child:[{type:"Image",props:{y:24,x:26,width:666,skin:"activity/nn1.png",height:831},compId:6,child:[{type:"Image",props:{y:8,x:10,width:646,skin:"localext/bg_nn2.png",height:707},compId:9},{type:"WXOpenDataViewer",props:{y:122,x:43,width:582,var:"img_rank",iconSign:"wx",height:563,runtime:"laya.ui.WXOpenDataViewer"},compId:51}]},{type:"Label",props:{y:51,x:155,width:393,var:"txt_title",valign:"middle",text:"天梯好友排行",height:53,fontSize:40,font:"黑体",color:"#ffffff",bold:!0,align:"center"},compId:10},{type:"Button",props:{y:749,x:116.5,width:485,var:"btn_share",stateNum:1,skin:"activity/common_btn1.png",sizeGrid:"42,42,42,42",height:95},compId:11,child:[{type:"Image",props:{y:16,x:114,width:55,skin:"activity/icshare.png",height:55},compId:12},{type:"Label",props:{y:47.5,x:200,width:207,var:"txt_share",valign:"middle",text:"邀请好友",strokeColor:"#c06c1e",stroke:3,pivotY:26,height:51,fontSize:38,font:"黑体",color:"#ffffff",bold:!0,align:"left"},compId:14}]},{type:"Label",props:{y:879,x:359,width:556,var:"txt_info",valign:"middle",text:"邀请好友得钻石",pivotY:22,pivotX:278,height:44,fontSize:32,font:"黑体",color:"#5af1ff",align:"center"},compId:15},{type:"Sprite",props:{y:-7.5,x:108,texture:"activity/nn5.png"},compId:47},{type:"Sprite",props:{y:44,x:597,var:"btn_close",texture:"activity/btn_close.png"},compId:48},{type:"Sprite",props:{y:-6,x:532,texture:"activity/nn5.png"},compId:49},{type:"Image",props:{y:157,x:79,width:560,visible:!1,skin:"activity/common_bg2.png",sizeGrid:"25,24,22,27",height:90},compId:18,child:[{type:"Label",props:{y:19,x:10,width:56,valign:"middle",text:"1",height:51,fontSize:36,color:"#f9f4f4",bold:!0,align:"center"},compId:19},{type:"Label",props:{y:45,x:158,width:148,valign:"middle",text:"只是拿来看UI的",pivotY:21,height:42,fontSize:32,font:"黑体",color:"#ffffff",align:"left"},compId:20},{type:"Label",props:{y:45,x:463,width:73,valign:"middle",text:"43关",pivotY:21,height:42,fontSize:32,font:"黑体",color:"#ffffff",align:"right"},compId:23},{type:"Image",props:{y:10,x:74,width:70,height:70},compId:24}]}]}],loadList:["activity/common_bg5.png","activity/nn1.png","localext/bg_nn2.png","activity/common_btn1.png","activity/icshare.png","activity/nn5.png","activity/btn_close.png","activity/common_bg2.png"],loadList3D:[]},e.MoonRankUI=_,q("ui.view.MoonRankUI",_);class I extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(I.uiView)}}I.uiView={type:"View",props:{width:750,height:1334,bottom:50},compId:2,child:[{type:"Image",props:{width:355,visible:!1,var:"btn_reward5",skin:"activity/common_btn1.png",sizeGrid:"42,42,42,42",height:136,centerY:-80,centerX:0},compId:7,child:[{type:"Image",props:{x:129,width:83,var:"img",skin:"activity/icon_gold.png",scaleY:.7,scaleX:.7,height:81,centerY:27},compId:8},{type:"Label",props:{y:56,x:194,width:166,var:"itCCoin1",valign:"middle",text:"0",height:80,fontSize:42,color:"#ffffff",bold:!0,align:"left"},compId:9},{type:"Label",props:{y:-10,x:141,width:170,var:"txt_five",valign:"middle",text:"5倍领取",strokeColor:"#c37d14",stroke:4,height:99,fontSize:45,font:"黑体",color:"#ffffff",bold:!1,align:"center"},compId:10},{type:"Image",props:{x:29,var:"img_video",skin:"activity/icvideo2.png",scaleY:1.5,scaleX:1.5,centerY:2},compId:52}]},{type:"Image",props:{width:355,visible:!1,var:"btn_reward1",skin:"activity/common_btn3.png",sizeGrid:"42,42,42,42",height:136,centerY:145,centerX:0},compId:55,child:[{type:"Image",props:{x:136,width:83,skin:"activity/icon_gold.png",scaleY:.7,scaleX:.7,height:81,centerY:-2},compId:56},{type:"Label",props:{y:25,x:202.5,width:112,var:"com",valign:"middle",text:"500",strokeColor:"#479722",stroke:4,height:86,fontSize:50,color:"#ffffff",bold:!0,align:"left"},compId:57},{type:"Label",props:{y:68,x:123.5,width:191,var:"txt_get",valign:"middle",text:"领取",strokeColor:"#479722",stroke:4,pivotY:37,pivotX:151,height:73,fontSize:45,color:"#ffffff",bold:!0,align:"center"},compId:62}]},{type:"Button",props:{width:355,var:"btn_skip",stateNum:1,skin:"activity/common_btn1.png",sizeGrid:"42,42,42,42",height:136,centerY:-80,centerX:0},compId:16,child:[{type:"Sprite",props:{y:33,x:30,width:70,texture:"activity/icvideo2.png",height:70},compId:51},{type:"Label",props:{y:19,x:119,width:197,var:"txt_skip",valign:"middle",text:"跳过本关",strokeColor:"#c37d14",stroke:4,height:99,fontSize:50,font:"黑体",color:"#ffffff",bold:!1,align:"center"},compId:63}]},{type:"Button",props:{width:355,var:"btn_back",stateNum:1,skin:"activity/common_btn3.png",sizeGrid:"42,42,42,42",height:136,centerY:145,centerX:0},compId:64,child:[{type:"Label",props:{width:267,var:"txt_back",valign:"middle",text:"返回首页",strokeColor:"#c37d14",stroke:4,height:99,fontSize:50,color:"#ffffff",centerY:0,centerX:0,bold:!1,align:"center"},compId:69}]},{type:"Box",props:{width:485,var:"box_bar",height:82,centerX:0,bottom:40},compId:76,child:[{type:"Sprite",props:{texture:"activity/z15.png"},compId:77},{type:"Sprite",props:{y:7.5,x:8,width:10,var:"bar",texture:"activity/z16.png"},compId:78},{type:"Sprite",props:{y:-28.5,x:454,texture:"activity/z14.png"},compId:79,child:[{type:"Sprite",props:{y:48,x:49,var:"Lucky",texture:"activity/z13.png",scaleY:1,scaleX:1,rotation:0,pivotY:43,pivotX:41},compId:80}]}]}],animations:[{nodes:[{target:80,keyframes:{y:[{value:48,tweenMethod:"linearNone",tween:!0,target:80,key:"y",index:0},{value:48,tweenMethod:"linearNone",tween:!0,target:80,label:null,key:"y",index:5},{value:48,tweenMethod:"linearNone",tween:!0,target:80,label:null,key:"y",index:10},{value:48,tweenMethod:"linearNone",tween:!0,target:80,label:null,key:"y",index:15},{value:48,tweenMethod:"linearNone",tween:!0,target:80,label:null,key:"y",index:20},{value:48,tweenMethod:"linearNone",tween:!0,target:80,label:null,key:"y",index:25},{value:48,tweenMethod:"linearNone",tween:!0,target:80,label:null,key:"y",index:30},{value:48,tweenMethod:"linearNone",tween:!0,target:80,label:null,key:"y",index:35},{value:48,tweenMethod:"linearNone",tween:!0,target:80,label:null,key:"y",index:40},{value:48,tweenMethod:"linearNone",tween:!0,target:80,label:null,key:"y",index:45},{value:48,tweenMethod:"linearNone",tween:!0,target:80,label:null,key:"y",index:50},{value:48,tweenMethod:"linearNone",tween:!0,target:80,label:null,key:"y",index:55},{value:48,tweenMethod:"linearNone",tween:!0,target:80,label:null,key:"y",index:60},{value:48,tweenMethod:"linearNone",tween:!0,target:80,label:null,key:"y",index:75}],x:[{value:49,tweenMethod:"linearNone",tween:!0,target:80,key:"x",index:0},{value:49,tweenMethod:"linearNone",tween:!0,target:80,label:null,key:"x",index:5},{value:49,tweenMethod:"linearNone",tween:!0,target:80,label:null,key:"x",index:10},{value:49,tweenMethod:"linearNone",tween:!0,target:80,label:null,key:"x",index:15},{value:49,tweenMethod:"linearNone",tween:!0,target:80,label:null,key:"x",index:20},{value:49,tweenMethod:"linearNone",tween:!0,target:80,label:null,key:"x",index:25},{value:49,tweenMethod:"linearNone",tween:!0,target:80,label:null,key:"x",index:30},{value:49,tweenMethod:"linearNone",tween:!0,target:80,label:null,key:"x",index:35},{value:49,tweenMethod:"linearNone",tween:!0,target:80,label:null,key:"x",index:40},{value:49,tweenMethod:"linearNone",tween:!0,target:80,label:null,key:"x",index:45},{value:49,tweenMethod:"linearNone",tween:!0,target:80,label:null,key:"x",index:50},{value:49,tweenMethod:"linearNone",tween:!0,target:80,label:null,key:"x",index:55},{value:49,tweenMethod:"linearNone",tween:!0,target:80,label:null,key:"x",index:60},{value:49,tweenMethod:"linearNone",tween:!0,target:80,label:null,key:"x",index:75}],scaleY:[{value:1,tweenMethod:"linearNone",tween:!0,target:80,key:"scaleY",index:0},{value:1.2,tweenMethod:"linearNone",tween:!0,target:80,key:"scaleY",index:5},{value:1,tweenMethod:"linearNone",tween:!0,target:80,label:null,key:"scaleY",index:10},{value:1.2,tweenMethod:"linearNone",tween:!0,target:80,label:null,key:"scaleY",index:15},{value:1,tweenMethod:"linearNone",tween:!0,target:80,label:null,key:"scaleY",index:20},{value:1,tweenMethod:"linearNone",tween:!0,target:80,label:null,key:"scaleY",index:25},{value:1,tweenMethod:"linearNone",tween:!0,target:80,label:null,key:"scaleY",index:30},{value:1,tweenMethod:"linearNone",tween:!0,target:80,label:null,key:"scaleY",index:35},{value:1,tweenMethod:"linearNone",tween:!0,target:80,label:null,key:"scaleY",index:40},{value:1,tweenMethod:"linearNone",tween:!0,target:80,label:null,key:"scaleY",index:45},{value:1,tweenMethod:"linearNone",tween:!0,target:80,label:null,key:"scaleY",index:50},{value:1,tweenMethod:"linearNone",tween:!0,target:80,label:null,key:"scaleY",index:55},{value:1,tweenMethod:"linearNone",tween:!0,target:80,label:null,key:"scaleY",index:60},{value:1,tweenMethod:"linearNone",tween:!0,target:80,label:null,key:"scaleY",index:75}],scaleX:[{value:1,tweenMethod:"linearNone",tween:!0,target:80,key:"scaleX",index:0},{value:1.2,tweenMethod:"linearNone",tween:!0,target:80,key:"scaleX",index:5},{value:1,tweenMethod:"linearNone",tween:!0,target:80,label:null,key:"scaleX",index:10},{value:1.2,tweenMethod:"linearNone",tween:!0,target:80,label:null,key:"scaleX",index:15},{value:1,tweenMethod:"linearNone",tween:!0,target:80,label:null,key:"scaleX",index:20},{value:1,tweenMethod:"linearNone",tween:!0,target:80,label:null,key:"scaleX",index:25},{value:1,tweenMethod:"linearNone",tween:!0,target:80,label:null,key:"scaleX",index:30},{value:1,tweenMethod:"linearNone",tween:!0,target:80,label:null,key:"scaleX",index:35},{value:1,tweenMethod:"linearNone",tween:!0,target:80,label:null,key:"scaleX",index:40},{value:1,tweenMethod:"linearNone",tween:!0,target:80,label:null,key:"scaleX",index:45},{value:1,tweenMethod:"linearNone",tween:!0,target:80,label:null,key:"scaleX",index:50},{value:1,tweenMethod:"linearNone",tween:!0,target:80,label:null,key:"scaleX",index:55},{value:1,tweenMethod:"linearNone",tween:!0,target:80,label:null,key:"scaleX",index:60},{value:1,tweenMethod:"linearNone",tween:!0,target:80,label:null,key:"scaleX",index:75}],rotation:[{value:0,tweenMethod:"linearNone",tween:!0,target:80,key:"rotation",index:0},{value:0,tweenMethod:"linearNone",tween:!0,target:80,key:"rotation",index:5},{value:0,tweenMethod:"linearNone",tween:!0,target:80,key:"rotation",index:10},{value:0,tweenMethod:"linearNone",tween:!0,target:80,key:"rotation",index:15},{value:0,tweenMethod:"linearNone",tween:!0,target:80,key:"rotation",index:20},{value:-25,tweenMethod:"linearNone",tween:!0,target:80,key:"rotation",index:25},{value:0,tweenMethod:"linearNone",tween:!0,target:80,label:null,key:"rotation",index:30},{value:15,tweenMethod:"linearNone",tween:!0,target:80,label:null,key:"rotation",index:35},{value:0,tweenMethod:"linearNone",tween:!0,target:80,label:null,key:"rotation",index:40},{value:-15,tweenMethod:"linearNone",tween:!0,target:80,label:null,key:"rotation",index:45},{value:0,tweenMethod:"linearNone",tween:!0,target:80,label:null,key:"rotation",index:50},{value:15,tweenMethod:"linearNone",tween:!0,target:80,label:null,key:"rotation",index:55},{value:0,tweenMethod:"linearNone",tween:!0,target:80,label:null,key:"rotation",index:60},{value:0,tweenMethod:"linearNone",tween:!0,target:80,label:null,key:"rotation",index:75}],pivotY:[{value:43,tweenMethod:"linearNone",tween:!0,target:80,key:"pivotY",index:0},{value:43,tweenMethod:"linearNone",tween:!0,target:80,label:null,key:"pivotY",index:5},{value:43,tweenMethod:"linearNone",tween:!0,target:80,label:null,key:"pivotY",index:10},{value:43,tweenMethod:"linearNone",tween:!0,target:80,label:null,key:"pivotY",index:15},{value:43,tweenMethod:"linearNone",tween:!0,target:80,label:null,key:"pivotY",index:20},{value:43,tweenMethod:"linearNone",tween:!0,target:80,label:null,key:"pivotY",index:25},{value:43,tweenMethod:"linearNone",tween:!0,target:80,label:null,key:"pivotY",index:30},{value:43,tweenMethod:"linearNone",tween:!0,target:80,label:null,key:"pivotY",index:35},{value:43,tweenMethod:"linearNone",tween:!0,target:80,label:null,key:"pivotY",index:40},{value:43,tweenMethod:"linearNone",tween:!0,target:80,label:null,key:"pivotY",index:45},{value:43,tweenMethod:"linearNone",tween:!0,target:80,label:null,key:"pivotY",index:50},{value:43,tweenMethod:"linearNone",tween:!0,target:80,label:null,key:"pivotY",index:55},{value:43,tweenMethod:"linearNone",tween:!0,target:80,label:null,key:"pivotY",index:60},{value:43,tweenMethod:"linearNone",tween:!0,target:80,label:null,key:"pivotY",index:75}],pivotX:[{value:41,tweenMethod:"linearNone",tween:!0,target:80,key:"pivotX",index:0},{value:41,tweenMethod:"linearNone",tween:!0,target:80,label:null,key:"pivotX",index:5},{value:41,tweenMethod:"linearNone",tween:!0,target:80,label:null,key:"pivotX",index:10},{value:41,tweenMethod:"linearNone",tween:!0,target:80,label:null,key:"pivotX",index:15},{value:41,tweenMethod:"linearNone",tween:!0,target:80,label:null,key:"pivotX",index:20},{value:41,tweenMethod:"linearNone",tween:!0,target:80,label:null,key:"pivotX",index:25},{value:41,tweenMethod:"linearNone",tween:!0,target:80,label:null,key:"pivotX",index:30},{value:41,tweenMethod:"linearNone",tween:!0,target:80,label:null,key:"pivotX",index:35},{value:41,tweenMethod:"linearNone",tween:!0,target:80,label:null,key:"pivotX",index:40},{value:41,tweenMethod:"linearNone",tween:!0,target:80,label:null,key:"pivotX",index:45},{value:41,tweenMethod:"linearNone",tween:!0,target:80,label:null,key:"pivotX",index:50},{value:41,tweenMethod:"linearNone",tween:!0,target:80,label:null,key:"pivotX",index:55},{value:41,tweenMethod:"linearNone",tween:!0,target:80,label:null,key:"pivotX",index:60},{value:41,tweenMethod:"linearNone",tween:!0,target:80,label:null,key:"pivotX",index:75}]}}],name:"barShake",id:1,frameRate:24,action:0}],loadList:["activity/common_btn1.png","activity/icon_gold.png","activity/icvideo2.png","activity/common_btn3.png","activity/z15.png","activity/z16.png","activity/z14.png","activity/z13.png"],loadList3D:[]},e.MoonResultPanelUI=I,q("ui.view.MoonResultPanelUI",I);class v extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(v.uiView)}}v.uiView={type:"View",props:{width:720,height:1280},compId:2,child:[{type:"Panel",props:{top:0,right:0,left:0,bottom:0,bgColor:"#000000",alpha:.6},compId:17},{type:"List",props:{y:141,width:640,var:"hgamelist",top:223,spaceX:20,runtime:"moon/core/ui/extension/ListEx.ts",right:40,repeatY:1,left:40,height:105},compId:4,child:[{type:"Box",props:{y:0,x:10,name:"render"},compId:7,child:[{type:"Image",props:{width:100,skin:"moon/1.png",name:"Img_Game",height:100},compId:6}]}]},{type:"List",props:{y:328,var:"vgamelist",top:410,spaceY:28,spaceX:16,runtime:"moon/core/ui/extension/ListEx.ts",right:38,repeatX:2,left:38,bottom:10},compId:5,child:[{type:"Box",props:{y:0,x:0,name:"render"},compId:9,child:[{type:"Image",props:{width:300,skin:"moon/2.png",name:"Img_Game",height:200,centerY:0,centerX:0},compId:8}]}]},{type:"Button",props:{y:698,width:280,var:"goon",stateNum:1,skin:"moon/ad/results/common_btn1.png",sizeGrid:"42,42,42,42",labelStrokeColor:"#c37d14",labelStroke:4,labelSize:50,labelFont:"SimHei",labelColors:"#ffffff",labelAlign:"center",label:"继续游戏",height:120,centerY:200,centerX:0},compId:10},{type:"Image",props:{y:78,top:160,skin:"moon/ad/results/bg_start.png",left:40},compId:11},{type:"Image",props:{y:89,x:584,top:160,skin:"moon/ad/results/bg_start.png",rotation:180,right:40,pivotY:11,pivotX:126},compId:12},{type:"Image",props:{y:68,top:150,skin:"moon/ad/results/img_friend.png",centerX:0},compId:13},{type:"Image",props:{y:268,top:350,skin:"moon/ad/results/img_push.png",centerX:0},compId:14},{type:"Image",props:{y:278,x:0,top:360,skin:"moon/ad/results/bg_start.png",left:40},compId:15},{type:"Image",props:{y:289,x:584,top:360,skin:"moon/ad/results/bg_start.png",rotation:180,right:40,pivotY:11,pivotX:126},compId:16}],loadList:["moon/1.png","moon/2.png","moon/ad/results/common_btn1.png","moon/ad/results/bg_start.png","moon/ad/results/img_friend.png","moon/ad/results/img_push.png"],loadList3D:[]},e.MoonResultsUI=v,q("ui.view.MoonResultsUI",v);class w extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(w.uiView)}}w.uiView={type:"View",props:{width:750,mouseThrough:!0,height:1334},compId:2,child:[{type:"Panel",props:{y:119,width:684,top:100,height:178,centerX:0},compId:12,child:[{type:"List",props:{var:"hgamelist",top:9,spaceY:10,spaceX:8,runtime:"moon/core/ui/extension/ListEx.ts",right:10,repeatX:4,left:10,bottom:10},compId:4,child:[{type:"Box",props:{name:"render"},compId:7,child:[{type:"Image",props:{width:156,skin:"jumpto/icon/1.png",name:"Img_Game",left:6,height:156},compId:6}]}]},{type:"Image",props:{width:684,var:"hgamebox",skin:"moon/ad/results2/bg_frame.png",height:178,centerY:-1,centerX:0},compId:13}]},{type:"Box",props:{y:99,width:684,var:"ov_native",top:80,height:178,centerX:0},compId:14,child:[{type:"Image",props:{top:0,right:0,name:"icon",left:0,bottom:0,alpha:.8},compId:15},{type:"Image",props:{var:"btn_close",skin:"moon/ad/results2/btn_close.png",name:"btn_close"},compId:16},{type:"Box",props:{width:99,right:0,height:60,bottom:0},compId:20,child:[{type:"Box",props:{top:0,right:0,left:0,bottom:0,bgColor:"#1b1b1b",alpha:.7},compId:21},{type:"Label",props:{text:"广告",fontSize:40,color:"#ffffff",centerY:0,centerX:0,bold:!0,alpha:.8},compId:19}]}]},{type:"Box",props:{width:128,var:"ov_native2",top:500,left:580,height:128},compId:22,child:[{type:"Image",props:{top:0,right:0,name:"icon",left:0,bottom:0,alpha:.8},compId:23},{type:"Box",props:{width:87,var:"ov_native_close",top:-30,right:41,height:30},compId:25,child:[{type:"Box",props:{top:0,right:0,left:-3,bottom:0,bgColor:"#1b1b1b",alpha:.7},compId:26},{type:"Label",props:{text:"广告 X",fontSize:30,color:"#ffffff",centerY:0,centerX:0,bold:!0,alpha:.8},compId:27}]}]}],loadList:["jumpto/icon/1.png","moon/ad/results2/bg_frame.png","moon/ad/results2/btn_close.png"],loadList3D:[]},e.MoonResults2UI=w,q("ui.view.MoonResults2UI",w);class S extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(S.uiView)}}S.uiView={type:"View",props:{width:750,mouseThrough:!0,height:1334},compId:2,child:[{type:"Button",props:{width:384,visible:!0,var:"btn_revive",stateNum:1,skin:"activity/common_btn1.png",pivotY:51,pivotX:191,labelStrokeColor:"#a35b19",labelStroke:3,labelSize:42,labelPadding:"0,0,0,0",labelFont:"黑体",labelColors:"#ffffff",labelBold:!0,height:93,centerY:3,centerX:0},compId:5,child:[{type:"Image",props:{y:18,x:22,visible:!0,var:"reskin",skin:"activity/icvideo2.png"},compId:9},{type:"Label",props:{y:25.5,x:121,var:"txt_revive",text:"看视频复活",strokeColor:"#a35b19",stroke:3,padding:"0,0,0,0",fontSize:42,font:"黑体",color:"#ffffff",bold:!0,align:"center"},compId:20}]},{type:"Button",props:{width:200,visible:!1,var:"btn_giveup",stateNum:1,labelStrokeColor:"#95531f",labelStroke:3,labelSize:30,labelFont:"黑体",labelColors:"#ffffff",labelBold:!0,hitTestPrior:!0,height:75,centerY:100,centerX:0},compId:6,child:[{type:"Label",props:{width:200,var:"txt_giveup",valign:"middle",text:"放弃复活",strokeColor:"#95531f",stroke:3,height:75,fontSize:30,color:"#ffffff",align:"center"},compId:27}]}],animations:[{nodes:[{target:9,keyframes:{var:[{value:"reviveskin",tweenMethod:"linearNone",tween:!1,target:9,key:"var",index:0}]}}],name:"gamePause",id:1,frameRate:24,action:0}],loadList:["activity/common_btn1.png","activity/icvideo2.png"],loadList3D:[]},e.MoonReviveOneUI=S,q("ui.view.MoonReviveOneUI",S);class L extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(L.uiView)}}L.uiView={type:"View",props:{width:750,mouseThrough:!0,height:1334},compId:2,child:[{type:"Button",props:{width:200,visible:!1,var:"btn_giveup",stateNum:1,labelStrokeColor:"#95531f",labelStroke:3,labelSize:30,labelFont:"黑体",labelColors:"#ffffff",labelBold:!0,hitTestPrior:!0,height:75,centerY:100,centerX:0},compId:6,child:[{type:"Label",props:{var:"txt_giveup",valign:"middle",text:"分享复活",strokeColor:"#95531f",stroke:3,fontSize:30,color:"#ffffff",centerY:0,centerX:0,align:"center"},compId:27}]},{type:"Button",props:{width:327,visible:!1,var:"btn_share",stateNum:1,skin:"activity/common_btn1.png",pivotY:51,pivotX:191,labelStrokeColor:"#a35b19",labelStroke:3,labelSize:42,labelPadding:"0,0,0,0",labelFont:"黑体",labelColors:"#ffffff",labelBold:!0,height:93,centerY:-126,centerX:0},compId:21,child:[{type:"Image",props:{y:18,x:13,visible:!0,skin:"activity/icshare.png"},compId:22},{type:"Label",props:{y:25.5,x:104,var:"txt_share",text:"分享复活",strokeColor:"#a35b19",stroke:3,padding:"0,0,0,0",fontSize:42,font:"黑体",color:"#ffffff",bold:!0},compId:23}]},{type:"Button",props:{width:327,visible:!0,var:"btn_diamond",stateNum:1,skin:"activity/common_btn3.png",pivotY:51,pivotX:191,labelStrokeColor:"#a35b19",labelStroke:3,labelSize:42,labelPadding:"0,0,0,0",labelFont:"黑体",labelColors:"#ffffff",labelBold:!0,height:93,centerY:3,centerX:0},compId:16,child:[{type:"Image",props:{y:0,x:10,width:118,visible:!0,skin:"activity/icon_diamond.png",scaleY:.7,scaleX:.7,height:118},compId:18},{type:"Label",props:{y:25.5,x:88,var:"lab_diamond",text:"10 钻石复活",strokeColor:"#a35b19",stroke:3,padding:"0,0,0,0",fontSize:42,font:"黑体",color:"#ffffff",bold:!0},compId:19}]}],animations:[{nodes:[{target:9,keyframes:{var:[{value:"reviveskin",tweenMethod:"linearNone",tween:!1,target:9,key:"var",index:0}]}}],name:"gamePause",id:1,frameRate:24,action:0}],loadList:["activity/common_btn1.png","activity/icshare.png","activity/common_btn3.png","activity/icon_diamond.png"],loadList3D:[]},e.MoonReviveTwoUI=L,q("ui.view.MoonReviveTwoUI",L);class E extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(E.uiView)}}E.uiView={type:"View",props:{width:750,height:1334},compId:1,child:[{type:"Image",props:{var:"b",top:0,skin:"activity/common_bg5.png",sizeGrid:"2,2,2,2",right:0,left:0,bottom:0,alpha:1},compId:2},{type:"Image",props:{width:666,skin:"activity/nn1.png",sizeGrid:"58,58,58,58",height:1054,centerY:0,centerX:0},compId:3,child:[{type:"Image",props:{width:646,skin:"activity/bg_nn2.png",height:870,centerY:-82,centerX:0},compId:4},{type:"Label",props:{y:24,x:91.5,width:479,var:"txt_title",valign:"middle",text:"每日钻石",height:65,fontSize:42,font:"黑体",color:"#ffffff",bold:!0,align:"center"},compId:21},{type:"Sprite",props:{y:-26.5,x:80,texture:"activity/nn5.png"},compId:23},{type:"Sprite",props:{y:22,x:573,var:"btn_close",texture:"activity/btn_close.png"},compId:24},{type:"Sprite",props:{y:-23,x:508,texture:"activity/nn5.png"},compId:25},{type:"Image",props:{width:602,skin:"activity/common_bg2.png",sizeGrid:"26,23,25,24",height:64,centerY:-366,centerX:0},compId:6},{type:"Image",props:{y:199,x:512,skin:"activity/icon_diamond.png",scaleY:.7,scaleX:.7},compId:8},{type:"Label",props:{width:602,var:"txt_title2",valign:"middle",text:"完成任务可获400钻石",height:63,fontSize:38,font:"黑体",color:"#ffffff",centerY:-367,centerX:0,bold:!1,alpha:87,align:"center"},compId:7},{type:"Label",props:{width:563,text:"第一步: 点击         进入会话",height:46,fontSize:36,font:"黑体",color:"#925c3e",centerY:-284,centerX:4,bold:!1,align:"left"},compId:9},{type:"Label",props:{width:101,text:"确认",height:38,fontSize:36,font:"黑体",color:"#ff6c34",centerY:-288,centerX:-37,bold:!1,align:"center"},compId:10},{type:"Label",props:{width:470,text:"第二步: 点击",height:71,fontSize:36,font:"黑体",color:"#925c3e",centerY:59,centerX:-39,align:"left"},compId:11},{type:"Label",props:{width:293,text:"发送小程序",height:42,fontSize:36,font:"黑体",color:"#ff6c34",centerY:45,centerX:98,bold:!1,align:"left"},compId:12},{type:"Image",props:{width:509,var:"btnGet",skin:"activity/common_btn1.png",height:128,centerY:438,centerX:2},compId:13,child:[{type:"Label",props:{y:37,x:100,width:249,var:"txt_btnGet",valign:"middle",text:"立即领钻石",strokeColor:"#bb6a13",stroke:3,height:54,fontSize:48,font:"黑体",color:"#ffffff",bold:!0,align:"center"},compId:22},{type:"Image",props:{y:8,x:349,skin:"activity/icon_diamond.png",scaleY:.9,scaleX:.9},compId:17}]},{type:"Image",props:{y:402,x:333,width:708,skin:"share/service1.png",scaleY:.85,scaleX:.85,pivotY:150,pivotX:354,height:300},compId:14},{type:"Image",props:{y:722,x:333,width:708,skin:"share/service2.png",scaleY:.85,scaleX:.85,pivotY:141,pivotX:354,height:300},compId:15}]}],loadList:["activity/common_bg5.png","activity/nn1.png","activity/bg_nn2.png","activity/nn5.png","activity/btn_close.png","activity/common_bg2.png","activity/icon_diamond.png","activity/common_btn1.png","share/service1.png","share/service2.png"],loadList3D:[]},e.MoonServiceUI=E,q("ui.view.MoonServiceUI",E);class A extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(A.uiView)}}A.uiView={type:"View",props:{width:750,height:1334},compId:1,child:[{type:"Image",props:{var:"b",top:0,skin:"activity/common_bg5.png",sizeGrid:"2,2,2,2",right:0,left:0,bottom:0,alpha:1},compId:31},{type:"Image",props:{width:666,skin:"activity/nn1.png",height:1001,centerY:-71,centerX:0},compId:2,child:[{type:"Image",props:{y:11,x:10,width:646,skin:"activity/bg_nn2.png",height:833},compId:3},{type:"Sprite",props:{y:-26.5,x:83.5,texture:"activity/nn5.png"},compId:95},{type:"Sprite",props:{y:21,x:573,visible:!1,var:"btn_close",texture:"activity/btn_close.png"},compId:96},{type:"Sprite",props:{y:-28,x:508,texture:"activity/nn5.png"},compId:97},{type:"Label",props:{y:25,x:96.5,width:473,var:"txt_title",valign:"middle",text:"签到奖励",height:64,fontSize:42,font:"黑体",color:"#ffffff",bold:!0,align:"center"},compId:67},{type:"Image",props:{y:134,x:39,width:183,var:"img_0",skin:"activity/nn3.png",sizeGrid:"86,65,53,65",height:213,gray:!1},compId:6,child:[{type:"Label",props:{y:11,width:172,var:"txt_day1",valign:"middle",text:"第1天",height:43,fontSize:28,font:"黑体",color:"#ffffff",centerX:-1,align:"center"},compId:12},{type:"Label",props:{width:122,var:"txt_num0",valign:"middle",text:"x20K",height:37,fontSize:32,font:"黑体",color:"#8d5f43",centerY:71,centerX:0,bold:!0,align:"center"},compId:13},{type:"Image",props:{width:118,var:"icon0",skin:"activity/icon_diamond.png",scaleY:1,scaleX:1,pivotY:59,pivotX:59,height:118,centerY:8,centerX:0},compId:14}]},{type:"Image",props:{y:269,x:130.5,visible:!1,var:"img0",skin:"activity/hook.png",scaleY:.7,scaleX:.7},compId:56},{type:"Image",props:{y:134,x:241,width:183,var:"img_1",skin:"activity/nn3.png",sizeGrid:"86,65,53,65",height:213,gray:!1},compId:32,child:[{type:"Label",props:{y:11,width:172,var:"txt_day2",valign:"middle",text:"第2天",height:43,fontSize:28,font:"黑体",color:"#ffffff",centerX:0,align:"center"},compId:33},{type:"Label",props:{width:162,var:"txt_num1",valign:"middle",text:"x10 ",pivotY:22,pivotX:81,height:43,fontSize:32,font:"黑体",color:"#8d5f43",centerY:75,centerX:0,bold:!0,align:"center"},compId:34},{type:"Image",props:{var:"icon1",skin:"activity/icon_diamond.png",scaleY:1,scaleX:1,centerY:7,centerX:0},compId:35}]},{type:"Image",props:{y:269,x:332.5,visible:!1,var:"img1",skin:"activity/hook.png",scaleY:.7,scaleX:.7},compId:57},{type:"Image",props:{y:134,x:443,width:183,var:"img_2",skin:"activity/nn3.png",sizeGrid:"77,72,64,69",height:213,gray:!1},compId:36,child:[{type:"Label",props:{y:12,width:172,var:"txt_day3",valign:"middle",text:"第3天",height:43,fontSize:28,font:"黑体",color:"#ffffff",centerX:0,align:"center"},compId:37},{type:"Label",props:{width:169,var:"txt_num2",valign:"middle",text:"x50K",height:43,fontSize:32,font:"黑体",color:"#8d5f43",centerY:75,centerX:0,bold:!0,align:"center"},compId:38},{type:"Image",props:{y:109.5,x:92,width:118,var:"icon2",skin:"activity/icon_gold.png",scaleY:.9,scaleX:.9,pivotY:59,pivotX:59,height:118},compId:39}]},{type:"Image",props:{y:269,x:536.5,visible:!1,var:"img2",skin:"activity/hook.png",scaleY:.7,scaleX:.7},compId:58},{type:"Image",props:{y:365,x:39,width:183,var:"img_3",skin:"activity/nn3.png",sizeGrid:"86,65,53,65",height:213,gray:!1},compId:40,child:[{type:"Label",props:{y:10,width:172,var:"txt_day4",valign:"middle",text:"第4天",height:43,fontSize:28,font:"黑体",color:"#ffffff",centerX:0,align:"center"},compId:41},{type:"Label",props:{width:122,var:"txt_num3",valign:"middle",text:"x100K",height:43,fontSize:32,font:"黑体",color:"#8d5f43",centerY:76,centerX:0,bold:!0,align:"center"},compId:42},{type:"Image",props:{y:59,x:38,var:"icon3",skin:"activity/icon_gold.png",scaleY:.9,scaleX:.9},compId:43}]},{type:"Image",props:{y:502,x:130.5,visible:!1,var:"img3",skin:"activity/hook.png",scaleY:.7,scaleX:.7},compId:59},{type:"Image",props:{y:365,width:183,var:"img_4",skin:"activity/nn3.png",sizeGrid:"86,65,53,65",height:213,gray:!1,centerX:-3},compId:44,child:[{type:"Label",props:{y:12,width:172,var:"txt_day5",valign:"middle",text:"第5天",height:43,fontSize:28,font:"黑体",color:"#ffffff",centerX:0,align:"center"},compId:45},{type:"Label",props:{y:179,x:92,width:122,var:"txt_num4",valign:"middle",text:"x20 ",pivotY:22,pivotX:61,height:43,fontSize:32,font:"黑体",color:"#8d5f43",bold:!0,align:"center"},compId:46},{type:"Image",props:{y:54.5,x:32.5,var:"icon4",skin:"activity/icon_diamond.png",scaleY:1,scaleX:1},compId:47}]},{type:"Image",props:{y:502,x:328,visible:!1,var:"img4",skin:"activity/hook.png",scaleY:.7,scaleX:.7},compId:60},{type:"Image",props:{y:365,width:183,var:"img_5",skin:"activity/nn3.png",sizeGrid:"86,65,53,65",right:40,height:213,gray:!1},compId:48,child:[{type:"Label",props:{y:11,width:172,var:"txt_day6",valign:"middle",text:"第6天",height:43,fontSize:28,font:"黑体",color:"#ffffff",centerX:0,align:"center"},compId:49},{type:"Label",props:{y:179,x:92,width:122,var:"txt_num5",valign:"middle",text:"x200K",pivotY:22,pivotX:61,height:43,fontSize:32,font:"黑体",color:"#8d5f43",bold:!0,align:"center"},compId:50},{type:"Image",props:{y:57,x:40,var:"icon5",skin:"activity/icon_gold.png",scaleY:.9,scaleX:.9},compId:51}]},{type:"Image",props:{y:502,x:534.5,visible:!1,var:"img5",skin:"activity/hook.png",scaleY:.7,scaleX:.7},compId:61},{type:"Image",props:{y:601,x:41,width:585,var:"img_6",skin:"activity/nn3.png",sizeGrid:"86,65,53,65",height:213,gray:!1},compId:52,child:[{type:"Label",props:{y:11,width:563,var:"txt_day7",valign:"middle",text:"第7天",height:43,fontSize:28,font:"黑体",color:"#ffffff",centerX:0,align:"center"},compId:53},{type:"Label",props:{width:122,var:"txt_num6",text:"x30",height:48,fontSize:32,font:"黑体",color:"#8d5f43",centerY:77,centerX:0,bold:!0,align:"center"},compId:54},{type:"Image",props:{width:118,var:"icon6",skin:"activity/shop4.png",scaleY:1,scaleX:1,height:118,centerY:0,centerX:0},compId:55}]},{type:"Image",props:{y:735,x:534,visible:!1,var:"img6",skin:"activity/hook.png",scaleY:.7,scaleX:.7},compId:62},{type:"Button",props:{width:360,visible:!0,var:"btn_get",height:69,centerY:553,centerX:11},compId:23,child:[{type:"Label",props:{width:498,var:"lbl_get",text:"直接领取",height:39,fontSize:42,font:"黑体",color:"#ffffff",centerY:0,centerX:0,align:"center"},compId:26},{type:"Image",props:{y:0,x:295,visible:!0,var:"img_get_coin",skin:"activity/icon_gold.png",scaleY:.5,scaleX:.5},compId:63},{type:"Image",props:{y:0,x:295,visible:!0,var:"img_get_zs",skin:"activity/icon_diamond.png",scaleY:.5,scaleX:.5},compId:65}]},{type:"Button",props:{y:918,x:334,width:508,var:"btn_one",stateNum:1,skin:"activity/common_btn1.png",sizeGrid:"42,42,42,42",height:120,anchorY:.5,anchorX:.5},compId:98,child:[{type:"Label",props:{width:407,var:"lab_one",valign:"middle",text:"观看视频领取",strokeColor:"#b47516",stroke:3,pivotY:24,pivotX:234,height:47,fontSize:42,font:"黑体",color:"#ffffff",centerY:0,centerX:0,bold:!0,align:"center"},compId:99},{type:"Image",props:{x:406,visible:!1,var:"imgcoin",skin:"activity/icon_gold.png",scaleY:.7,scaleX:.7,centerY:-4},compId:100},{type:"Image",props:{x:406,visible:!1,var:"imgdia",skin:"activity/icon_diamond.png",scaleY:.7,scaleX:.7,centerY:-4},compId:101}]},{type:"Button",props:{y:918,x:334,width:508,visible:!1,var:"btn_share",stateNum:1,skin:"activity/common_btn1.png",sizeGrid:"42,42,42,42",height:120,anchorY:.5,anchorX:.5},compId:24,child:[{type:"Label",props:{width:407,var:"lbl_share",valign:"middle",text:"双倍领取",strokeColor:"#b47516",stroke:3,pivotY:24,pivotX:249,height:47,fontSize:42,font:"黑体",color:"#ffffff",centerY:0,centerX:0,bold:!0,align:"center"},compId:28},{type:"Image",props:{x:407,visible:!1,var:"img_share_coin",skin:"activity/icon_gold.png",scaleY:.7,scaleX:.7,centerY:-3},compId:64},{type:"Image",props:{x:407,visible:!1,var:"img_share_zs",skin:"activity/icon_diamond.png",scaleY:.7,scaleX:.7,centerY:-3},compId:66}]}]}],loadList:["activity/common_bg5.png","activity/nn1.png","activity/bg_nn2.png","activity/nn5.png","activity/btn_close.png","activity/nn3.png","activity/icon_diamond.png","activity/hook.png","activity/icon_gold.png","activity/shop4.png","activity/common_btn1.png"],loadList3D:[]},e.MoonSigninUI=A,q("ui.view.MoonSigninUI",A);class x extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(x.uiView)}}x.uiView={type:"View",props:{width:750,height:1334,centerY:0,centerX:0},compId:2,child:[{type:"Image",props:{top:0,skin:"wxlocal/bg0.png",right:0,left:0,bottom:0},compId:3},{type:"Image",props:{width:602,var:"b",top:0,left:148,height:187},compId:4},{type:"Sprite",props:{y:233,x:0,width:750,texture:"activity/bg_006.png",height:51},compId:65},{type:"List",props:{width:715,var:"listskin",top:330,spaceY:30,spaceX:30,repeatX:3,name:"render",left:19,height:1005,bottom:0},compId:31,child:[{type:"Box",props:{y:0,x:0,renderType:"render"},compId:62,child:[{type:"Image",props:{y:0,x:0,skin:"activity/bg_003.png"},compId:60},{type:"Image",props:{y:41,x:39,width:140,var:"img",skin:"gskin/Ball11.png",name:"img",height:140},compId:61},{type:"Box",props:{y:41,x:45,visible:!1,var:"basket",scaleY:1.3,scaleX:1.3,name:"basket"},compId:106,child:[{type:"Image",props:{var:"one",skin:"gskin/Basket0_0.png",name:"one"},compId:107},{type:"Image",props:{var:"two",skin:"gskin/Basket0_1.png",name:"two"},compId:108}]},{type:"Image",props:{y:11.5,x:7.5,width:202,var:"skinbg",skin:"activity/z8.png",name:"skinbg",height:194},compId:75},{type:"Image",props:{y:141,x:121,visible:!1,var:"imgxuan",skin:"activity/hook.png",scaleY:.7,scaleX:.7,name:"imgxuan"},compId:115},{type:"Text",props:{y:161,x:8,width:202,valign:"middle",text:"20关解锁",strokeColor:"#b22724",stroke:4,name:"txt_lock",height:32,fontSize:28,font:"黑体",color:"#ffffff",align:"center",runtime:"laya.display.Text"},compId:116},{type:"Button",props:{y:137,x:16,width:183,stateNum:1,skin:"activity/common_btn1.png",name:"btn_video",height:78},compId:117,child:[{type:"Label",props:{y:23,x:68,width:94,text:"解锁",name:"txt_video",height:30,fontSize:30,font:"黑体",color:"#ffffff",bold:!0,align:"center"},compId:119},{type:"Sprite",props:{y:14.5,x:14,texture:"activity/icvideo2.png",scaleY:.8,scaleX:.8},compId:118}]}]}]},{type:"Sprite",props:{y:68,x:232.5,texture:"gui/bg_004.png"},compId:63},{type:"Button",props:{y:60,x:35,width:82,var:"btn_jiesu",stateNum:1,skin:"activity/btn_close.png",height:82},compId:64},{type:"Button",props:{y:198,x:13,var:"btn_ball",stateNum:1,skin:"gui/btn_002.png"},compId:66,child:[{type:"Label",props:{y:40,x:11.5,width:155,var:"lab_ball",valign:"middle",text:"球",height:40,fontSize:35,font:"黑体",color:"#ffffd4",bold:!0,align:"center"},compId:56}]},{type:"Button",props:{y:198,x:195,var:"btn_wings",stateNum:1,skin:"gui/btn_003.png"},compId:67,child:[{type:"Label",props:{y:60,x:89,width:158,var:"lab_wings",valign:"middle",text:"翅膀",pivotY:22,pivotX:79,height:43,fontSize:35,font:"黑体",color:"#ffffd4",bold:!0,align:"center"},compId:52}]},{type:"Button",props:{y:198,x:377,var:"btn_basket",stateNum:1,skin:"gui/btn_003.png"},compId:68,child:[{type:"Label",props:{y:60,x:89,width:156,var:"lab_basket",valign:"middle",text:"篮圈",pivotY:19,pivotX:78,height:38,fontSize:35,font:"黑体",color:"#ffffd4",bold:!0,align:"center"},compId:54}]},{type:"Button",props:{y:198,x:559,var:"btn_flame",stateNum:1,skin:"gui/btn_003.png"},compId:69,child:[{type:"Label",props:{y:60,x:89,width:156,var:"lab_flame",valign:"middle",text:"火焰",pivotY:18,pivotX:78,height:35,fontSize:35,font:"黑体",color:"#ffffd4",bold:!0,align:"center"},compId:53}]},{type:"Image",props:{y:0,x:0,visible:!1,var:"dialogb",top:0,skin:"activity/common_bg5.png",sizeGrid:"2,2,2,2",right:0,left:0,bottom:0,alpha:1},compId:111},{type:"Box",props:{y:329.5,x:40,width:674,visible:!1,var:"check",height:675},compId:76,child:[{type:"Image",props:{y:0,x:0,width:668,visible:!0,skin:"activity/nn1.png",height:648},compId:89,child:[{type:"Image",props:{y:12,x:11,width:646,skin:"activity/bg_nn2.png",height:488},compId:90,child:[{type:"Label",props:{y:12,x:86.5,width:473,var:"txt_title",valign:"middle",text:"解锁条件",height:64,fontSize:42,font:"黑体",color:"#ffffff",align:"center"},compId:91}]},{type:"Button",props:{y:512,x:78.5,width:509,var:"btn_check",stateNum:1,skin:"activity/common_btn1.png",height:117},compId:92,child:[{type:"Label",props:{y:35.5,x:208,var:"txt_check",text:"确定",strokeColor:"#a86013",stroke:3,fontSize:42,font:"黑体",color:"#ffffff",bold:!0},compId:94}]},{type:"Image",props:{width:185,var:"buy",skin:"gskin/Ball0.png",height:185,centerY:-57,centerX:0},compId:95},{type:"Label",props:{y:410,x:16,wordWrap:!0,width:636,var:"lbl_cost",valign:"middle",text:"花费100金币购买",height:55,fontSize:34,font:"黑体",color:"#8e4f25",bold:!0,align:"center"},compId:96},{type:"Image",props:{y:28,x:554.5,var:"btn_close",skin:"activity/btn_close.png"},compId:102},{type:"Box",props:{y:206,x:267,visible:!1,var:"diabas",scaleY:1.4,scaleX:1.4},compId:112,child:[{type:"Image",props:{var:"first",skin:"gskin/Basket0_0.png",name:"first"},compId:113},{type:"Image",props:{var:"second",skin:"gskin/Basket0_1.png",name:"second"},compId:114}]}]}]}],loadList:["wxlocal/bg0.png","activity/bg_006.png","activity/bg_003.png","gskin/Ball11.png","gskin/Basket0_0.png","gskin/Basket0_1.png","activity/z8.png","activity/hook.png","activity/common_btn1.png","activity/icvideo2.png","gui/bg_004.png","activity/btn_close.png","gui/btn_002.png","gui/btn_003.png","activity/common_bg5.png","activity/nn1.png","activity/bg_nn2.png","gskin/Ball0.png"],loadList3D:[]},e.MoonSkinUI=x,q("ui.view.MoonSkinUI",x);class T extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(T.uiView)}}T.uiView={type:"View",props:{width:750,height:1334},compId:2,child:[{type:"Image",props:{var:"b",top:0,skin:"activity/common_bg5.png",sizeGrid:"2,2,2,2",right:0,left:0,bottom:0,alpha:1},compId:4},{type:"Box",props:{centerY:-145,centerX:0,anchorY:.5,anchorX:.5},compId:6,child:[{type:"Animation",props:{var:"getAni",source:"animation/fx_unlock.ani"},compId:21}]},{type:"Image",props:{y:548,x:401,width:179,var:"img_ball",skin:"gskin/Ball0.png",height:179,centerY:-145,centerX:0,anchorY:.5,anchorX:.5},compId:5,child:[{type:"Image",props:{y:-1,x:0,width:179,visible:!1,var:"img_basket",skin:"gskin/Basket5_1.png",height:179},compId:10}]},{type:"Box",props:{y:377,x:375,centerY:-145,centerX:0,anchorY:.5,anchorX:.5},compId:25,child:[{type:"Animation",props:{var:"lockAni",source:"animation/fx_glow.ani"},compId:27}]},{type:"Box",props:{y:167,width:570,var:"lock_normal",height:847,centerX:0},compId:29,child:[{type:"Image",props:{var:"tip1",skin:"activity/z11.png",centerY:-424,centerX:0},compId:24},{type:"Label",props:{wordWrap:!0,width:389,var:"lab_dialog1",text:"恭喜解锁新皮肤!点击购买",leading:10,height:70,fontSize:50,color:"#ffffff",centerY:236,centerX:0,anchorY:.5,anchorX:.5,align:"center"},compId:7},{type:"Button",props:{y:754,width:385,var:"btn_check",stateNum:1,skin:"activity/common_btn1.png",height:117,centerX:0},compId:11,child:[{type:"Label",props:{y:32.5,x:159,width:182,var:"lab_coin",valign:"middle",text:"50000",strokeColor:"#a86013",stroke:3,height:52,fontSize:52,font:"黑体",color:"#ffffff",bold:!0,align:"center"},compId:12},{type:"Sprite",props:{y:17,x:64,width:106,texture:"activity/icon_gold.png",scaleY:.8,scaleX:.8,height:108},compId:13}]}]},{type:"Box",props:{y:191,width:571,visible:!1,var:"lock_video",height:835,centerX:0},compId:30,child:[{type:"Button",props:{y:730,width:385,visible:!0,var:"btn_video",stateNum:1,skin:"activity/common_btn1.png",height:117,centerX:0},compId:14,child:[{type:"Label",props:{y:30,x:145,text:"免费获得",strokeColor:"#a86013",stroke:3,fontSize:52,font:"黑体",color:"#ffffff",bold:!0},compId:15},{type:"Sprite",props:{y:11,x:41,width:106,texture:"activity/icvideo2.png",scaleY:.8,scaleX:.8,height:108},compId:16}]},{type:"Label",props:{wordWrap:!0,width:389,visible:!0,var:"lab_dialog2",valign:"middle",text:"哇噢,爆出了绝版皮肤!",strokeColor:"#235cef",stroke:2,height:90,fontSize:32,font:"SimHei",color:"#ffffff",centerY:216,centerX:0,bold:!0,anchorY:.5,anchorX:.5,align:"center"},compId:20},{type:"Image",props:{y:-181,visible:!0,var:"tip2",skin:"activity/z10.png",centerY:-447,centerX:0},compId:23}]},{type:"Label",props:{wordWrap:!0,width:389,text:"点击任意区域关闭",leading:10,height:70,fontSize:30,color:"#ffffff",centerY:441,centerX:0,anchorY:.5,anchorX:.5,align:"center"},compId:31}],animations:[{nodes:[{target:5,keyframes:{skewY:[{value:0,tweenMethod:"linearNone",tween:!0,target:5,key:"skewY",index:0},{value:0,tweenMethod:"linearNone",tween:!0,target:5,key:"skewY",index:13}],skewX:[{value:0,tweenMethod:"linearNone",tween:!0,target:5,key:"skewX",index:0},{value:0,tweenMethod:"linearNone",tween:!0,target:5,key:"skewX",index:13}],scaleY:[{value:0,tweenMethod:"linearNone",tween:!0,target:5,key:"scaleY",index:0},{value:1,tweenMethod:"linearNone",tween:!0,target:5,key:"scaleY",index:13},{value:.8,tweenMethod:"linearNone",tween:!0,target:5,key:"scaleY",index:17},{value:.8,tweenMethod:"linearNone",tween:!0,target:5,label:null,key:"scaleY",index:20}],scaleX:[{value:0,tweenMethod:"linearNone",tween:!0,target:5,key:"scaleX",index:0},{value:1,tweenMethod:"linearNone",tween:!0,target:5,key:"scaleX",index:13},{value:.8,tweenMethod:"linearNone",tween:!0,target:5,key:"scaleX",index:17},{value:.8,tweenMethod:"linearNone",tween:!0,target:5,label:null,key:"scaleX",index:20}],rotation:[{value:0,tweenMethod:"linearNone",tween:!0,target:5,key:"rotation",index:0},{value:0,tweenMethod:"linearNone",tween:!0,target:5,key:"rotation",index:17},{value:0,tweenMethod:"linearNone",tween:!0,target:5,key:"rotation",index:20},{value:-30,tweenMethod:"linearNone",tween:!0,target:5,key:"rotation",index:24},{value:30,tweenMethod:"linearNone",tween:!0,target:5,key:"rotation",index:29},{value:0,tweenMethod:"linearNone",tween:!0,target:5,key:"rotation",index:34}]}},{target:7,keyframes:{wordWrap:[{value:!0,tweenMethod:"linearNone",tween:!1,target:7,key:"wordWrap",index:0},{value:!0,tweenMethod:"linearNone",tween:!1,target:7,key:"wordWrap",index:34}],strokeColor:[{value:"#235cef",tweenMethod:"linearNone",tween:!1,target:7,key:"strokeColor",index:0},{value:"#235cef",tweenMethod:"linearNone",tween:!1,target:7,key:"strokeColor",index:13},{value:"#235cef",tweenMethod:"linearNone",tween:!1,target:7,key:"strokeColor",index:33}],stroke:[{value:2,tweenMethod:"linearNone",tween:!0,target:7,key:"stroke",index:0},{value:2,tweenMethod:"linearNone",tween:!0,target:7,key:"stroke",index:13},{value:2,tweenMethod:"linearNone",tween:!0,target:7,key:"stroke",index:33}],scaleY:[{value:0,tweenMethod:"linearNone",tween:!0,target:7,key:"scaleY",index:0},{value:1,tweenMethod:"linearNone",tween:!0,target:7,key:"scaleY",index:13},{value:.8,tweenMethod:"linearNone",tween:!0,target:7,key:"scaleY",index:17}],scaleX:[{value:0,tweenMethod:"linearNone",tween:!0,target:7,key:"scaleX",index:0},{value:1,tweenMethod:"linearNone",tween:!0,target:7,key:"scaleX",index:13},{value:.8,tweenMethod:"linearNone",tween:!0,target:7,key:"scaleX",index:17}],font:[{value:"SimSun",tweenMethod:"linearNone",tween:!1,target:7,key:"font",index:0},{value:"SimSun",tweenMethod:"linearNone",tween:!1,target:7,key:"font",index:13},{value:"SimSun",tweenMethod:"linearNone",tween:!1,target:7,key:"font",index:33}],bold:[{value:!0,tweenMethod:"linearNone",tween:!1,target:7,key:"bold",index:0},{value:!0,tweenMethod:"linearNone",tween:!1,target:7,key:"bold",index:13},{value:!0,tweenMethod:"linearNone",tween:!1,target:7,key:"bold",index:33}]}},{target:25,keyframes:{visible:[{value:!1,tweenMethod:"linearNone",tween:!1,target:25,key:"visible",index:0}]}},{target:20,keyframes:{y:[{value:654,tweenMethod:"linearNone",tween:!0,target:20,key:"y",index:0}],x:[{value:285,tweenMethod:"linearNone",tween:!0,target:20,key:"x",index:0}],width:[{value:389,tweenMethod:"linearNone",tween:!0,target:20,key:"width",index:0},{value:445,tweenMethod:"linearNone",tween:!0,target:20,key:"width",index:10}],text:[{value:"哇噢,爆出了绝版皮肤!",tweenMethod:"linearNone",tween:!1,target:20,key:"text",index:0},{value:"哇噢,爆出了绝版皮肤!",tweenMethod:"linearNone",tween:!1,target:20,key:"text",index:10}],scaleY:[{value:0,tweenMethod:"linearNone",tween:!0,target:20,key:"scaleY",index:0},{value:1,tweenMethod:"linearNone",tween:!0,target:20,key:"scaleY",index:10}],scaleX:[{value:0,tweenMethod:"linearNone",tween:!0,target:20,key:"scaleX",index:0},{value:1,tweenMethod:"linearNone",tween:!0,target:20,key:"scaleX",index:10}],leading:[{value:0,tweenMethod:"linearNone",tween:!0,target:20,key:"leading",index:0},{value:10,tweenMethod:"linearNone",tween:!0,target:20,key:"leading",index:10}],fontSize:[{value:32,tweenMethod:"linearNone",tween:!0,target:20,key:"fontSize",index:0},{value:46,tweenMethod:"linearNone",tween:!0,target:20,key:"fontSize",index:10}],anchorY:[{value:.5,tweenMethod:"linearNone",tween:!0,target:20,key:"anchorY",index:0}],anchorX:[{value:.5,tweenMethod:"linearNone",tween:!0,target:20,key:"anchorX",index:0}],align:[{value:"center",tweenMethod:"linearNone",tween:!1,target:20,key:"align",index:0},{value:"center",tweenMethod:"linearNone",tween:!1,target:20,key:"align",index:10}]}}],name:"ani1",id:1,frameRate:30,action:0}],loadList:["activity/common_bg5.png","animation/fx_unlock.ani","gskin/Ball0.png","gskin/Basket5_1.png","animation/fx_glow.ani","activity/z11.png","activity/common_btn1.png","activity/icon_gold.png","activity/icvideo2.png","activity/z10.png"],loadList3D:[]},e.MoonSkinTipUI=T,q("ui.view.MoonSkinTipUI",T);class b extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(b.uiView)}}b.uiView={type:"View",props:{width:750,height:1334},compId:2,child:[{type:"Image",props:{var:"b",top:0,skin:"activity/common_bg5.png",sizeGrid:"2,2,2,2",right:0,left:0,bottom:0,alpha:1},compId:3},{type:"Image",props:{width:670,skin:"activity/nn1.png",height:648,centerY:0,centerX:5},compId:4,child:[{type:"Image",props:{y:12,x:11,width:646,skin:"activity/bg_nn2.png",height:488},compId:5,child:[{type:"Label",props:{y:12,x:86.5,width:473,var:"txt_title",valign:"middle",text:"空投补给箱",height:64,fontSize:42,font:"黑体",color:"#ffffff",align:"center"},compId:6}]},{type:"Button",props:{y:512,x:78.5,width:509,var:"btn_play",stateNum:1,skin:"activity/common_btn1.png",height:117},compId:7,child:[{type:"Image",props:{y:27,x:138,width:57,skin:"activity/icvideo2.png",height:57},compId:8},{type:"Label",props:{y:35.5,x:208,var:"txt_open",text:"立即打开",strokeColor:"#a86013",stroke:3,fontSize:42,font:"黑体",color:"#ffffff",bold:!0},compId:9}]},{type:"Image",props:{y:140,x:146.5,skin:"activity/supply_img.png"},compId:10},{type:"Label",props:{y:379,x:15.5,wordWrap:!0,width:636,var:"txt_info1",valign:"middle",text:"发现大量空投补给箱!",height:55,fontSize:34,font:"黑体",color:"#8e4f25",bold:!0,align:"center"},compId:11},{type:"Label",props:{y:429,x:16.5,wordWrap:!0,width:636,var:"txt_info2",valign:"middle",text:"打开可获得大量钻石和金币",height:55,fontSize:34,font:"黑体",color:"#8e4f25",bold:!0,align:"center"},compId:12},{type:"Sprite",props:{y:-25,x:85.5,texture:"activity/nn5.png"},compId:13},{type:"Sprite",props:{y:24,x:574,var:"btn_close",texture:"activity/btn_close.png"},compId:14},{type:"Sprite",props:{y:-26,x:509,texture:"activity/nn5.png"},compId:15}]}],loadList:["activity/common_bg5.png","activity/nn1.png","activity/bg_nn2.png","activity/common_btn1.png","activity/icvideo2.png","activity/supply_img.png","activity/nn5.png","activity/btn_close.png"],loadList3D:[]},e.MoonSupplyUI=b,q("ui.view.MoonSupplyUI",b);class R extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(R.uiView)}}R.uiView={type:"View",props:{width:750,height:1334},compId:2,child:[{type:"Image",props:{width:100,var:"bg",skin:"common/common_bg3.png",sizeGrid:"18,14,18,16",height:100,centerY:0,centerX:0,alpha:.7},compId:7,child:[{type:"Box",props:{visible:!1,var:"box_txt",top:0,right:0,left:0,bottom:0},compId:9,child:[{type:"Label",props:{y:0,x:-325,width:750,var:"content",valign:"middle",text:"show me the money",height:100,fontSize:40,color:"#ffffff",centerY:0,centerX:0,align:"center"},compId:4}]},{type:"Box",props:{y:0,x:0,visible:!1,var:"box_icon",top:0,right:0,left:0,bottom:0},compId:10,child:[{type:"Image",props:{y:26,width:48,var:"img_icon",left:20,height:48,centerY:0},compId:8},{type:"Label",props:{y:0,var:"lbl_icon",valign:"middle",text:"show me the money",right:0,left:80,height:100,fontSize:40,color:"#ffffff",centerY:0,align:"center"},compId:11}]}]}],loadList:["common/common_bg3.png"],loadList3D:[]},e.MoonTipUI=R,q("ui.view.MoonTipUI",R);class M extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(M.uiView)}}M.uiView={type:"View",props:{width:750,mouseThrough:!0,height:1336},compId:2,child:[{type:"Box",props:{var:"money",top:65,left:45,height:56},compId:3,child:[{type:"Image",props:{y:0,x:-27,width:178,skin:"activity/add_top_bg.png",height:41},compId:4},{type:"Image",props:{y:20,x:-8,var:"img_money",skin:"activity/icon_gold.png",anchorY:.5,anchorX:.5},compId:6},{type:"Label",props:{y:21,x:64,var:"txt_money",valign:"middle",text:"999.9K",fontSize:28,font:"黑体",color:"#ffffff",bold:!0,anchorY:.5,anchorX:.5,align:"center"},compId:7},{type:"Box",props:{y:-18.5,x:89,width:83,var:"btn_addmoney",height:79},compId:14,child:[{type:"Image",props:{y:22.5,x:24.5,width:34,var:"btn",skin:"activity/plus.png",height:34},compId:5}]}]},{type:"Box",props:{y:0,x:0,width:226,visible:!1,var:"gem",top:44,left:268,height:56},compId:8,child:[{type:"Image",props:{skin:"activity/add_top_bg.png"},compId:9},{type:"Image",props:{y:25,x:31,width:60,var:"img_gem",skin:"activity/icon_diamond.png",pivotY:30,pivotX:30,height:60},compId:11},{type:"Label",props:{y:5,x:52,width:126,var:"txt_gem",valign:"middle",text:"9999",height:42,fontSize:36,font:"黑体",color:"#7b3d1f",bold:!0,align:"center"},compId:12},{type:"Box",props:{y:-17,x:129,width:110,var:"btn_addgem",height:85},compId:15,child:[{type:"Image",props:{y:25.5,x:47,skin:"activity/plus.png"},compId:10}]}]}],loadList:["activity/add_top_bg.png","activity/icon_gold.png","activity/plus.png","activity/icon_diamond.png"],loadList3D:[]},e.MoonTopBarUI=M,q("ui.view.MoonTopBarUI",M);class C extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(C.uiView)}}C.uiView={type:"View",props:{width:750,height:1334},compId:2,child:[{type:"Box",props:{y:329,x:40,width:674,visible:!1,var:"check",height:675},compId:3,child:[{type:"Image",props:{y:0,x:0,width:668,visible:!0,skin:"activity/nn1.png",height:648},compId:4,child:[{type:"Image",props:{y:12,x:11,width:646,skin:"activity/bg_nn2.png",height:488},compId:5,child:[{type:"Label",props:{y:12,x:86.5,width:473,valign:"middle",text:"解锁条件",height:64,fontSize:42,font:"黑体",color:"#ffffff",align:"center"},compId:6}]},{type:"Button",props:{y:512,x:78.5,width:509,var:"btn_check",stateNum:1,skin:"activity/common_btn1.png",height:117},compId:7,child:[{type:"Label",props:{y:35.5,x:208,text:"确定",strokeColor:"#a86013",stroke:3,fontSize:42,font:"黑体",color:"#ffffff",bold:!0},compId:8}]},{type:"Image",props:{var:"buy",skin:"gskin/Ball0.png",centerY:-40,centerX:0},compId:9},{type:"Label",props:{y:410,x:16,wordWrap:!0,width:636,var:"lbl_cost",valign:"middle",text:"花费100金币购买",height:55,fontSize:34,font:"黑体",color:"#8e4f25",bold:!0,align:"center"},compId:10},{type:"Image",props:{y:28,x:554.5,var:"btn_close",skin:"activity/btn_close.png"},compId:11},{type:"Box",props:{y:169,x:247,visible:!1,var:"diabas",scaleY:.7,scaleX:.7},compId:12,child:[{type:"Image",props:{var:"first",skin:"gskin/Basket0_0.png",name:"first"},compId:13},{type:"Image",props:{var:"second",skin:"gskin/Basket0_1.png",name:"second"},compId:14}]}]}]}],loadList:["activity/nn1.png","activity/bg_nn2.png","activity/common_btn1.png","gskin/Ball0.png","activity/btn_close.png","gskin/Basket0_0.png","gskin/Basket0_1.png"],loadList3D:[]},e.UnlockInfoUI=C,q("ui.view.UnlockInfoUI",C)}(e.view||(e.view={}))}(O||(O={})),function(e){!function(e){class t extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(t.uiView)}}t.uiView={type:"View",props:{width:1334,top:0,right:0,left:0,height:750,bottom:0},compId:2,child:[{type:"Box",props:{y:10,x:10,var:"panel_close",top:-1,right:0,left:0,bottom:0,bgColor:"#000000",alpha:.7},compId:252},{type:"Image",props:{y:20,x:20,skin:"diy/bg_diy_01.png",centerY:7,centerX:0},compId:254,child:[{type:"Image",props:{y:-16,x:178,skin:"diy/img_diy_07.png",centerY:-276,centerX:0},compId:255,child:[{type:"Label",props:{y:42,x:190,text:"提示",fontSize:46,color:"#0198E1",bold:!0,anchorY:.5,anchorX:.5},compId:256}]},{type:"Label",props:{y:144,x:107,width:503,var:"lbl_content",text:"网络状况不佳，请检查网络后\\n重新进入游戏",leading:15,height:153,fontSize:39,color:"#3f94be"},compId:259},{type:"Button",props:{y:434,x:242.5,var:"btn_try",stateNum:1,skin:"diy/btn_diy_05.png",labelSize:40,labelPadding:"0,0,10,0",labelColors:"#20902d",labelBold:!0,label:"重试"},compId:260}]}],animations:[{nodes:[{target:229,keyframes:{y:[{value:458,tweenMethod:"linearNone",tween:!0,target:229,key:"y",index:0},{value:464,tweenMethod:"linearNone",tween:!0,target:229,key:"y",index:10},{value:443,tweenMethod:"linearNone",tween:!0,target:229,key:"y",index:20},{value:447,tweenMethod:"linearNone",tween:!0,target:229,key:"y",index:30},{value:458,tweenMethod:"linearNone",tween:!0,target:229,label:null,key:"y",index:40}],x:[{value:1015,tweenMethod:"linearNone",tween:!0,target:229,key:"x",index:0},{value:997,tweenMethod:"linearNone",tween:!0,target:229,key:"x",index:10},{value:993,tweenMethod:"linearNone",tween:!0,target:229,key:"x",index:20},{value:1018,tweenMethod:"linearNone",tween:!0,target:229,key:"x",index:30},{value:1015,tweenMethod:"linearNone",tween:!0,target:229,label:null,key:"x",index:40}],rotation:[{value:0,tweenMethod:"linearNone",tween:!0,target:229,key:"rotation",index:0},{value:0,tweenMethod:"linearNone",tween:!0,target:229,label:null,key:"rotation",index:40}]}},{target:234,keyframes:{y:[{value:375,tweenMethod:"linearNone",tween:!0,target:234,key:"y",index:0},{value:364,tweenMethod:"linearNone",tween:!0,target:234,key:"y",index:10},{value:375,tweenMethod:"linearNone",tween:!0,target:234,label:null,key:"y",index:20},{value:394,tweenMethod:"linearNone",tween:!0,target:234,key:"y",index:30},{value:375,tweenMethod:"linearNone",tween:!0,target:234,label:null,key:"y",index:40}],x:[{value:91.5,tweenMethod:"linearNone",tween:!0,target:234,key:"x",index:0},{value:91.5,tweenMethod:"linearNone",tween:!0,target:234,label:null,key:"x",index:20},{value:91.5,tweenMethod:"linearNone",tween:!0,target:234,label:null,key:"x",index:40}]}},{target:230,keyframes:{y:[{value:570,tweenMethod:"linearNone",tween:!0,target:230,key:"y",index:0},{value:560,tweenMethod:"linearNone",tween:!0,target:230,key:"y",index:10},{value:570,tweenMethod:"linearNone",tween:!0,target:230,label:null,key:"y",index:20},{value:580,tweenMethod:"linearNone",tween:!0,target:230,key:"y",index:30},{value:570,tweenMethod:"linearNone",tween:!0,target:230,label:null,key:"y",index:40}],x:[{value:284,tweenMethod:"linearNone",tween:!0,target:230,key:"x",index:0},{value:284,tweenMethod:"linearNone",tween:!0,target:230,label:null,key:"x",index:20},{value:284,tweenMethod:"linearNone",tween:!0,target:230,label:null,key:"x",index:40}]}},{target:231,keyframes:{y:[{value:327,tweenMethod:"linearNone",tween:!0,target:231,key:"y",index:0},{value:316,tweenMethod:"linearNone",tween:!0,target:231,key:"y",index:10},{value:327,tweenMethod:"linearNone",tween:!0,target:231,label:null,key:"y",index:20},{value:337,tweenMethod:"linearNone",tween:!0,target:231,key:"y",index:30},{value:327,tweenMethod:"linearNone",tween:!0,target:231,label:null,key:"y",index:40}],x:[{value:1202,tweenMethod:"linearNone",tween:!0,target:231,key:"x",index:0},{value:1202,tweenMethod:"linearNone",tween:!0,target:231,label:null,key:"x",index:20},{value:1202.5,tweenMethod:"linearNone",tween:!0,target:231,key:"x",index:30},{value:1202,tweenMethod:"linearNone",tween:!0,target:231,label:null,key:"x",index:40}]}},{target:232,keyframes:{y:[{value:166,tweenMethod:"linearNone",tween:!0,target:232,key:"y",index:0},{value:151,tweenMethod:"linearNone",tween:!0,target:232,key:"y",index:10},{value:166,tweenMethod:"linearNone",tween:!0,target:232,label:null,key:"y",index:20},{value:175,tweenMethod:"linearNone",tween:!0,target:232,key:"y",index:30},{value:166,tweenMethod:"linearNone",tween:!0,target:232,label:null,key:"y",index:40}]}},{target:236,keyframes:{y:[{value:39.5,tweenMethod:"linearNone",tween:!0,target:236,key:"y",index:0},{value:33,tweenMethod:"linearNone",tween:!0,target:236,key:"y",index:20},{value:15.5,tweenMethod:"linearNone",tween:!0,target:236,key:"y",index:30},{value:39.5,tweenMethod:"linearNone",tween:!0,target:236,label:null,key:"y",index:40}],x:[{value:1176.5,tweenMethod:"linearNone",tween:!0,target:236,key:"x",index:0},{value:1188,tweenMethod:"linearNone",tween:!0,target:236,key:"x",index:10},{value:1186,tweenMethod:"linearNone",tween:!0,target:236,key:"x",index:20},{value:1167,tweenMethod:"linearNone",tween:!0,target:236,key:"x",index:30},{value:1176.5,tweenMethod:"linearNone",tween:!0,target:236,label:null,key:"x",index:40}]}},{target:233,keyframes:{y:[{value:127,tweenMethod:"linearNone",tween:!0,target:233,key:"y",index:0},{value:105,tweenMethod:"linearNone",tween:!0,target:233,key:"y",index:20},{value:127,tweenMethod:"linearNone",tween:!0,target:233,label:null,key:"y",index:40}],x:[{value:288,tweenMethod:"linearNone",tween:!0,target:233,key:"x",index:0},{value:271,tweenMethod:"linearNone",tween:!0,target:233,key:"x",index:10},{value:260,tweenMethod:"linearNone",tween:!0,target:233,key:"x",index:20},{value:284,tweenMethod:"linearNone",tween:!0,target:233,key:"x",index:30},{value:288,tweenMethod:"linearNone",tween:!0,target:233,label:null,key:"x",index:40}]}},{target:235,keyframes:{x:[{value:119,tweenMethod:"linearNone",tween:!0,target:235,key:"x",index:0},{value:119,tweenMethod:"linearNone",tween:!0,target:235,key:"x",index:40}],rotation:[{value:0,tweenMethod:"linearNone",tween:!0,target:235,key:"rotation",index:0},{value:16,tweenMethod:"linearNone",tween:!0,target:235,key:"rotation",index:10},{value:0,tweenMethod:"linearNone",tween:!0,target:235,key:"rotation",index:20},{value:16,tweenMethod:"linearNone",tween:!0,target:235,key:"rotation",index:30},{value:0,tweenMethod:"linearNone",tween:!0,target:235,key:"rotation",index:40}]}}],name:"ani1",id:1,frameRate:24,action:0}],loadList:["diy/bg_diy_01.png","diy/img_diy_07.png","diy/btn_diy_05.png"],loadList3D:[]},e.MoonConfirmUI=t,q("ui.wxlocal.MoonConfirmUI",t);class i extends Laya.View{constructor(){super()}createChildren(){super.createChildren(),this.createView(i.uiView)}}i.uiView={type:"View",props:{width:750,top:0,right:0,left:0,height:1334,bottom:0},compId:2,child:[{type:"Image",props:{var:"img_bg",top:0,skin:"wxlocal/bg0.png",right:0,left:0,bottom:0},compId:4},{type:"Image",props:{top:0,skin:"loading/beij.jpg",right:0,left:0,bottom:0,sizeGrid:"0,0,899,0"},compId:38},{type:"Image",props:{var:"img_logo",top:232,skin:"wxlocal/logo.png",scaleY:.5,scaleX:.5,centerX:-2,alpha:0},compId:8},{type:"Box",props:{var:"activity_box",right:0,left:0,height:480,centerY:80},compId:33},{type:"Box",props:{right:0,left:0,height:200,bottom:260},compId:19,child:[{type:"Image",props:{width:463,skin:"wxlocal/loadBg.png",sizeGrid:"0,1,0,1",height:18,centerX:0,bottom:0},compId:13},{type:"Image",props:{width:463,skin:"wxlocal/loadBar.png",sizeGrid:"0,1,0,1",height:18,centerX:0,bottom:0},compId:15,child:[{type:"Image",props:{width:463,var:"bar",skin:"wxlocal/loadBar.png",sizeGrid:"0,1,0,1",renderType:"mask",height:18,centerY:0,centerX:0},compId:16}]},{type:"Text",props:{y:145,x:540,var:"tPgs",valign:"middle",text:"100%",fontSize:25,font:"Microsoft YaHei",color:"#000000",bold:!0,align:"center",runtime:"laya.display.Text"},compId:17},{type:"Label",props:{width:250,var:"loadinglbl",valign:"middle",text:"加载中...",left:185,fontSize:25,font:"Microsoft YaHei",color:"#000000",bottom:30,align:"left"},compId:24},{type:"Animation",props:{y:157.5,x:157,var:"loadcricle",source:"wxlocal/loadcricle.ani",autoPlay:!0},compId:32}]},{type:"Box",props:{right:0,left:0,height:200,bottom:0,alpha:0},compId:27,child:[{type:"Label",props:{wordWrap:!1,width:134,valign:"top",text:"版本:",right:50,overflow:"scroll",height:46,fontSize:25,font:"Microsoft YaHei",color:"#000000",bottom:10,bold:!0,align:"left"},compId:22},{type:"Label",props:{wordWrap:!1,width:107,var:"version",valign:"top",text:"10",right:0,overflow:"scroll",height:46,fontSize:25,font:"Microsoft YaHei",color:"#000000",bottom:10,bold:!0,align:"left"},compId:23},{type:"Label",props:{width:750,valign:"middle",top:30,text:"抵制不良游戏，拒绝盗版游戏。注意自我保护，谨防受骗上当。",fontSize:23,color:"#000000",centerX:0,align:"center"},compId:25},{type:"Label",props:{width:750,valign:"middle",top:65,text:"适度游戏益脑，沉迷游戏伤身。合理安排时间，享受健康生活。",fontSize:23,color:"#000000",centerX:0,align:"center"},compId:28}]}],loadList:["wxlocal/bg0.png","loading/beij.jpg","wxlocal/logo.png","wxlocal/loadBg.png","wxlocal/loadBar.png","wxlocal/loadcricle.ani"],loadList3D:[]},e.MoonLoadingUI=i,q("ui.wxlocal.MoonLoadingUI",i);class n extends Laya.Scene{constructor(){super()}createChildren(){super.createChildren(),this.createView(n.uiView)}}n.uiView={type:"Scene",props:{width:750,height:1334},compId:2,child:[{type:"Script",props:{runtime:"moon/Start.ts"},compId:8}],loadList:[],loadList3D:[]},e.StartUI=n,q("ui.wxlocal.StartUI",n)}(e.wxlocal||(e.wxlocal={}))}(O||(O={}));class Z{constructor(){}init(e){this.owner=e,this.owner.owner=this}updateOwner(e,t){if(!this.owner)return;this.owner._components;let i=e._components;this.owner._scripts;this.owner=e,this.owner.owner=this;let n=!1,a=i.length;for(let e=0;e<a;e++)if(i[e]instanceof Laya.CharacterController){n=!0;break}n||(this.createBoxCollider(),this.boxCollider.enabled=!0)}destroy(){this.owner&&!this.owner.destroyed&&(this.removeBoxCollider(),this.removeRigidbody(),this.owner.parent&&(this.owner.parent.destroy(),this.owner.removeSelf()),this.owner.destroy(),this.owner=null)}createBoxCollider(){this.boxCollider=this.owner.addComponent(Laya.CharacterController);let e=new Laya.CapsuleColliderShape(.08,.01);e.localOffset=new Laya.Vector3(0,0,0),this.boxCollider.colliderShape=e,this.boxCollider.collisionGroup=Laya.Physics3DUtils.COLLISIONFILTERGROUP_CUSTOMFILTER2,this.boxCollider.canCollideWith=Laya.Physics3DUtils.COLLISIONFILTERGROUP_CUSTOMFILTER3,this.boxCollider.fallSpeed=.2,this.boxCollider.maxSlope=.01,this.boxCollider.gravity=new Laya.Vector3(0,0,0)}removeBoxCollider(){this.boxCollider}set boxColliderEnable(e){e?this.createBoxCollider():this.boxCollider}createRigidbody(){return this.rigidbody,this.rigidbody}removeRigidbody(){this.rigidbody}set rigidbodyEnable(e){}get transform(){return this.owner.transform}set active(e){this.owner&&(this.owner.active=e)}}class Q{constructor(){}static randomRange(e,t){return Math.floor((t-e+1)*Math.random())+e}static randomPointInCicle(e,t,i){let n=Q.randomRange(t,i),a=360*Math.random(),o=new Laya.Point;return o.x=e.x+Math.sin(a*Math.PI/180)*n,o.y=e.y+Math.cos(a*Math.PI/180)*n,o}static parseInt(e){return e>=0?Math.floor(e):Math.ceil(e)}static getDistance(e,t,i,n){var a=e-i,o=t-n;return Math.sqrt(a*a+o*o)}static getAngleTimeT(e){return Number(Laya.timer.currTimer%e/e)*Math.PI}static getAngleByRotaion(e){return e%=e,Math.PI*Number(e/180)}static getAngle(e,t,i,n){i-=e,n-=t;var a=Math.atan2(n,i);return a=a>=0?a:2*Math.PI+a}static getRotation(e){return Math.round(180*Number(e/Math.PI))}static randomBoolen(){return 0==Math.round(Math.random())}static colorMatrix_adjust(e,t){let i=e+1,n=128*(1-i),a=[i,0,0,0,n,0,i,0,0,n,0,0,i,0,n,0,0,0,1,0],o=[1,0,0,0,t*=255,0,1,0,0,t,0,0,1,0,t,0,0,0,1,0];return Q.colorMatrix_concat(a,o)}static colorMatrix_concat(e,t){let i=new Array(20);for(var n=0,a=0;a<4;++a){for(var o=0;o<5;++o)i[n+o]=e[n]*t[o]+e[n+1]*t[o+5]+e[n+2]*t[o+10]+e[n+3]*t[o+15]+(4==o?e[n+4]:0);n+=5}return i}}Q.kTowardCount=8;class ${}$.scpath="scene/Conventional/",$.scene=$.scpath+"main.ls",$.scene_night=$.scpath+"main_night.ls",$.other_scene=$.scpath+"other.ls",$.scene_model=$.scpath+"Assets/model/Materials/",$.scene_role=$.scpath+"Assets/model/role/",$.scene_effect=$.scpath+"Assets/effect/Materials/",$.obstacle_model=$.scpath+"Assets/",$.night_model=$.scpath+"Assets/model/Nightscape/model/",$.fireworks=$.scpath+"fireworks.lh",$.snowflake=$.scpath+"snowflake.lh",$.flag=$.scpath+"flag.lh",$.speed=$.scpath+"speed.lh",$.wudi=$.scpath+"wudi.lh",$.snowball=$.scpath+"snowball.lh",$.accelerate=$.scpath+"accelerate.lh",$.jinbi=$.scpath+"jinbi.lh",$.white=$.scpath+"white.lh",$.whiteHandL=$.scpath+"whiteHandL.lh",$.whiteHandR=$.scpath+"whiteHandR.lh",$.whiteR=$.scpath+"whiteR.lh",$.whiteL=$.scpath+"whiteL.lh",$.green=$.scpath+"green.lh",$.greenHandL=$.scpath+"greenHandL.lh",$.greenHandR=$.scpath+"greenHandR.lh",$.greenR=$.scpath+"greenR.lh",$.greenL=$.scpath+"greenL.lh",$.blue=$.scpath+"blue.lh",$.blueHandL=$.scpath+"blueHandL.lh",$.blueHandR=$.scpath+"blueHandR.lh",$.blueR=$.scpath+"blueR.lh",$.blueL=$.scpath+"blueL.lh",$.purple=$.scpath+"purple.lh",$.purpleHandL=$.scpath+"purpleHandL.lh",$.purpleHandR=$.scpath+"purpleHandR.lh",$.purpleR=$.scpath+"purpleR.lh",$.purpleL=$.scpath+"purpleL.lh",$.orange=$.scpath+"orange.lh",$.orangeHandL=$.scpath+"orangeHandL.lh",$.orangeHandR=$.scpath+"orangeHandR.lh",$.orangeR=$.scpath+"orangeR.lh",$.orangeL=$.scpath+"orangeL.lh",$.red=$.scpath+"red.lh",$.redHandL=$.scpath+"redHandL.lh",$.redHandR=$.scpath+"redHandR.lh",$.redR=$.scpath+"redR.lh",$.redL=$.scpath+"redL.lh",$.preloads=[$.scene,$.other_scene,$.fireworks,$.snowflake,$.flag,$.speed,$.wudi,$.snowball,$.accelerate,$.jinbi,$.white,$.green,$.blue,$.purple,$.orange,$.red,$.whiteHandL,$.whiteHandR,$.whiteR,$.whiteL,$.greenHandL,$.greenHandR,$.greenR,$.greenL,$.blueHandL,$.blueHandR,$.blueR,$.blueL,$.purpleHandL,$.purpleHandR,$.purpleR,$.purpleL,$.orangeHandL,$.orangeHandR,$.orangeR,$.orangeL,$.redHandL,$.redHandR,$.redR,$.redL,"scene/Conventional/d01.lh","scene/Conventional/d02.lh","scene/Conventional/d03.lh","scene/Conventional/role1.ls","scene/Conventional/role2.ls","scene/Conventional/role3.ls"];class J extends Laya.Script{constructor(){super()}}J.ObstacleTypeTemp=[[1,"冰块",[1.2,1,1.3],"Obstacle",0,"Assets/model/SceneElement/Obstacle/iceblock-iceblock.lm","model/SceneElement/Obstacle/ice_cube.jpg","Assets/model/SceneElement/Obstacle/iceblock-iceblock.lm","model/SceneElement/Obstacle/ice_cube.jpg","model/SceneElement/Obstacle/ice_cube_night.lmat"],[2,"冰山",[1.37,2,1],"Obstacle",0,"Assets/model/SceneElement/Obstacle/icewall-icewall.lm","model/SceneElement/Obstacle/icewall.jpg","Assets/model/SceneElement/Obstacle/icewall-icewall.lm","model/SceneElement/Obstacle/icewall.jpg","model/SceneElement/Obstacle/icewall_night.lmat"],[3,"路标",[1.2,3,.9],"Obstacle",0,"Assets/model/SceneElement/Obstacle/signs01-signs01.lm","model/SceneElement/Obstacle/signs01.jpg","Assets/model/SceneElement/Obstacle/signs01-signs01.lm","model/SceneElement/Obstacle/signs01.jpg","model/SceneElement/Obstacle/signs01_night.lmat"],[4,"雪花片",[1,2,1],"SnowFlake",0,"snowflake.lh","effect/Materials/snowflake.jpg","",""],[5,"树",[1,3,1],"Obstacle",0,"Assets/model/SceneElement/tree_snow01-tree_snow01.lm","model/Materials/subastanceall.jpg","",""],[6,"跳台大",[7,3,6],"JumpBig",0,"Assets/model/SceneElement/platform_big-platform.lm","model/Materials/subastanceall.jpg","Assets/model/Nightscape/model/platform_bignight-platform.lm","model/Nightscape/model/platform_smallnight.jpg"],[7,"跳台小",[2.7,3.5,5],"JumpSmall",0,"Assets/model/SceneElement/platform_small-platform_small.lm","model/Materials/subastanceall.jpg","Assets/model/Nightscape/model/platform_smallnight-Platform_small.lm","model/Nightscape/model/platform_smallnight.jpg"],[8,"加速带",[1.27,.02,8],"accelerate",0,"accelerate.lh","model/Materials/subastanceall.jpg","accelerate_night.lh","model/Nightscape/model/platform_smallnight.jpg"],[9,"围栏",[1.3,1.6,.3],"Obstacle",0,"Assets/model/SceneElement/Obstacle/fence-fence.lm","model/SceneElement/Obstacle/fence.jpg","Assets/model/SceneElement/Obstacle/fence-fence.lm","model/SceneElement/Obstacle/fence.jpg","model/SceneElement/Obstacle/fence_night.lmat"],[10,"旗帜",[1.5,4,.6],"Flag",0,"flag.lh","","",""],[11,"雪球",[1.5,1.5,1.5],"Obstacle",1,"snowball.lh","model/Materials/snowball.jpg","",""],[12,"金币",[1,2,1],"gold",0,"jinbi.lh","effect/Materials/jinbi001.png","",""],[13,"雪人",[1.7,2,1.3],"Obstacle",0,"Assets/model/SceneElement/Obstacle/Snowman-Scarlet_Snow_0.lm","model/SceneElement/Obstacle/Snowman.jpg","Assets/model/SceneElement/Obstacle/Snowman-Scarlet_Snow_0.lm","model/SceneElement/Obstacle/Snowman.jpg","model/SceneElement/Obstacle/Snowman_night.lmat"]],J.ObstacleSetTemp=[[1,[[6,0,0,0]],0],[2,[[7,0,0,0]],1],[3,[[7,2,0,0]],1],[4,[[7,-2,0,0]],1],[5,[[7,0,0,0],[4,0,3.5,5]],1],[6,[[7,2,0,0],[4,2,3.5,5]],1],[7,[[7,-2,0,0],[4,-2,3.5,5]],1],[8,[[10,2,0,0]],2],[9,[[10,1,0,0]],2],[10,[[10,0,0,0]],2],[11,[[10,-1,0,0]],2],[12,[[10,-2,0,0]],2],[13,[[9,-1,0,0]],2],[14,[[9,1,0,0]],2],[15,[[3,2,0,0]],2],[16,[[13,-2,0,0]],2],[17,[[4,0,.7,0]],3],[18,[[4,1,.7,0]],3],[19,[[4,-1,.7,0]],3],[20,[[8,0,0,0]],1],[21,[[8,1,0,0]],1],[22,[[8,-1,0,0]],1],[23,[[11,0,.7,0]],1],[24,[[11,4,1,0]],1],[25,[[11,-4,1,0]],1],[26,[[12,0,1,0],[12,0,1,0],[12,0,1,0]],1],[27,[[12,1,1,0],[12,1,1,0],[12,1,1,0]],1],[28,[[12,-1,1,0],[12,-1,1,0],[12,-1,1,0]],1],[29,[[12,0,1,0],[12,0,1,0],[12,0,1,0],[12,0,1,0],[12,0,1,0]],1],[30,[[12,1,1,0],[12,1,1,0],[12,1,1,0],[12,1,1,0],[12,1,1,0]],1],[31,[[12,-1,1,0],[12,-1,1,0],[12,-1,1,0],[12,-1,1,0],[12,-1,1,0]],1],[32,[[9,0,0,0]],2],[33,[[9,2,0,0]],2],[34,[[9,-2,0,0]],2],[35,[[1,0,0,0]],2],[36,[[1,2,0,0]],2],[37,[[1,-1,0,0]],2],[38,[[2,0,0,0]],2],[39,[[2,1,0,0]],2],[40,[[2,-2,0,0]],2],[41,[[3,0,0,0]],2],[42,[[3,1,0,0]],2],[43,[[3,-1,0,0]],2],[44,[[13,0,0,0]],2],[45,[[13,1,0,0]],2],[46,[[13,-1,0,0]],2]],J.MAX_BIG_JUMP=1,J.DST_ANGLEXS=[-20,-25,-30,-35,-40,-50,20,25,30,35,40,50],J.DST_ANGLEYS=[-10,-15,-20,15,10,20],J.ObstacleRandTemp=[[1,600,[1,500],[[-1,-2,-3,-4,1,2,3,4],[-1,1,-1,1]],[3,4]],[2,1e3,[2,20,3,30,4,30,10,20,11,20,12,20,13,20,20,30,21,30,22,30,24,60,27,30,28,30,32,30,33,30,34,30,35,20,36,20,37,20,38,10,39,10,40,10,41,5,42,10,43,10,44,10,45,10,46,10],[[-3,-4,-5,-6,3,4,5,6],[-2,2,-2,2]],[3,4]],[3,2e3,[2,35,3,35,5,35,10,30,11,30,12,30,13,30,17,20,20,40,21,40,22,40,23,60,24,40,25,40,30,40,30,40,32,40,33,40,34,40,35,40,36,40,37,40,38,30,39,30,40,30,41,30,42,30,43,30,44,30,45,30,46,30],[[-5,-8,-10,-12,5,8,10,12],[-4,4,-4,4]],[4,5]],[4,4e3,[2,50,3,50,5,50,8,60,9,60,10,60,11,60,12,60,13,60,18,40,19,40,20,60,21,60,22,60,23,80,24,60,25,60,26,60,27,60,28,60,29,60,30,60,30,60,32,50,33,50,34,50,35,60,36,60,37,60,38,70,39,70,40,70,41,50,42,50,43,50,44,50,45,50,46,90],[[-8,-13,-15,-17,10,13,15,17],[-6,6,-6,6]],[4,5]],[5,7e3,[3,60,4,60,6,60,8,80,9,80,10,80,11,80,12,80,13,80,14,80,15,80,16,80,17,60,18,60,19,60,20,80,21,80,22,80,23,100,25,80,26,80,27,80,28,80,29,80,30,80,30,80,32,60,33,60,34,60,35,70,36,70,37,70,38,80,39,80,40,80,41,70,42,70,43,70,44,100,45,100,46,100],[[-13,-18,-20,-22,15,18,20,22],[-10,10,-10,10]],[5,6]],[6,11e3,[3,80,4,80,7,80,8,100,9,100,10,100,11,100,12,100,13,100,14,100,15,100,16,100,17,80,18,80,19,80,20,100,21,100,22,100,23,120,24,100,26,100,27,100,28,100,29,100,30,100,30,100,32,70,33,70,34,70,35,80,36,80,37,80,38,90,39,90,40,90,41,100,42,100,43,100,44,110,45,110,46,110],[[-18,-23,-25,-27,20,22,25,27],[-14,14,-14,14]],[5,6]],[7,16e3,[3,90,4,90,7,90,8,120,9,120,10,120,11,120,12,120,13,120,14,120,15,120,16,120,17,100,18,100,19,100,20,120,21,120,22,120,23,150,24,100,26,120,27,120,28,120,29,120,30,120,30,120,32,80,33,80,34,80,35,90,36,90,37,90,38,100,39,100,40,100,41,110,42,110,43,110,44,120,45,120,46,120],[[-20,-30,-28,-30,22,25,30,30],[-18,18,-18,18]],[5,6]],[8,2e4,[3,90,4,90,7,90,8,120,9,120,10,120,11,120,12,120,13,120,14,120,15,120,16,120,17,100,18,100,19,100,20,120,21,120,22,120,23,200,24,100,26,120,27,120,28,120,29,120,30,120,30,120,32,80,33,80,34,80,35,90,36,90,37,90,38,100,39,100,40,100,41,110,42,110,43,110,44,150,45,150,46,150],[[-25,-35,-32,-35,25,30,35,35],[-20,20,-20,20]],[5,6]]],J.TYPE_SKIN_PLAYER=0,J.TYPE_SKIN_FLAG=1,J.TYPE_SKIN_TRAIL=2,J.MAX_POWER=5,J.MAX_LIFE=1,J.SPEED_BASE=.015,J.SPEED_MAX=.03,J.SPEED_SKIN_MAX=.025,J.SPEED_MAX2=.04,J.ADD_SPEED_TIME=5e3,J.SkinTemp=[[1,0,2,.015,0,"role1.lh","model/role/01/nvs01.jpg",[1,"d01"]],[2,0,3,.016,1,"role2.lh","model/role/03/nvd03.jpg",[1,"d02"]],[3,0,4,.017,1500,"role3.lh","model/role/05/nand05.jpg",[1,"d03"]],[4,0,4,.018,3e3,"role4.lh","model/role/07/nand07.jpg",[1,"d04"]],[5,0,5,.019,5e3,"role5.lh","model/role/10/mand10.jpg",[1,"d05"]],[6,0,2,.02,8e3,"role6.lh","model/role/01/nvs01.jpg",[1,"s01"]],[7,0,3,.021,13e3,"role7.lh","model/role/04/nvs04.jpg",[1,"s02"]],[8,0,4,.022,2e4,"role8.lh","model/role/06/nans06.jpg",[1,"s03"]],[9,0,4,.023,5e4,"role9.lh","model/role/08/nans08.jpg",[1,"s04"]],[10,0,5,.025,8e4,"role10.lh","model/role/09/mans09.jpg",[1,"s05"]],[11,1,0,0,0,"","comp/map1.jpg",[1,"snow in the alps"]],[12,1,0,0,1,"","comp/map2.jpg",[2,"northern lights"]],[13,2,0,0,0,"white.lh","effect/Materials/snowtrail.png",[255,255,255]],[14,2,0,0,1,"green.lh","effect/Materials/snowtrail.png",[0,255,100]],[15,2,0,0,3e3,"blue.lh","effect/Materials/snowtrail.png",[0,131,255]],[16,2,0,0,6e3,"purple.lh","effect/Materials/snowtrail.png",[183,49,255]],[17,2,0,0,15e3,"orange.lh","effect/Materials/snowtrail.png",[255,155,25]],[18,2,0,0,5e4,"red.lh","effect/Materials/snowtrail.png",[255,50,50]]];class ee extends Laya.Script3D{constructor(){super(),this.diff_z=0,this._moveDiffX=0,this._desDiffX=0,this._isMainPlayer=!1,this.isPass=!1,this._wuDiTimeEnd=0,this._addSpeedTimeEnd=0,this.baseSpeed=.006,this.maxSpeed=.014,this.speedAddPer=1e-5,this.speedSlideAddPer=5e-6,this.speedJumpAddPer=5e-5,this.speedRelasePer=1e-6,this.curPower=0,this.maxPower=0,this.curHp=0,this._curSkin="",this._curSkinId=-1,this.startTransfo=!1,this._curTrailId=13,this.max_width=2,this._oldMoveOffsetY=0,this._speedRate=0,this._speed_z=this.baseSpeed,this._shanCount=0,this._runToward=0,this._isFirstRun=!0,this._running=!1,this._firstYRate=.4,this._isDie=!1,this._curAction=0,this._path=[],this.isJumping=!1,this.isJumpTop=!1,this.jumpTopLen=0,this._startAddTime=0,this._speedzJumpDown=.014,this._firstGame=!0}init(e,t,i){this._app||(this._app=e),this.pos1=new Laya.Vector3(0,0,0),this.pos2=new Laya.Vector3(1,0,0),this._isMainPlayer=i,this.initialize(t,i)}initialize(e,t){this.baseSpeed=J.SPEED_BASE,this.maxSpeed=J.SPEED_MAX,this.player=e,this.player.active=!1,this.playPos=this.player.transform.position.clone(),this.offsetplayPos=this.player.transform.position.clone(),this._startPos=this.player.transform.position.clone(),this._playerInitEuler=this.player.transform.localRotationEuler.clone(),this.diff_z=this.playPos.z,this._playerParent=this.player.parent,this.animator||(this.animator=this.owner.getComponent(Laya.Animator)),this.playerBase=e.getChildByName("Sphere001"),this.playerBase&&(this._playerBaseInitPos=this.playerBase.transform.position.clone(),this._playerBaseInitRotZ=this.playerBase.transform.localRotationEulerZ),this._oldSkinMat=this.playerBase.skinnedMeshRenderer.material.clone();let i=this._snowTaril=e.getChildByName("SnowTrail");this._shadow=i.getChildByName("Plate_Shadow"),this._trail=i.getChildByName("SnowTrailDouble"),this._trail&&(this._trail.trailRenderer.material=this.changeTrailExp(this._trail.trailRenderer.material,"snowtrail.png")),this._snowPar=i.getChildByName("snow_par"),this.showSnowPar(!1);let n=e.getChildByName("Bip001").getChildByName("Bip001 Pelvis").getChildByName("Bip001 Spine").getChildByName("Bip001 Spine1").getChildByName("Bip001 Neck");this._snowTarilHandL=n.getChildByName("Bip001 L Clavicle").getChildByName("Bip001 L UpperArm").getChildByName("Bip001 L Forearm").getChildByName("Bip001 L Hand"),this._trailHandLeft=this._snowTarilHandL.getChildByName("HandTrailL"),this._trailHandLeft&&(this._trailHandLeft.trailRenderer.material=this.changeTrailExp(this._trailHandLeft.trailRenderer.material,"square04.jpg")),this._snowTarilHandR=n.getChildByName("Bip001 R Clavicle").getChildByName("Bip001 R UpperArm").getChildByName("Bip001 R Forearm").getChildByName("Bip001 R Hand"),this._trailHandRight=this._snowTarilHandR.getChildByName("HandTrailR"),this._trailHandRight&&(this._trailHandRight.trailRenderer.material=this.changeTrailExp(this._trailHandRight.trailRenderer.material,"square04.jpg")),this.showHandTrail(!1),this.updateSkin(),this._wuDiTimeEnd=0,this._addSpeedTimeEnd=0,this.playAnimation(Q.randomBoolen()?"idle":"stand")}reset(){this.startTransfo=!1,this.running=!1,this._isFirstRun=!0,this._wuDiTimeEnd=0,this._addSpeedTimeEnd=0,this.isDie=!1,this._runToward=ee.TOWARD_UP,Laya.timer.clear(this,this.playTurnEnd),this.updateAction(),this._startPos.cloneTo(this.playPos),this._startPos.cloneTo(this.offsetplayPos),this.player.transform.position=this.offsetplayPos,this.player.transform.localRotationEuler=this._playerInitEuler.clone(),this.playerBase&&(this.playerBase.transform.position=this._playerBaseInitPos.clone(),this.playerBase.transform.localRotationEulerZ=this._playerBaseInitRotZ),this.diff_z=this._startPos.z,this._moveDiffX=0,this._desDiffX=0,this._speed_z=this.baseSpeed,this._oldMoveOffsetY=0,this.isJumping=!1,this.jumpTopLen=0,this._path.length=0,this.showHandTrail(!1),this.shanAlpha(0),this.showSnowPar(!1),this.playAnimation("idle")}get curSkinId(){return this._curSkinId}updateSkin(e=0){let t=J.SkinTemp[e];if(!t)return;if(this.maxPower=this.curPower=t[2],this.curHp=t[7][0],e==this._curSkinId)return;this._curSkinId=e;let i=t[7][1]+".lh";if(i&&i.length){let e=$.scpath+i,t=Laya.Loader.getRes(e);t?this.updateSkinEnd(t):Laya.Sprite3D.load(e,Laya.Handler.create(this,this.updateSkinEnd))}else this.updateSkinEnd()}updateSkinEnd(e){let t=J.SkinTemp[this._curSkinId];if(this.player.active=!0,!t)return;this.baseSpeed=t[3],this.maxSpeed=J.SPEED_MAX;let i=this.owner.owner;this._playerParent&&"role"==this._playerParent.name&&this._playerParent.numChildren>=2&&this._playerParent.removeChildAt(0),this.player.removeSelf(),this.owner.removeSelf(),e instanceof Laya.Sprite3D?this.owner=this.player=e.clone():e instanceof Laya.MeshSprite3D&&(this.owner=this.player=this._app.sceneRoot.playerClone.clone()),this._playerInitEuler=this.player.transform.localRotationEuler.clone(),this.animator=this.player.getComponent(Laya.Animator),this.playerBase=this.player.getChildByName("Sphere001"),this.playerBase||(this.playerBase=this.player.getChildByName("Sphere002")),this._oldSkinMat=this.playerBase.skinnedMeshRenderer.material.clone(),this.playerBase&&(this._playerBaseInitPos=this.playerBase.transform.position.clone(),this._playerBaseInitRotZ=this.playerBase.transform.localRotationEulerZ),this._trail=null,this._trailLeft=null,this._trailRight=null;let n=this._snowTaril=this.player.getChildByName("SnowTrail");if(n)this._shadow=n.getChildByName("Plate_Shadow"),this._trail=n.getChildByName("SnowTrailDouble"),this._trail&&(this._trail.trailRenderer.material=this.changeTrailExp(this._trail.trailRenderer.material,"snowtrail.png")),this._snowPar=n.getChildByName("snow_par");else{let e=this._snowTarilL=this.player.getChildByName("SnowTrail_L");e&&(this._shadowLeft=e.getChildByName("Plate_ShadowL"),this._trailLeft=e.getChildByName("SnowTrailSingleL"),this._trailLeft&&(this._trailLeft.trailRenderer.material=this.changeTrailExp(this._trailLeft.trailRenderer.material,"snowtrail.png")),this._snowParL=e.getChildByName("snow_parl"));let t=this._snowTarilR=this.player.getChildByName("SnowTrail_R");t&&(this._trailRight=t.getChildByName("SnowTrailSingleR"),this._trailRight&&(this._trailRight.trailRenderer.material=this.changeTrailExp(this._trailRight.trailRenderer.material,"snowtrail.png")),this._shadowRight=t.getChildByName("Plate_ShadowR"),this._snowParR=t.getChildByName("snow_parr"))}let a=this.player.getChildByName("Bip001").getChildByName("Bip001 Pelvis").getChildByName("Bip001 Spine").getChildByName("Bip001 Spine1").getChildByName("Bip001 Neck");this._snowTarilHandL=a.getChildByName("Bip001 L Clavicle").getChildByName("Bip001 L UpperArm").getChildByName("Bip001 L Forearm").getChildByName("Bip001 L Hand"),this._trailHandLeft=this._snowTarilHandL.getChildByName("HandTrailL"),this._trailHandLeft&&(this._trailHandLeft.trailRenderer.material=this.changeTrailExp(this._trailHandLeft.trailRenderer.material,"square04.jpg")),this._snowTarilHandR=a.getChildByName("Bip001 R Clavicle").getChildByName("Bip001 R UpperArm").getChildByName("Bip001 R Forearm").getChildByName("Bip001 R Hand"),this._trailHandRight=this._snowTarilHandR.getChildByName("HandTrailR"),this._trailHandRight&&(this._trailHandRight.trailRenderer.material=this.changeTrailExp(this._trailHandRight.trailRenderer.material,"square04.jpg")),this.showSnowPar(!1),this._playerParent&&this._playerParent.addChildAt(this.player,0),i.updateOwner(this.player,this),this.player.transform.position=this.offsetplayPos,this.playerBase&&(this.playerBase.transform.position=this._playerBaseInitPos.clone(),this.playerBase.transform.localRotationEulerZ=this._playerBaseInitRotZ),this.running?(this._curAction=0,this.updateAction()):this.playAnimation("idle"),this.updateTuoWei(this._curTrailId,!0),this.showHandTrail(!1)}get curTrailId(){return this._curTrailId}updateTuoWei(e,t){if(this._curTrailId==e&&!t)return;this._curTrailId=e;let i=J.SkinTemp[e];if(!i)return;let n=!!this._trail,a=i[5];if(!a||!a.length)return;if(n){let e=$.scpath+a,t=Laya.Loader.getRes(e);t?this.updateTrailEnd(t):Laya.Sprite3D.load(e,Laya.Handler.create(this,this.updateTrailEnd))}else{let e=$.scpath+a.replace(".lh","L.lh"),t=Laya.Loader.getRes(e);t?this.updateTrailEnd1(t):Laya.Sprite3D.load(e,Laya.Handler.create(this,this.updateTrailEnd1));let i=$.scpath+a.replace(".lh","R.lh"),n=Laya.Loader.getRes(i);n?this.updateTrailEnd2(n):Laya.Sprite3D.load(i,Laya.Handler.create(this,this.updateTrailEnd2))}let o=$.scpath+a.replace(".lh","HandL.lh"),r=Laya.Loader.getRes(o);r?this.updateTrailHandEnd1(r):Laya.Sprite3D.load(o,Laya.Handler.create(this,this.updateTrailHandEnd1));let s=$.scpath+a.replace(".lh","HandR.lh"),l=Laya.Loader.getRes(s);l?this.updateTrailHandEnd2(l):Laya.Sprite3D.load(s,Laya.Handler.create(this,this.updateTrailHandEnd2))}showTrail(e){if(this._trail&&(this._trail.active=e),this._snowTaril){let t=this._snowTaril.getChildByName("snowtaril");t&&(t.active=e)}if(this._trailLeft&&(this._trailLeft.active=e),this._snowTarilL){let t=this._snowTarilL.getChildByName("snowtarilL");t&&(t.active=e)}if(this._trailRight&&(this._trailRight.active=e),this._snowTarilR){let t=this._snowTarilR.getChildByName("snowtarilR");t&&(t.active=e)}this._shadow&&(this._shadow.active=e),this._shadowLeft&&(this._shadowLeft.active=e),this._shadowRight&&(this._shadowRight.active=e)}showHandTrail(e){if(this._trailHandLeft&&(this._trailHandLeft.active=e),this._snowTarilHandL){let t=this._snowTarilHandL.getChildByName("snowtarilHandL");t&&(t.active=e)}if(this._trailHandRight&&(this._trailHandRight.active=e),this._snowTarilHandR){let t=this._snowTarilHandR.getChildByName("snowtarilHandR");t&&(t.active=e)}}changeTrailExp(e,t){return e}updateTrailEnd(e){if(!this._trail)return;let t=this._trail.parent,i=this._trail.transform.position.clone();this._trail.removeSelf(),this._trail=null,this._trail=e.clone(),this._trail.removeSelf(),this._trail.trailRenderer.material=this.changeTrailExp(this._trail.trailRenderer.material,"snowtrail.png"),this._trail.name="snowtaril",t&&t.addChild(this._trail),this._trail.transform.position=i}updateTrailEnd1(e){if(this._trailLeft){let t=this._trailLeft.parent,i=this._trailLeft.transform.position.clone();this._trailLeft.removeSelf();let n=e.clone();n.removeSelf(),this._trailLeft=n,this._trailLeft.trailRenderer.material=this.changeTrailExp(this._trailLeft.trailRenderer.material,"snowtrail.png"),t&&t.addChild(this._trailLeft),this._trailLeft.transform.position=i,this._trailLeft.name="snowtarilL"}}updateTrailEnd2(e){if(this._trailRight){let t=this._trailRight.parent,i=(this._trailRight.active,this._trailRight.transform.position.clone());this._trailRight.removeSelf();let n=e.clone();n.removeSelf(),this._trailRight=n,this._trailRight.trailRenderer.material=this.changeTrailExp(this._trailRight.trailRenderer.material,"snowtrail.png"),t&&t.addChild(this._trailRight),this._trailRight.transform.position=i,this._trailRight.name="snowtarilR"}}updateTrailHandEnd1(e){if(this._trailHandLeft){let t=this._trailHandLeft.parent,i=this._trailHandLeft.transform.position.clone();this._trailHandLeft.removeSelf();let n=e.clone();n.removeSelf(),this._trailHandLeft=n,this._trailHandLeft.trailRenderer.material=this.changeTrailExp(this._trailHandLeft.trailRenderer.material,"square04.jpg"),t&&t.addChild(this._trailHandLeft),this._trailHandLeft.transform.position=i,this._trailHandLeft.active=!1,this._trailHandLeft.name="snowtarilHandL"}}updateTrailHandEnd2(e){if(this._trailHandRight){let t=this._trailHandRight.parent,i=(this._trailHandRight.active,this._trailHandRight.transform.position.clone());this._trailHandRight.removeSelf();let n=e.clone();n.removeSelf(),this._trailHandRight=n,this._trailHandRight.trailRenderer.material=this.changeTrailExp(this._trailHandRight.trailRenderer.material,"square04.jpg"),t&&t.addChild(this._trailHandRight),this._trailHandRight.transform.position=i,this._trailHandRight.active=!1,this._trailHandRight.name="snowtarilHandR"}}playerMove(e){this._desDiffX+=e,this._desDiffX>this.max_width&&(this._desDiffX=this.max_width),this._desDiffX<-this.max_width&&(this._desDiffX=-this.max_width),Laya.Tween.clearTween(this),Laya.Tween.to(this,{_moveDiffX:this._desDiffX},150,Laya.Ease.quadOut),this._isMainPlayer&&Laya.timer.clear(this,this.playTurnEnd),this._desDiffX<0?(this._runToward=ee.TOWARD_LEFT,Laya.timer.once(300,this,this.playTurnEnd)):this._desDiffX>0?(this._runToward=ie.TOWARD_RIGHT,Laya.timer.once(300,this,this.playTurnEnd)):this._runToward=ee.TOWARD_UP}playTurnEnd(){this._runToward=ee.TOWARD_UP}Update(e,t){this.updateAction(),this.updateSpeedZ(e),this.running&&(this.updatePos(e),this.player.transform.localRotationEulerY=-t.x/10),this.showWuDiEffect(),this.showSnowPar(this.running&&!this.isJumping&&this._speed_z>1.2*this.baseSpeed)}showSnowPar(e){this._snowPar&&(this._snowPar.active=e,!e&&this._snowPar.particleSystem.isPlaying?this._snowPar.particleSystem.stop():e&&!this._snowPar.particleSystem.isPlaying&&this._snowPar.particleSystem.play()),this._snowParL&&(this._snowParL.active=e,!e&&this._snowParL.particleSystem.isPlaying?this._snowParL.particleSystem.stop():e&&!this._snowParL.particleSystem.isPlaying&&this._snowParL.particleSystem.play()),this._snowParR&&(this._snowParR.active=e,!e&&this._snowParR.particleSystem.isPlaying?this._snowParR.particleSystem.stop():e&&!this._snowParR.particleSystem.isPlaying&&this._snowParR.particleSystem.play())}showWuDiEffect(){var e=this.isWuDi;if(e&&!this._wudiEffect){let e=Laya.Loader.getRes($.wudi);e&&(this._wudiEffect=e,this._wudiEffect.transform.scale=new Laya.Vector3(1.5,1.5,1.5),this._wudiEffect.parent!=this.player&&(this._wudiEffect.removeSelf(),this.player.addChild(this._wudiEffect)))}this._wudiEffect&&(this._wudiEffect.active=e,e&&(this._wudiEffect.transform.position.x=this.offsetplayPos.x,this._wudiEffect.transform.position.y=this.offsetplayPos.y+1,this._wudiEffect.transform.position.z=this.offsetplayPos.z-1,this._wudiEffect.transform.position=this._wudiEffect.transform.position))}set wudiEndTime(e){this._wuDiTimeEnd=e}get isWuDi(){return this._wuDiTimeEnd>0&&Laya.timer.currTimer<=this._wuDiTimeEnd}set addSpeedTime(e){this._addSpeedTimeEnd=e}get isInAddSpeedTime(){return this._addSpeedTimeEnd>0&&Laya.timer.currTimer<=this._addSpeedTimeEnd}updatePos(e){let t=this._speed_z*e,i=this.diff_z,n=this.updateOffsetY(this.jumpTopLen?e:25);this._oldMoveOffsetY=n[0],0!=n[1]?this.diff_z=this.jumpTopLen?this.diff_z+n[1]:this.diff_z+25*this._speed_z:this.isJumpTop?this.diff_z+=Laya.timer.currTimer<this._startAddTime?0:1.8*t:this.diff_z+=t,this.diff_z==i&&(this.diff_z+=t),this.playPos.cloneTo(this.offsetplayPos),this.offsetplayPos.x=this._moveDiffX,this.offsetplayPos.y=this._oldMoveOffsetY,this.offsetplayPos.z=this.diff_z,this.player.transform.position=this.offsetplayPos}get speed_Z(){return this._speed_z}set speed_Z(e){this._speed_z=e}updateSpeedZ(e){this.isJumping&&this.jumpTopLen>0&&this._speed_z<this.maxSpeed?this._speed_z+=this.speedJumpAddPer*e:this.isJumping&&this._speed_z>=this._speedzJumpDown?this._speed_z+=this.speedSlideAddPer*e:this.isInAddSpeedTime?this._speed_z<this.maxSpeed&&(this._speed_z+=this.speedAddPer*e):this._speed_z>this.baseSpeed?this._speed_z-=this.speedRelasePer*e:this._speed_z=this.baseSpeed,this._speed_z>this.maxSpeed&&(this._speed_z=this.maxSpeed),this._speedRate=(this._speed_z-J.SPEED_BASE)/(this.maxSpeed-J.SPEED_BASE)}get speedRate(){return this._speedRate}onCollisionEnter(e){if(!e.other)return;let t=e.other.owner;this.doZhuang(t)}onTriggerEnter(e){this.doZhuang(e.owner),super.onTriggerEnter(e)}doZhuang(e){if(!e||this._isDie)return;let t=e.name;if("Obstacle"==t)this.isWuDi||this.subHp();else if("flag"==t||"Flag"==t){if(!this.isWuDi){this.subHp();let t=e.getComponent(Laya.Animator);t&&t.play("attack")}}else"SnowFlake"==t?this.addPower(!0,e):"JumpBig"==t?(this.playSpeedMusic(),this._jumpObj=e,this.moveJumpPath([0,0,.08,.48,.16,.86,.27,1.32,.42,1.96,.5,2.32,.6,2.71,.67,3,.73,3.25,.78,3.45,.88,3.73,.95,3.99,1.06,4.29,1.16,4.55,1.24,4.81,1.31,5.04,1.42,5.34,1.52,5.55,1.6,5.75,1.68,6,1.83,6.25,1.96,6.48,2.05,6.73,2.19,6.99,2.37,7.24,2.52,7.45,2.72,7.76,2.9,8.14,3,8.2,3.1,8.4,3.2,8.8,3.3,9.4,3.4,9.7,3.5,10,3.4,10.5,3.2,11,3,11.5,2.9,12,2.36,12.5,1.5,13,.87,14,0,15],10)):"JumpSmall"==t?(this.playSpeedMusic(),this._jumpObj=e,this.moveJumpPath([0,0,.1,0,.1,.1,.08,.28,.15,.49,.23,.7,.34,.88,.44,1.04,.52,1.27,.68,1.48,.78,1.71,.89,1.91,1,2.21,1.15,2.44,1.28,2.67,1.39,2.88,1.5,3.11,1.6,3.26,1.7,3.41,1.8,3.61,1.91,3.81,2.06,4.01,2.17,4.24,2.27,4.44,2.42,4.65,2.53,4.85,2.64,5,2.77,5.2,2.82,5.33,3,5.5,3.1,5.7,3.2,5.9,3.3,6,3.4,6.1,3.3,6.5,3.2,7,3.1,7.5,3,8,2,9,1,10,0,11],6)):"accelerate"==t?this.addSpeed():"gold"==t&&this.addGold(e)}addGold(e){}playSpeedMusic(){}addPower(e=!1,t){this.curPower++,this.curPower>this.maxPower&&(this.curPower=this.maxPower)}subPower(){this.curPower--,this.curPower<0&&(this.curPower=0)}subHp(){this.curHp--,this.curHp<=0?this.playDie():(this._shanCount=0,this.shanAlpha(10))}shanAlpha(e){}addSpeed(e=2e3){this.addSpeedTime=Laya.timer.currTimer+e}get running(){return this._running}set running(e){this._running!=e&&(e?Laya.Tween.to(this.player.transform,{localRotationEulerY:-79},100,null,Laya.Handler.create(this,this.realStartRun)):(this._running=!1,Laya.Tween.clearAll(this.player.transform)))}realStartRun(){this._running=!0,this._isFirstRun&&(this._isFirstRun=!1,this._xiePoRoate||(this._xiePoRoate=new Laya.Vector3),this._app.sceneRoot.cameraRoot.changeCamera1(),Laya.Browser.onPC?this.moveJumpPath([12.1,-88,12.09,-87.95,12.08,-87.8,12.07,-87.8,12.06,-87.7,12.05,-86.698,12.03,-85.698,12,-84.93,11.9,-82.93,11.8,-80.53,11.7,-78.53,11.6,-76.04,10.28,-72.4,9.28,-70.4,8.28,-68.4,6.37,-65.25,5,-63.11,3.43,-58.74,2.69,-55.16,2.3,-50.78,2.3,-50.78,1.5,-45.12,1.5,-45.12,1.2,-42,1.2,-42,1.2,-42,1,-35.56,.5,-31.56,.5,-30,.5,-30,.5,-30,.5,-30,.5,-30,.5,-30,.5,-30,.4,-30,.3,-30,.2,-30,.1,-30,.07,-30,.04,-30,.02,-30,0,-30],0,this._firstYRate,12.1,-88):this.moveJumpPath([12.1,-88,12.09,-87.95,12.085,-86.9,12.08,-87.8,12.07,-87.8,12.06,-87.7,12.05,-86.7,12.04,-86.7,12.03,-85.698,12,-84.93,11.9,-82.93,11.8,-80.53,11.7,-78.53,11.6,-76.04,10.28,-72.4,9.28,-70.4,8.28,-68.4,6.37,-65.25,5,-63.11,3.43,-58.74,2.69,-55.16,2.3,-50.78,2.3,-50.78,1.5,-45.12,1.5,-45.12,1.2,-42,1.2,-42,1.2,-42,1,-35.56,.5,-31.56,.5,-30,.5,-30,.5,-30,.5,-30,.5,-30,.5,-30,.5,-30,.4,-30,.3,-30,.2,-30,.1,-30,.07,-30,.04,-30,.02,-30,0,-30],0,this._firstYRate,12.1,-88))}get isDie(){return this._isDie}set isDie(e){this._isDie=e,e&&(this._running=!1)}updateAction(){this.running?(this.isJumpTop?this.setAction(ee.ACTION_SKY):this._runToward==ee.TOWARD_LEFT?this.setAction(ee.ACTION_LEFT):this._runToward==ee.TOWARD_RIGHT?this.setAction(ee.ACTION_RIGHT):this._speed_z>1.2*this.baseSpeed?this.setAction(ee.ACTION_RUN):this.setAction(ee.ACTION_WALK),0!=this.player.transform.localRotationEulerY&&(this.player.transform.localRotationEulerY=0)):this.isDie?this.setAction(ee.ACTION_DIE):this.setAction(ee.ACTION_STAND)}setAction(e){if(this._curAction==e)return;this._curAction=e;let t="stand";switch(this._curAction){case ee.ACTION_WALK:t="walk";break;case ee.ACTION_RUN:t="run";break;case ee.ACTION_LEFT:t="turnleft";break;case ee.ACTION_RIGHT:t="turnright";break;case ee.ACTION_SKY:t="sky";break;case ee.ACTION_DIE:t="die"}this.playAnimation(t);let i=this._curAction==ee.ACTION_RUN||this.isJumping;this.showHandTrail(i)}playAnimation(e){this.animator&&this.animator.crossFade(e,.2,0)}stopAnimation(){this.animator}playDie(){this.isDie=!0,this.updateAction(),this._speed_z=this.baseSpeed,this.shanAlpha(0)}moveJumpPath(e,t,i=1,n=0,a=0){t>0&&(this.player.transform.localRotationEulerX=0,this.firstHuaRunEnd()),this._path=e,this.des_y=this._path.shift(),this.des_z=this._path.shift(),this.start_y=n,this.start_z=a,this.pass_time=0;let o=Math.abs(this.des_y-this.start_y),r=Math.abs(this.des_z-this.start_z);this.jumpTopLen=t,this.jumpTopLen?this.speed_y=2*this._speed_z*i:(i=.5,this._firstGame=!1,this._speed_z=this._speedzJumpDown,this.speed_y=this._speed_z*i),this.need_time=o/this.speed_y,this.need_timez=r/this._speed_z,this.isJumping=!0,this.showTrail(!1),this._startAddTime=0}updateOffsetY(e){if(!this.isJumping)return[0,0];this.pass_time+=e;let t=this.pass_time/this.need_time;t=t>1?1:t;let i=this.start_y+t*(this.des_y-this.start_y),n=this.pass_time/this.need_timez;n=n>1?1:n;let a=this.des_z-this.start_z,o=this.isJumpTop?0:this.jumpTopLen?t*a*.6:0==a?0:this.start_z+this._speed_z*e*2;if(this.pass_time>=this.need_time)if(this._path.length>0){if(!this.isJumpTop){this.pass_time=0,this.start_z=this.des_z,this.des_y=this._path.shift(),this.des_z=this._path.shift(),this.start_y=i;let e=Math.abs(this.des_y-this.start_y),t=Math.abs(this.des_z-this.start_z);if(this.need_time=e/this.speed_y,this.need_timez=t/this._speed_z,this.jumpTopLen>0){if(32==this._path.length){this.isJumpTop=!0,this._startAddTime=Laya.timer.currTimer+500;let e=this.player.transform.position,t=e.x,i=0;this._jumpObj&&(t=this._jumpObj.transform.position.x,i="JumpBig"==this._jumpObj.name?2:1.2),this._isMainPlayer&&this._app.sceneRoot.playFireworksEffect(t,e.y-2,e.z+15,i,this.player.transform.localRotationEulerY)}this._path.length<32?this.player.transform.localRotationEulerX<0&&(this.player.transform.localRotationEulerX=this.player.transform.localRotationEulerX+1):this.player.transform.localRotationEulerX>-30&&(this.player.transform.localRotationEulerX=this.player.transform.localRotationEulerX-2)}else 0==e&&0==t&&(this.need_time=250),this._path.length>=60?this.player.transform.localRotationEulerX<20&&(this.player.transform.localRotationEulerX=this.player.transform.localRotationEulerX+1):this.player.transform.localRotationEulerX>0&&(this.player.transform.localRotationEulerX=this.player.transform.localRotationEulerX-1)}}else this.jumpTopLen||this.firstHuaRunEnd(),this.player.transform.localRotationEulerX=0,this.isJumping=!1,this.isJumpTop=!1,this._startAddTime=0,this.showTrail(!0);return[i,o]}PlaySkyEnd(){this.isJumpTop=!1}firstHuaRunEnd(){}destory(){this.startTransfo=!1,this.running=!1,this.player&&(this.player.active=!0)}}ee.ACTION_STAND=0,ee.ACTION_WALK=1,ee.ACTION_RUN=2,ee.ACTION_LEFT=3,ee.ACTION_RIGHT=4,ee.ACTION_SKY=5,ee.ACTION_DIE=6,ee.TOWARD_UP=0,ee.TOWARD_LEFT=1,ee.TOWARD_RIGHT=2;class te{constructor(e,t){this.type=e,this.data=t}}te.SPEED_CHANGE="speedchange",te.POWER_CHANGE="powerchange",te.PASS_CHANGE="passchang",te.SCORE_CHANGE="scorechang",te.GAME_SCORE="gamescore",te.PIFU_CHANGE="pifuchange",te.TRAIL_CHANGE="trailchange",te.MAP_CHANGE="mapchange",te.MONEY_CHANGE="moneychange";class ie extends ee{constructor(){super(),this.isNight=!1,this._flyCount=0}onStartGame(){}onEndGame(){}initialize(e){let t=this._curSkinId==_n.localData.pifu;this._curTrailId=_n.localData.tuowei-1,super.initialize(e,!0),this.player=e,Gi.evt.addEventListener(te.PIFU_CHANGE,this.onUpdateSkin,this),Gi.evt.addEventListener(te.TRAIL_CHANGE,this.onUpdateTrail,this),t&&this.updateTuoWei(this._curTrailId,!0)}onUpdateSkin(e){if(this.isNight!=this._app.isInNight)return;let t=e.data.id-1;t=t<0?0:t,e.data.free||(_n.localData.pifu=t),this.updateSkin(t)}updateSkin(e=0){e||(e=_n.localData.pifu),super.updateSkin(e),Gi.evt.dispatchEvent(new te(te.POWER_CHANGE,{power:this.curPower,maxPower:this.maxPower,music:!1}))}onUpdateTrail(e){let t=e.data-1;t=t<0?0:t,_n.localData.tuowei=e.data,this.updateTuoWei(t)}updateSkinEnd(e){super.updateSkinEnd(e)}updateSpeedZ(e){this._flyCount>0||super.updateSpeedZ(e)}playSpeedMusic(){setTimeout(()=>{_n.playSound("sounds/speed.mp3")},220)}manualAddSpeed(e,t=!1){var i=Gi.app.sceneRoot;return!(i.showAddEffect||!(t||this.curPower>0))&&(this.subPower(),this.maxSpeed=J.SPEED_MAX2,this._speed_z+=J.SPEED_BASE,super.addSpeed(e),i.showAddEffect=!0,clearTimeout(this._addspeedT),this._addspeedT=setTimeout(()=>{this.maxSpeed=J.SPEED_MAX,i.showAddEffect=!1},J.ADD_SPEED_TIME),!0)}addPower(e=!1,t){super.addPower(e,t),t&&(t.active=!1);let i=this.player.transform.position;this._app.sceneRoot.playSnowParEffect(i.x,i.y+1,i.z,this.player.transform.localRotationEulerY);let n=new Laya.Vector4,a=this._app.sceneRoot.camera;a.viewport.project(this.player.transform.position,a.projectionViewMatrix,n),Gi.evt.dispatchEvent(new te(te.POWER_CHANGE,{power:this.curPower,maxPower:this.maxPower,music:e,pos:n}))}subPower(){super.subPower(),Gi.evt.dispatchEvent(new te(te.POWER_CHANGE,{power:this.curPower,maxPower:this.maxPower,music:!1}))}addGold(e){if(super.addGold(e),e){_n.playSound("sounds/life.mp3"),e.active=!1;let t=Q.randomRange(5,10);_n.localData.makemoney+=t;let i=new te(te.MONEY_CHANGE),n=this._app.sceneRoot.camera,a=new Laya.Vector4;n.viewport.project(this.player.transform.position,n.projectionViewMatrix,a),i.data={pos:a,add:t},Gi.evt.dispatchEvent(i)}}subHp(){super.subHp(),this._isMainPlayer&&_n.shock()}Update(e,t){super.Update(e,t)}playDie(){this.isDie||(super.playDie(),Laya.timer.clear(this,this.doGameEnd),Laya.timer.once(1e3,this,this.doGameEnd),clearTimeout(this._addspeedT),this.maxSpeed=J.SPEED_MAX,Gi.app.sceneRoot.showAddEffect=!1)}doGameEnd(){this._app.sceneRoot.gameEnd()}firstHuaRunEnd(){this.startTransfo||(super.firstHuaRunEnd(),this._app.sceneRoot.cameraRoot.changeCamera1(),this.startTransfo=!0)}reset(){super.reset(),this.refushSkinTrail()}refushSkinTrail(e){let t=this._curSkinId==_n.localData.pifu;this._curTrailId=_n.localData.tuowei-1,this.updateSkin(_n.localData.pifu),t&&this.updateTuoWei(this._curTrailId,!0)}playerMove(e){this._desDiffX=e,this._desDiffX>this.max_width&&(this._desDiffX=this.max_width),this._desDiffX<-this.max_width&&(this._desDiffX=-this.max_width),Laya.Tween.clearTween(this),Laya.Tween.to(this,{_moveDiffX:this._desDiffX},120,Laya.Ease.quadOut),this._isMainPlayer&&Laya.timer.clear(this,this.playTurnEnd),this._desDiffX<0?(this._runToward=ee.TOWARD_LEFT,Laya.timer.once(300,this,this.playTurnEnd)):this._desDiffX>0?(this._runToward=ie.TOWARD_RIGHT,Laya.timer.once(300,this,this.playTurnEnd)):this._runToward=ee.TOWARD_UP}}class ne extends Z{constructor(){super()}init(e){super.init(e)}updateOwner(e,t){if(super.updateOwner(e,t),!this.owner)return;let i=this.owner.getComponent(ie);this._playerScript&&i?this._playerScript=i:this._playerScript=this.owner.addComponent(ie);for(let e in t)this._playerScript[e]=t[e]}get playerScript(){return this._playerScript||(this._playerScript=this.owner.addComponent(ie)),this._playerScript}destroy(){this._playerScript&&(this.owner.destroyed,this._playerScript.destory(),this._playerScript=null),super.destroy()}}class ae extends Laya.Script3D{constructor(){super(),this._offsetZ=.1,this._distancePlayerZ=0,this._distancePlayerY=0,this._distancePlayerZ1=0,this._distancePlayerY1=0,this._distancePlayerZ2=0,this._distancePlayerY2=0,this._initRoateY=0,this._endRoateY=0,this._curRoateY=0,this._initRoateX=0,this._endRoateX=0,this._curRoateX=0,this._initFieldV=0,this.qua=new Laya.Quaternion}set distancePlayerZ(e){this._distancePlayerZ2=this._distancePlayerZ=e}set distancePlayerY(e){this._distancePlayerY2=this._distancePlayerY=e}set distancePlayerZ1(e){this._distancePlayerZ1=e}set distancePlayerY1(e){this._distancePlayerY1=e}init(e,t){this._sceneRoot||(this._sceneRoot=e),this.caramaPos=e.camera.transform.position,this._startPos=e.camera.transform.position.clone(),this.roateCopy=e.camera.transform.rotation.clone(),this._offsetZ=.1,this._initRoateY=e.camera.transform.localRotationEulerY,this._initRoateX=e.camera.transform.localRotationEulerX,this._initFieldV=70}reset(){this._endRoateX=this._curRoateX=this._endRoateY=this._curRoateY=0,this._offsetZ=.1,Laya.Quaternion.createFromYawPitchRoll(0,0,Math.PI/2,this.qua),this._sceneRoot.camera.transform.rotation=this.roateCopy.clone(),this.changeCamera(),this._sceneRoot.camera.transform.position=this.caramaPos}changeCamera(){this.caramaPos=this._sceneRoot.cameraFirst.transform.position.clone(),this._distancePlayerY=this._distancePlayerY2,this._distancePlayerZ=this._distancePlayerZ2}changeCamera1(){this.caramaPos=this._sceneRoot.cameraPos.clone(),this._distancePlayerY=this._distancePlayerY1,this._distancePlayerZ=this._distancePlayerZ1,this._sceneRoot.camera.convertScreenCoordToOrthographicCoord(new Laya.Vector3(10,10,0),this._sceneRoot.goldPosV)}Update(e){if(!this._sceneRoot.mainPlayer)return;let t=0;this._sceneRoot.state==Pi.STATUS_LOAD||this._sceneRoot.state==Pi.STATUS_LOADED?(this._endRoateY||(this._endRoateY=Q.randomRange(-3,3)),this._endRoateY>0?(this._curRoateY>=this._endRoateY&&(this._endRoateY=Q.randomRange(-3,-1)),this._curRoateY+=.01):this._endRoateY<0&&(this._curRoateY<=this._endRoateY&&(this._endRoateY=Q.randomRange(1,3)),this._curRoateY-=.01),this._sceneRoot.camera.transform.localRotationEulerY=this._initRoateY+this._curRoateY,this._endRoateX||(this._endRoateX=Q.randomRange(-3,3)),this._endRoateX>0?(this._curRoateX>=this._endRoateX&&(this._endRoateX=Q.randomRange(-3,-1)),this._curRoateX+=.01):this._endRoateX<0&&(this._curRoateX<=this._endRoateX&&(this._endRoateX=Q.randomRange(1,3)),this._curRoateX-=.01),this._sceneRoot.camera.transform.localRotationEulerX=this._initRoateX+this._curRoateX,this._offsetZ=-88-this._distancePlayerZ,this._sceneRoot.camera.fieldOfView=this._initFieldV):(this._sceneRoot.camera.transform.localRotationEulerY=this._initRoateY,this._sceneRoot.camera.transform.localRotationEulerX=this._initRoateX,this._curRoateX=this._endRoateX=this._curRoateY=this._endRoateY=0,this._offsetZ=this._sceneRoot.mainPlayer.playerScript.diff_z-this._distancePlayerZ,t=this._sceneRoot.mainPlayer.playerScript._moveDiffX,this._sceneRoot.camera.fieldOfView=this._initFieldV+30*this._sceneRoot.mainPlayer.playerScript.speedRate),this.caramaPos.z=this._offsetZ,this.caramaPos.y=this._sceneRoot.mainPlayer.transform.position.y-this._distancePlayerY,this.caramaPos.x=.3*t,this._sceneRoot.camera.transform.position=this.caramaPos}destory(){}}class oe extends Laya.BlinnPhongMaterial{constructor(){super()}_getNumber(e){return this._shaderValues.getNumber(e)}_setNumber(e,t){this._shaderValues.setNumber(e,t)}_setColor(e,t){this._shaderValues.setVector(e,t)}_getColor(e){return this._shaderValues.getVector(e)}_setTexture(e,t){var i=this._getTexture(e);this._shaderValues.setTexture(e,t),this.referenceCount>0&&(i&&i._removeReference(),t&&t._addReference())}_getTexture(e){return this._shaderValues.getTexture(e)}_addShaderDefine(e){this._shaderValues.addDefine(e)}_removeShaderDefine(e){this._shaderValues.removeDefine(e)}}class re extends oe{constructor(e){super(),this.initShader1(),this.setShaderName("BLINNPHONGEXP"),this.setBendDistance(50),this._setColor(re.ALBEDOCOLOR,new Laya.Vector4(1,1,1,1)),this._setColor(re.MATERIALSPECULAR,new Laya.Vector3(1,1,1)),this._setNumber(re.SHININESS,.078125),this._setColor(re.MATERIALREFLECT,new Laya.Vector3(1,1,1)),this._setNumber(re.ALPHATESTVALUE,.5),this._setColor(re.TILINGOFFSET,new Laya.Vector4(1,1,0,0)),this._enableLighting=!0,this.renderMode=re.RENDERMODE_OPAQUE,this._setColor(re.GLOWINGEDGECOLOR,new Laya.Vector4(1,1,1,1)),this.albedoIntensity=Gi.app.isInNight?1.32:1.12,this.albedoColor=new Laya.Vector4(1.05,1.1,1.1,1)}static __init__(){}get normalTexture(){return this._getTexture(re.NORMALTEXTURE)}set normalTexture(e){e?this._addShaderDefine(re.SHADERDEFINE_NORMALMAP):this._removeShaderDefine(re.SHADERDEFINE_NORMALMAP),this._setTexture(re.NORMALTEXTURE,e)}get specularTexture(){return this._getTexture(re.SPECULARTEXTURE)}set specularTexture(e){e?this._addShaderDefine(re.SHADERDEFINE_SPECULARMAP):this._removeShaderDefine(re.SHADERDEFINE_SPECULARMAP),this._setTexture(re.SPECULARTEXTURE,e)}get reflectTexture(){return this._getTexture(re.REFLECTTEXTURE)}set reflectTexture(e){e?this._addShaderDefine(re.SHADERDEFINE_REFLECTMAP):this._removeShaderDefine(re.SHADERDEFINE_REFLECTMAP),this._setTexture(re.REFLECTTEXTURE,e)}get tilingOffset(){return this._getColor(re.TILINGOFFSET)}set tilingOffset(e){e&&(1!=e.x||1!=e.y||0!=e.z||0!=e.w)?this._addShaderDefine(re.SHADERDEFINE_TILINGOFFSET):this._removeShaderDefine(re.SHADERDEFINE_TILINGOFFSET),this._setColor(re.TILINGOFFSET,e)}get reflectColor(){return this._getColor(re.MATERIALREFLECT)}set reflectColor(e){this._setColor(re.MATERIALREFLECT,e)}set enableGlowingEdge(e){e?this._addShaderDefine(re.SHADERDEFINE_GLOWINGEDGE):this._removeShaderDefine(re.SHADERDEFINE_GLOWINGEDGE)}get glowingEdgeColor(){return this._getColor(re.GLOWINGEDGECOLOR)}set glowingEdgeColor(e){this._setColor(re.GLOWINGEDGECOLOR,e)}get specularColor(){return this._getColor(re.MATERIALSPECULAR)}set specularColor(e){this._setColor(re.MATERIALSPECULAR,e)}cloneMat(e){if(e)for(let t in this)if("_shader"!=t)if("_shaderValues"==t)for(let i in e[t]._data)this[t]._data[i]=e[t]._data[i];else this[t]=e[t]}disableFog(){}cloneTo(e){super.cloneTo(e);var t=e;t._enableLighting=this._enableLighting,t.albedoIntensity=this.albedoIntensity,this.albedoColor&&this.albedoColor.cloneTo(t.albedoColor)}getBendOffset(){return this._getColor(re.BENDANGLE)}setBendOffset(e){this._setColor(re.BENDANGLE,e)}setBendDistance(e){this._setNumber(re.BENDDISTANCE,e)}initShader1(){if(re.isInit)return;let e,t;re.isInit=!0,re.BENDANGLE=Laya.Shader3D.propertyNameToID("_QOffset"),re.BENDDISTANCE=Laya.Shader3D.propertyNameToID("_Dist");let i={a_Position:Laya.VertexMesh.MESH_POSITION0,a_Color:Laya.VertexMesh.MESH_COLOR0,a_Normal:Laya.VertexMesh.MESH_NORMAL0,a_Texcoord0:Laya.VertexMesh.MESH_TEXTURECOORDINATE0,a_Texcoord1:Laya.VertexMesh.MESH_TEXTURECOORDINATE1,a_BoneWeights:Laya.VertexMesh.MESH_BLENDWEIGHT0,a_BoneIndices:Laya.VertexMesh.MESH_BLENDINDICES0,a_Tangent0:Laya.VertexMesh.MESH_TANGENT0,a_MvpMatrix:Laya.VertexMesh.MESH_MVPMATRIX_ROW0,a_WorldMat:Laya.VertexMesh.MESH_WORLDMATRIX_ROW0},n={u_Bones:Laya.Shader3D.PERIOD_CUSTOM,u_DiffuseTexture:Laya.Shader3D.PERIOD_MATERIAL,u_SpecularTexture:Laya.Shader3D.PERIOD_MATERIAL,u_NormalTexture:Laya.Shader3D.PERIOD_MATERIAL,u_AlphaTestValue:Laya.Shader3D.PERIOD_MATERIAL,u_DiffuseColor:Laya.Shader3D.PERIOD_MATERIAL,u_MaterialSpecular:Laya.Shader3D.PERIOD_MATERIAL,u_Shininess:Laya.Shader3D.PERIOD_MATERIAL,u_TilingOffset:Laya.Shader3D.PERIOD_MATERIAL,u_WorldMat:Laya.Shader3D.PERIOD_SPRITE,u_MvpMatrix:Laya.Shader3D.PERIOD_SPRITE,u_LightmapScaleOffset:Laya.Shader3D.PERIOD_SPRITE,u_LightMap:Laya.Shader3D.PERIOD_SPRITE,u_CameraPos:Laya.Shader3D.PERIOD_CAMERA,u_Viewport:Laya.Shader3D.PERIOD_CAMERA,u_ProjectionParams:Laya.Shader3D.PERIOD_CAMERA,u_View:Laya.Shader3D.PERIOD_CAMERA,u_ReflectTexture:Laya.Shader3D.PERIOD_SCENE,u_ReflectIntensity:Laya.Shader3D.PERIOD_SCENE,u_FogStart:Laya.Shader3D.PERIOD_SCENE,u_FogRange:Laya.Shader3D.PERIOD_SCENE,u_FogColor:Laya.Shader3D.PERIOD_SCENE,u_DirationLightCount:Laya.Shader3D.PERIOD_SCENE,u_LightBuffer:Laya.Shader3D.PERIOD_SCENE,u_LightClusterBuffer:Laya.Shader3D.PERIOD_SCENE,u_AmbientColor:Laya.Shader3D.PERIOD_SCENE,u_shadowMap1:Laya.Shader3D.PERIOD_SCENE,u_shadowMap2:Laya.Shader3D.PERIOD_SCENE,u_shadowMap3:Laya.Shader3D.PERIOD_SCENE,u_shadowPSSMDistance:Laya.Shader3D.PERIOD_SCENE,u_lightShadowVP:Laya.Shader3D.PERIOD_SCENE,u_shadowPCFoffset:Laya.Shader3D.PERIOD_SCENE,"u_DirectionLight.color":Laya.Shader3D.PERIOD_SCENE,"u_DirectionLight.direction":Laya.Shader3D.PERIOD_SCENE,"u_PointLight.position":Laya.Shader3D.PERIOD_SCENE,"u_PointLight.range":Laya.Shader3D.PERIOD_SCENE,"u_PointLight.color":Laya.Shader3D.PERIOD_SCENE,"u_SpotLight.position":Laya.Shader3D.PERIOD_SCENE,"u_SpotLight.direction":Laya.Shader3D.PERIOD_SCENE,"u_SpotLight.range":Laya.Shader3D.PERIOD_SCENE,"u_SpotLight.spot":Laya.Shader3D.PERIOD_SCENE,"u_SpotLight.color":Laya.Shader3D.PERIOD_SCENE,_QOffset:Laya.Shader3D.PERIOD_MATERIAL,_Dist:Laya.Shader3D.PERIOD_MATERIAL};var a={s_Cull:Laya.Shader3D.RENDER_STATE_CULL,s_Blend:Laya.Shader3D.RENDER_STATE_BLEND,s_BlendSrc:Laya.Shader3D.RENDER_STATE_BLEND_SRC,s_BlendDst:Laya.Shader3D.RENDER_STATE_BLEND_DST,s_DepthTest:Laya.Shader3D.RENDER_STATE_DEPTH_TEST,s_DepthWrite:Laya.Shader3D.RENDER_STATE_DEPTH_WRITE};let o=Laya.Shader3D.add("BLINNPHONGEXP");e='uniform vec4 _QOffset;\nuniform float _Dist;\nattribute vec4 a_Position;\nuniform mat4 u_MvpMatrix;\n\n#if defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(SPECULARMAP)||defined(NORMALMAP)))||(defined(LIGHTMAP)&&defined(UV))\n\tattribute vec2 a_Texcoord0;\n\tvarying vec2 v_Texcoord0;\n#endif\n\n#if defined(LIGHTMAP)&&defined(UV1)\n\tattribute vec2 a_Texcoord1;\n#endif\n\n#ifdef LIGHTMAP\n\tuniform vec4 u_LightmapScaleOffset;\n\tvarying vec2 v_LightMapUV;\n#endif\n\n#ifdef COLOR\n\tattribute vec4 a_Color;\n\tvarying vec4 v_Color;\n#endif\n\n#ifdef BONE\n\tconst int c_MaxBoneCount = 24;\n\tattribute vec4 a_BoneIndices;\n\tattribute vec4 a_BoneWeights;\n\tuniform mat4 u_Bones[c_MaxBoneCount];\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\n\tattribute vec3 a_Normal;\n\tvarying vec3 v_Normal; \n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\n\tuniform vec3 u_CameraPos;\n\tvarying vec3 v_ViewDir; \n#endif\n\n#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP))&&defined(NORMALMAP)\n\tattribute vec4 a_Tangent0;\n\tvarying vec3 v_Tangent;\n\tvarying vec3 v_Binormal;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)||defined(RECEIVESHADOW)\n\tuniform mat4 u_WorldMat;\n\tvarying vec3 v_PositionWorld;\n#endif\n\nvarying float v_posViewZ;\n#ifdef RECEIVESHADOW\n  #ifdef SHADOWMAP_PSSM1 \n  varying vec4 v_lightMVPPos;\n  uniform mat4 u_lightShadowVP[4];\n  #endif\n#endif\n\n#ifdef TILINGOFFSET\n\tuniform vec4 u_TilingOffset;\n#endif\n\nvoid main_castShadow()\n{\n\t#ifdef BONE\n\t\tmat4 skinTransform=mat4(0.0);\n\t\tskinTransform += u_Bones[int(a_BoneIndices.x)] * a_BoneWeights.x;\n\t\tskinTransform += u_Bones[int(a_BoneIndices.y)] * a_BoneWeights.y;\n\t\tskinTransform += u_Bones[int(a_BoneIndices.z)] * a_BoneWeights.z;\n\t\tskinTransform += u_Bones[int(a_BoneIndices.w)] * a_BoneWeights.w;\n\t\tvec4 position=skinTransform*a_Position;\n highp vec4 vPos = u_MvpMatrix * position;\n float zOff = vPos.z / _Dist;\n  vPos += _QOffset * zOff * zOff;\n gl_Position = vPos;\n\t#else\n\t\thighp vec4 vPos = u_MvpMatrix * a_Position;\n float zOff = vPos.z / _Dist;\n vPos += _QOffset * zOff * zOff;\n gl_Position = vPos;\n\t#endif\n\t \n\t//TODO没考虑UV动画呢\n\t#if defined(DIFFUSEMAP)&&defined(ALPHATEST)\n\t\tv_Texcoord0=a_Texcoord0;\n\t#endif\n\t\tv_posViewZ = gl_Position.z;\n}\n\nvoid main_normal()\n{\n\t#ifdef BONE\n\t\tmat4 skinTransform=mat4(0.0);\n\t\tskinTransform += u_Bones[int(a_BoneIndices.x)] * a_BoneWeights.x;\n\t\tskinTransform += u_Bones[int(a_BoneIndices.y)] * a_BoneWeights.y;\n\t\tskinTransform += u_Bones[int(a_BoneIndices.z)] * a_BoneWeights.z;\n\t\tskinTransform += u_Bones[int(a_BoneIndices.w)] * a_BoneWeights.w;\n\t\tvec4 position=skinTransform*a_Position;\n\t\t\n highp vec4 vPos = u_MvpMatrix * position;\n float zOff = vPos.z / _Dist;\n  vPos += _QOffset * zOff * zOff;\n gl_Position = vPos;\n\t#else\n\t\thighp vec4 vPos = u_MvpMatrix * a_Position;\n float zOff = vPos.z / _Dist;\n vPos += _QOffset * zOff * zOff;\n gl_Position = vPos;\n\t#endif\n\n\t#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\n\t\tmat3 worldMat;\n\t\t#ifdef BONE\n\t\t\tworldMat=mat3(u_WorldMat*skinTransform);\n\t\t#else\n\t\t\tworldMat=mat3(u_WorldMat);\n\t\t#endif  \n\t\tv_Normal=worldMat*a_Normal;//TODO:法线可以用"魔法"矩阵\n\t\t#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\n\t\t\tv_Tangent=worldMat*a_Tangent0.xyz;\n\t\t\tv_Binormal=cross(v_Normal,v_Tangent)*a_Tangent0.w;\n\t\t#endif\n\t#endif\n\n\t#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)||defined(RECEIVESHADOW)\n\t\t#ifdef BONE\n\t\t\tv_PositionWorld=(u_WorldMat*position).xyz;\n\t\t#else\n\t\t\tv_PositionWorld=(u_WorldMat*a_Position).xyz;\n\t\t#endif\n\t#endif\n\t\n\t#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\n\t\tv_ViewDir=u_CameraPos-v_PositionWorld;\n\t#endif\n\n\t#if defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(SPECULARMAP)||defined(NORMALMAP)))\n\t\tv_Texcoord0=a_Texcoord0;\n\t\t#ifdef TILINGOFFSET\n\t\t\tv_Texcoord0=(vec2(v_Texcoord0.x,v_Texcoord0.y-1.0)*u_TilingOffset.xy)+u_TilingOffset.zw;\n\t\t\tv_Texcoord0=vec2(v_Texcoord0.x,1.0+v_Texcoord0.y);\n\t\t#endif\n\t#endif\n\n\t#ifdef LIGHTMAP\n\t\t#ifdef SCALEOFFSETLIGHTINGMAPUV\n\t\t\t#ifdef UV1\n\t\t\t\tv_LightMapUV=vec2(a_Texcoord1.x*u_LightmapScaleOffset.x+u_LightmapScaleOffset.z,1.0+a_Texcoord1.y*u_LightmapScaleOffset.y+u_LightmapScaleOffset.w);\n\t\t\t#else\n\t\t\t\tv_LightMapUV=vec2(a_Texcoord0.x,a_Texcoord0.y-1.0)*u_LightmapScaleOffset.xy+u_LightmapScaleOffset.zw;\n\t\t\t#endif \n\t\t#else\n\t\t\t#ifdef UV1\n\t\t\t\tv_LightMapUV=a_Texcoord1;\n\t\t\t#else\n\t\t\t\tv_LightMapUV=a_Texcoord0;\n\t\t\t#endif \n\t\t#endif \n\t#endif\n\n\t#ifdef COLOR\n\t\tv_Color=a_Color;\n\t#endif\n\n\t#ifdef RECEIVESHADOW\n\t\tv_posViewZ = gl_Position.w;\n\t\t#ifdef SHADOWMAP_PSSM1 \n\t\t\tv_lightMVPPos = u_lightShadowVP[0] * vec4(v_PositionWorld,1.0);\n\t\t#endif\n\t#endif\n}\n\nvoid main()\n{\n\t#ifdef CASTSHADOW\n\t\tmain_castShadow();\n\t#else\n\t\tmain_normal();\n\t#endif\n}',t='#ifdef HIGHPRECISION\n\tprecision highp float;\n#else\n\tprecision mediump float;\n#endif\n\n#include "Lighting.glsl";\n\nuniform vec4 u_DiffuseColor;\n\n#ifdef COLOR\n\tvarying vec4 v_Color;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\n\tvarying vec3 v_ViewDir; \n#endif\n\n#ifdef ALPHATEST\n\tuniform float u_AlphaTestValue;\n#endif\n\n#ifdef DIFFUSEMAP\n\tuniform sampler2D u_DiffuseTexture;\n#endif\n\n#ifdef REFLECTMAP\n\tuniform samplerCube u_ReflectTexture;\n\tuniform vec3 u_MaterialReflect;\n#endif\n\n#if defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(SPECULARMAP)||defined(NORMALMAP)))\n\tvarying vec2 v_Texcoord0;\n#endif\n\n#ifdef LIGHTMAP\n\tvarying vec2 v_LightMapUV;\n\tuniform sampler2D u_LightMap;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\tuniform vec3 u_MaterialSpecular;\n\tuniform float u_Shininess;\n\t#ifdef SPECULARMAP \n\t\tuniform sampler2D u_SpecularTexture;\n\t#endif\n#endif\n\n#ifdef FOG\n\tuniform float u_FogStart;\n\tuniform float u_FogRange;\n\t#ifdef ADDTIVEFOG\n\t#else\n\t\tuniform vec3 u_FogColor;\n\t#endif\n#endif\n\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\n\tvarying vec3 v_Normal;\n#endif\n\n#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\n\tuniform sampler2D u_NormalTexture;\n\tvarying vec3 v_Tangent;\n\tvarying vec3 v_Binormal;\n#endif\n\n#ifdef DIRECTIONLIGHT\n\tuniform DirectionLight u_DirectionLight;\n#endif\n\n#ifdef POINTLIGHT\n\tuniform PointLight u_PointLight;\n#endif\n\n#ifdef SPOTLIGHT\n\tuniform SpotLight u_SpotLight;\n#endif\n\nuniform vec3 u_AmbientColor;\n\n\n#if defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)||defined(RECEIVESHADOW)\n\tvarying vec3 v_PositionWorld;\n#endif\n\n#include "ShadowHelper.glsl"\nvarying float v_posViewZ;\n#ifdef RECEIVESHADOW\n\t#if defined(SHADOWMAP_PSSM2)||defined(SHADOWMAP_PSSM3)\n\t\tuniform mat4 u_lightShadowVP[4];\n\t#endif\n\t#ifdef SHADOWMAP_PSSM1 \n\t\tvarying vec4 v_lightMVPPos;\n\t#endif\n#endif\n\nvoid main_castShadow()\n{\n\t//gl_FragColor=vec4(v_posViewZ,0.0,0.0,1.0);\n\tgl_FragColor=packDepth(v_posViewZ);\n\t#if defined(DIFFUSEMAP)&&defined(ALPHATEST)\n\t\tfloat alpha = texture2D(u_DiffuseTexture,v_Texcoord0).w;\n\t\tif( alpha < u_AlphaTestValue )\n\t\t{\n\t\t\tdiscard;\n\t\t}\n\t#endif\n}\nvoid main_normal()\n{\n\tvec4 mainColor=u_DiffuseColor;\n\t#ifdef DIFFUSEMAP\n\t\tvec4 difTexColor=texture2D(u_DiffuseTexture, v_Texcoord0);\n\t\tmainColor=mainColor*difTexColor;\n\t#endif \n\t#ifdef COLOR\n\t\tmainColor=mainColor*v_Color;\n\t#endif \n    \n\t#ifdef ALPHATEST\n\t\tif(mainColor.a<u_AlphaTestValue)\n\t\t\tdiscard;\n\t#endif\n  \n\t#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\n\t\tvec3 normal;\n\t\t#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\n\t\t\tvec3 normalMapSample = texture2D(u_NormalTexture, v_Texcoord0).rgb;\n\t\t\tnormal = normalize(NormalSampleToWorldSpace(normalMapSample, v_Normal, v_Tangent,v_Binormal));\n\t\t#else\n\t\t\tnormal = normalize(v_Normal);\n\t\t#endif\n\t#endif\n\t\n\t#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t\tvec3 viewDir= normalize(v_ViewDir);\n\t\tvec3 diffuse = vec3(0.0);\n\t\tvec3 specular= vec3(0.0);\n\t\tvec3 dif,spe;\n\t\t#ifdef SPECULARMAP\n\t\t\tvec3 gloss=texture2D(u_SpecularTexture, v_Texcoord0).rgb;\n\t\t#else\n\t\t\t#ifdef DIFFUSEMAP\n\t\t\t\tvec3 gloss=vec3(difTexColor.a);\n\t\t\t#else\n\t\t\t\tvec3 gloss=vec3(1.0);\n\t\t\t#endif\n\t\t#endif\n\t#endif\n\n\t\n\t#ifdef DIRECTIONLIGHT\n\t\tLayaAirBlinnPhongDiectionLight(u_MaterialSpecular,u_Shininess,normal,gloss,viewDir,u_DirectionLight,dif,spe);\n\t\tdiffuse+=dif;\n\t\tspecular+=spe;\n\t#endif\n \n\t#ifdef POINTLIGHT\n\t\tLayaAirBlinnPhongPointLight(v_PositionWorld,u_MaterialSpecular,u_Shininess,normal,gloss,viewDir,u_PointLight,dif,spe);\n\t\tdiffuse+=dif;\n\t\tspecular+=spe;\n\t#endif\n\n\t#ifdef SPOTLIGHT\n\t\tLayaAirBlinnPhongSpotLight(v_PositionWorld,u_MaterialSpecular,u_Shininess,normal,gloss,viewDir,u_SpotLight,dif,spe);\n\t\tdiffuse+=dif;\n\t\tspecular+=spe;\n\t#endif\n\n\t\n\tvec3 finalDiffuse;\n\t#ifdef LIGHTMAP\n\t\tfinalDiffuse=texture2D(u_LightMap, v_LightMapUV).rgb*2.0;\n\t\t//float exponent = texture2D(u_LightMap, v_LightMapUV).a;\n\t\t//finalDiffuse = texture2D(u_LightMap, v_LightMapUV).rgb;\n\t\t//float ratio = pow(2.0, exponent * 255.0 - (128.0 + 8.0));\n\t\t//finalDiffuse = finalDiffuse * 255.0 * ratio;\t\n\t\t//finalDiffuse = sqrt(finalDiffuse);\n\t#else\n\t\tfinalDiffuse=vec3(0.0);\n\t#endif\n\n\t#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t\tfinalDiffuse+=diffuse;\n\t#endif\n\n\t#ifdef RECEIVESHADOW\n\t\tfloat shadowValue = 1.0;\n\t\t#ifdef SHADOWMAP_PSSM3\n\t\t\tshadowValue = getShadowPSSM3( u_shadowMap1,u_shadowMap2,u_shadowMap3,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,v_PositionWorld,v_posViewZ,0.001);\n\t\t#endif\n\t\t#ifdef SHADOWMAP_PSSM2\n\t\t\tshadowValue = getShadowPSSM2( u_shadowMap1,u_shadowMap2,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,v_PositionWorld,v_posViewZ,0.001);\n\t\t#endif \n\t\t#ifdef SHADOWMAP_PSSM1\n\t\t\tshadowValue = getShadowPSSM1( u_shadowMap1,v_lightMVPPos,u_shadowPSSMDistance,u_shadowPCFoffset,v_posViewZ,0.001);\n\t\t#endif\n\t\tgl_FragColor =vec4(mainColor.rgb*(u_AmbientColor + finalDiffuse)*shadowValue,mainColor.a);\n\t#else\n\t\tgl_FragColor =vec4(mainColor.rgb*(u_AmbientColor + finalDiffuse),mainColor.a);\n\t#endif\n\t\n\n\t#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t\t#ifdef RECEIVESHADOW\n\t\t\tgl_FragColor.rgb+=specular*shadowValue;\n\t\t#else\n\t\t\tgl_FragColor.rgb+=specular;\n\t\t#endif\n\t#endif\n\n\n\t#ifdef REFLECTMAP\n\t\tvec3 incident = -viewDir;\n\t\tvec3 reflectionVector = reflect(incident,normal);\n\t\tvec3 reflectionColor  = textureCube(u_ReflectTexture,reflectionVector).rgb;\n\t\tgl_FragColor.rgb += u_MaterialReflect*reflectionColor;\n\t#endif\n\t  \n\t#ifdef FOG\n\t\tfloat lerpFact=clamp((1.0/gl_FragCoord.w-u_FogStart)/u_FogRange,0.0,1.0);\n\t\t#ifdef ADDTIVEFOG\n\t\t\tgl_FragColor.rgb=mix(gl_FragColor.rgb,vec3(0.0,0.0,0.0),lerpFact);\n\t\t#else\n\t\t\tgl_FragColor.rgb=mix(gl_FragColor.rgb,u_FogColor,lerpFact);\n\t\t#endif\n\t#endif\n}\n\nvoid main()\n{\n\t#ifdef CASTSHADOW\t\t\n\t\tmain_castShadow();\n\t#else\n\t  main_normal();\n\t#endif  \n}\n\n';let r=new Laya.SubShader(i,n);o.addSubShader(r),r.addShaderPass('uniform vec4 _QOffset;\nuniform float _Dist;\nattribute vec4 a_Position;\nuniform mat4 u_MvpMatrix;\n\n#if defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(SPECULARMAP)||defined(NORMALMAP)))||(defined(LIGHTMAP)&&defined(UV))\n\tattribute vec2 a_Texcoord0;\n\tvarying vec2 v_Texcoord0;\n#endif\n\n#if defined(LIGHTMAP)&&defined(UV1)\n\tattribute vec2 a_Texcoord1;\n#endif\n\n#ifdef LIGHTMAP\n\tuniform vec4 u_LightmapScaleOffset;\n\tvarying vec2 v_LightMapUV;\n#endif\n\n#ifdef COLOR\n\tattribute vec4 a_Color;\n\tvarying vec4 v_Color;\n#endif\n\n#ifdef BONE\n\tconst int c_MaxBoneCount = 24;\n\tattribute vec4 a_BoneIndices;\n\tattribute vec4 a_BoneWeights;\n\tuniform mat4 u_Bones[c_MaxBoneCount];\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\n\tattribute vec3 a_Normal;\n\tvarying vec3 v_Normal; \n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\n\tuniform vec3 u_CameraPos;\n\tvarying vec3 v_ViewDir; \n#endif\n\n#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP))&&defined(NORMALMAP)\n\tattribute vec4 a_Tangent0;\n\tvarying vec3 v_Tangent;\n\tvarying vec3 v_Binormal;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)||defined(RECEIVESHADOW)\n\tuniform mat4 u_WorldMat;\n\tvarying vec3 v_PositionWorld;\n#endif\n\nvarying float v_posViewZ;\n#ifdef RECEIVESHADOW\n  #ifdef SHADOWMAP_PSSM1 \n  varying vec4 v_lightMVPPos;\n  uniform mat4 u_lightShadowVP[4];\n  #endif\n#endif\n\n#ifdef TILINGOFFSET\n\tuniform vec4 u_TilingOffset;\n#endif\n\nvoid main_castShadow()\n{\n\t#ifdef BONE\n\t\tmat4 skinTransform=mat4(0.0);\n\t\tskinTransform += u_Bones[int(a_BoneIndices.x)] * a_BoneWeights.x;\n\t\tskinTransform += u_Bones[int(a_BoneIndices.y)] * a_BoneWeights.y;\n\t\tskinTransform += u_Bones[int(a_BoneIndices.z)] * a_BoneWeights.z;\n\t\tskinTransform += u_Bones[int(a_BoneIndices.w)] * a_BoneWeights.w;\n\t\tvec4 position=skinTransform*a_Position;\n highp vec4 vPos = u_MvpMatrix * position;\n float zOff = vPos.z / _Dist;\n  vPos += _QOffset * zOff * zOff;\n gl_Position = vPos;\n\t#else\n\t\thighp vec4 vPos = u_MvpMatrix * a_Position;\n float zOff = vPos.z / _Dist;\n vPos += _QOffset * zOff * zOff;\n gl_Position = vPos;\n\t#endif\n\t \n\t//TODO没考虑UV动画呢\n\t#if defined(DIFFUSEMAP)&&defined(ALPHATEST)\n\t\tv_Texcoord0=a_Texcoord0;\n\t#endif\n\t\tv_posViewZ = gl_Position.z;\n}\n\nvoid main_normal()\n{\n\t#ifdef BONE\n\t\tmat4 skinTransform=mat4(0.0);\n\t\tskinTransform += u_Bones[int(a_BoneIndices.x)] * a_BoneWeights.x;\n\t\tskinTransform += u_Bones[int(a_BoneIndices.y)] * a_BoneWeights.y;\n\t\tskinTransform += u_Bones[int(a_BoneIndices.z)] * a_BoneWeights.z;\n\t\tskinTransform += u_Bones[int(a_BoneIndices.w)] * a_BoneWeights.w;\n\t\tvec4 position=skinTransform*a_Position;\n\t\t\n highp vec4 vPos = u_MvpMatrix * position;\n float zOff = vPos.z / _Dist;\n  vPos += _QOffset * zOff * zOff;\n gl_Position = vPos;\n\t#else\n\t\thighp vec4 vPos = u_MvpMatrix * a_Position;\n float zOff = vPos.z / _Dist;\n vPos += _QOffset * zOff * zOff;\n gl_Position = vPos;\n\t#endif\n\n\t#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\n\t\tmat3 worldMat;\n\t\t#ifdef BONE\n\t\t\tworldMat=mat3(u_WorldMat*skinTransform);\n\t\t#else\n\t\t\tworldMat=mat3(u_WorldMat);\n\t\t#endif  \n\t\tv_Normal=worldMat*a_Normal;//TODO:法线可以用"魔法"矩阵\n\t\t#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\n\t\t\tv_Tangent=worldMat*a_Tangent0.xyz;\n\t\t\tv_Binormal=cross(v_Normal,v_Tangent)*a_Tangent0.w;\n\t\t#endif\n\t#endif\n\n\t#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)||defined(RECEIVESHADOW)\n\t\t#ifdef BONE\n\t\t\tv_PositionWorld=(u_WorldMat*position).xyz;\n\t\t#else\n\t\t\tv_PositionWorld=(u_WorldMat*a_Position).xyz;\n\t\t#endif\n\t#endif\n\t\n\t#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\n\t\tv_ViewDir=u_CameraPos-v_PositionWorld;\n\t#endif\n\n\t#if defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(SPECULARMAP)||defined(NORMALMAP)))\n\t\tv_Texcoord0=a_Texcoord0;\n\t\t#ifdef TILINGOFFSET\n\t\t\tv_Texcoord0=(vec2(v_Texcoord0.x,v_Texcoord0.y-1.0)*u_TilingOffset.xy)+u_TilingOffset.zw;\n\t\t\tv_Texcoord0=vec2(v_Texcoord0.x,1.0+v_Texcoord0.y);\n\t\t#endif\n\t#endif\n\n\t#ifdef LIGHTMAP\n\t\t#ifdef SCALEOFFSETLIGHTINGMAPUV\n\t\t\t#ifdef UV1\n\t\t\t\tv_LightMapUV=vec2(a_Texcoord1.x*u_LightmapScaleOffset.x+u_LightmapScaleOffset.z,1.0+a_Texcoord1.y*u_LightmapScaleOffset.y+u_LightmapScaleOffset.w);\n\t\t\t#else\n\t\t\t\tv_LightMapUV=vec2(a_Texcoord0.x,a_Texcoord0.y-1.0)*u_LightmapScaleOffset.xy+u_LightmapScaleOffset.zw;\n\t\t\t#endif \n\t\t#else\n\t\t\t#ifdef UV1\n\t\t\t\tv_LightMapUV=a_Texcoord1;\n\t\t\t#else\n\t\t\t\tv_LightMapUV=a_Texcoord0;\n\t\t\t#endif \n\t\t#endif \n\t#endif\n\n\t#ifdef COLOR\n\t\tv_Color=a_Color;\n\t#endif\n\n\t#ifdef RECEIVESHADOW\n\t\tv_posViewZ = gl_Position.w;\n\t\t#ifdef SHADOWMAP_PSSM1 \n\t\t\tv_lightMVPPos = u_lightShadowVP[0] * vec4(v_PositionWorld,1.0);\n\t\t#endif\n\t#endif\n}\n\nvoid main()\n{\n\t#ifdef CASTSHADOW\n\t\tmain_castShadow();\n\t#else\n\t\tmain_normal();\n\t#endif\n}','#ifdef HIGHPRECISION\n\tprecision highp float;\n#else\n\tprecision mediump float;\n#endif\n\n#include "Lighting.glsl";\n\nuniform vec4 u_DiffuseColor;\n\n#ifdef COLOR\n\tvarying vec4 v_Color;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\n\tvarying vec3 v_ViewDir; \n#endif\n\n#ifdef ALPHATEST\n\tuniform float u_AlphaTestValue;\n#endif\n\n#ifdef DIFFUSEMAP\n\tuniform sampler2D u_DiffuseTexture;\n#endif\n\n#ifdef REFLECTMAP\n\tuniform samplerCube u_ReflectTexture;\n\tuniform vec3 u_MaterialReflect;\n#endif\n\n#if defined(DIFFUSEMAP)||((defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&(defined(SPECULARMAP)||defined(NORMALMAP)))\n\tvarying vec2 v_Texcoord0;\n#endif\n\n#ifdef LIGHTMAP\n\tvarying vec2 v_LightMapUV;\n\tuniform sampler2D u_LightMap;\n#endif\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\tuniform vec3 u_MaterialSpecular;\n\tuniform float u_Shininess;\n\t#ifdef SPECULARMAP \n\t\tuniform sampler2D u_SpecularTexture;\n\t#endif\n#endif\n\n#ifdef FOG\n\tuniform float u_FogStart;\n\tuniform float u_FogRange;\n\t#ifdef ADDTIVEFOG\n\t#else\n\t\tuniform vec3 u_FogColor;\n\t#endif\n#endif\n\n\n#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\n\tvarying vec3 v_Normal;\n#endif\n\n#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\n\tuniform sampler2D u_NormalTexture;\n\tvarying vec3 v_Tangent;\n\tvarying vec3 v_Binormal;\n#endif\n\n#ifdef DIRECTIONLIGHT\n\tuniform DirectionLight u_DirectionLight;\n#endif\n\n#ifdef POINTLIGHT\n\tuniform PointLight u_PointLight;\n#endif\n\n#ifdef SPOTLIGHT\n\tuniform SpotLight u_SpotLight;\n#endif\n\nuniform vec3 u_AmbientColor;\n\n\n#if defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)||defined(RECEIVESHADOW)\n\tvarying vec3 v_PositionWorld;\n#endif\n\n#include "ShadowHelper.glsl"\nvarying float v_posViewZ;\n#ifdef RECEIVESHADOW\n\t#if defined(SHADOWMAP_PSSM2)||defined(SHADOWMAP_PSSM3)\n\t\tuniform mat4 u_lightShadowVP[4];\n\t#endif\n\t#ifdef SHADOWMAP_PSSM1 \n\t\tvarying vec4 v_lightMVPPos;\n\t#endif\n#endif\n\nvoid main_castShadow()\n{\n\t//gl_FragColor=vec4(v_posViewZ,0.0,0.0,1.0);\n\tgl_FragColor=packDepth(v_posViewZ);\n\t#if defined(DIFFUSEMAP)&&defined(ALPHATEST)\n\t\tfloat alpha = texture2D(u_DiffuseTexture,v_Texcoord0).w;\n\t\tif( alpha < u_AlphaTestValue )\n\t\t{\n\t\t\tdiscard;\n\t\t}\n\t#endif\n}\nvoid main_normal()\n{\n\tvec4 mainColor=u_DiffuseColor;\n\t#ifdef DIFFUSEMAP\n\t\tvec4 difTexColor=texture2D(u_DiffuseTexture, v_Texcoord0);\n\t\tmainColor=mainColor*difTexColor;\n\t#endif \n\t#ifdef COLOR\n\t\tmainColor=mainColor*v_Color;\n\t#endif \n    \n\t#ifdef ALPHATEST\n\t\tif(mainColor.a<u_AlphaTestValue)\n\t\t\tdiscard;\n\t#endif\n  \n\t#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)||defined(REFLECTMAP)\n\t\tvec3 normal;\n\t\t#if (defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT))&&defined(NORMALMAP)\n\t\t\tvec3 normalMapSample = texture2D(u_NormalTexture, v_Texcoord0).rgb;\n\t\t\tnormal = normalize(NormalSampleToWorldSpace(normalMapSample, v_Normal, v_Tangent,v_Binormal));\n\t\t#else\n\t\t\tnormal = normalize(v_Normal);\n\t\t#endif\n\t#endif\n\t\n\t#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t\tvec3 viewDir= normalize(v_ViewDir);\n\t\tvec3 diffuse = vec3(0.0);\n\t\tvec3 specular= vec3(0.0);\n\t\tvec3 dif,spe;\n\t\t#ifdef SPECULARMAP\n\t\t\tvec3 gloss=texture2D(u_SpecularTexture, v_Texcoord0).rgb;\n\t\t#else\n\t\t\t#ifdef DIFFUSEMAP\n\t\t\t\tvec3 gloss=vec3(difTexColor.a);\n\t\t\t#else\n\t\t\t\tvec3 gloss=vec3(1.0);\n\t\t\t#endif\n\t\t#endif\n\t#endif\n\n\t\n\t#ifdef DIRECTIONLIGHT\n\t\tLayaAirBlinnPhongDiectionLight(u_MaterialSpecular,u_Shininess,normal,gloss,viewDir,u_DirectionLight,dif,spe);\n\t\tdiffuse+=dif;\n\t\tspecular+=spe;\n\t#endif\n \n\t#ifdef POINTLIGHT\n\t\tLayaAirBlinnPhongPointLight(v_PositionWorld,u_MaterialSpecular,u_Shininess,normal,gloss,viewDir,u_PointLight,dif,spe);\n\t\tdiffuse+=dif;\n\t\tspecular+=spe;\n\t#endif\n\n\t#ifdef SPOTLIGHT\n\t\tLayaAirBlinnPhongSpotLight(v_PositionWorld,u_MaterialSpecular,u_Shininess,normal,gloss,viewDir,u_SpotLight,dif,spe);\n\t\tdiffuse+=dif;\n\t\tspecular+=spe;\n\t#endif\n\n\t\n\tvec3 finalDiffuse;\n\t#ifdef LIGHTMAP\n\t\tfinalDiffuse=texture2D(u_LightMap, v_LightMapUV).rgb*2.0;\n\t\t//float exponent = texture2D(u_LightMap, v_LightMapUV).a;\n\t\t//finalDiffuse = texture2D(u_LightMap, v_LightMapUV).rgb;\n\t\t//float ratio = pow(2.0, exponent * 255.0 - (128.0 + 8.0));\n\t\t//finalDiffuse = finalDiffuse * 255.0 * ratio;\t\n\t\t//finalDiffuse = sqrt(finalDiffuse);\n\t#else\n\t\tfinalDiffuse=vec3(0.0);\n\t#endif\n\n\t#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t\tfinalDiffuse+=diffuse;\n\t#endif\n\n\t#ifdef RECEIVESHADOW\n\t\tfloat shadowValue = 1.0;\n\t\t#ifdef SHADOWMAP_PSSM3\n\t\t\tshadowValue = getShadowPSSM3( u_shadowMap1,u_shadowMap2,u_shadowMap3,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,v_PositionWorld,v_posViewZ,0.001);\n\t\t#endif\n\t\t#ifdef SHADOWMAP_PSSM2\n\t\t\tshadowValue = getShadowPSSM2( u_shadowMap1,u_shadowMap2,u_lightShadowVP,u_shadowPSSMDistance,u_shadowPCFoffset,v_PositionWorld,v_posViewZ,0.001);\n\t\t#endif \n\t\t#ifdef SHADOWMAP_PSSM1\n\t\t\tshadowValue = getShadowPSSM1( u_shadowMap1,v_lightMVPPos,u_shadowPSSMDistance,u_shadowPCFoffset,v_posViewZ,0.001);\n\t\t#endif\n\t\tgl_FragColor =vec4(mainColor.rgb*(u_AmbientColor + finalDiffuse)*shadowValue,mainColor.a);\n\t#else\n\t\tgl_FragColor =vec4(mainColor.rgb*(u_AmbientColor + finalDiffuse),mainColor.a);\n\t#endif\n\t\n\n\t#if defined(DIRECTIONLIGHT)||defined(POINTLIGHT)||defined(SPOTLIGHT)\n\t\t#ifdef RECEIVESHADOW\n\t\t\tgl_FragColor.rgb+=specular*shadowValue;\n\t\t#else\n\t\t\tgl_FragColor.rgb+=specular;\n\t\t#endif\n\t#endif\n\n\n\t#ifdef REFLECTMAP\n\t\tvec3 incident = -viewDir;\n\t\tvec3 reflectionVector = reflect(incident,normal);\n\t\tvec3 reflectionColor  = textureCube(u_ReflectTexture,reflectionVector).rgb;\n\t\tgl_FragColor.rgb += u_MaterialReflect*reflectionColor;\n\t#endif\n\t  \n\t#ifdef FOG\n\t\tfloat lerpFact=clamp((1.0/gl_FragCoord.w-u_FogStart)/u_FogRange,0.0,1.0);\n\t\t#ifdef ADDTIVEFOG\n\t\t\tgl_FragColor.rgb=mix(gl_FragColor.rgb,vec3(0.0,0.0,0.0),lerpFact);\n\t\t#else\n\t\t\tgl_FragColor.rgb=mix(gl_FragColor.rgb,u_FogColor,lerpFact);\n\t\t#endif\n\t#endif\n}\n\nvoid main()\n{\n\t#ifdef CASTSHADOW\t\t\n\t\tmain_castShadow();\n\t#else\n\t  main_normal();\n\t#endif  \n}\n\n',a),re.SHADERDEFINE_DIFFUSEMAP=Laya.Shader3D.getDefineByName("DIFFUSEMAP"),re.SHADERDEFINE_NORMALMAP=Laya.Shader3D.getDefineByName("NORMALMAP"),re.SHADERDEFINE_SPECULARMAP=Laya.Shader3D.getDefineByName("SPECULARMAP"),re.SHADERDEFINE_REFLECTMAP=Laya.Shader3D.getDefineByName("REFLECTMAP"),re.SHADERDEFINE_TILINGOFFSET=Laya.Shader3D.getDefineByName("TILINGOFFSET"),re.SHADERDEFINE_ADDTIVEFOG=Laya.Shader3D.getDefineByName("ADDTIVEFOG")}}re.RENDERMODE_OPAQUE=0,re.RENDERMODE_CUTOUT=1,re.RENDERMODE_TRANSPARENT=2,re.RENDERMODE_ADDTIVE=3,re.EMISSIVETEXTURE=4,re.REFLECTTEXTURE=5,re.MATERIALREFLECT=10,re.GLOWINGEDGECOLOR=12,re.BENDANGLE=164,re.BENDDISTANCE=165,re.isInit=!1;class se{constructor(e){this._albedoColor=new Laya.Vector4,this._offsetX=0,this._offsetY=0,this._isLoad=!1,this.obstacleWidth=.3,this._inpool=!1,this._isInit=!1,this.poolName="BaseBuilder",this._sceneRoot=e}get builderO(){return this._builder}intoPool(...e){this._builder&&(this._builder.active=!1),this._inpool=!0}outPool(...e){this._sceneRoot=e[0][0],this._builder&&(this._builder.active=!0),this._inpool=!1}setOffset(e,t,i){this._offsetX=e,this._offsetY=t,this._startZ=i,this._builder&&(this._builder.transform.position.x=this._offsetX,this._builder.transform.position.y=this._offsetY,this._builder.transform.position.z=this._startZ,this._builder.transform.position=this._builder.transform.position)}setAlbedoColor(e){e.cloneTo(this._albedoColor),this._builder&&this._builder.meshRenderer.material instanceof re&&(this._builder.meshRenderer.material.albedoColor=this._albedoColor)}init(e,t="",i=""){let n=!1,a=!1;this._url!=e&&(this._url=e,a=n=!0),this._material_url!=t&&(this._material_url=t,n=!0),this._materialMat!=i&&(this._materialMat=i,n=!0),n&&(this._builder&&a&&this._builder.removeSelf(),this.onCreate())}onCreate(){this._isLoad=!1;let e=[];""==this._url||Laya.loader.getRes(this._url)||e.push(this._url),this._material_url&&""!=this._material_url&&!Laya.loader.getRes(this._material_url)&&e.push(this._material_url),this._materialMat&&""!=this._materialMat&&!Laya.loader.getRes(this._materialMat)&&e.push(this._materialMat),0==e.length?this.onLoad():Laya.loader.create(e,Laya.Handler.create(this,this.onLoad))}onLoad(){this._isLoad=!0,this.builder()}builder(){}updateBlendOffset(e){this._builder&&this._builder.meshRenderer&&this._builder.meshRenderer.sharedMaterial instanceof re&&this._builder.meshRenderer.sharedMaterial.setBendOffset(e)}needRemove(){return this._sceneRoot.camera.transform.position.z-this._builder.transform.position.z>1}destory(){}dispose(){this._builder&&this._builder.destroy(!0)}get position(){return this._builder?this._builder.transform.position:null}update(e){if(this._isLoad)return!!this.needRemove()&&(this.destory(),!0)}}se.poolName="BaseBuilder";class le extends se{constructor(e){super(e),this.poolName="Road"}builder(){super.builder(),this._builder=this._sceneRoot.roadObj.clone(),this._builder.transform.position.x=this._offsetX,this._builder.transform.position.y=this._offsetY,this._builder.transform.position.z=this._startZ,this._builder.transform.position=this._builder.transform.position,this._sceneRoot.mapLayer.addChild(this._builder);let e=new re(this._builder.meshRenderer.material);e.albedoTexture=Laya.loader.getRes(this._material_url),this._builder.meshRenderer.material=e}needRemove(){return this._sceneRoot.camera.transform.position.z-this._builder.transform.position.z>30}setAlbedoColor(e){}destory(){super.destory()}}le.poolName="Road";class de{static malloc(e,t,...i){let n,a=this._pools[e.poolName];if(a&&(n=a.pull()),!n)if(t){switch(parseInt(t.length.toString())){case 0:n=new e;break;case 1:n=new e(t[0]);break;case 2:n=new e(t[0],t[1]);break;case 3:n=new e(t[0],t[1],t[2]);break;case 4:n=new e(t[0],t[1],t[2],t[3]);break;case 5:n=new e(t[0],t[1],t[2],t[3],t[4]);break;case 6:n=new e(t[0],t[1],t[2],t[3],t[4],t[5]);break;case 7:n=new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6]);break;case 8:n=new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]);break;case 9:n=new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8]);break;case 10:n=new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9])}}else n=new e;return n.outPool.apply(n,i),n}static free(e){let t=e.poolName,i=this._pools[t];i||(i=new he(t),this._pools[t]=i),e.intoPool(),i.push(e)}static clear(){for(let e in this._pools){let t=this._pools[e];t&&(t.destory&&t.destory(),t.dispose&&t.dispose())}this._pools={}}static update(e){if(this._nextUpdateTime>0)this._nextUpdateTime-=e;else{this._nextUpdateTime=2e4;for(let e in this._pools)this._pools[e].adaptSize()}}}de.MOLD_DEBUG_STRICT=0,de.MOLD_RELEASE_FAIL_SAFE=1,de.mold=de.MOLD_RELEASE_FAIL_SAFE,de._pools={},de._nextUpdateTime=0;class he{constructor(e){this._list=[],this._minSize=0,this._maxSize=0,this._mask=0,this._key=e}push(e){let t=this._list.length;-1==this._list.indexOf(e)?this._list[t]=e:de.mold==de.MOLD_DEBUG_STRICT||(de.mold,de.MOLD_RELEASE_FAIL_SAFE)}pull(){let e,t=this._list.length-1;return t>=0&&(e=this._list[t],this._list.length=t,this._minSize=Math.min(this._minSize,t),this._maxSize=Math.max(this._maxSize,t),this._mask=0),e}adaptSize(){this._mask++;let e=this._maxSize-this._minSize;this._mask<3&&(e+=2),this._list.length>e&&(this._list.length=e),this._minSize=this._maxSize=0}}class ce extends se{constructor(e){super(e),this._haveColo=!1,this.allowMove=!1,this.allowRoate=!1,this.meshCollisder=!1,this._builderName="Obstacle",this._sizeX=1,this._sizeY=1,this._sizeZ=1,this.moveSpeed=new Laya.Vector3(.01,0,0),this.status=1,this.curNum=.01,this.poolName="Obstacle"}intoPool(...e){this.allowRoate=!1,this.allowMove=!1,super.intoPool(e)}setBuilderName(e=""){this._builderName=e,this._builder&&(this._builder.name=this._builderName)}builder(){if(super.builder(),this._builder&&(this._builder.removeSelf(),this._builder=null),this._colo=null,this._haveColo=!1,this._url.indexOf(".lh")>=0){let e=Laya.Loader.getRes(this._url);this._builder=e.clone();let t=new re;t.albedoTexture=Laya.loader.getRes(this._material_url),t.albedoIntensity=1.1,t.albedoColor=new Laya.Vector4(1,1.05,1.05,1),this._builder.meshRenderer.material=t}else if(this._materialMat&&this._materialMat.length){let e=Laya.loader.getRes(this._url);this._builder=new Laya.MeshSprite3D(e),this._builder.camera=this._sceneRoot.camera;let t=new re;t.cloneMat(Laya.loader.getRes(this._materialMat)),t.albedoTexture=Laya.loader.getRes(this._material_url),this._builder.meshRenderer.material=t}else{let e=Laya.loader.getRes(this._url);this._builder=new Laya.MeshSprite3D(e),this._builder.camera=this._sceneRoot.camera;let t=new re;t.albedoTexture=Laya.loader.getRes(this._material_url),this._builder.meshRenderer.material=t}this._builder.transform.position.x=this._offsetX,this._builder.transform.position.y=this._offsetY,this._builder.transform.position.z=this._startZ,this._builder.transform.position=this._builder.transform.position,this._builder.name=this._builderName,this._sceneRoot.obstacleLayer.addChild(this._builder)}get bulideName(){return this._builderName}setSize(e,t,i){this._sizeX=e,this._sizeY=t,this._sizeZ=i,this.obstacleWidth=e/2}updateRoate(){let e=this._sceneRoot.mainPlayer.transform.position.z-this._builder.transform.position.z;this._roateV||(this._roateV=new Laya.Vector3(0,0,0)),this._moveV||(this._moveV=new Laya.Vector3(0,0,0)),this._roateV.setValue(0,0,0);let t=0,i=0,n=0;if(0==this._offsetX)this._roateV.z=1,i=-.2;else if(this._offsetX<0){if((e=Math.abs(e))>Q.randomRange(30,40))return;this._roateV.y=1,t=.18,n=-.1}else if(this._offsetX>0){if((e=Math.abs(e))>Q.randomRange(30,40))return;this._roateV.y=1,t=-.18,n=-.1}this._builder.transform.position.y<=.7&&(n=0),this._builder.transform.rotate(this._roateV,!1,!1),this._moveV.setValue(t,n,i),this._builder.transform.translate(this._moveV,!1)}update(e){if(!this._isLoad||!this._sceneRoot.mainPlayer)return;return this.allowMove&&this.updateOffsetX(),this.allowRoate&&this.updateRoate(),Math.abs(this._sceneRoot.mainPlayer.playerScript.diff_z-this._builder.transform.position.z)<20?this._haveColo||(this._colo?this._colo.canCollideWith=Laya.Physics3DUtils.COLLISIONFILTERGROUP_CUSTOMFILTER2:this._colo=this.addColo(this._builder,this._sizeX,this._sizeY,this._sizeZ),this._haveColo=!0):this._haveColo&&(this._haveColo=!1,this._colo&&(this._colo.canCollideWith=Laya.Physics3DUtils.COLLISIONFILTERGROUP_CUSTOMFILTER4)),super.update(e)}updateOffsetX(){let e=this._sceneRoot.score;e>=15e3&&e<3e4&&1==this.status?(this.status=2,this.moveSpeed.x=.03,this.curNum=.03):e>=3e4&&e<5e4&&2==this.status?(this.status=3,this.moveSpeed.x=.04,this.curNum=.04):e>=5e4&&e<1e5&&3==this.status?(this.status=4,this.moveSpeed.x=.05,this.curNum=.05):e>=1e5&&4==this.status&&(this.status=5,this.moveSpeed.x=.06,this.curNum=.06),Math.abs(this._builder.transform.position.x)>=.508?(this.moveSpeed.x=this._builder.transform.position.x>0?.507-this._builder.transform.position.x:-.507-this._builder.transform.position.x,this._builder.transform.translate(this.moveSpeed),this.moveSpeed.x=this._builder.transform.position.x>0?-this.curNum:this.curNum):this._builder.transform.translate(this.moveSpeed)}needRemove(){return this._sceneRoot.camera.transform.position.z-this._builder.transform.position.z>this._sizeZ}addColo(e,t,i,n){if(!e)return;let a=e.addComponent(Laya.PhysicsCollider),o=new Laya.BoxColliderShape(t,i,n);return a.colliderShape=o,a.collisionGroup=Laya.Physics3DUtils.COLLISIONFILTERGROUP_CUSTOMFILTER3,a.canCollideWith=Laya.Physics3DUtils.COLLISIONFILTERGROUP_CUSTOMFILTER2,a.friction=2,a.restitution=.3,a.isTrigger=!0,a}preCanFree(){return-100==this._offsetX&&this._isLoad}}ce.poolName="Obstacle";class pe extends se{constructor(e){super(e),this._haveColo=!1,this.poolName="SpeedAdd"}onCreate(){Laya.Loader.getRes(this._url)?this.onLoad():Laya.Sprite3D.load(this._url,Laya.Handler.create(this,this.onLoad))}builder(){super.builder(),this._builder&&(this._builder.removeSelf(),this._builder=null),this._colo=null,this._haveColo=!1;let e=Laya.Loader.getRes(this._url);if(!e)return;this._builder=e.clone(),this._builder.transform.position.x=this._offsetX,this._builder.transform.position.y=this._offsetY,this._builder.transform.position.z=this._startZ,this._builder.transform.position=this._builder.transform.position,this._sceneRoot.obstacleLayer.addChild(this._builder);let t=new re;t.albedoTexture=Laya.loader.getRes(this._material_url),this._builder.meshRenderer.material=t,this._builder.name="accelerate"}update(e){if(!this._isLoad||!this._builder)return;return Math.abs(this._sceneRoot.camera.transform.position.z-this._builder.transform.position.z)<10?this._haveColo||(this._colo?this._colo.canCollideWith=Laya.Physics3DUtils.COLLISIONFILTERGROUP_CUSTOMFILTER2:this._colo=this.addColo(this._builder,1.27,.02,4.14),this._haveColo=!0):this._haveColo&&(this._haveColo=!1,this._colo&&(this._colo.canCollideWith=Laya.Physics3DUtils.COLLISIONFILTERGROUP_CUSTOMFILTER2)),super.update(e)}addColo(e,t,i,n){if(!e)return;let a=e.addComponent(Laya.PhysicsCollider),o=new Laya.BoxColliderShape(t,i,n);return a.colliderShape=o,a.collisionGroup=Laya.Physics3DUtils.COLLISIONFILTERGROUP_CUSTOMFILTER3,a.canCollideWith=Laya.Physics3DUtils.COLLISIONFILTERGROUP_CUSTOMFILTER2,a.friction=2,a.restitution=.3,a.isTrigger=!0,a}preCanFree(){return-100==this._offsetX&&this._isLoad}}pe.poolName="SpeedAdd";class me extends se{constructor(e){super(e),this.reverOffsetX=0,this._diffy=-.5,this.poolName="Builder"}builder(){super.builder(),this._builder=this._sceneRoot.builderObj.clone(),this._builder.transform.position.x=this._offsetX,this._builder.transform.position.y=this._offsetY+this._diffy,this._builder.transform.position.z=this._startZ,this._builder.transform.position=this._builder.transform.position,this._builder.name="Builder",this._sceneRoot.builderLayer.addChild(this._builder);let e=new re;e.albedoTexture=Laya.loader.getRes(this._material_url),this._builder.meshRenderer.material=e}setOffset(e,t,i){super.setOffset(e,t+this._diffy,i)}setAlbedoColor(e){}needRemove(){return this._sceneRoot.camera.transform.position.z-this._builder.transform.position.z>32}get builder3D(){return this._builder}}me.poolName="Builder";class ue extends se{constructor(e){super(e),this.reverOffsetX=0,this.poolName="Tree"}builder(){super.builder(),this._builder=this._sceneRoot.treeObj.clone(),this._builder.transform.position.x=this._offsetX,this._builder.transform.position.y=this._offsetY,this._builder.transform.position.z=this._startZ,this._builder.transform.position=this._builder.transform.position,this._builder.name="Tree",this._sceneRoot.builderLayer.addChild(this._builder);let e=new re;e.albedoTexture=Laya.loader.getRes(this._material_url),this._builder.meshRenderer.material=e}needRemove(){return this._sceneRoot.camera.transform.position.z-this._builder.transform.position.z>32}get builder3D(){return this._builder}}ue.poolName="Tree";class ge extends ce{constructor(e){super(e),this.poolName="Flag"}onCreate(){Laya.Loader.getRes(this._url)?this.onLoad():Laya.Sprite3D.load(this._url,Laya.Handler.create(this,this.onLoad))}builder(){if(this._builder&&(this._builder.removeSelf(),this._builder=null),this._colo=null,this._haveColo=!1,!this._flagClone){let e=Laya.Loader.getRes(this._url);if(!e)return;this._flagClone=e}this._builder=this._flagClone.clone(),this._builder.transform.position.x=this._offsetX,this._builder.transform.position.y=this._offsetY,this._builder.transform.position.z=this._startZ,this._builder.transform.position=this._builder.transform.position,this._sceneRoot.obstacleLayer.addChild(this._builder);let e=this._builder.getChildByName("flag_gate01"),t=new re;t.albedoTexture=Laya.loader.getRes($.scene_model+"subastanceall.jpg"),e.skinnedMeshRenderer.material=t,this.animator||(this.animator=this._builder.getComponent(Laya.Animator))}updateBlendOffset(e){if(!this._builder)return;let t=this._builder.getChildByName("flag_gate01");t.skinnedMeshRenderer&&t.skinnedMeshRenderer.sharedMaterial instanceof re&&t.skinnedMeshRenderer.sharedMaterial.setBendOffset(e)}setOffset(e,t,i){super.setOffset(e,t,i),this.animator&&this.animator.play("stand")}}ge.poolName="Flag";class fe extends se{constructor(e){super(e),this.reverOffsetX=0,this.needMirror=!1,this.poolName="Adver"}builder(){super.builder(),this._builder=this._sceneRoot.adverObj.clone(),this._builder.transform.position.x=this._offsetX,this._builder.transform.position.y=this._offsetY,this._builder.transform.position.z=this._startZ,this._builder.transform.position=this._builder.transform.position,this._scaleV||(this._scaleV=new Laya.Vector3(1,1,1)),this._scaleV.x=this.needMirror?-1:1,this._builder.transform.setWorldLossyScale(this._scaleV),this._builder.name="Adver",this._sceneRoot.builderLayer.addChild(this._builder);let e=new re;e.albedoTexture=Laya.loader.getRes(this._material_url),this._builder.meshRenderer.material=e}setOffset(e,t,i){super.setOffset(e,t,i),this._builder&&(this._scaleV||(this._scaleV=new Laya.Vector3(1,1,1)),this._scaleV.x=this.needMirror?-1:1,this._builder.transform.setWorldLossyScale(this._scaleV))}needRemove(){return this._sceneRoot.camera.transform.position.z-this._builder.transform.position.z>32}get builder3D(){return this._builder}}fe.poolName="Adver";class ye extends Laya.ShurikenParticleMaterial{constructor(){super(),this.initShader1(),this.setShaderName("PARTICLESHURIKENEXP"),this.setBendDistance(50)}get tintColor(){return this._getColor(ye.TINTCOLOR)}set tintColor(e){e?this._addShaderDefine(ye.SHADERDEFINE_TINTCOLOR):this._removeShaderDefine(ye.SHADERDEFINE_TINTCOLOR),this._setColor(ye.TINTCOLOR,e)}getBendOffset(){return this._getColor(ye.BENDANGLE)}setBendOffset(e){this._setColor(ye.BENDANGLE,e)}setBendDistance(e){this._setNumber(ye.BENDDISTANCE,e)}get texture(){return this._shaderValues.getTexture(ye.DIFFUSETEXTURE)}set texture(e){e?this._shaderValues.addDefine(ye.SHADERDEFINE_DIFFUSEMAP):this._shaderValues.removeDefine(ye.SHADERDEFINE_DIFFUSEMAP),this._setTexture(ye.DIFFUSETEXTURE,e)}cloneMat(e){if(e)for(let t in this)if("_shader"!=t)if("_shaderValues"==t)for(let i in e[t]._data)this[t]._data[i]=e[t]._data[i];else this[t]=e[t]}initShader1(){if(ye.isInit)return;let e,t;ye.isInit=!0,ye.BENDANGLE=Laya.Shader3D.propertyNameToID("_QOffset"),ye.BENDDISTANCE=Laya.Shader3D.propertyNameToID("_Dist");let i={a_CornerTextureCoordinate:Laya.VertexShuriKenParticle.PARTICLE_CORNERTEXTURECOORDINATE0,a_MeshPosition:Laya.VertexShuriKenParticle.PARTICLE_POSITION0,a_MeshColor:Laya.VertexShuriKenParticle.PARTICLE_COLOR0,a_MeshTextureCoordinate:Laya.VertexShuriKenParticle.PARTICLE_TEXTURECOORDINATE0,a_ShapePositionStartLifeTime:Laya.VertexShuriKenParticle.PARTICLE_SHAPEPOSITIONSTARTLIFETIME,a_DirectionTime:Laya.VertexShuriKenParticle.PARTICLE_DIRECTIONTIME,a_StartColor:Laya.VertexShuriKenParticle.PARTICLE_STARTCOLOR0,a_EndColor:Laya.VertexShuriKenParticle.PARTICLE_ENDCOLOR0,a_StartSize:Laya.VertexShuriKenParticle.PARTICLE_STARTSIZE,a_StartRotation0:Laya.VertexShuriKenParticle.PARTICLE_STARTROTATION,a_StartSpeed:Laya.VertexShuriKenParticle.PARTICLE_STARTSPEED,a_Random0:Laya.VertexShuriKenParticle.PARTICLE_RANDOM0,a_Random1:Laya.VertexShuriKenParticle.PARTICLE_RANDOM1,a_SimulationWorldPostion:Laya.VertexShuriKenParticle.PARTICLE_SIMULATIONWORLDPOSTION,a_SimulationWorldRotation:Laya.VertexShuriKenParticle.PARTICLE_SIMULATIONWORLDROTATION},n={u_Tintcolor:Laya.Shader3D.PERIOD_MATERIAL,u_TilingOffset:Laya.Shader3D.PERIOD_MATERIAL,u_texture:Laya.Shader3D.PERIOD_MATERIAL,_QOffset:Laya.Shader3D.PERIOD_MATERIAL,_Dist:Laya.Shader3D.PERIOD_MATERIAL,u_WorldPosition:Laya.Shader3D.PERIOD_SPRITE,u_WorldRotation:Laya.Shader3D.PERIOD_SPRITE,u_PositionScale:Laya.Shader3D.PERIOD_SPRITE,u_SizeScale:Laya.Shader3D.PERIOD_SPRITE,u_ScalingMode:Laya.Shader3D.PERIOD_SPRITE,u_Gravity:Laya.Shader3D.PERIOD_SPRITE,u_ThreeDStartRotation:Laya.Shader3D.PERIOD_SPRITE,u_StretchedBillboardLengthScale:Laya.Shader3D.PERIOD_SPRITE,u_StretchedBillboardSpeedScale:Laya.Shader3D.PERIOD_SPRITE,u_SimulationSpace:Laya.Shader3D.PERIOD_SPRITE,u_CurrentTime:Laya.Shader3D.PERIOD_SPRITE,u_ColorOverLifeGradientAlphas:Laya.Shader3D.PERIOD_SPRITE,u_ColorOverLifeGradientColors:Laya.Shader3D.PERIOD_SPRITE,u_MaxColorOverLifeGradientAlphas:Laya.Shader3D.PERIOD_SPRITE,u_MaxColorOverLifeGradientColors:Laya.Shader3D.PERIOD_SPRITE,u_VOLVelocityConst:Laya.Shader3D.PERIOD_SPRITE,u_VOLVelocityGradientX:Laya.Shader3D.PERIOD_SPRITE,u_VOLVelocityGradientY:Laya.Shader3D.PERIOD_SPRITE,u_VOLVelocityGradientZ:Laya.Shader3D.PERIOD_SPRITE,u_VOLVelocityConstMax:Laya.Shader3D.PERIOD_SPRITE,u_VOLVelocityGradientMaxX:Laya.Shader3D.PERIOD_SPRITE,u_VOLVelocityGradientMaxY:Laya.Shader3D.PERIOD_SPRITE,u_VOLVelocityGradientMaxZ:Laya.Shader3D.PERIOD_SPRITE,u_VOLSpaceType:Laya.Shader3D.PERIOD_SPRITE,u_SOLSizeGradient:Laya.Shader3D.PERIOD_SPRITE,u_SOLSizeGradientX:Laya.Shader3D.PERIOD_SPRITE,u_SOLSizeGradientY:Laya.Shader3D.PERIOD_SPRITE,u_SOLSizeGradientZ:Laya.Shader3D.PERIOD_SPRITE,u_SOLSizeGradientMax:Laya.Shader3D.PERIOD_SPRITE,u_SOLSizeGradientMaxX:Laya.Shader3D.PERIOD_SPRITE,u_SOLSizeGradientMaxY:Laya.Shader3D.PERIOD_SPRITE,u_SOLSizeGradientMaxZ:Laya.Shader3D.PERIOD_SPRITE,u_ROLAngularVelocityConst:Laya.Shader3D.PERIOD_SPRITE,u_ROLAngularVelocityConstSeprarate:Laya.Shader3D.PERIOD_SPRITE,u_ROLAngularVelocityGradient:Laya.Shader3D.PERIOD_SPRITE,u_ROLAngularVelocityGradientX:Laya.Shader3D.PERIOD_SPRITE,u_ROLAngularVelocityGradientY:Laya.Shader3D.PERIOD_SPRITE,u_ROLAngularVelocityGradientZ:Laya.Shader3D.PERIOD_SPRITE,u_ROLAngularVelocityGradientW:Laya.Shader3D.PERIOD_SPRITE,u_ROLAngularVelocityConstMax:Laya.Shader3D.PERIOD_SPRITE,u_ROLAngularVelocityConstMaxSeprarate:Laya.Shader3D.PERIOD_SPRITE,u_ROLAngularVelocityGradientMax:Laya.Shader3D.PERIOD_SPRITE,u_ROLAngularVelocityGradientMaxX:Laya.Shader3D.PERIOD_SPRITE,u_ROLAngularVelocityGradientMaxY:Laya.Shader3D.PERIOD_SPRITE,u_ROLAngularVelocityGradientMaxZ:Laya.Shader3D.PERIOD_SPRITE,u_ROLAngularVelocityGradientMaxW:Laya.Shader3D.PERIOD_SPRITE,u_TSACycles:Laya.Shader3D.PERIOD_SPRITE,u_TSASubUVLength:Laya.Shader3D.PERIOD_SPRITE,u_TSAGradientUVs:Laya.Shader3D.PERIOD_SPRITE,u_TSAMaxGradientUVs:Laya.Shader3D.PERIOD_SPRITE,u_CameraPosition:Laya.Shader3D.PERIOD_CAMERA,u_CameraDirection:Laya.Shader3D.PERIOD_CAMERA,u_CameraUp:Laya.Shader3D.PERIOD_CAMERA,u_View:Laya.Shader3D.PERIOD_CAMERA,u_Projection:Laya.Shader3D.PERIOD_CAMERA,u_FogStart:Laya.Shader3D.PERIOD_SCENE,u_FogRange:Laya.Shader3D.PERIOD_SCENE,u_FogColor:Laya.Shader3D.PERIOD_SCENE},a=Laya.Shader3D.add("PARTICLESHURIKENEXP");e="#ifdef HIGHPRECISION\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n\n#if defined(SPHERHBILLBOARD)||defined(STRETCHEDBILLBOARD)||defined(HORIZONTALBILLBOARD)||defined(VERTICALBILLBOARD)\nattribute vec4 a_CornerTextureCoordinate;\n#endif\n#ifdef RENDERMODE_MESH\nattribute vec3 a_MeshPosition;\nattribute vec4 a_MeshColor;\nattribute vec2 a_MeshTextureCoordinate;\nvarying vec4 v_MeshColor;\n#endif\n\nattribute vec4 a_ShapePositionStartLifeTime;\nattribute vec4 a_DirectionTime;\nattribute vec4 a_StartColor;\nattribute vec3 a_StartSize;\nattribute vec3 a_StartRotation0;\nattribute float a_StartSpeed;\n#if defined(COLOROVERLIFETIME)||defined(RANDOMCOLOROVERLIFETIME)||defined(SIZEOVERLIFETIMERANDOMCURVES)||defined(SIZEOVERLIFETIMERANDOMCURVESSEPERATE)||defined(ROTATIONOVERLIFETIMERANDOMCONSTANTS)||defined(ROTATIONOVERLIFETIMERANDOMCURVES)\nattribute vec4 a_Random0;\n#endif\n#if defined(TEXTURESHEETANIMATIONRANDOMCURVE)||defined(VELOCITYOVERLIFETIMERANDOMCONSTANT)||defined(VELOCITYOVERLIFETIMERANDOMCURVE)\nattribute vec4 a_Random1;\n#endif\nattribute vec3 a_SimulationWorldPostion;\nattribute vec4 a_SimulationWorldRotation;\n\nvarying float v_Discard;\nvarying vec4 v_Color;\n#ifdef DIFFUSEMAP\nvarying vec2 v_TextureCoordinate;\n#endif\n\nuniform float u_CurrentTime;\nuniform vec3 u_Gravity;\n\nuniform vec3 u_WorldPosition;\nuniform vec4 u_WorldRotation;\nuniform bool u_ThreeDStartRotation;\nuniform int u_ScalingMode;\nuniform vec3 u_PositionScale;\nuniform vec3 u_SizeScale;\nuniform mat4 u_View;\nuniform mat4 u_Projection;\n\n#ifdef STRETCHEDBILLBOARD\nuniform vec3 u_CameraPosition;\n#endif\nuniform vec3 u_CameraDirection;//TODO:只有几种广告牌模式需要用\nuniform vec3 u_CameraUp;\n\nuniform  float u_StretchedBillboardLengthScale;\nuniform  float u_StretchedBillboardSpeedScale;\nuniform int u_SimulationSpace;\n\n#if defined(VELOCITYOVERLIFETIMECONSTANT)||defined(VELOCITYOVERLIFETIMECURVE)||defined(VELOCITYOVERLIFETIMERANDOMCONSTANT)||defined(VELOCITYOVERLIFETIMERANDOMCURVE)\nuniform  int  u_VOLSpaceType;\n#endif\n#if defined(VELOCITYOVERLIFETIMECONSTANT)||defined(VELOCITYOVERLIFETIMERANDOMCONSTANT)\nuniform  vec3 u_VOLVelocityConst;\n#endif\n#if defined(VELOCITYOVERLIFETIMECURVE)||defined(VELOCITYOVERLIFETIMERANDOMCURVE)\nuniform  vec2 u_VOLVelocityGradientX[4];//x为key,y为速度\nuniform  vec2 u_VOLVelocityGradientY[4];//x为key,y为速度\nuniform  vec2 u_VOLVelocityGradientZ[4];//x为key,y为速度\n#endif\n#ifdef VELOCITYOVERLIFETIMERANDOMCONSTANT\nuniform  vec3 u_VOLVelocityConstMax;\n#endif\n#ifdef VELOCITYOVERLIFETIMERANDOMCURVE\nuniform  vec2 u_VOLVelocityGradientMaxX[4];//x为key,y为速度\nuniform  vec2 u_VOLVelocityGradientMaxY[4];//x为key,y为速度\nuniform  vec2 u_VOLVelocityGradientMaxZ[4];//x为key,y为速度\n#endif\n\n#ifdef COLOROVERLIFETIME\nuniform  vec4 u_ColorOverLifeGradientColors[4];//x为key,yzw为Color\nuniform  vec2 u_ColorOverLifeGradientAlphas[4];//x为key,y为Alpha\n#endif\n#ifdef RANDOMCOLOROVERLIFETIME\nuniform  vec4 u_ColorOverLifeGradientColors[4];//x为key,yzw为Color\nuniform  vec2 u_ColorOverLifeGradientAlphas[4];//x为key,y为Alpha\nuniform  vec4 u_MaxColorOverLifeGradientColors[4];//x为key,yzw为Color\nuniform  vec2 u_MaxColorOverLifeGradientAlphas[4];//x为key,y为Alpha\n#endif\n\n\n#if defined(SIZEOVERLIFETIMECURVE)||defined(SIZEOVERLIFETIMERANDOMCURVES)\nuniform  vec2 u_SOLSizeGradient[4];//x为key,y为尺寸\n#endif\n#ifdef SIZEOVERLIFETIMERANDOMCURVES\nuniform  vec2 u_SOLSizeGradientMax[4];//x为key,y为尺寸\n#endif\n#if defined(SIZEOVERLIFETIMECURVESEPERATE)||defined(SIZEOVERLIFETIMERANDOMCURVESSEPERATE)\nuniform  vec2 u_SOLSizeGradientX[4];//x为key,y为尺寸\nuniform  vec2 u_SOLSizeGradientY[4];//x为key,y为尺寸\nuniform  vec2 u_SOLSizeGradientZ[4];//x为key,y为尺寸\n#endif\n#ifdef SIZEOVERLIFETIMERANDOMCURVESSEPERATE\nuniform  vec2 u_SOLSizeGradientMaxX[4];//x为key,y为尺寸\nuniform  vec2 u_SOLSizeGradientMaxY[4];//x为key,y为尺寸\nuniform  vec2 u_SOLSizeGradientMaxZ[4];//x为key,y为尺寸\n#endif\n\n\n#ifdef ROTATIONOVERLIFETIME\n#if defined(ROTATIONOVERLIFETIMECONSTANT)||defined(ROTATIONOVERLIFETIMERANDOMCONSTANTS)\nuniform  float u_ROLAngularVelocityConst;\n#endif\n#ifdef ROTATIONOVERLIFETIMERANDOMCONSTANTS\nuniform  float u_ROLAngularVelocityConstMax;\n#endif\n#if defined(ROTATIONOVERLIFETIMECURVE)||defined(ROTATIONOVERLIFETIMERANDOMCURVES)\nuniform  vec2 u_ROLAngularVelocityGradient[4];//x为key,y为旋转\n#endif\n#ifdef ROTATIONOVERLIFETIMERANDOMCURVES\nuniform  vec2 u_ROLAngularVelocityGradientMax[4];//x为key,y为旋转\n#endif\n#endif\n#ifdef ROTATIONOVERLIFETIMESEPERATE\n#if defined(ROTATIONOVERLIFETIMECONSTANT)||defined(ROTATIONOVERLIFETIMERANDOMCONSTANTS)\nuniform  vec3 u_ROLAngularVelocityConstSeprarate;\n#endif\n#ifdef ROTATIONOVERLIFETIMERANDOMCONSTANTS\nuniform  vec3 u_ROLAngularVelocityConstMaxSeprarate;\n#endif\n#if defined(ROTATIONOVERLIFETIMECURVE)||defined(ROTATIONOVERLIFETIMERANDOMCURVES)\nuniform  vec2 u_ROLAngularVelocityGradientX[4];\nuniform  vec2 u_ROLAngularVelocityGradientY[4];\nuniform  vec2 u_ROLAngularVelocityGradientZ[4];\nuniform  vec2 u_ROLAngularVelocityGradientW[4];\n#endif\n#ifdef ROTATIONOVERLIFETIMERANDOMCURVES\nuniform  vec2 u_ROLAngularVelocityGradientMaxX[4];\nuniform  vec2 u_ROLAngularVelocityGradientMaxY[4];\nuniform  vec2 u_ROLAngularVelocityGradientMaxZ[4];\nuniform  vec2 u_ROLAngularVelocityGradientMaxW[4];\n#endif\n#endif\n\n#if defined(TEXTURESHEETANIMATIONCURVE)||defined(TEXTURESHEETANIMATIONRANDOMCURVE)\nuniform  float u_TSACycles;\nuniform  vec2 u_TSASubUVLength;\nuniform  vec2 u_TSAGradientUVs[4];//x为key,y为frame\n#endif\n#ifdef TEXTURESHEETANIMATIONRANDOMCURVE\nuniform  vec2 u_TSAMaxGradientUVs[4];//x为key,y为frame\n#endif\n\n#ifdef FOG\nvarying vec3 v_PositionWorld;\n#endif\n\n#ifdef TILINGOFFSET\nuniform vec4 u_TilingOffset;\n#endif\nuniform vec4 _QOffset;\nuniform float _Dist;\n\nvec3 rotationByEuler(in vec3 vector,in vec3 rot)\n{\nfloat halfRoll = rot.z * 0.5;\nfloat halfPitch = rot.x * 0.5;\nfloat halfYaw = rot.y * 0.5;\n\nfloat sinRoll = sin(halfRoll);\nfloat cosRoll = cos(halfRoll);\nfloat sinPitch = sin(halfPitch);\nfloat cosPitch = cos(halfPitch);\nfloat sinYaw = sin(halfYaw);\nfloat cosYaw = cos(halfYaw);\n\nfloat quaX = (cosYaw * sinPitch * cosRoll) + (sinYaw * cosPitch * sinRoll);\nfloat quaY = (sinYaw * cosPitch * cosRoll) - (cosYaw * sinPitch * sinRoll);\nfloat quaZ = (cosYaw * cosPitch * sinRoll) - (sinYaw * sinPitch * cosRoll);\nfloat quaW = (cosYaw * cosPitch * cosRoll) + (sinYaw * sinPitch * sinRoll);\n\n//vec4 q=vec4(quaX,quaY,quaZ,quaW);\n//vec3 temp = cross(q.xyz, vector) + q.w * vector;\n//return (cross(temp, -q.xyz) + dot(q.xyz,vector) * q.xyz + q.w * temp);\n\nfloat x = quaX + quaX;\nfloat y = quaY + quaY;\nfloat z = quaZ + quaZ;\nfloat wx = quaW * x;\nfloat wy = quaW * y;\nfloat wz = quaW * z;\nfloat xx = quaX * x;\nfloat xy = quaX * y;\nfloat xz = quaX * z;\nfloat yy = quaY * y;\nfloat yz = quaY * z;\nfloat zz = quaZ * z;\n\nreturn vec3(((vector.x * ((1.0 - yy) - zz)) + (vector.y * (xy - wz))) + (vector.z * (xz + wy)),\n            ((vector.x * (xy + wz)) + (vector.y * ((1.0 - xx) - zz))) + (vector.z * (yz - wx)),\n            ((vector.x * (xz - wy)) + (vector.y * (yz + wx))) + (vector.z * ((1.0 - xx) - yy)));\n\n}\n\n//假定axis已经归一化\nvec3 rotationByAxis(in vec3 vector,in vec3 axis, in float angle)\n{\nfloat halfAngle = angle * 0.5;\nfloat sin = sin(halfAngle);\n\nfloat quaX = axis.x * sin;\nfloat quaY = axis.y * sin;\nfloat quaZ = axis.z * sin;\nfloat quaW = cos(halfAngle);\n\n//vec4 q=vec4(quaX,quaY,quaZ,quaW);\n//vec3 temp = cross(q.xyz, vector) + q.w * vector;\n//return (cross(temp, -q.xyz) + dot(q.xyz,vector) * q.xyz + q.w * temp);\n\nfloat x = quaX + quaX;\nfloat y = quaY + quaY;\nfloat z = quaZ + quaZ;\nfloat wx = quaW * x;\nfloat wy = quaW * y;\nfloat wz = quaW * z;\nfloat xx = quaX * x;\nfloat xy = quaX * y;\nfloat xz = quaX * z;\nfloat yy = quaY * y;\nfloat yz = quaY * z;\nfloat zz = quaZ * z;\n\nreturn vec3(((vector.x * ((1.0 - yy) - zz)) + (vector.y * (xy - wz))) + (vector.z * (xz + wy)),\n            ((vector.x * (xy + wz)) + (vector.y * ((1.0 - xx) - zz))) + (vector.z * (yz - wx)),\n            ((vector.x * (xz - wy)) + (vector.y * (yz + wx))) + (vector.z * ((1.0 - xx) - yy)));\n\n}\n\nvec3 rotationByQuaternions(in vec3 v,in vec4 q) \n{\nreturn v + 2.0 * cross(q.xyz, cross(q.xyz, v) + q.w * v);\n}\n\n\n#if defined(VELOCITYOVERLIFETIMECURVE)||defined(VELOCITYOVERLIFETIMERANDOMCURVE)||defined(SIZEOVERLIFETIMECURVE)||defined(SIZEOVERLIFETIMECURVESEPERATE)||defined(SIZEOVERLIFETIMERANDOMCURVES)||defined(SIZEOVERLIFETIMERANDOMCURVESSEPERATE)\nfloat getCurValueFromGradientFloat(in vec2 gradientNumbers[4],in float normalizedAge)\n{\nfloat curValue;\nfor(int i=1;i<4;i++)\n{\n    vec2 gradientNumber=gradientNumbers[i];\n    float key=gradientNumber.x;\n    if(key>=normalizedAge)\n    {\n        vec2 lastGradientNumber=gradientNumbers[i-1];\n        float lastKey=lastGradientNumber.x;\n        float age=(normalizedAge-lastKey)/(key-lastKey);\n        curValue=mix(lastGradientNumber.y,gradientNumber.y,age);\n        break;\n    }\n}\nreturn curValue;\n}\n#endif\n\n#if defined(VELOCITYOVERLIFETIMECURVE)||defined(VELOCITYOVERLIFETIMERANDOMCURVE)||defined(ROTATIONOVERLIFETIMECURVE)||defined(ROTATIONOVERLIFETIMERANDOMCURVES)\nfloat getTotalValueFromGradientFloat(in vec2 gradientNumbers[4],in float normalizedAge)\n{\nfloat totalValue=0.0;\nfor(int i=1;i<4;i++)\n{\n    vec2 gradientNumber=gradientNumbers[i];\n    float key=gradientNumber.x;\n    vec2 lastGradientNumber=gradientNumbers[i-1];\n    float lastValue=lastGradientNumber.y;\n    \n    if(key>=normalizedAge){\n        float lastKey=lastGradientNumber.x;\n        float age=(normalizedAge-lastKey)/(key-lastKey);\n        totalValue+=(lastValue+mix(lastValue,gradientNumber.y,age))/2.0*a_ShapePositionStartLifeTime.w*(normalizedAge-lastKey);\n        break;\n    }\n    else{\n        totalValue+=(lastValue+gradientNumber.y)/2.0*a_ShapePositionStartLifeTime.w*(key-lastGradientNumber.x);\n    }\n}\nreturn totalValue;\n}\n#endif\n\n#if defined(COLOROVERLIFETIME)||defined(RANDOMCOLOROVERLIFETIME)\nvec4 getColorFromGradient(in vec2 gradientAlphas[4],in vec4 gradientColors[4],in float normalizedAge)\n{\nvec4 overTimeColor;\nfor(int i=1;i<4;i++)\n{\n    vec2 gradientAlpha=gradientAlphas[i];\n    float alphaKey=gradientAlpha.x;\n    if(alphaKey>=normalizedAge)\n    {\n        vec2 lastGradientAlpha=gradientAlphas[i-1];\n        float lastAlphaKey=lastGradientAlpha.x;\n        float age=(normalizedAge-lastAlphaKey)/(alphaKey-lastAlphaKey);\n        overTimeColor.a=mix(lastGradientAlpha.y,gradientAlpha.y,age);\n        break;\n    }\n}\n\nfor(int i=1;i<4;i++)\n{\n    vec4 gradientColor=gradientColors[i];\n    float colorKey=gradientColor.x;\n    if(colorKey>=normalizedAge)\n    {\n        vec4 lastGradientColor=gradientColors[i-1];\n        float lastColorKey=lastGradientColor.x;\n        float age=(normalizedAge-lastColorKey)/(colorKey-lastColorKey);\n        overTimeColor.rgb=mix(gradientColors[i-1].yzw,gradientColor.yzw,age);\n        break;\n    }\n}\nreturn overTimeColor;\n}\n#endif\n\n\n#if defined(TEXTURESHEETANIMATIONCURVE)||defined(TEXTURESHEETANIMATIONRANDOMCURVE)\nfloat getFrameFromGradient(in vec2 gradientFrames[4],in float normalizedAge)\n{\nfloat overTimeFrame;\nfor(int i=1;i<4;i++)\n{\n    vec2 gradientFrame=gradientFrames[i];\n    float key=gradientFrame.x;\n    if(key>=normalizedAge)\n    {\n        vec2 lastGradientFrame=gradientFrames[i-1];\n        float lastKey=lastGradientFrame.x;\n        float age=(normalizedAge-lastKey)/(key-lastKey);\n        overTimeFrame=mix(lastGradientFrame.y,gradientFrame.y,age);\n        break;\n    }\n}\nreturn floor(overTimeFrame);\n}\n#endif\n\n#if defined(VELOCITYOVERLIFETIMECONSTANT)||defined(VELOCITYOVERLIFETIMECURVE)||defined(VELOCITYOVERLIFETIMERANDOMCONSTANT)||defined(VELOCITYOVERLIFETIMERANDOMCURVE)\nvec3 computeParticleLifeVelocity(in float normalizedAge)\n{\nvec3 outLifeVelocity;\n#ifdef VELOCITYOVERLIFETIMECONSTANT\n    outLifeVelocity=u_VOLVelocityConst; \n#endif\n#ifdef VELOCITYOVERLIFETIMECURVE\n    outLifeVelocity= vec3(getCurValueFromGradientFloat(u_VOLVelocityGradientX,normalizedAge),getCurValueFromGradientFloat(u_VOLVelocityGradientY,normalizedAge),getCurValueFromGradientFloat(u_VOLVelocityGradientZ,normalizedAge));\n#endif\n#ifdef VELOCITYOVERLIFETIMERANDOMCONSTANT\n    outLifeVelocity=mix(u_VOLVelocityConst,u_VOLVelocityConstMax,vec3(a_Random1.y,a_Random1.z,a_Random1.w)); \n#endif\n#ifdef VELOCITYOVERLIFETIMERANDOMCURVE\n    outLifeVelocity=vec3(mix(getCurValueFromGradientFloat(u_VOLVelocityGradientX,normalizedAge),getCurValueFromGradientFloat(u_VOLVelocityGradientMaxX,normalizedAge),a_Random1.y),\n                    mix(getCurValueFromGradientFloat(u_VOLVelocityGradientY,normalizedAge),getCurValueFromGradientFloat(u_VOLVelocityGradientMaxY,normalizedAge),a_Random1.z),\n                    mix(getCurValueFromGradientFloat(u_VOLVelocityGradientZ,normalizedAge),getCurValueFromGradientFloat(u_VOLVelocityGradientMaxZ,normalizedAge),a_Random1.w));\n#endif\n                \nreturn outLifeVelocity;\n} \n#endif\n\nvec3 computeParticlePosition(in vec3 startVelocity, in vec3 lifeVelocity,in float age,in float normalizedAge,vec3 gravityVelocity,vec4 worldRotation)\n{\nvec3 startPosition;\nvec3 lifePosition;\n#if defined(VELOCITYOVERLIFETIMECONSTANT)||defined(VELOCITYOVERLIFETIMECURVE)||defined(VELOCITYOVERLIFETIMERANDOMCONSTANT)||defined(VELOCITYOVERLIFETIMERANDOMCURVE)\n#ifdef VELOCITYOVERLIFETIMECONSTANT\n        startPosition=startVelocity*age;\n        lifePosition=lifeVelocity*age;\n#endif\n#ifdef VELOCITYOVERLIFETIMECURVE\n        startPosition=startVelocity*age;\n        lifePosition=vec3(getTotalValueFromGradientFloat(u_VOLVelocityGradientX,normalizedAge),getTotalValueFromGradientFloat(u_VOLVelocityGradientY,normalizedAge),getTotalValueFromGradientFloat(u_VOLVelocityGradientZ,normalizedAge));\n#endif\n#ifdef VELOCITYOVERLIFETIMERANDOMCONSTANT\n        startPosition=startVelocity*age;\n        lifePosition=lifeVelocity*age;\n#endif\n#ifdef VELOCITYOVERLIFETIMERANDOMCURVE\n        startPosition=startVelocity*age;\n        lifePosition=vec3(mix(getTotalValueFromGradientFloat(u_VOLVelocityGradientX,normalizedAge),getTotalValueFromGradientFloat(u_VOLVelocityGradientMaxX,normalizedAge),a_Random1.y)\n        ,mix(getTotalValueFromGradientFloat(u_VOLVelocityGradientY,normalizedAge),getTotalValueFromGradientFloat(u_VOLVelocityGradientMaxY,normalizedAge),a_Random1.z)\n        ,mix(getTotalValueFromGradientFloat(u_VOLVelocityGradientZ,normalizedAge),getTotalValueFromGradientFloat(u_VOLVelocityGradientMaxZ,normalizedAge),a_Random1.w));\n#endif\n\nvec3 finalPosition;\nif(u_VOLSpaceType==0){\n    if(u_ScalingMode!=2)\n    finalPosition =rotationByQuaternions(u_PositionScale*(a_ShapePositionStartLifeTime.xyz+startPosition+lifePosition),worldRotation);\n    else\n    finalPosition =rotationByQuaternions(u_PositionScale*a_ShapePositionStartLifeTime.xyz+startPosition+lifePosition,worldRotation);\n}\nelse{\n    if(u_ScalingMode!=2)\n    finalPosition = rotationByQuaternions(u_PositionScale*(a_ShapePositionStartLifeTime.xyz+startPosition),worldRotation)+lifePosition;\n    else\n    finalPosition = rotationByQuaternions(u_PositionScale*a_ShapePositionStartLifeTime.xyz+startPosition,worldRotation)+lifePosition;\n}\n#else\n    startPosition=startVelocity*age;\n    vec3 finalPosition;\n    if(u_ScalingMode!=2)\n    finalPosition = rotationByQuaternions(u_PositionScale*(a_ShapePositionStartLifeTime.xyz+startPosition),worldRotation);\n    else\n    finalPosition = rotationByQuaternions(u_PositionScale*a_ShapePositionStartLifeTime.xyz+startPosition,worldRotation);\n#endif\n\nif(u_SimulationSpace==0)\nfinalPosition=finalPosition+a_SimulationWorldPostion;\nelse if(u_SimulationSpace==1) \nfinalPosition=finalPosition+u_WorldPosition;\n\nfinalPosition+=0.5*gravityVelocity*age;\n\nreturn  finalPosition;\n}\n\n\nvec4 computeParticleColor(in vec4 color,in float normalizedAge)\n{\n#ifdef COLOROVERLIFETIME\n    color*=getColorFromGradient(u_ColorOverLifeGradientAlphas,u_ColorOverLifeGradientColors,normalizedAge);\n#endif\n\n#ifdef RANDOMCOLOROVERLIFETIME\n    color*=mix(getColorFromGradient(u_ColorOverLifeGradientAlphas,u_ColorOverLifeGradientColors,normalizedAge),getColorFromGradient(u_MaxColorOverLifeGradientAlphas,u_MaxColorOverLifeGradientColors,normalizedAge),a_Random0.y);\n#endif\n\nreturn color;\n}\n\nvec2 computeParticleSizeBillbard(in vec2 size,in float normalizedAge)\n{\n#ifdef SIZEOVERLIFETIMECURVE\n    size*=getCurValueFromGradientFloat(u_SOLSizeGradient,normalizedAge);\n#endif\n#ifdef SIZEOVERLIFETIMERANDOMCURVES\n    size*=mix(getCurValueFromGradientFloat(u_SOLSizeGradient,normalizedAge),getCurValueFromGradientFloat(u_SOLSizeGradientMax,normalizedAge),a_Random0.z); \n#endif\n#ifdef SIZEOVERLIFETIMECURVESEPERATE\n    size*=vec2(getCurValueFromGradientFloat(u_SOLSizeGradientX,normalizedAge),getCurValueFromGradientFloat(u_SOLSizeGradientY,normalizedAge));\n#endif\n#ifdef SIZEOVERLIFETIMERANDOMCURVESSEPERATE\n    size*=vec2(mix(getCurValueFromGradientFloat(u_SOLSizeGradientX,normalizedAge),getCurValueFromGradientFloat(u_SOLSizeGradientMaxX,normalizedAge),a_Random0.z)\n    ,mix(getCurValueFromGradientFloat(u_SOLSizeGradientY,normalizedAge),getCurValueFromGradientFloat(u_SOLSizeGradientMaxY,normalizedAge),a_Random0.z));\n#endif\nreturn size;\n}\n\n#ifdef RENDERMODE_MESH\nvec3 computeParticleSizeMesh(in vec3 size,in float normalizedAge)\n{\n#ifdef SIZEOVERLIFETIMECURVE\n    size*=getCurValueFromGradientFloat(u_SOLSizeGradient,normalizedAge);\n#endif\n#ifdef SIZEOVERLIFETIMERANDOMCURVES\n    size*=mix(getCurValueFromGradientFloat(u_SOLSizeGradient,normalizedAge),getCurValueFromGradientFloat(u_SOLSizeGradientMax,normalizedAge),a_Random0.z); \n#endif\n#ifdef SIZEOVERLIFETIMECURVESEPERATE\n    size*=vec3(getCurValueFromGradientFloat(u_SOLSizeGradientX,normalizedAge),getCurValueFromGradientFloat(u_SOLSizeGradientY,normalizedAge),getCurValueFromGradientFloat(u_SOLSizeGradientZ,normalizedAge));\n#endif\n#ifdef SIZEOVERLIFETIMERANDOMCURVESSEPERATE\n    size*=vec3(mix(getCurValueFromGradientFloat(u_SOLSizeGradientX,normalizedAge),getCurValueFromGradientFloat(u_SOLSizeGradientMaxX,normalizedAge),a_Random0.z)\n    ,mix(getCurValueFromGradientFloat(u_SOLSizeGradientY,normalizedAge),getCurValueFromGradientFloat(u_SOLSizeGradientMaxY,normalizedAge),a_Random0.z)\n    ,mix(getCurValueFromGradientFloat(u_SOLSizeGradientZ,normalizedAge),getCurValueFromGradientFloat(u_SOLSizeGradientMaxZ,normalizedAge),a_Random0.z));\n#endif\nreturn size;\n}\n#endif\n\nfloat computeParticleRotationFloat(in float rotation,in float age,in float normalizedAge)\n{ \n#ifdef ROTATIONOVERLIFETIME\n    #ifdef ROTATIONOVERLIFETIMECONSTANT\n        float ageRot=u_ROLAngularVelocityConst*age;\n        rotation+=ageRot;\n    #endif\n    #ifdef ROTATIONOVERLIFETIMECURVE\n        rotation+=getTotalValueFromGradientFloat(u_ROLAngularVelocityGradient,normalizedAge);\n    #endif\n    #ifdef ROTATIONOVERLIFETIMERANDOMCONSTANTS\n        float ageRot=mix(u_ROLAngularVelocityConst,u_ROLAngularVelocityConstMax,a_Random0.w)*age;\n        rotation+=ageRot;\n    #endif\n    #ifdef ROTATIONOVERLIFETIMERANDOMCURVES\n        rotation+=mix(getTotalValueFromGradientFloat(u_ROLAngularVelocityGradient,normalizedAge),getTotalValueFromGradientFloat(u_ROLAngularVelocityGradientMax,normalizedAge),a_Random0.w);\n    #endif\n#endif\n#ifdef ROTATIONOVERLIFETIMESEPERATE\n    #ifdef ROTATIONOVERLIFETIMECONSTANT\n        float ageRot=u_ROLAngularVelocityConstSeprarate.z*age;\n        rotation+=ageRot;\n    #endif\n    #ifdef ROTATIONOVERLIFETIMECURVE\n        rotation+=getTotalValueFromGradientFloat(u_ROLAngularVelocityGradientZ,normalizedAge);\n    #endif\n    #ifdef ROTATIONOVERLIFETIMERANDOMCONSTANTS\n        float ageRot=mix(u_ROLAngularVelocityConstSeprarate.z,u_ROLAngularVelocityConstMaxSeprarate.z,a_Random0.w)*age;\n        rotation+=ageRot;\n    #endif\n    #ifdef ROTATIONOVERLIFETIMERANDOMCURVES\n        rotation+=mix(getTotalValueFromGradientFloat(u_ROLAngularVelocityGradientZ,normalizedAge),getTotalValueFromGradientFloat(u_ROLAngularVelocityGradientMaxZ,normalizedAge),a_Random0.w));\n    #endif\n#endif\nreturn rotation;\n}\n\n\n#if defined(RENDERMODE_MESH)&&(defined(ROTATIONOVERLIFETIME)||defined(ROTATIONOVERLIFETIMESEPERATE))\nvec3 computeParticleRotationVec3(in vec3 rotation,in float age,in float normalizedAge)\n{ \n#ifdef ROTATIONOVERLIFETIME\n#ifdef ROTATIONOVERLIFETIMECONSTANT\n        float ageRot=u_ROLAngularVelocityConst*age;\n        rotation+=ageRot;\n    #endif\n    #ifdef ROTATIONOVERLIFETIMECURVE\n        rotation+=getTotalValueFromGradientFloat(u_ROLAngularVelocityGradient,normalizedAge);\n    #endif\n    #ifdef ROTATIONOVERLIFETIMERANDOMCONSTANTS\n        float ageRot=mix(u_ROLAngularVelocityConst,u_ROLAngularVelocityConstMax,a_Random0.w)*age;\n        rotation+=ageRot;\n    #endif\n    #ifdef ROTATIONOVERLIFETIMERANDOMCURVES\n        rotation+=mix(getTotalValueFromGradientFloat(u_ROLAngularVelocityGradient,normalizedAge),getTotalValueFromGradientFloat(u_ROLAngularVelocityGradientMax,normalizedAge),a_Random0.w);\n    #endif\n#endif\n#ifdef ROTATIONOVERLIFETIMESEPERATE\n#ifdef ROTATIONOVERLIFETIMECONSTANT\n        vec3 ageRot=u_ROLAngularVelocityConstSeprarate*age;\n        rotation+=ageRot;\n    #endif\n    #ifdef ROTATIONOVERLIFETIMECURVE\n        rotation+=vec3(getTotalValueFromGradientFloat(u_ROLAngularVelocityGradientX,normalizedAge),getTotalValueFromGradientFloat(u_ROLAngularVelocityGradientY,normalizedAge),getTotalValueFromGradientFloat(u_ROLAngularVelocityGradientZ,normalizedAge));\n    #endif\n    #ifdef ROTATIONOVERLIFETIMERANDOMCONSTANTS\n        vec3 ageRot=mix(u_ROLAngularVelocityConstSeprarate,u_ROLAngularVelocityConstMaxSeprarate,a_Random0.w)*age;\n        rotation+=ageRot;\n    #endif\n    #ifdef ROTATIONOVERLIFETIMERANDOMCURVES\n        rotation+=vec3(mix(getTotalValueFromGradientFloat(u_ROLAngularVelocityGradientX,normalizedAge),getTotalValueFromGradientFloat(u_ROLAngularVelocityGradientMaxX,normalizedAge),a_Random0.w)\n        ,mix(getTotalValueFromGradientFloat(u_ROLAngularVelocityGradientY,normalizedAge),getTotalValueFromGradientFloat(u_ROLAngularVelocityGradientMaxY,normalizedAge),a_Random0.w)\n        ,mix(getTotalValueFromGradientFloat(u_ROLAngularVelocityGradientZ,normalizedAge),getTotalValueFromGradientFloat(u_ROLAngularVelocityGradientMaxZ,normalizedAge),a_Random0.w));\n    #endif\n#endif\nreturn rotation;\n}\n#endif\n\nvec2 computeParticleUV(in vec2 uv,in float normalizedAge)\n{ \n#ifdef TEXTURESHEETANIMATIONCURVE\n    float cycleNormalizedAge=normalizedAge*u_TSACycles;\n    float frame=getFrameFromGradient(u_TSAGradientUVs,cycleNormalizedAge-floor(cycleNormalizedAge));\n    float totalULength=frame*u_TSASubUVLength.x;\n    float floorTotalULength=floor(totalULength);\n    uv.x+=totalULength-floorTotalULength;\n    uv.y+=floorTotalULength*u_TSASubUVLength.y;\n#endif\n#ifdef TEXTURESHEETANIMATIONRANDOMCURVE\n    float cycleNormalizedAge=normalizedAge*u_TSACycles;\n    float uvNormalizedAge=cycleNormalizedAge-floor(cycleNormalizedAge);\n    float frame=floor(mix(getFrameFromGradient(u_TSAGradientUVs,uvNormalizedAge),getFrameFromGradient(u_TSAMaxGradientUVs,uvNormalizedAge),a_Random1.x));\n    float totalULength=frame*u_TSASubUVLength.x;\n    float floorTotalULength=floor(totalULength);\n    uv.x+=totalULength-floorTotalULength;\n    uv.y+=floorTotalULength*u_TSASubUVLength.y;\n#endif\nreturn uv;\n}\n\nvoid main()\n{\nfloat age = u_CurrentTime - a_DirectionTime.w;\nfloat normalizedAge = age/a_ShapePositionStartLifeTime.w;\nvec3 lifeVelocity;\nif(normalizedAge<1.0){ \nvec3 startVelocity=a_DirectionTime.xyz*a_StartSpeed;\n#if defined(VELOCITYOVERLIFETIMECONSTANT)||defined(VELOCITYOVERLIFETIMECURVE)||defined(VELOCITYOVERLIFETIMERANDOMCONSTANT)||defined(VELOCITYOVERLIFETIMERANDOMCURVE)\n    lifeVelocity= computeParticleLifeVelocity(normalizedAge);//计算粒子生命周期速度\n#endif \nvec3 gravityVelocity=u_Gravity*age;\n\nvec4 worldRotation;\nif(u_SimulationSpace==0)\n    worldRotation=a_SimulationWorldRotation;\nelse\n    worldRotation=u_WorldRotation;\n\nvec3 center=computeParticlePosition(startVelocity, lifeVelocity, age, normalizedAge,gravityVelocity,worldRotation);//计算粒子位置\n\n\n#ifdef SPHERHBILLBOARD\n    vec2 corner=a_CornerTextureCoordinate.xy;//Billboard模式z轴无效\n    vec3 cameraUpVector =normalize(u_CameraUp);//TODO:是否外面归一化\n    vec3 sideVector = normalize(cross(u_CameraDirection,cameraUpVector));\n    vec3 upVector = normalize(cross(sideVector,u_CameraDirection));\n    corner*=computeParticleSizeBillbard(a_StartSize.xy,normalizedAge);\n    #if defined(ROTATIONOVERLIFETIME)||defined(ROTATIONOVERLIFETIMESEPERATE)\n        if(u_ThreeDStartRotation){\n            vec3 rotation=vec3(a_StartRotation0.xy,computeParticleRotationFloat(a_StartRotation0.z,age,normalizedAge));\n            center += u_SizeScale.xzy*rotationByEuler(corner.x*sideVector+corner.y*upVector,rotation);\n        }\n        else{\n            float rot = computeParticleRotationFloat(a_StartRotation0.x, age,normalizedAge);\n            float c = cos(rot);\n            float s = sin(rot);\n            mat2 rotation= mat2(c, -s, s, c);\n            corner=rotation*corner;\n            center += u_SizeScale.xzy*(corner.x*sideVector+corner.y*upVector);\n        }\n    #else\n        if(u_ThreeDStartRotation){\n            center += u_SizeScale.xzy*rotationByEuler(corner.x*sideVector+corner.y*upVector,a_StartRotation0);\n        }\n        else{\n            float c = cos(a_StartRotation0.x);\n            float s = sin(a_StartRotation0.x);\n            mat2 rotation= mat2(c, -s, s, c);\n            corner=rotation*corner;\n            center += u_SizeScale.xzy*(corner.x*sideVector+corner.y*upVector);\n        }\n    #endif\n#endif\n\n#ifdef STRETCHEDBILLBOARD\nvec2 corner=a_CornerTextureCoordinate.xy;//Billboard模式z轴无效\nvec3 velocity;\n#if defined(VELOCITYOVERLIFETIMECONSTANT)||defined(VELOCITYOVERLIFETIMECURVE)||defined(VELOCITYOVERLIFETIMERANDOMCONSTANT)||defined(VELOCITYOVERLIFETIMERANDOMCURVE)\n    if(u_VOLSpaceType==0)\n        velocity=rotationByQuaternions(u_SizeScale*(startVelocity+lifeVelocity),worldRotation)+gravityVelocity;\n    else\n        velocity=rotationByQuaternions(u_SizeScale*startVelocity,worldRotation)+lifeVelocity+gravityVelocity;\n#else\n    velocity= rotationByQuaternions(u_SizeScale*startVelocity,worldRotation)+gravityVelocity;\n#endif\t\n    vec3 cameraUpVector = normalize(velocity);\n    vec3 direction = normalize(center-u_CameraPosition);\n    vec3 sideVector = normalize(cross(direction,normalize(velocity)));\n    \n    sideVector=u_SizeScale.xzy*sideVector;\n    cameraUpVector=length(vec3(u_SizeScale.x,0.0,0.0))*cameraUpVector;\n    \n    vec2 size=computeParticleSizeBillbard(a_StartSize.xy,normalizedAge);\n    \n    const mat2 rotaionZHalfPI=mat2(0.0, -1.0, 1.0, 0.0);\n    corner=rotaionZHalfPI*corner;\n    corner.y=corner.y-abs(corner.y);\n    \n    float speed=length(velocity);//TODO:\n    center +=sign(u_SizeScale.x)*(sign(u_StretchedBillboardLengthScale)*size.x*corner.x*sideVector+(speed*u_StretchedBillboardSpeedScale+size.y*u_StretchedBillboardLengthScale)*corner.y*cameraUpVector);\n#endif\n\n#ifdef HORIZONTALBILLBOARD\n    vec2 corner=a_CornerTextureCoordinate.xy;//Billboard模式z轴无效\n    const vec3 cameraUpVector=vec3(0.0,0.0,1.0);\n    const vec3 sideVector = vec3(-1.0,0.0,0.0);\n    \n    float rot = computeParticleRotationFloat(a_StartRotation0.x, age,normalizedAge);\n    float c = cos(rot);\n    float s = sin(rot);\n    mat2 rotation= mat2(c, -s, s, c);\n    corner=rotation*corner*cos(0.78539816339744830961566084581988);//TODO:临时缩小cos45,不确定U3D原因\n    corner*=computeParticleSizeBillbard(a_StartSize.xy,normalizedAge);\n    center +=u_SizeScale.xzy*(corner.x*sideVector+ corner.y*cameraUpVector);\n#endif\n\n#ifdef VERTICALBILLBOARD\n    vec2 corner=a_CornerTextureCoordinate.xy;//Billboard模式z轴无效\n    const vec3 cameraUpVector =vec3(0.0,1.0,0.0);\n    vec3 sideVector = normalize(cross(u_CameraDirection,cameraUpVector));\n    \n    float rot = computeParticleRotationFloat(a_StartRotation0.x, age,normalizedAge);\n    float c = cos(rot);\n    float s = sin(rot);\n    mat2 rotation= mat2(c, -s, s, c);\n    corner=rotation*corner*cos(0.78539816339744830961566084581988);//TODO:临时缩小cos45,不确定U3D原因\n    corner*=computeParticleSizeBillbard(a_StartSize.xy,normalizedAge);\n    center +=u_SizeScale.xzy*(corner.x*sideVector+ corner.y*cameraUpVector);\n#endif\n\n#ifdef RENDERMODE_MESH\n    vec3 size=computeParticleSizeMesh(a_StartSize,normalizedAge);\n    #if defined(ROTATIONOVERLIFETIME)||defined(ROTATIONOVERLIFETIMESEPERATE)\n        if(u_ThreeDStartRotation){\n            vec3 rotation=vec3(a_StartRotation0.xy,-computeParticleRotationFloat(a_StartRotation0.z, age,normalizedAge));\n            center+= rotationByQuaternions(u_SizeScale*rotationByEuler(a_MeshPosition*size,rotation),worldRotation);\n        }\n        else{\n            #ifdef ROTATIONOVERLIFETIME\n                float angle=computeParticleRotationFloat(a_StartRotation0.x, age,normalizedAge);\n                if(a_ShapePositionStartLifeTime.x!=0.0||a_ShapePositionStartLifeTime.y!=0.0){\n                    center+= (rotationByQuaternions(rotationByAxis(u_SizeScale*a_MeshPosition*size,normalize(cross(vec3(0.0,0.0,1.0),vec3(a_ShapePositionStartLifeTime.xy,0.0))),angle),worldRotation));//已验证\n                }\n                else{\n                    #ifdef SHAPE\n                        center+= u_SizeScale.xzy*(rotationByQuaternions(rotationByAxis(a_MeshPosition*size,vec3(0.0,-1.0,0.0),angle),worldRotation));\n                    #else\n                        if(u_SimulationSpace==0)\n                            center+=rotationByAxis(u_SizeScale*a_MeshPosition*size,vec3(0.0,0.0,-1.0),angle);//已验证\n                        else if(u_SimulationSpace==1)\n                            center+=rotationByQuaternions(u_SizeScale*rotationByAxis(a_MeshPosition*size,vec3(0.0,0.0,-1.0),angle),worldRotation);//已验证\n                    #endif\n                }\n            #endif\n            #ifdef ROTATIONOVERLIFETIMESEPERATE\n                //TODO:是否应合并if(u_ThreeDStartRotation)分支代码,待测试\n                vec3 angle=computeParticleRotationVec3(vec3(0.0,0.0,a_StartRotation0.z), age,normalizedAge);\n                center+= (rotationByQuaternions(rotationByEuler(u_SizeScale*a_MeshPosition*size,vec3(angle.x,angle.y,angle.z)),worldRotation));//已验证\n            #endif\t\n        }\n    #else\n        if(u_ThreeDStartRotation){\n            center+= rotationByQuaternions(u_SizeScale*rotationByEuler(a_MeshPosition*size,a_StartRotation0),worldRotation);//已验证\n        }\n        else{\n            if(a_ShapePositionStartLifeTime.x!=0.0||a_ShapePositionStartLifeTime.y!=0.0){\n                if(u_SimulationSpace==0)\n                    center+= rotationByAxis(u_SizeScale*a_MeshPosition*size,normalize(cross(vec3(0.0,0.0,1.0),vec3(a_ShapePositionStartLifeTime.xy,0.0))),a_StartRotation0.x);\n                else if(u_SimulationSpace==1)\n                    center+= (rotationByQuaternions(u_SizeScale*rotationByAxis(a_MeshPosition*size,normalize(cross(vec3(0.0,0.0,1.0),vec3(a_ShapePositionStartLifeTime.xy,0.0))),a_StartRotation0.x),worldRotation));//已验证\n            }\n            else{\n                #ifdef SHAPE\n                    if(u_SimulationSpace==0)\n                        center+= u_SizeScale*rotationByAxis(a_MeshPosition*size,vec3(0.0,-1.0,0.0),a_StartRotation0.x);\n                    else if(u_SimulationSpace==1)\n                        center+= rotationByQuaternions(u_SizeScale*rotationByAxis(a_MeshPosition*size,vec3(0.0,-1.0,0.0),a_StartRotation0.x),worldRotation);\t\n                #else\n                    if(u_SimulationSpace==0)\n                        center+= rotationByAxis(u_SizeScale*a_MeshPosition*size,vec3(0.0,0.0,-1.0),a_StartRotation0.x);\n                    else if(u_SimulationSpace==1)\n                        center+= rotationByQuaternions(u_SizeScale*rotationByAxis(a_MeshPosition*size,vec3(0.0,0.0,-1.0),a_StartRotation0.x),worldRotation);//已验证\n                #endif\n            }\n        }\n    #endif\n    v_MeshColor=a_MeshColor;\n#endif\n\nhighp vec4 vPos = u_Projection*u_View*vec4(center,1.0);\nfloat zOff = vPos.z / _Dist;\nvPos += _QOffset * zOff * zOff;\ngl_Position = vPos;\nv_Color = computeParticleColor(a_StartColor, normalizedAge);\n#ifdef DIFFUSEMAP\n    #if defined(SPHERHBILLBOARD)||defined(STRETCHEDBILLBOARD)||defined(HORIZONTALBILLBOARD)||defined(VERTICALBILLBOARD)\n        v_TextureCoordinate =computeParticleUV(a_CornerTextureCoordinate.zw, normalizedAge);\n    #endif\n    #ifdef RENDERMODE_MESH\n        v_TextureCoordinate =computeParticleUV(a_MeshTextureCoordinate, normalizedAge);\n    #endif\n    \n    #ifdef TILINGOFFSET\n        v_TextureCoordinate=vec2(v_TextureCoordinate.x,1.0-v_TextureCoordinate.y)*u_TilingOffset.xy+vec2(u_TilingOffset.z,-u_TilingOffset.w);//需要特殊处理\n        v_TextureCoordinate=vec2(v_TextureCoordinate.x,1.0-v_TextureCoordinate.y);//需要特殊处理\n    #endif\n#endif\nv_Discard=0.0;\n    \n#ifdef FOG\n    v_PositionWorld=center;\n#endif\n}\nelse\n{\n    v_Discard=1.0;\n}\n}\n\n",t="#ifdef HIGHPRECISION\n  precision highp float;\n#else\n  precision mediump float;\n#endif\n\nvarying float v_Discard;\nvarying vec4 v_Color;\nvarying vec2 v_TextureCoordinate;\nuniform sampler2D u_texture;\nuniform vec4 u_Tintcolor;\n\n#ifdef RENDERMODE_MESH\n\tvarying vec4 v_MeshColor;\n#endif\n\n#ifdef FOG\n\tvarying vec3 v_PositionWorld;\n\tuniform vec3 u_CameraPosition;\n\tuniform float u_FogStart;\n\tuniform float u_FogRange;\n\t#ifdef ADDTIVEFOG\n\t#else\n\t\tuniform vec3 u_FogColor;\n\t#endif\n#endif\n\n\nvoid main()\n{\t\n\t#ifdef RENDERMODE_MESH\n\t\tgl_FragColor=v_MeshColor;\n\t#else\n\t\tgl_FragColor=vec4(1.0);\t\n\t#endif\n\t\t\n\t#ifdef DIFFUSEMAP\n\t\tif(v_Discard!=0.0)\n\t\t\tdiscard;\n\t\t#ifdef TINTCOLOR\n\t\t\tgl_FragColor*=texture2D(u_texture,v_TextureCoordinate)*u_Tintcolor*2.0*v_Color;\n\t\t#else\n\t\t\tgl_FragColor*=texture2D(u_texture,v_TextureCoordinate)*v_Color;\n\t\t#endif\n\t#else\n\t\t#ifdef TINTCOLOR\n\t\t\tgl_FragColor*=u_Tintcolor*2.0*v_Color;\n\t\t#else\n\t\t\tgl_FragColor*=v_Color;\n\t\t#endif\n\t#endif\n\t\n\t#ifdef FOG\n\t\tvec3 toEye=u_CameraPosition-v_PositionWorld;\n\t\tfloat toEyeLength=length(toEye);\n\t\ttoEye/=toEyeLength;\n\t\t\n\t\tfloat lerpFact=clamp((toEyeLength-u_FogStart)/u_FogRange,0.0,1.0);\n\t\t#ifdef ADDTIVEFOG\n\t\t\tgl_FragColor.rgb=mix(gl_FragColor.rgb,vec3(0.0,0.0,0.0),lerpFact);\n\t\t#else\n\t\t\tgl_FragColor.rgb=mix(gl_FragColor.rgb,u_FogColor,lerpFact);\n\t\t#endif\n\t#endif\n}";let o=new Laya.SubShader(i,n);a.addSubShader(o);let r={s_Cull:Laya.Shader3D.RENDER_STATE_CULL,s_Blend:Laya.Shader3D.RENDER_STATE_BLEND,s_BlendSrc:Laya.Shader3D.RENDER_STATE_BLEND_SRC,s_BlendDst:Laya.Shader3D.RENDER_STATE_BLEND_DST,s_DepthTest:Laya.Shader3D.RENDER_STATE_DEPTH_TEST,s_DepthWrite:Laya.Shader3D.RENDER_STATE_DEPTH_WRITE};o.addShaderPass('#include "Lighting.glsl";\r\n\r\n#ifdef GL_FRAGMENT_PRECISION_HIGH\r\n  precision highp float;\r\n#else\r\n  precision mediump float;\r\n#endif\r\n\r\n#if defined(SPHERHBILLBOARD)||defined(STRETCHEDBILLBOARD)||defined(HORIZONTALBILLBOARD)||defined(VERTICALBILLBOARD)\r\n\tattribute vec4 a_CornerTextureCoordinate;\r\n#endif\r\n#ifdef RENDERMODE_MESH\r\n\tattribute vec3 a_MeshPosition;\r\n\tattribute vec4 a_MeshColor;\r\n\tattribute vec2 a_MeshTextureCoordinate;\r\n\tvarying vec4 v_MeshColor;\r\n#endif\r\n\r\nattribute vec4 a_ShapePositionStartLifeTime;\r\nattribute vec4 a_DirectionTime;\r\nattribute vec4 a_StartColor;\r\nattribute vec3 a_StartSize;\r\nattribute vec3 a_StartRotation0;\r\nattribute float a_StartSpeed;\r\n#if defined(COLOROVERLIFETIME)||defined(RANDOMCOLOROVERLIFETIME)||defined(SIZEOVERLIFETIMERANDOMCURVES)||defined(SIZEOVERLIFETIMERANDOMCURVESSEPERATE)||defined(ROTATIONOVERLIFETIMERANDOMCONSTANTS)||defined(ROTATIONOVERLIFETIMERANDOMCURVES)\r\n  attribute vec4 a_Random0;\r\n#endif\r\n#if defined(TEXTURESHEETANIMATIONRANDOMCURVE)||defined(VELOCITYOVERLIFETIMERANDOMCONSTANT)||defined(VELOCITYOVERLIFETIMERANDOMCURVE)\r\n  attribute vec4 a_Random1;\r\n#endif\r\nattribute vec3 a_SimulationWorldPostion;\r\nattribute vec4 a_SimulationWorldRotation;\r\n\r\nvarying vec4 v_Color;\r\n#ifdef DIFFUSEMAP\r\n\tvarying vec2 v_TextureCoordinate;\r\n#endif\r\n\r\nuniform float u_CurrentTime;\r\nuniform vec3 u_Gravity;\r\n\r\nuniform vec3 u_WorldPosition;\r\nuniform vec4 u_WorldRotation;\r\nuniform bool u_ThreeDStartRotation;\r\nuniform int u_ScalingMode;\r\nuniform vec3 u_PositionScale;\r\nuniform vec3 u_SizeScale;\r\nuniform mat4 u_View;\r\nuniform mat4 u_Projection;\r\n\r\n#ifdef STRETCHEDBILLBOARD\r\n\tuniform vec3 u_CameraPos;\r\n#endif\r\nuniform vec3 u_CameraDirection;//TODO:只有几种广告牌模式需要用\r\nuniform vec3 u_CameraUp;\r\n\r\nuniform  float u_StretchedBillboardLengthScale;\r\nuniform  float u_StretchedBillboardSpeedScale;\r\nuniform int u_SimulationSpace;\r\n\r\n#if defined(VELOCITYOVERLIFETIMECONSTANT)||defined(VELOCITYOVERLIFETIMECURVE)||defined(VELOCITYOVERLIFETIMERANDOMCONSTANT)||defined(VELOCITYOVERLIFETIMERANDOMCURVE)\r\n  uniform  int  u_VOLSpaceType;\r\n#endif\r\n#if defined(VELOCITYOVERLIFETIMECONSTANT)||defined(VELOCITYOVERLIFETIMERANDOMCONSTANT)\r\n  uniform  vec3 u_VOLVelocityConst;\r\n#endif\r\n#if defined(VELOCITYOVERLIFETIMECURVE)||defined(VELOCITYOVERLIFETIMERANDOMCURVE)\r\n  uniform  vec2 u_VOLVelocityGradientX[4];//x为key,y为速度\r\n  uniform  vec2 u_VOLVelocityGradientY[4];//x为key,y为速度\r\n  uniform  vec2 u_VOLVelocityGradientZ[4];//x为key,y为速度\r\n#endif\r\n#ifdef VELOCITYOVERLIFETIMERANDOMCONSTANT\r\n  uniform  vec3 u_VOLVelocityConstMax;\r\n#endif\r\n#ifdef VELOCITYOVERLIFETIMERANDOMCURVE\r\n  uniform  vec2 u_VOLVelocityGradientMaxX[4];//x为key,y为速度\r\n  uniform  vec2 u_VOLVelocityGradientMaxY[4];//x为key,y为速度\r\n  uniform  vec2 u_VOLVelocityGradientMaxZ[4];//x为key,y为速度\r\n#endif\r\n\r\n#ifdef COLOROVERLIFETIME\r\n  uniform  vec4 u_ColorOverLifeGradientColors[4];//x为key,yzw为Color\r\n  uniform  vec2 u_ColorOverLifeGradientAlphas[4];//x为key,y为Alpha\r\n#endif\r\n#ifdef RANDOMCOLOROVERLIFETIME\r\n  uniform  vec4 u_ColorOverLifeGradientColors[4];//x为key,yzw为Color\r\n  uniform  vec2 u_ColorOverLifeGradientAlphas[4];//x为key,y为Alpha\r\n  uniform  vec4 u_MaxColorOverLifeGradientColors[4];//x为key,yzw为Color\r\n  uniform  vec2 u_MaxColorOverLifeGradientAlphas[4];//x为key,y为Alpha\r\n#endif\r\n\r\n\r\n#if defined(SIZEOVERLIFETIMECURVE)||defined(SIZEOVERLIFETIMERANDOMCURVES)\r\n  uniform  vec2 u_SOLSizeGradient[4];//x为key,y为尺寸\r\n#endif\r\n#ifdef SIZEOVERLIFETIMERANDOMCURVES\r\n  uniform  vec2 u_SOLSizeGradientMax[4];//x为key,y为尺寸\r\n#endif\r\n#if defined(SIZEOVERLIFETIMECURVESEPERATE)||defined(SIZEOVERLIFETIMERANDOMCURVESSEPERATE)\r\n  uniform  vec2 u_SOLSizeGradientX[4];//x为key,y为尺寸\r\n  uniform  vec2 u_SOLSizeGradientY[4];//x为key,y为尺寸\r\n  uniform  vec2 u_SOLSizeGradientZ[4];//x为key,y为尺寸\r\n#endif\r\n#ifdef SIZEOVERLIFETIMERANDOMCURVESSEPERATE\r\n  uniform  vec2 u_SOLSizeGradientMaxX[4];//x为key,y为尺寸\r\n  uniform  vec2 u_SOLSizeGradientMaxY[4];//x为key,y为尺寸\r\n  uniform  vec2 u_SOLSizeGradientMaxZ[4];//x为key,y为尺寸\r\n#endif\r\n\r\n\r\n#ifdef ROTATIONOVERLIFETIME\r\n  #if defined(ROTATIONOVERLIFETIMECONSTANT)||defined(ROTATIONOVERLIFETIMERANDOMCONSTANTS)\r\n    uniform  float u_ROLAngularVelocityConst;\r\n  #endif\r\n  #ifdef ROTATIONOVERLIFETIMERANDOMCONSTANTS\r\n    uniform  float u_ROLAngularVelocityConstMax;\r\n  #endif\r\n  #if defined(ROTATIONOVERLIFETIMECURVE)||defined(ROTATIONOVERLIFETIMERANDOMCURVES)\r\n    uniform  vec2 u_ROLAngularVelocityGradient[4];//x为key,y为旋转\r\n  #endif\r\n  #ifdef ROTATIONOVERLIFETIMERANDOMCURVES\r\n    uniform  vec2 u_ROLAngularVelocityGradientMax[4];//x为key,y为旋转\r\n  #endif\r\n#endif\r\n#ifdef ROTATIONOVERLIFETIMESEPERATE\r\n  #if defined(ROTATIONOVERLIFETIMECONSTANT)||defined(ROTATIONOVERLIFETIMERANDOMCONSTANTS)\r\n    uniform  vec3 u_ROLAngularVelocityConstSeprarate;\r\n  #endif\r\n  #ifdef ROTATIONOVERLIFETIMERANDOMCONSTANTS\r\n    uniform  vec3 u_ROLAngularVelocityConstMaxSeprarate;\r\n  #endif\r\n  #if defined(ROTATIONOVERLIFETIMECURVE)||defined(ROTATIONOVERLIFETIMERANDOMCURVES)\r\n    uniform  vec2 u_ROLAngularVelocityGradientX[4];\r\n    uniform  vec2 u_ROLAngularVelocityGradientY[4];\r\n    uniform  vec2 u_ROLAngularVelocityGradientZ[4];\r\n  #endif\r\n  #ifdef ROTATIONOVERLIFETIMERANDOMCURVES\r\n    uniform  vec2 u_ROLAngularVelocityGradientMaxX[4];\r\n    uniform  vec2 u_ROLAngularVelocityGradientMaxY[4];\r\n    uniform  vec2 u_ROLAngularVelocityGradientMaxZ[4];\r\n\tuniform  vec2 u_ROLAngularVelocityGradientMaxW[4];\r\n  #endif\r\n#endif\r\n\r\n#if defined(TEXTURESHEETANIMATIONCURVE)||defined(TEXTURESHEETANIMATIONRANDOMCURVE)\r\n  uniform  float u_TSACycles;\r\n  uniform  vec2 u_TSASubUVLength;\r\n  uniform  vec2 u_TSAGradientUVs[4];//x为key,y为frame\r\n#endif\r\n#ifdef TEXTURESHEETANIMATIONRANDOMCURVE\r\n  uniform  vec2 u_TSAMaxGradientUVs[4];//x为key,y为frame\r\n#endif\r\n\r\n#ifdef TILINGOFFSET\r\n\tuniform vec4 u_TilingOffset;\r\n#endif\r\n\r\nuniform float _Dist;\r\nuniform vec4 _QOffset;\r\n\r\nvec3 rotationByEuler(in vec3 vector,in vec3 rot)\r\n{\r\n\tfloat halfRoll = rot.z * 0.5;\r\n    float halfPitch = rot.x * 0.5;\r\n\tfloat halfYaw = rot.y * 0.5;\r\n\r\n\tfloat sinRoll = sin(halfRoll);\r\n\tfloat cosRoll = cos(halfRoll);\r\n\tfloat sinPitch = sin(halfPitch);\r\n\tfloat cosPitch = cos(halfPitch);\r\n\tfloat sinYaw = sin(halfYaw);\r\n\tfloat cosYaw = cos(halfYaw);\r\n\r\n\tfloat quaX = (cosYaw * sinPitch * cosRoll) + (sinYaw * cosPitch * sinRoll);\r\n\tfloat quaY = (sinYaw * cosPitch * cosRoll) - (cosYaw * sinPitch * sinRoll);\r\n\tfloat quaZ = (cosYaw * cosPitch * sinRoll) - (sinYaw * sinPitch * cosRoll);\r\n\tfloat quaW = (cosYaw * cosPitch * cosRoll) + (sinYaw * sinPitch * sinRoll);\r\n\t\r\n\t//vec4 q=vec4(quaX,quaY,quaZ,quaW);\r\n\t//vec3 temp = cross(q.xyz, vector) + q.w * vector;\r\n\t//return (cross(temp, -q.xyz) + dot(q.xyz,vector) * q.xyz + q.w * temp);\r\n\t\r\n\tfloat x = quaX + quaX;\r\n    float y = quaY + quaY;\r\n    float z = quaZ + quaZ;\r\n    float wx = quaW * x;\r\n    float wy = quaW * y;\r\n    float wz = quaW * z;\r\n\tfloat xx = quaX * x;\r\n    float xy = quaX * y;\r\n\tfloat xz = quaX * z;\r\n    float yy = quaY * y;\r\n    float yz = quaY * z;\r\n    float zz = quaZ * z;\r\n\r\n    return vec3(((vector.x * ((1.0 - yy) - zz)) + (vector.y * (xy - wz))) + (vector.z * (xz + wy)),\r\n                ((vector.x * (xy + wz)) + (vector.y * ((1.0 - xx) - zz))) + (vector.z * (yz - wx)),\r\n                ((vector.x * (xz - wy)) + (vector.y * (yz + wx))) + (vector.z * ((1.0 - xx) - yy)));\r\n\t\r\n}\r\n\r\n//假定axis已经归一化\r\nvec3 rotationByAxis(in vec3 vector,in vec3 axis, in float angle)\r\n{\r\n\tfloat halfAngle = angle * 0.5;\r\n\tfloat sin = sin(halfAngle);\r\n\t\r\n\tfloat quaX = axis.x * sin;\r\n\tfloat quaY = axis.y * sin;\r\n\tfloat quaZ = axis.z * sin;\r\n\tfloat quaW = cos(halfAngle);\r\n\t\r\n\t//vec4 q=vec4(quaX,quaY,quaZ,quaW);\r\n\t//vec3 temp = cross(q.xyz, vector) + q.w * vector;\r\n\t//return (cross(temp, -q.xyz) + dot(q.xyz,vector) * q.xyz + q.w * temp);\r\n\t\r\n\tfloat x = quaX + quaX;\r\n    float y = quaY + quaY;\r\n    float z = quaZ + quaZ;\r\n    float wx = quaW * x;\r\n    float wy = quaW * y;\r\n    float wz = quaW * z;\r\n\tfloat xx = quaX * x;\r\n    float xy = quaX * y;\r\n\tfloat xz = quaX * z;\r\n    float yy = quaY * y;\r\n    float yz = quaY * z;\r\n    float zz = quaZ * z;\r\n\r\n    return vec3(((vector.x * ((1.0 - yy) - zz)) + (vector.y * (xy - wz))) + (vector.z * (xz + wy)),\r\n                ((vector.x * (xy + wz)) + (vector.y * ((1.0 - xx) - zz))) + (vector.z * (yz - wx)),\r\n                ((vector.x * (xz - wy)) + (vector.y * (yz + wx))) + (vector.z * ((1.0 - xx) - yy)));\r\n\t\r\n}\r\n\r\nvec3 rotationByQuaternions(in vec3 v,in vec4 q) \r\n{\r\n\treturn v + 2.0 * cross(q.xyz, cross(q.xyz, v) + q.w * v);\r\n}\r\n\r\n \r\n#if defined(VELOCITYOVERLIFETIMECURVE)||defined(VELOCITYOVERLIFETIMERANDOMCURVE)||defined(SIZEOVERLIFETIMECURVE)||defined(SIZEOVERLIFETIMECURVESEPERATE)||defined(SIZEOVERLIFETIMERANDOMCURVES)||defined(SIZEOVERLIFETIMERANDOMCURVESSEPERATE)\r\nfloat getCurValueFromGradientFloat(in vec2 gradientNumbers[4],in float normalizedAge)\r\n{\r\n\tfloat curValue;\r\n\tfor(int i=1;i<4;i++)\r\n\t{\r\n\t\tvec2 gradientNumber=gradientNumbers[i];\r\n\t\tfloat key=gradientNumber.x;\r\n\t\tif(key>=normalizedAge)\r\n\t\t{\r\n\t\t\tvec2 lastGradientNumber=gradientNumbers[i-1];\r\n\t\t\tfloat lastKey=lastGradientNumber.x;\r\n\t\t\tfloat age=(normalizedAge-lastKey)/(key-lastKey);\r\n\t\t\tcurValue=mix(lastGradientNumber.y,gradientNumber.y,age);\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\treturn curValue;\r\n}\r\n#endif\r\n\r\n#if defined(VELOCITYOVERLIFETIMECURVE)||defined(VELOCITYOVERLIFETIMERANDOMCURVE)||defined(ROTATIONOVERLIFETIMECURVE)||defined(ROTATIONOVERLIFETIMERANDOMCURVES)\r\nfloat getTotalValueFromGradientFloat(in vec2 gradientNumbers[4],in float normalizedAge)\r\n{\r\n\tfloat totalValue=0.0;\r\n\tfor(int i=1;i<4;i++)\r\n\t{\r\n\t\tvec2 gradientNumber=gradientNumbers[i];\r\n\t\tfloat key=gradientNumber.x;\r\n\t\tvec2 lastGradientNumber=gradientNumbers[i-1];\r\n\t\tfloat lastValue=lastGradientNumber.y;\r\n\t\t\r\n\t\tif(key>=normalizedAge){\r\n\t\t\tfloat lastKey=lastGradientNumber.x;\r\n\t\t\tfloat age=(normalizedAge-lastKey)/(key-lastKey);\r\n\t\t\ttotalValue+=(lastValue+mix(lastValue,gradientNumber.y,age))/2.0*a_ShapePositionStartLifeTime.w*(normalizedAge-lastKey);\r\n\t\t\tbreak;\r\n\t\t}\r\n\t\telse{\r\n\t\t\ttotalValue+=(lastValue+gradientNumber.y)/2.0*a_ShapePositionStartLifeTime.w*(key-lastGradientNumber.x);\r\n\t\t}\r\n\t}\r\n\treturn totalValue;\r\n}\r\n#endif\r\n\r\n#if defined(COLOROVERLIFETIME)||defined(RANDOMCOLOROVERLIFETIME)\r\nvec4 getColorFromGradient(in vec2 gradientAlphas[4],in vec4 gradientColors[4],in float normalizedAge)\r\n{\r\n\tvec4 overTimeColor;\r\n\tfor(int i=1;i<4;i++)\r\n\t{\r\n\t\tvec2 gradientAlpha=gradientAlphas[i];\r\n\t\tfloat alphaKey=gradientAlpha.x;\r\n\t\tif(alphaKey>=normalizedAge)\r\n\t\t{\r\n\t\t\tvec2 lastGradientAlpha=gradientAlphas[i-1];\r\n\t\t\tfloat lastAlphaKey=lastGradientAlpha.x;\r\n\t\t\tfloat age=(normalizedAge-lastAlphaKey)/(alphaKey-lastAlphaKey);\r\n\t\t\toverTimeColor.a=mix(lastGradientAlpha.y,gradientAlpha.y,age);\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\t\r\n\tfor(int i=1;i<4;i++)\r\n\t{\r\n\t\tvec4 gradientColor=gradientColors[i];\r\n\t\tfloat colorKey=gradientColor.x;\r\n\t\tif(colorKey>=normalizedAge)\r\n\t\t{\r\n\t\t\tvec4 lastGradientColor=gradientColors[i-1];\r\n\t\t\tfloat lastColorKey=lastGradientColor.x;\r\n\t\t\tfloat age=(normalizedAge-lastColorKey)/(colorKey-lastColorKey);\r\n\t\t\toverTimeColor.rgb=mix(gradientColors[i-1].yzw,gradientColor.yzw,age);\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\treturn overTimeColor;\r\n}\r\n#endif\r\n\r\n\r\n#if defined(TEXTURESHEETANIMATIONCURVE)||defined(TEXTURESHEETANIMATIONRANDOMCURVE)\r\nfloat getFrameFromGradient(in vec2 gradientFrames[4],in float normalizedAge)\r\n{\r\n\tfloat overTimeFrame;\r\n\tfor(int i=1;i<4;i++)\r\n\t{\r\n\t\tvec2 gradientFrame=gradientFrames[i];\r\n\t\tfloat key=gradientFrame.x;\r\n\t\tif(key>=normalizedAge)\r\n\t\t{\r\n\t\t\tvec2 lastGradientFrame=gradientFrames[i-1];\r\n\t\t\tfloat lastKey=lastGradientFrame.x;\r\n\t\t\tfloat age=(normalizedAge-lastKey)/(key-lastKey);\r\n\t\t\toverTimeFrame=mix(lastGradientFrame.y,gradientFrame.y,age);\r\n\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\treturn floor(overTimeFrame);\r\n}\r\n#endif\r\n\r\n#if defined(VELOCITYOVERLIFETIMECONSTANT)||defined(VELOCITYOVERLIFETIMECURVE)||defined(VELOCITYOVERLIFETIMERANDOMCONSTANT)||defined(VELOCITYOVERLIFETIMERANDOMCURVE)\r\nvec3 computeParticleLifeVelocity(in float normalizedAge)\r\n{\r\n  vec3 outLifeVelocity;\r\n  #ifdef VELOCITYOVERLIFETIMECONSTANT\r\n\t outLifeVelocity=u_VOLVelocityConst; \r\n  #endif\r\n  #ifdef VELOCITYOVERLIFETIMECURVE\r\n     outLifeVelocity= vec3(getCurValueFromGradientFloat(u_VOLVelocityGradientX,normalizedAge),getCurValueFromGradientFloat(u_VOLVelocityGradientY,normalizedAge),getCurValueFromGradientFloat(u_VOLVelocityGradientZ,normalizedAge));\r\n  #endif\r\n  #ifdef VELOCITYOVERLIFETIMERANDOMCONSTANT\r\n\t outLifeVelocity=mix(u_VOLVelocityConst,u_VOLVelocityConstMax,vec3(a_Random1.y,a_Random1.z,a_Random1.w)); \r\n  #endif\r\n  #ifdef VELOCITYOVERLIFETIMERANDOMCURVE\r\n     outLifeVelocity=vec3(mix(getCurValueFromGradientFloat(u_VOLVelocityGradientX,normalizedAge),getCurValueFromGradientFloat(u_VOLVelocityGradientMaxX,normalizedAge),a_Random1.y),\r\n\t                 mix(getCurValueFromGradientFloat(u_VOLVelocityGradientY,normalizedAge),getCurValueFromGradientFloat(u_VOLVelocityGradientMaxY,normalizedAge),a_Random1.z),\r\n\t\t\t\t\t mix(getCurValueFromGradientFloat(u_VOLVelocityGradientZ,normalizedAge),getCurValueFromGradientFloat(u_VOLVelocityGradientMaxZ,normalizedAge),a_Random1.w));\r\n  #endif\r\n\t\t\t\t\t\r\n  return outLifeVelocity;\r\n} \r\n#endif\r\n\r\nvec3 computeParticlePosition(in vec3 startVelocity, in vec3 lifeVelocity,in float age,in float normalizedAge,vec3 gravityVelocity,vec4 worldRotation)\r\n{\r\n   vec3 startPosition;\r\n   vec3 lifePosition;\r\n   #if defined(VELOCITYOVERLIFETIMECONSTANT)||defined(VELOCITYOVERLIFETIMECURVE)||defined(VELOCITYOVERLIFETIMERANDOMCONSTANT)||defined(VELOCITYOVERLIFETIMERANDOMCURVE)\r\n\t#ifdef VELOCITYOVERLIFETIMECONSTANT\r\n\t\t  startPosition=startVelocity*age;\r\n\t\t  lifePosition=lifeVelocity*age;\r\n\t#endif\r\n\t#ifdef VELOCITYOVERLIFETIMECURVE\r\n\t\t  startPosition=startVelocity*age;\r\n\t\t  lifePosition=vec3(getTotalValueFromGradientFloat(u_VOLVelocityGradientX,normalizedAge),getTotalValueFromGradientFloat(u_VOLVelocityGradientY,normalizedAge),getTotalValueFromGradientFloat(u_VOLVelocityGradientZ,normalizedAge));\r\n\t#endif\r\n\t#ifdef VELOCITYOVERLIFETIMERANDOMCONSTANT\r\n\t\t  startPosition=startVelocity*age;\r\n\t\t  lifePosition=lifeVelocity*age;\r\n\t#endif\r\n\t#ifdef VELOCITYOVERLIFETIMERANDOMCURVE\r\n\t\t  startPosition=startVelocity*age;\r\n\t\t  lifePosition=vec3(mix(getTotalValueFromGradientFloat(u_VOLVelocityGradientX,normalizedAge),getTotalValueFromGradientFloat(u_VOLVelocityGradientMaxX,normalizedAge),a_Random1.y)\r\n\t      ,mix(getTotalValueFromGradientFloat(u_VOLVelocityGradientY,normalizedAge),getTotalValueFromGradientFloat(u_VOLVelocityGradientMaxY,normalizedAge),a_Random1.z)\r\n\t      ,mix(getTotalValueFromGradientFloat(u_VOLVelocityGradientZ,normalizedAge),getTotalValueFromGradientFloat(u_VOLVelocityGradientMaxZ,normalizedAge),a_Random1.w));\r\n\t#endif\r\n\t\r\n\tvec3 finalPosition;\r\n\tif(u_VOLSpaceType==0){\r\n\t  if(u_ScalingMode!=2)\r\n\t   finalPosition =rotationByQuaternions(u_PositionScale*(a_ShapePositionStartLifeTime.xyz+startPosition+lifePosition),worldRotation);\r\n\t  else\r\n\t   finalPosition =rotationByQuaternions(u_PositionScale*a_ShapePositionStartLifeTime.xyz+startPosition+lifePosition,worldRotation);\r\n\t}\r\n\telse{\r\n\t  if(u_ScalingMode!=2)\r\n\t    finalPosition = rotationByQuaternions(u_PositionScale*(a_ShapePositionStartLifeTime.xyz+startPosition),worldRotation)+lifePosition;\r\n\t  else\r\n\t    finalPosition = rotationByQuaternions(u_PositionScale*a_ShapePositionStartLifeTime.xyz+startPosition,worldRotation)+lifePosition;\r\n\t}\r\n  #else\r\n\t startPosition=startVelocity*age;\r\n\t vec3 finalPosition;\r\n\t if(u_ScalingMode!=2)\r\n\t\t\tfinalPosition = rotationByQuaternions(u_PositionScale*(a_ShapePositionStartLifeTime.xyz+startPosition),worldRotation);\r\n\t else\r\n\t   \tfinalPosition = rotationByQuaternions(u_PositionScale*a_ShapePositionStartLifeTime.xyz+startPosition,worldRotation);\r\n  #endif\r\n  \r\n  if(u_SimulationSpace==0)\r\n    finalPosition=finalPosition+a_SimulationWorldPostion;\r\n  else if(u_SimulationSpace==1) \r\n    finalPosition=finalPosition+u_WorldPosition;\r\n  \r\n  finalPosition+=0.5*gravityVelocity*age;\r\n \r\n  return  finalPosition;\r\n}\r\n\r\n\r\nvec4 computeParticleColor(in vec4 color,in float normalizedAge)\r\n{\r\n\t#ifdef COLOROVERLIFETIME\r\n\t  color*=getColorFromGradient(u_ColorOverLifeGradientAlphas,u_ColorOverLifeGradientColors,normalizedAge);\r\n\t#endif\r\n\t\r\n\t#ifdef RANDOMCOLOROVERLIFETIME\r\n\t  color*=mix(getColorFromGradient(u_ColorOverLifeGradientAlphas,u_ColorOverLifeGradientColors,normalizedAge),getColorFromGradient(u_MaxColorOverLifeGradientAlphas,u_MaxColorOverLifeGradientColors,normalizedAge),a_Random0.y);\r\n\t#endif\r\n\r\n    return color;\r\n}\r\n\r\nvec2 computeParticleSizeBillbard(in vec2 size,in float normalizedAge)\r\n{\r\n\t#ifdef SIZEOVERLIFETIMECURVE\r\n\t\tsize*=getCurValueFromGradientFloat(u_SOLSizeGradient,normalizedAge);\r\n\t#endif\r\n\t#ifdef SIZEOVERLIFETIMERANDOMCURVES\r\n\t    size*=mix(getCurValueFromGradientFloat(u_SOLSizeGradient,normalizedAge),getCurValueFromGradientFloat(u_SOLSizeGradientMax,normalizedAge),a_Random0.z); \r\n\t#endif\r\n\t#ifdef SIZEOVERLIFETIMECURVESEPERATE\r\n\t\tsize*=vec2(getCurValueFromGradientFloat(u_SOLSizeGradientX,normalizedAge),getCurValueFromGradientFloat(u_SOLSizeGradientY,normalizedAge));\r\n\t#endif\r\n\t#ifdef SIZEOVERLIFETIMERANDOMCURVESSEPERATE\r\n\t    size*=vec2(mix(getCurValueFromGradientFloat(u_SOLSizeGradientX,normalizedAge),getCurValueFromGradientFloat(u_SOLSizeGradientMaxX,normalizedAge),a_Random0.z)\r\n\t    ,mix(getCurValueFromGradientFloat(u_SOLSizeGradientY,normalizedAge),getCurValueFromGradientFloat(u_SOLSizeGradientMaxY,normalizedAge),a_Random0.z));\r\n\t#endif\r\n\treturn size;\r\n}\r\n\r\n#ifdef RENDERMODE_MESH\r\nvec3 computeParticleSizeMesh(in vec3 size,in float normalizedAge)\r\n{\r\n\t#ifdef SIZEOVERLIFETIMECURVE\r\n\t\tsize*=getCurValueFromGradientFloat(u_SOLSizeGradient,normalizedAge);\r\n\t#endif\r\n\t#ifdef SIZEOVERLIFETIMERANDOMCURVES\r\n\t    size*=mix(getCurValueFromGradientFloat(u_SOLSizeGradient,normalizedAge),getCurValueFromGradientFloat(u_SOLSizeGradientMax,normalizedAge),a_Random0.z); \r\n\t#endif\r\n\t#ifdef SIZEOVERLIFETIMECURVESEPERATE\r\n\t\tsize*=vec3(getCurValueFromGradientFloat(u_SOLSizeGradientX,normalizedAge),getCurValueFromGradientFloat(u_SOLSizeGradientY,normalizedAge),getCurValueFromGradientFloat(u_SOLSizeGradientZ,normalizedAge));\r\n\t#endif\r\n\t#ifdef SIZEOVERLIFETIMERANDOMCURVESSEPERATE\r\n\t    size*=vec3(mix(getCurValueFromGradientFloat(u_SOLSizeGradientX,normalizedAge),getCurValueFromGradientFloat(u_SOLSizeGradientMaxX,normalizedAge),a_Random0.z)\r\n\t    ,mix(getCurValueFromGradientFloat(u_SOLSizeGradientY,normalizedAge),getCurValueFromGradientFloat(u_SOLSizeGradientMaxY,normalizedAge),a_Random0.z)\r\n\t\t,mix(getCurValueFromGradientFloat(u_SOLSizeGradientZ,normalizedAge),getCurValueFromGradientFloat(u_SOLSizeGradientMaxZ,normalizedAge),a_Random0.z));\r\n\t#endif\r\n\treturn size;\r\n}\r\n#endif\r\n\r\nfloat computeParticleRotationFloat(in float rotation,in float age,in float normalizedAge)\r\n{ \r\n\t#ifdef ROTATIONOVERLIFETIME\r\n\t\t#ifdef ROTATIONOVERLIFETIMECONSTANT\r\n\t\t\tfloat ageRot=u_ROLAngularVelocityConst*age;\r\n\t        rotation+=ageRot;\r\n\t\t#endif\r\n\t\t#ifdef ROTATIONOVERLIFETIMECURVE\r\n\t\t\trotation+=getTotalValueFromGradientFloat(u_ROLAngularVelocityGradient,normalizedAge);\r\n\t\t#endif\r\n\t\t#ifdef ROTATIONOVERLIFETIMERANDOMCONSTANTS\r\n\t\t\tfloat ageRot=mix(u_ROLAngularVelocityConst,u_ROLAngularVelocityConstMax,a_Random0.w)*age;\r\n\t        rotation+=ageRot;\r\n\t    #endif\r\n\t\t#ifdef ROTATIONOVERLIFETIMERANDOMCURVES\r\n\t\t\trotation+=mix(getTotalValueFromGradientFloat(u_ROLAngularVelocityGradient,normalizedAge),getTotalValueFromGradientFloat(u_ROLAngularVelocityGradientMax,normalizedAge),a_Random0.w);\r\n\t\t#endif\r\n\t#endif\r\n\t#ifdef ROTATIONOVERLIFETIMESEPERATE\r\n\t\t#ifdef ROTATIONOVERLIFETIMECONSTANT\r\n\t\t\tfloat ageRot=u_ROLAngularVelocityConstSeprarate.z*age;\r\n\t        rotation+=ageRot;\r\n\t\t#endif\r\n\t\t#ifdef ROTATIONOVERLIFETIMECURVE\r\n\t\t\trotation+=getTotalValueFromGradientFloat(u_ROLAngularVelocityGradientZ,normalizedAge);\r\n\t\t#endif\r\n\t\t#ifdef ROTATIONOVERLIFETIMERANDOMCONSTANTS\r\n\t\t\tfloat ageRot=mix(u_ROLAngularVelocityConstSeprarate.z,u_ROLAngularVelocityConstMaxSeprarate.z,a_Random0.w)*age;\r\n\t        rotation+=ageRot;\r\n\t    #endif\r\n\t\t#ifdef ROTATIONOVERLIFETIMERANDOMCURVES\r\n\t\t\trotation+=mix(getTotalValueFromGradientFloat(u_ROLAngularVelocityGradientZ,normalizedAge),getTotalValueFromGradientFloat(u_ROLAngularVelocityGradientMaxZ,normalizedAge),a_Random0.w));\r\n\t\t#endif\r\n\t#endif\r\n\treturn rotation;\r\n}\r\n\r\n#if defined(RENDERMODE_MESH)&&(defined(ROTATIONOVERLIFETIME)||defined(ROTATIONOVERLIFETIMESEPERATE))\r\nvec3 computeParticleRotationVec3(in vec3 rotation,in float age,in float normalizedAge)\r\n{ \r\n\t#ifdef ROTATIONOVERLIFETIME\r\n\t#ifdef ROTATIONOVERLIFETIMECONSTANT\r\n\t\t\tfloat ageRot=u_ROLAngularVelocityConst*age;\r\n\t        rotation+=ageRot;\r\n\t\t#endif\r\n\t\t#ifdef ROTATIONOVERLIFETIMECURVE\r\n\t\t\trotation+=getTotalValueFromGradientFloat(u_ROLAngularVelocityGradient,normalizedAge);\r\n\t\t#endif\r\n\t\t#ifdef ROTATIONOVERLIFETIMERANDOMCONSTANTS\r\n\t\t\tfloat ageRot=mix(u_ROLAngularVelocityConst,u_ROLAngularVelocityConstMax,a_Random0.w)*age;\r\n\t        rotation+=ageRot;\r\n\t    #endif\r\n\t\t#ifdef ROTATIONOVERLIFETIMERANDOMCURVES\r\n\t\t\trotation+=mix(getTotalValueFromGradientFloat(u_ROLAngularVelocityGradient,normalizedAge),getTotalValueFromGradientFloat(u_ROLAngularVelocityGradientMax,normalizedAge),a_Random0.w);\r\n\t\t#endif\r\n\t#endif\r\n\t#ifdef ROTATIONOVERLIFETIMESEPERATE\r\n\t\t#ifdef ROTATIONOVERLIFETIMECONSTANT\r\n\t\t\tvec3 ageRot=u_ROLAngularVelocityConstSeprarate*age;\r\n\t        rotation+=ageRot;\r\n\t\t#endif\r\n\t\t#ifdef ROTATIONOVERLIFETIMECURVE\r\n\t\t\trotation+=vec3(getTotalValueFromGradientFloat(u_ROLAngularVelocityGradientX,normalizedAge),getTotalValueFromGradientFloat(u_ROLAngularVelocityGradientY,normalizedAge),getTotalValueFromGradientFloat(u_ROLAngularVelocityGradientZ,normalizedAge));\r\n\t\t#endif\r\n\t\t#ifdef ROTATIONOVERLIFETIMERANDOMCONSTANTS\r\n\t\t\tvec3 ageRot=mix(u_ROLAngularVelocityConstSeprarate,u_ROLAngularVelocityConstMaxSeprarate,a_Random0.w)*age;\r\n\t        rotation+=ageRot;\r\n\t    #endif\r\n\t\t#ifdef ROTATIONOVERLIFETIMERANDOMCURVES\r\n\t\t\trotation+=vec3(mix(getTotalValueFromGradientFloat(u_ROLAngularVelocityGradientX,normalizedAge),getTotalValueFromGradientFloat(u_ROLAngularVelocityGradientMaxX,normalizedAge),a_Random0.w)\r\n\t        ,mix(getTotalValueFromGradientFloat(u_ROLAngularVelocityGradientY,normalizedAge),getTotalValueFromGradientFloat(u_ROLAngularVelocityGradientMaxY,normalizedAge),a_Random0.w)\r\n\t        ,mix(getTotalValueFromGradientFloat(u_ROLAngularVelocityGradientZ,normalizedAge),getTotalValueFromGradientFloat(u_ROLAngularVelocityGradientMaxZ,normalizedAge),a_Random0.w));\r\n\t\t#endif\r\n\t#endif\r\n\treturn rotation;\r\n}\r\n#endif\r\n\r\nvec2 computeParticleUV(in vec2 uv,in float normalizedAge)\r\n{ \r\n\t#ifdef TEXTURESHEETANIMATIONCURVE\r\n\t\tfloat cycleNormalizedAge=normalizedAge*u_TSACycles;\r\n\t\tfloat frame=getFrameFromGradient(u_TSAGradientUVs,cycleNormalizedAge-floor(cycleNormalizedAge));\r\n\t\tfloat totalULength=frame*u_TSASubUVLength.x;\r\n\t\tfloat floorTotalULength=floor(totalULength);\r\n\t    uv.x+=totalULength-floorTotalULength;\r\n\t\tuv.y+=floorTotalULength*u_TSASubUVLength.y;\r\n    #endif\r\n\t#ifdef TEXTURESHEETANIMATIONRANDOMCURVE\r\n\t\tfloat cycleNormalizedAge=normalizedAge*u_TSACycles;\r\n\t\tfloat uvNormalizedAge=cycleNormalizedAge-floor(cycleNormalizedAge);\r\n\t    float frame=floor(mix(getFrameFromGradient(u_TSAGradientUVs,uvNormalizedAge),getFrameFromGradient(u_TSAMaxGradientUVs,uvNormalizedAge),a_Random1.x));\r\n\t\tfloat totalULength=frame*u_TSASubUVLength.x;\r\n\t\tfloat floorTotalULength=floor(totalULength);\r\n\t    uv.x+=totalULength-floorTotalULength;\r\n\t\tuv.y+=floorTotalULength*u_TSASubUVLength.y;\r\n    #endif\r\n\treturn uv;\r\n}\r\n\r\nvoid main()\r\n{\r\n\tfloat age = u_CurrentTime - a_DirectionTime.w;\r\n\tfloat normalizedAge = age/a_ShapePositionStartLifeTime.w;\r\n\tvec3 lifeVelocity;\r\n\tif(normalizedAge<1.0)\r\n\t{ \r\n\t\tvec3 startVelocity=a_DirectionTime.xyz*a_StartSpeed;\r\n\t\t#if defined(VELOCITYOVERLIFETIMECONSTANT)||defined(VELOCITYOVERLIFETIMECURVE)||defined(VELOCITYOVERLIFETIMERANDOMCONSTANT)||defined(VELOCITYOVERLIFETIMERANDOMCURVE)\r\n\t\t\tlifeVelocity= computeParticleLifeVelocity(normalizedAge);//计算粒子生命周期速度\r\n\t\t#endif \r\n\t\tvec3 gravityVelocity=u_Gravity*age;\r\n\t\t\r\n\t\tvec4 worldRotation;\r\n\t\tif(u_SimulationSpace==0)\r\n\t\t\tworldRotation=a_SimulationWorldRotation;\r\n\t\telse\r\n\t\t\tworldRotation=u_WorldRotation;\r\n\t\t\r\n\t\tvec3 center=computeParticlePosition(startVelocity, lifeVelocity, age, normalizedAge,gravityVelocity,worldRotation);//计算粒子位置\r\n\t\r\n\t\r\n\t\t#ifdef SPHERHBILLBOARD\r\n\t\t\tvec2 corner=a_CornerTextureCoordinate.xy;//Billboard模式z轴无效\r\n\t\t\tvec3 cameraUpVector =normalize(u_CameraUp);//TODO:是否外面归一化\r\n\t\t\tvec3 sideVector = normalize(cross(u_CameraDirection,cameraUpVector));\r\n\t\t\tvec3 upVector = normalize(cross(sideVector,u_CameraDirection));\r\n\t\t\tcorner*=computeParticleSizeBillbard(a_StartSize.xy,normalizedAge);\r\n\t\t\t#if defined(ROTATIONOVERLIFETIME)||defined(ROTATIONOVERLIFETIMESEPERATE)\r\n\t\t\t\tif(u_ThreeDStartRotation){\r\n\t\t\t\t\tvec3 rotation=vec3(a_StartRotation0.xy,computeParticleRotationFloat(a_StartRotation0.z,age,normalizedAge));\r\n\t\t\t\t\tcenter += u_SizeScale.xzy*rotationByEuler(corner.x*sideVector+corner.y*upVector,rotation);\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\tfloat rot = computeParticleRotationFloat(a_StartRotation0.x, age,normalizedAge);\r\n\t\t\t\t\tfloat c = cos(rot);\r\n\t\t\t\t\tfloat s = sin(rot);\r\n\t\t\t\t\tmat2 rotation= mat2(c, -s, s, c);\r\n\t\t\t\t\tcorner=rotation*corner;\r\n\t\t\t\t\tcenter += u_SizeScale.xzy*(corner.x*sideVector+corner.y*upVector);\r\n\t\t\t\t}\r\n\t\t\t#else\r\n\t\t\t\tif(u_ThreeDStartRotation){\r\n\t\t\t\t\tcenter += u_SizeScale.xzy*rotationByEuler(corner.x*sideVector+corner.y*upVector,a_StartRotation0);\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\tfloat c = cos(a_StartRotation0.x);\r\n\t\t\t\t\tfloat s = sin(a_StartRotation0.x);\r\n\t\t\t\t\tmat2 rotation= mat2(c, -s, s, c);\r\n\t\t\t\t\tcorner=rotation*corner;\r\n\t\t\t\t\tcenter += u_SizeScale.xzy*(corner.x*sideVector+corner.y*upVector);\r\n\t\t\t\t}\r\n\t\t\t#endif\r\n\t\t#endif\r\n\t\r\n\t\t#ifdef STRETCHEDBILLBOARD\r\n\t\tvec2 corner=a_CornerTextureCoordinate.xy;//Billboard模式z轴无效\r\n\t\tvec3 velocity;\r\n\t\t#if defined(VELOCITYOVERLIFETIMECONSTANT)||defined(VELOCITYOVERLIFETIMECURVE)||defined(VELOCITYOVERLIFETIMERANDOMCONSTANT)||defined(VELOCITYOVERLIFETIMERANDOMCURVE)\r\n\t\t\tif(u_VOLSpaceType==0)\r\n\t\t\tvelocity=rotationByQuaternions(u_SizeScale*(startVelocity+lifeVelocity),worldRotation)+gravityVelocity;\r\n\t\t\telse\r\n\t\t\tvelocity=rotationByQuaternions(u_SizeScale*startVelocity,worldRotation)+lifeVelocity+gravityVelocity;\r\n\t\t#else\r\n\t\t\tvelocity= rotationByQuaternions(u_SizeScale*startVelocity,worldRotation)+gravityVelocity;\r\n\t\t#endif\t\r\n\t\t\tvec3 cameraUpVector = normalize(velocity);\r\n\t\t\tvec3 direction = normalize(center-u_CameraPos);\r\n\t\t\tvec3 sideVector = normalize(cross(direction,normalize(velocity)));\r\n\t\t\t\r\n\t\t\tsideVector=u_SizeScale.xzy*sideVector;\r\n\t\t\tcameraUpVector=length(vec3(u_SizeScale.x,0.0,0.0))*cameraUpVector;\r\n\t\t\t\r\n\t\t\tvec2 size=computeParticleSizeBillbard(a_StartSize.xy,normalizedAge);\r\n\t\t\t\r\n\t\t\tconst mat2 rotaionZHalfPI=mat2(0.0, -1.0, 1.0, 0.0);\r\n\t\t\tcorner=rotaionZHalfPI*corner;\r\n\t\t\tcorner.y=corner.y-abs(corner.y);\r\n\t\t\t\r\n\t\t\tfloat speed=length(velocity);//TODO:\r\n\t\t\tcenter +=sign(u_SizeScale.x)*(sign(u_StretchedBillboardLengthScale)*size.x*corner.x*sideVector+(speed*u_StretchedBillboardSpeedScale+size.y*u_StretchedBillboardLengthScale)*corner.y*cameraUpVector);\r\n\t\t#endif\r\n\t\r\n\t\t#ifdef HORIZONTALBILLBOARD\r\n\t\t\tvec2 corner=a_CornerTextureCoordinate.xy;//Billboard模式z轴无效\r\n\t\t\tconst vec3 cameraUpVector=vec3(0.0,0.0,1.0);\r\n\t\t\tconst vec3 sideVector = vec3(-1.0,0.0,0.0);\r\n\t\t\t\r\n\t\t\tfloat rot = computeParticleRotationFloat(a_StartRotation0.x, age,normalizedAge);\r\n\t\t\tfloat c = cos(rot);\r\n\t\t\tfloat s = sin(rot);\r\n\t\t\tmat2 rotation= mat2(c, -s, s, c);\r\n\t\t\tcorner=rotation*corner*cos(0.78539816339744830961566084581988);//TODO:临时缩小cos45,不确定U3D原因\r\n\t\t\tcorner*=computeParticleSizeBillbard(a_StartSize.xy,normalizedAge);\r\n\t\t\tcenter +=u_SizeScale.xzy*(corner.x*sideVector+ corner.y*cameraUpVector);\r\n\t\t#endif\r\n\t\r\n\t\t#ifdef VERTICALBILLBOARD\r\n\t\t\tvec2 corner=a_CornerTextureCoordinate.xy;//Billboard模式z轴无效\r\n\t\t\tconst vec3 cameraUpVector =vec3(0.0,1.0,0.0);\r\n\t\t\tvec3 sideVector = normalize(cross(u_CameraDirection,cameraUpVector));\r\n\t\t\t\r\n\t\t\tfloat rot = computeParticleRotationFloat(a_StartRotation0.x, age,normalizedAge);\r\n\t\t\tfloat c = cos(rot);\r\n\t\t\tfloat s = sin(rot);\r\n\t\t\tmat2 rotation= mat2(c, -s, s, c);\r\n\t\t\tcorner=rotation*corner*cos(0.78539816339744830961566084581988);//TODO:临时缩小cos45,不确定U3D原因\r\n\t\t\tcorner*=computeParticleSizeBillbard(a_StartSize.xy,normalizedAge);\r\n\t\t\tcenter +=u_SizeScale.xzy*(corner.x*sideVector+ corner.y*cameraUpVector);\r\n\t\t#endif\r\n\t\r\n\t\t#ifdef RENDERMODE_MESH\r\n\t\t\tvec3 size=computeParticleSizeMesh(a_StartSize,normalizedAge);\r\n\t\t\t#if defined(ROTATIONOVERLIFETIME)||defined(ROTATIONOVERLIFETIMESEPERATE)\r\n\t\t\t\tif(u_ThreeDStartRotation){\r\n\t\t\t\t\tvec3 rotation=vec3(a_StartRotation0.xy,computeParticleRotationFloat(a_StartRotation0.z, age,normalizedAge));\r\n\t\t\t\t\tcenter+= rotationByQuaternions(u_SizeScale*rotationByEuler(a_MeshPosition*size,rotation),worldRotation);\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\t#ifdef ROTATIONOVERLIFETIME\r\n\t\t\t\t\t\tfloat angle=computeParticleRotationFloat(a_StartRotation0.x, age,normalizedAge);\r\n\t\t\t\t\t\tif(a_ShapePositionStartLifeTime.x!=0.0||a_ShapePositionStartLifeTime.y!=0.0){\r\n\t\t\t\t\t\t\tcenter+= (rotationByQuaternions(rotationByAxis(u_SizeScale*a_MeshPosition*size,normalize(cross(vec3(0.0,0.0,1.0),vec3(a_ShapePositionStartLifeTime.xy,0.0))),angle),worldRotation));//已验证\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\t#ifdef SHAPE\r\n\t\t\t\t\t\t\t\tcenter+= u_SizeScale.xzy*(rotationByQuaternions(rotationByAxis(a_MeshPosition*size,vec3(0.0,-1.0,0.0),angle),worldRotation));\r\n\t\t\t\t\t\t\t#else\r\n\t\t\t\t\t\t\t\tif(u_SimulationSpace==0)\r\n\t\t\t\t\t\t\t\t\tcenter+=rotationByAxis(u_SizeScale*a_MeshPosition*size,vec3(0.0,0.0,-1.0),angle);//已验证\r\n\t\t\t\t\t\t\t\telse if(u_SimulationSpace==1)\r\n\t\t\t\t\t\t\t\t\tcenter+=rotationByQuaternions(u_SizeScale*rotationByAxis(a_MeshPosition*size,vec3(0.0,0.0,-1.0),angle),worldRotation);//已验证\r\n\t\t\t\t\t\t\t#endif\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t#endif\r\n\t\t\t\t\t#ifdef ROTATIONOVERLIFETIMESEPERATE\r\n\t\t\t\t\t\t//TODO:是否应合并if(u_ThreeDStartRotation)分支代码,待测试\r\n\t\t\t\t\t\tvec3 angle=computeParticleRotationVec3(vec3(0.0,0.0,-a_StartRotation0.x), age,normalizedAge);\r\n\t\t\t\t\t\tcenter+= (rotationByQuaternions(rotationByEuler(u_SizeScale*a_MeshPosition*size,vec3(angle.x,angle.y,angle.z)),worldRotation));//已验证\r\n\t\t\t\t\t#endif\t\t\r\n\t\t\t\t}\r\n\t\t\t#else\r\n\t\t\t\tif(u_ThreeDStartRotation){\r\n\t\t\t\t\tcenter+= rotationByQuaternions(u_SizeScale*rotationByEuler(a_MeshPosition*size,a_StartRotation0),worldRotation);//已验证\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\tif(a_ShapePositionStartLifeTime.x!=0.0||a_ShapePositionStartLifeTime.y!=0.0){\r\n\t\t\t\t\t\tif(u_SimulationSpace==0)\r\n\t\t\t\t\t\t\tcenter+= rotationByAxis(u_SizeScale*a_MeshPosition*size,normalize(cross(vec3(0.0,0.0,1.0),vec3(a_ShapePositionStartLifeTime.xy,0.0))),a_StartRotation0.x);\r\n\t\t\t\t\t\telse if(u_SimulationSpace==1)\r\n\t\t\t\t\t\t\tcenter+= (rotationByQuaternions(u_SizeScale*rotationByAxis(a_MeshPosition*size,normalize(cross(vec3(0.0,0.0,1.0),vec3(a_ShapePositionStartLifeTime.xy,0.0))),a_StartRotation0.x),worldRotation));//已验证\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\t#ifdef SHAPE\r\n\t\t\t\t\t\t\tif(u_SimulationSpace==0)\r\n\t\t\t\t\t\t\t\tcenter+= u_SizeScale*rotationByAxis(a_MeshPosition*size,vec3(0.0,-1.0,0.0),a_StartRotation0.x);\r\n\t\t\t\t\t\t\telse if(u_SimulationSpace==1)\r\n\t\t\t\t\t\t\t\tcenter+= rotationByQuaternions(u_SizeScale*rotationByAxis(a_MeshPosition*size,vec3(0.0,-1.0,0.0),a_StartRotation0.x),worldRotation);\t\r\n\t\t\t\t\t\t#else\r\n\t\t\t\t\t\t\tif(u_SimulationSpace==0)\r\n\t\t\t\t\t\t\t\tcenter+= rotationByAxis(u_SizeScale*a_MeshPosition*size,vec3(0.0,0.0,-1.0),a_StartRotation0.x);\r\n\t\t\t\t\t\t\telse if(u_SimulationSpace==1)\r\n\t\t\t\t\t\t\t\tcenter+= rotationByQuaternions(u_SizeScale*rotationByAxis(a_MeshPosition*size,vec3(0.0,0.0,-1.0),a_StartRotation0.x),worldRotation);//已验证\r\n\t\t\t\t\t\t#endif\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t#endif\r\n\t\t\tv_MeshColor=a_MeshColor;\r\n\t\t#endif\r\n\t\r\n\t\thighp vec4 vPos = u_Projection*u_View*vec4(center,1.0);\r\n\tfloat zOff = vPos.z / _Dist;\r\n\tvPos += _QOffset * zOff * zOff;\r\n\tgl_Position=vPos;\r\n\t\tv_Color = computeParticleColor(a_StartColor, normalizedAge);\r\n\t\t#ifdef DIFFUSEMAP\r\n\t\t\t#if defined(SPHERHBILLBOARD)||defined(STRETCHEDBILLBOARD)||defined(HORIZONTALBILLBOARD)||defined(VERTICALBILLBOARD)\r\n\t\t\t\tv_TextureCoordinate =computeParticleUV(a_CornerTextureCoordinate.zw, normalizedAge);\r\n\t\t\t#endif\r\n\t\t\t#ifdef RENDERMODE_MESH\r\n\t\t\t\tv_TextureCoordinate =computeParticleUV(a_MeshTextureCoordinate, normalizedAge);\r\n\t\t\t#endif\r\n\t\t\t\r\n\t\t\t#ifdef TILINGOFFSET\r\n\t\t\t\tv_TextureCoordinate=TransformUV(v_TextureCoordinate,u_TilingOffset);\r\n\t\t\t#endif\r\n\t\t#endif\r\n   \t}\r\n   \telse\r\n\t{\r\n\t\tgl_Position=vec4(2.0,2.0,2.0,1.0);//Discard use out of X(-1,1),Y(-1,1),Z(0,1)\r\n\t}\r\n\tgl_Position=remapGLPositionZ(gl_Position);\r\n}\r\n\r\n',"#ifdef GL_FRAGMENT_PRECISION_HIGH\r\n  precision highp float;\r\n#else\r\n  precision mediump float;\r\n#endif\r\n\r\nvarying vec4 v_Color;\r\nvarying vec2 v_TextureCoordinate;\r\nuniform sampler2D u_texture;\r\nuniform vec4 u_Tintcolor;\r\n\r\n#ifdef RENDERMODE_MESH\r\n\tvarying vec4 v_MeshColor;\r\n#endif\r\n\r\n#ifdef FOG\r\n\tuniform float u_FogStart;\r\n\tuniform float u_FogRange;\r\n\t#ifdef ADDTIVEFOG\r\n\t#else\r\n\t\tuniform vec3 u_FogColor;\r\n\t#endif\r\n#endif\r\n\r\n\r\nvoid main()\r\n{\t\r\n\t#ifdef RENDERMODE_MESH\r\n\t\tgl_FragColor=v_MeshColor;\r\n\t#else\r\n\t\tgl_FragColor=vec4(1.0);\t\r\n\t#endif\r\n\t\t\r\n\t#ifdef DIFFUSEMAP\r\n\t\t#ifdef TINTCOLOR\r\n\t\t\tgl_FragColor*=texture2D(u_texture,v_TextureCoordinate)*u_Tintcolor*2.0*v_Color;\r\n\t\t#else\r\n\t\t\tgl_FragColor*=texture2D(u_texture,v_TextureCoordinate)*v_Color;\r\n\t\t#endif\r\n\t#else\r\n\t\t#ifdef TINTCOLOR\r\n\t\t\tgl_FragColor*=u_Tintcolor*2.0*v_Color;\r\n\t\t#else\r\n\t\t\tgl_FragColor*=v_Color;\r\n\t\t#endif\r\n\t#endif\r\n\t\r\n\t#ifdef FOG\r\n\t\tfloat lerpFact=clamp((1.0/gl_FragCoord.w-u_FogStart)/u_FogRange,0.0,1.0);\r\n\t\t#ifdef ADDTIVEFOG\r\n\t\t\tgl_FragColor.rgb=mix(gl_FragColor.rgb,vec3(0.0,0.0,0.0),lerpFact);\r\n\t\t#else\r\n\t\t\tgl_FragColor.rgb=mix(gl_FragColor.rgb,u_FogColor,lerpFact);\r\n\t\t#endif\r\n\t#endif\r\n}",r),ye.SHADERDEFINE_DIFFUSEMAP=Laya.Shader3D.getDefineByName("DIFFUSEMAP"),ye.SHADERDEFINE_TINTCOLOR=Laya.Shader3D.getDefineByName("TINTCOLOR"),ye.SHADERDEFINE_ADDTIVEFOG=Laya.Shader3D.getDefineByName("ADDTIVEFOG"),ye.SHADERDEFINE_TILINGOFFSET=Laya.Shader3D.getDefineByName("TILINGOFFSET"),Laya.ShuriKenParticle3DShaderDeclaration.SHADERDEFINE_RENDERMODE_BILLBOARD=Laya.Shader3D.getDefineByName("SPHERHBILLBOARD"),Laya.ShuriKenParticle3DShaderDeclaration.SHADERDEFINE_RENDERMODE_STRETCHEDBILLBOARD=Laya.Shader3D.getDefineByName("STRETCHEDBILLBOARD"),Laya.ShuriKenParticle3DShaderDeclaration.SHADERDEFINE_RENDERMODE_HORIZONTALBILLBOARD=Laya.Shader3D.getDefineByName("HORIZONTALBILLBOARD"),Laya.ShuriKenParticle3DShaderDeclaration.SHADERDEFINE_RENDERMODE_VERTICALBILLBOARD=Laya.Shader3D.getDefineByName("VERTICALBILLBOARD"),Laya.ShuriKenParticle3DShaderDeclaration.SHADERDEFINE_COLOROVERLIFETIME=Laya.Shader3D.getDefineByName("COLOROVERLIFETIME"),Laya.ShuriKenParticle3DShaderDeclaration.SHADERDEFINE_RANDOMCOLOROVERLIFETIME=Laya.Shader3D.getDefineByName("RANDOMCOLOROVERLIFETIME"),Laya.ShuriKenParticle3DShaderDeclaration.SHADERDEFINE_VELOCITYOVERLIFETIMECONSTANT=Laya.Shader3D.getDefineByName("VELOCITYOVERLIFETIMECONSTANT"),Laya.ShuriKenParticle3DShaderDeclaration.SHADERDEFINE_VELOCITYOVERLIFETIMECURVE=Laya.Shader3D.getDefineByName("VELOCITYOVERLIFETIMECURVE"),Laya.ShuriKenParticle3DShaderDeclaration.SHADERDEFINE_VELOCITYOVERLIFETIMERANDOMCONSTANT=Laya.Shader3D.getDefineByName("VELOCITYOVERLIFETIMERANDOMCONSTANT"),Laya.ShuriKenParticle3DShaderDeclaration.SHADERDEFINE_VELOCITYOVERLIFETIMERANDOMCURVE=Laya.Shader3D.getDefineByName("VELOCITYOVERLIFETIMERANDOMCURVE"),Laya.ShuriKenParticle3DShaderDeclaration.SHADERDEFINE_TEXTURESHEETANIMATIONCURVE=Laya.Shader3D.getDefineByName("TEXTURESHEETANIMATIONCURVE"),Laya.ShuriKenParticle3DShaderDeclaration.SHADERDEFINE_TEXTURESHEETANIMATIONRANDOMCURVE=Laya.Shader3D.getDefineByName("TEXTURESHEETANIMATIONRANDOMCURVE"),Laya.ShuriKenParticle3DShaderDeclaration.SHADERDEFINE_ROTATIONOVERLIFETIME=Laya.Shader3D.getDefineByName("ROTATIONOVERLIFETIME"),Laya.ShuriKenParticle3DShaderDeclaration.SHADERDEFINE_ROTATIONOVERLIFETIMESEPERATE=Laya.Shader3D.getDefineByName("ROTATIONOVERLIFETIMESEPERATE"),Laya.ShuriKenParticle3DShaderDeclaration.SHADERDEFINE_ROTATIONOVERLIFETIMECONSTANT=Laya.Shader3D.getDefineByName("ROTATIONOVERLIFETIMECONSTANT"),Laya.ShuriKenParticle3DShaderDeclaration.SHADERDEFINE_ROTATIONOVERLIFETIMECURVE=Laya.Shader3D.getDefineByName("ROTATIONOVERLIFETIMECURVE"),Laya.ShuriKenParticle3DShaderDeclaration.SHADERDEFINE_ROTATIONOVERLIFETIMERANDOMCONSTANTS=Laya.Shader3D.getDefineByName("ROTATIONOVERLIFETIMERANDOMCONSTANTS"),Laya.ShuriKenParticle3DShaderDeclaration.SHADERDEFINE_ROTATIONOVERLIFETIMERANDOMCURVES=Laya.Shader3D.getDefineByName("ROTATIONOVERLIFETIMERANDOMCURVES"),Laya.ShuriKenParticle3DShaderDeclaration.SHADERDEFINE_SIZEOVERLIFETIMECURVE=Laya.Shader3D.getDefineByName("SIZEOVERLIFETIMECURVE"),Laya.ShuriKenParticle3DShaderDeclaration.SHADERDEFINE_SIZEOVERLIFETIMECURVESEPERATE=Laya.Shader3D.getDefineByName("SIZEOVERLIFETIMECURVESEPERATE"),Laya.ShuriKenParticle3DShaderDeclaration.SHADERDEFINE_SIZEOVERLIFETIMERANDOMCURVES=Laya.Shader3D.getDefineByName("SIZEOVERLIFETIMERANDOMCURVES"),Laya.ShuriKenParticle3DShaderDeclaration.SHADERDEFINE_SIZEOVERLIFETIMERANDOMCURVESSEPERATE=Laya.Shader3D.getDefineByName("SIZEOVERLIFETIMERANDOMCURVESSEPERATE"),Laya.ShuriKenParticle3DShaderDeclaration.SHADERDEFINE_RENDERMODE_MESH=Laya.Shader3D.getDefineByName("RENDERMODE_MESH"),Laya.ShuriKenParticle3DShaderDeclaration.SHADERDEFINE_SHAPE=Laya.Shader3D.getDefineByName("SHAPE")}_getNumber(e){return this._shaderValues.getNumber(e)}_setNumber(e,t){this._shaderValues.setNumber(e,t)}_setColor(e,t){this._shaderValues.setVector(e,t)}_getColor(e){return this._shaderValues.getVector(e)}_setTexture(e,t){this._getTexture(e);this._shaderValues.setTexture(e,t)}_getTexture(e){return this._shaderValues.getTexture(e)}_addShaderDefine(e){this._shaderValues.addDefine(e)}_removeShaderDefine(e){this._shaderValues.removeDefine(e)}}ye.RENDERMODE_OPAQUE=1,ye.RENDERMODE_OPAQUEDOUBLEFACE=2,ye.RENDERMODE_CUTOUT=3,ye.RENDERMODE_CUTOUTDOUBLEFACE=4,ye.RENDERMODE_TRANSPARENT=13,ye.RENDERMODE_TRANSPARENTDOUBLEFACE=14,ye.RENDERMODE_ADDTIVE=15,ye.RENDERMODE_ADDTIVEDOUBLEFACE=16,ye.RENDERMODE_DEPTHREAD_TRANSPARENT=5,ye.RENDERMODE_DEPTHREAD_TRANSPARENTDOUBLEFACE=6,ye.RENDERMODE_DEPTHREAD_ADDTIVE=7,ye.RENDERMODE_DEPTHREAD_ADDTIVEDOUBLEFACE=8,ye.RENDERMODE_NONDEPTH_TRANSPARENT=9,ye.RENDERMODE_NONDEPTH_TRANSPARENTDOUBLEFACE=10,ye.RENDERMODE_NONDEPTH_ADDTIVE=11,ye.RENDERMODE_NONDEPTH_ADDTIVEDOUBLEFACE=12,ye.BENDANGLE=164,ye.BENDDISTANCE=165,ye.isInit=!1;class _e extends ce{constructor(e){super(e),this._isChange=!1,this.poolName="Snow"}onCreate(){Laya.Loader.getRes(this._url)?this.onLoad():Laya.Sprite3D.load(this._url,Laya.Handler.create(this,this.onLoad))}builder(){if(this._haveColo=!1,!this._builder){if(this._colo=null,!this._flagClone){let e=Laya.Loader.getRes(this._url);if(!e)return;this._flagClone=e,this._sceneRoot.setSnowParEffect(e.getChildByName("par_blue"))}this._builder=this._flagClone.clone(),this._builder.transform.position.x=this._offsetX,this._builder.transform.position.y=this._offsetY,this._builder.transform.position.z=this._startZ,this._builder.transform.position=this._builder.transform.position,this._glowYe=this._builder.getChildByName("glow_blue"),this._builder.name=this._builderName,this._sceneRoot.obstacleLayer.addChild(this._builder),this._builderMatClone=this._builder.particleRenderer.material.clone(),this._glowYeMatClone=this._glowYe.particleRenderer.material.clone(),this.changeMat(!0),this.playState(!0)}}playState(e){if(this._builder instanceof Laya.ShuriKenParticle3D){e?this._builder.particleSystem.play():this._builder.particleSystem.stop();let t=this._builder.numChildren;for(let i=0;i<t;i++){let t=this._builder[i];t instanceof Laya.ShuriKenParticle3D&&(e?t.particleSystem.play():t.particleSystem.stop())}}}changeMat(e){if(this._isChange!=e)if(this._isChange=e,e){let e=new ye;e.texture=Laya.loader.getRes(this._material_url),e.color=new Laya.Vector4(1,1,1,1),e.cloneMat(this._builderMatClone),this._builder.particleRenderer.material=e;let t=new ye;t.texture=Laya.loader.getRes($.scene_effect+"glow_blue.png"),t.color=new Laya.Vector4(1,1,1,1),t.cloneMat(this._glowYeMatClone),this._glowYe.particleRenderer.material=t}else this._builder.particleRenderer.material=this._builderMatClone.clone(),this._glowYe.particleRenderer.material=this._glowYeMatClone.clone()}setOffset(e,t,i){super.setOffset(e,t,i),this.playState(!0)}updateBlendOffset(e){this._builder&&this._builder.particleRenderer&&this._builder.particleRenderer.sharedMaterial instanceof ye&&this._builder.particleRenderer.sharedMaterial.setBendOffset(e),this._glowYe&&this._glowYe.particleRenderer&&this._glowYe.particleRenderer.sharedMaterial instanceof ye&&this._glowYe.particleRenderer.sharedMaterial.setBendOffset(e)}}_e.poolName="Snow";class Ie extends ce{constructor(e){super(e),this.renderIdx=0,this.poolName="Gold"}onCreate(){Laya.Loader.getRes(this._url)?this.onLoad():Laya.Sprite3D.load(this._url,Laya.Handler.create(this,this.onLoad))}builder(){if(this._haveColo=!1,!this._builder){if(!this._flagClone){let e=Laya.Loader.getRes(this._url);if(!e)return;this._flagClone=e}this._colo=null,this._builder=this._flagClone.clone(),this._builderMat=new ye,this._builderMat.texture=Laya.loader.getRes(this._material_url),this._builderMat.cloneMat(this._builder.particleRenderer.material),this._builder.particleRenderer.material=this._builderMat,this._glowYe=this._builder.getChildByName("glow_ye"),this._glowYeMat=new ye,this._glowYeMat.texture=Laya.loader.getRes($.scene_effect+"guangyun001.png"),this._glowYeMat.cloneMat(this._glowYe.particleRenderer.material),this._glowYe.particleRenderer.material=this._glowYeMat,this._builder.name=this._builderName,this._builder.transform.position.x=this._offsetX,this._builder.transform.position.y=this._offsetY,this._builder.transform.position.z=this._startZ,this._builder.transform.position=this._builder.transform.position,this._sceneRoot.obstacleLayer.addChild(this._builder),this.playState(!0)}}playState(e){if(this._builder instanceof Laya.ShuriKenParticle3D){e?this._builder.particleSystem.play():this._builder.particleSystem.stop();let t=this.renderIdx;this._builderMat.renderQueue=t,this._builder.particleRenderer.material=this._builderMat,this._glowYeMat.renderQueue=t,this._glowYe.particleRenderer.material=this._glowYeMat;let i=this._builder.numChildren;for(let t=0;t<i;t++){let i=this._builder[t];i instanceof Laya.ShuriKenParticle3D&&(e?i.particleSystem.play():i.particleSystem.stop())}}}setOffset(e,t,i){super.setOffset(e,t,i),this.playState(!0),this._builder&&(this._builder.removeSelf(),this._sceneRoot.obstacleLayer.addChild(this._builder))}needRemove(){return this._sceneRoot.camera.transform.position.z-this._builder.transform.position.z>10}updateBlendOffset(e){this._builder&&this._builder.particleRenderer&&this._builder.particleRenderer.sharedMaterial instanceof ye&&this._builder.particleRenderer.sharedMaterial.setBendOffset(e),this._glowYe&&this._glowYe.particleRenderer&&this._glowYe.particleRenderer.sharedMaterial instanceof ye&&this._glowYe.particleRenderer.sharedMaterial.setBendOffset(e)}}Ie.poolName="Gold";class ve{constructor(e,t){this._lenghtOfRoad=0,this._obstacleList=new Array,this._builderList=new Array,this._createCount=0,this._bigJumpCount=0,this._preObstacle=0,this.accelerateLenght=0,this.obstacleLenght=0,this.obstacleLenght1=0,this._curRandIdx=-1,this._goldRenderIdx=5e3,this._preObstacles=[],this.nextCreateBuilderZ1=0,this._scene=e,this._app=t}reset(e,t){this._lenghtOfRoad=0,this._preObstacle=0,this.nextCreateBuilderZ1=0,this._createCount=0,this.obstacleLenght=0,this.accelerateLenght=0,this._bigJumpCount=0,this._curRandIdx=-1,this.clear(),this.addRoad(e,t)}addRoad(e,t){let i=de.malloc(le,[this._scene],[this._scene]);i.setOffset(0,0,this._lenghtOfRoad);let n=this._app.isInNight?$.night_model+"nightroad.jpg":$.scene_model+"ground_snow.jpg";i.init($.scpath+"Assets/model/SceneElement/round_snow-round_snow.lm",n),i.setAlbedoColor(e),this._obstacleList.push(i),this._lenghtOfRoad+=64;let a=this.nextCreateBuilderZ1;this.nextCreateBuilderZ1+=this.addBuilder(this.nextCreateBuilderZ1,t),this._app.sceneRoot.treeObj&&(this.addTree(3.76,.19,-16.11+a),this.addTree(-3.831959,.07,9.48+a)),this._app.isInNight?(this.addAdver(-3.28,.48,-17.46+a,!0),this.addAdver(3.07,.48,-17.46+a,!1),this.addAdver(-3.28,.48,13.2+a,!0),this.addAdver(3.07,.48,13.2+a,!1)):this.addAdver(1,.48,-17.46+a,!1)}addAccelerate(){this.accelerateLenght-this._scene.camera.transform.position.z<10&&(this.accelerateLenght+=4+Math.floor(3*Math.random()),this.jiasu(Math.floor(5*Math.random()),0,this.accelerateLenght))}addObstacle(){this.obstacleLenght-this._scene.camera.transform.position.z<100&&this._addObstacle()}_addObstacle(e=!1){this._createCount++;let t=0,i=J.ObstacleRandTemp[1][1],n=this._app.sceneRoot.score;this._bigJumpCount>=J.MAX_BIG_JUMP&&n<i&&(n=i);let a,o=J.ObstacleRandTemp.length-1;for(let e=o;e>=0;e--){if(!(a=J.ObstacleRandTemp[e]))continue;if(n>=parseInt(a[1])){t=e;break}}if(t=t>o?o:t,a=J.ObstacleRandTemp[t],this._curRandIdx!=t){this._curRandIdx=t;let e=a[3];this._app.sceneRoot.updateDstAngleData(e[0],e[1])}this._goldRenderIdx=5e3;let r=a[2],s=r.length/2,l=0;for(let e=0;e<s;e++){let t=r[2*e]-1;if(t=t<0?0:t,r[2*e+1]<Q.randomRange(0,1e3)){this.obstacleLenght+=.1+.1*this._app.sceneRoot.mainPlayer.playerScript.speedRate;continue}if(0==t){if(this._bigJumpCount>=J.MAX_BIG_JUMP)continue;this._bigJumpCount++,this._bigJumpCount>=J.MAX_BIG_JUMP&&(l=10)}let i=J.ObstacleSetTemp[t];if(this._preObstacle>0&&this._preObstacle==i[2]){e=--e<0?0:e;continue}this._preObstacle=i[2];let n=i[1],o=n.length,s=this.obstacleLenght;for(let e=0;e<o;e++){let t=n[e];if(t&&!(t.length<4))if(8==t[0]){if(this._bigJumpCount<J.MAX_BIG_JUMP)continue;this.jiasu(Math.floor(5*Math.random()),0,this.obstacleLenght),this.obstacleLenght+=Q.randomRange(7,10)}else this.setObstacle(t,s,!1,a[4])}}l&&(this.obstacleLenght+=l)}setObstacle(e,t,i,n){if(!e||!e.length)return;let a=e[0],o=e[1],r=e[2],s=e[3]+t;if(!a)return;let l=J.ObstacleTypeTemp[a-1];if(!l)return void console.log("没有配置此障碍物");let d,h,c,p=n[0],m=n[1],u=l[2][0],g=l[2][1],f=l[2][2],y=l[3],_="";if(10==a)d=de.malloc(ge,[this._scene],[this._scene]),h=$.scpath+l[5],c=l[6];else if(4==a)d=de.malloc(_e,[this._scene],[this._scene]),h=$.scpath+l[5],c=$.obstacle_model+l[6];else if(12==a)(d=de.malloc(Ie,[this._scene],[this._scene])).renderIdx=this._goldRenderIdx,this._goldRenderIdx--,this._goldRenderIdx=this._goldRenderIdx<0?0:this._goldRenderIdx,h=$.scpath+l[5],c=$.obstacle_model+l[6],s=this.obstacleLenght,p=m=1;else{d=de.malloc(ce,[this._scene],[this._scene]),h=$.scpath+l[5],c=$.obstacle_model+l[6];let e=l[7];if(this._app.isInNight&&e.length){h=$.scpath+e,c=$.obstacle_model+l[8];let t=l[9];t&&t.length&&(_=$.obstacle_model+t)}}d.init(h,c,_),d.setSize(u,g,f),d.setBuilderName(y),d.setOffset(o,r,s),d.obstacleWidth=u/2,d.allowMove=i,d.allowRoate=1==l[4],this._obstacleList.push(d);let I=0;7==a||!n||n.length<2?I=5*f+4*(J.SPEED_BASE-.006)/.006:6==a?I=f*Q.randomRange(p,m)+5*(J.SPEED_BASE-.006)/.006:11==a||(I=2*f+Q.randomRange(p,m)),this.obstacleLenght+=I}preCreateObstacle(e){let t=J.ObstacleTypeTemp[e-1];if(!t)return void console.log("没有配置此障碍物");let i,n,a,o=t[2][0],r=t[2][1],s=t[2][2],l=t[3],d="";if(10==e)i=de.malloc(ge,[this._scene],[this._scene]),n=$.scpath+t[5],a=t[6];else if(4==e)i=de.malloc(_e,[this._scene],[this._scene]),n=$.scpath+t[5],a=t[6];else{if(8==e){i=de.malloc(pe,[this._scene],[this._scene]),n=$.scpath+t[5],a=$.obstacle_model+t[6];let e=t[7];return this._app.isInNight&&e.length&&(n=$.scpath+e,a=$.obstacle_model+t[8]),i.setOffset(-100,0,0),void this._preObstacles.push(i)}{i=de.malloc(ce,[this._scene],[this._scene]),n=$.scpath+t[5],a=$.obstacle_model+t[6];let e=t[7];this._app.isInNight&&e.length&&(n=$.scpath+e,a=$.obstacle_model+t[8],t[9]&&t[9].length&&(d=$.obstacle_model+t[9]))}}i.init(n,a,d),i.setSize(o,r,s),i.setBuilderName(l),i.setOffset(-100,0,0),i.obstacleWidth=o/2,i.allowMove=!1,i.allowRoate=1==t[4],this._preObstacles.push(i)}jiasu(e,t,i){let n=de.malloc(pe,[this._scene],[this._scene]);n.setOffset(.254*e-.508,0,i);let a=this._app.isInNight?"accelerate_night.lh":"accelerate.lh",o=this._app.isInNight?$.night_model+"platform_smallnight.jpg":$.scene_model+"subastanceall.jpg";n.init($.scpath+a,o),this._obstacleList.push(n)}addBuilder(e,t,i=!1){let n=0,a=de.malloc(me,[this._scene],[this._scene]);a.setOffset(0,0,e);let o=this._app.isInNight?$.night_model+"village.jpg":$.scene_model+"snow_hill.jpg",r=this._app.isInNight?$.night_model+"snow_hill-village.lm":$.obstacle_model+"model/SceneElement/snow_hill-snow_hill.lm";return a.init(r,o),a.setAlbedoColor(t),this._builderList.push(a),n+=64,64}addTree(e,t,i){let n=de.malloc(ue,[this._scene],[this._scene]);n.setOffset(e,t,i),n.init($.obstacle_model+"model/SceneElement/tree_snow01-tree_snow01.lm",$.scene_model+"subastanceall.jpg"),this._builderList.push(n)}addAdver(e,t,i,n){let a=de.malloc(fe,[this._scene],[this._scene]);a.needMirror=n,a.setOffset(e,t,i);let o=this._app.isInNight?$.night_model+"Advertisement.jpg":$.scene_model+"ggpai01.jpg",r=this._app.isInNight?$.night_model+"adver-Advertisement.lm":$.obstacle_model+"model/SceneElement/snow_hill_s-snow_hill_s.lm";a.init(r,o),this._builderList.push(a)}init(e,t){this.addRoad(e,t)}update(e,t,i,n){if(this._lenghtOfRoad<=0)return;this._lenghtOfRoad-this._scene.camera.transform.position.z<200&&this.addRoad(i,n),this.addObstacle();let a=this._obstacleList.length;for(let i=0;i<a;i++){let n=this._obstacleList[i];n&&(n.update(e)?(de.free(n),this._obstacleList.splice(i,1),i--):n.updateBlendOffset(t))}let o=this._builderList.length;for(let i=0;i<o;i++){let n=this._builderList[i];n&&(n.update(e)?(de.free(n),this._builderList.splice(i,1),i--):n.updateBlendOffset(t))}let r=this._preObstacles.length;for(let e=0;e<r;e++){let t=this._preObstacles[e];t&&t.preCanFree()&&(de.free(t),this._preObstacles.splice(e,1),--e<0&&(e=0))}}checkCanMove(e){let t=[],i=this._obstacleList.length;for(let n=0;n<i;n++){let i=this._obstacleList[n];if(i instanceof ge||i instanceof ce&&"Obstacle"==i.bulideName){if(!i.position)continue;let n=i.position.z-e.z;n>Math.random()+.4&&n<Q.randomRange(2,4)&&t.push(i)}}let n=t.length;for(let i=0;i<n;i++){let n=t[i],a=n.position.x-e.x,o=.05+n.obstacleWidth,r=Math.abs(a);if(r<o&&Q.randomRange(0,1e3)<800)return a<0?1-(o-r):o-r+1}return 0}clear(){for(let e=0;e<this._obstacleList.length;e++)de.free(this._obstacleList[e]);this._obstacleList.length=0;for(let e=0;e<this._builderList.length;e++)de.free(this._builderList[e]);this._builderList.length=0}}class we extends Laya.TrailMaterial{constructor(){super(),this.initShader1(),this.setShaderName("TrailExp"),this.setBendDistance(50)}cloneTo(e){super.cloneTo(e);var t=e;this.color&&this.color.cloneTo(t.color)}getBendOffset(){return this._getColor(we.BENDANGLE)}setBendOffset(e){this._setColor(we.BENDANGLE,e)}setBendDistance(e){this._setNumber(we.BENDDISTANCE,e)}cloneMat(e){if(e)for(let t in this)if("_shader"!=t)if("_shaderValues"==t)for(let i in e[t]._data)this[t]._data[i]=e[t]._data[i];else this[t]=e[t]}initShader1(){if(we.isInit)return;we.isInit=!0,we.BENDANGLE=Laya.Shader3D.propertyNameToID("_QOffset"),we.BENDDISTANCE=Laya.Shader3D.propertyNameToID("_Dist");let e={a_Position:Laya.VertexTrail.TRAIL_POSITION0,a_OffsetVector:Laya.VertexTrail.TRAIL_OFFSETVECTOR,a_Texcoord0X:Laya.VertexTrail.TRAIL_TEXTURECOORDINATE0X,a_Texcoord0Y:Laya.VertexTrail.TRAIL_TEXTURECOORDINATE0Y,a_BirthTime:Laya.VertexTrail.TRAIL_TIME0,a_Color:Laya.VertexTrail.TRAIL_COLOR},t={u_MvpMatrix:Laya.Shader3D.PERIOD_SPRITE,u_View:Laya.Shader3D.PERIOD_CAMERA,u_Projection:Laya.Shader3D.PERIOD_CAMERA,u_TilingOffset:Laya.Shader3D.PERIOD_MATERIAL,u_MainTexture:Laya.Shader3D.PERIOD_MATERIAL,u_MainColor:Laya.Shader3D.PERIOD_MATERIAL,u_CurTime:Laya.Shader3D.PERIOD_SPRITE,u_LifeTime:Laya.Shader3D.PERIOD_SPRITE,u_WidthCurve:Laya.Shader3D.PERIOD_SPRITE,u_WidthCurveKeyLength:Laya.Shader3D.PERIOD_SPRITE,u_GradientColorkey:Laya.Shader3D.PERIOD_SPRITE,u_GradientAlphakey:Laya.Shader3D.PERIOD_SPRITE,_QOffset:Laya.Shader3D.PERIOD_MATERIAL,_Dist:Laya.Shader3D.PERIOD_MATERIAL},i={s_Cull:Laya.Shader3D.RENDER_STATE_CULL,s_Blend:Laya.Shader3D.RENDER_STATE_BLEND,s_BlendSrc:Laya.Shader3D.RENDER_STATE_BLEND_SRC,s_BlendDst:Laya.Shader3D.RENDER_STATE_BLEND_DST,s_DepthTest:Laya.Shader3D.RENDER_STATE_DEPTH_TEST,s_DepthWrite:Laya.Shader3D.RENDER_STATE_DEPTH_WRITE},n=Laya.Shader3D.add("TrailExp"),a=new Laya.SubShader(e,t);n.addSubShader(a),a.addShaderPass('#include "Lighting.glsl";\r\n\r\nattribute vec3 a_Position;\r\nattribute vec3 a_OffsetVector;\r\nattribute vec4 a_Color;\r\nattribute float a_Texcoord0X;\r\nattribute float a_Texcoord0Y;\r\nattribute float a_BirthTime;\r\n\r\nuniform mat4 u_View;\r\nuniform mat4 u_Projection;\r\n\r\nuniform vec4 u_TilingOffset;\r\n\r\nuniform vec4 _QOffset\r\n\r\n;uniform float _Dist;\r\n\r\nuniform float u_CurTime;\r\nuniform float u_LifeTime;\r\nuniform vec4 u_WidthCurve[10];\r\nuniform int u_WidthCurveKeyLength;\r\n\r\nvarying vec2 v_Texcoord0;\r\nvarying vec4 v_Color;\r\n\r\nfloat hermiteInterpolate(float t, float outTangent, float inTangent, float duration, float value1, float value2)\r\n{\r\n\tfloat t2 = t * t;\r\n\tfloat t3 = t2 * t;\r\n\tfloat a = 2.0 * t3 - 3.0 * t2 + 1.0;\r\n\tfloat b = t3 - 2.0 * t2 + t;\r\n\tfloat c = t3 - t2;\r\n\tfloat d = -2.0 * t3 + 3.0 * t2;\r\n\treturn a * value1 + b * outTangent * duration + c * inTangent * duration + d * value2;\r\n}\r\n\r\nfloat getCurWidth(in float normalizeTime)\r\n{\r\n\tfloat width;\r\n\tif(normalizeTime == 0.0){\r\n\t\twidth=u_WidthCurve[0].w;\r\n\t}\r\n\telse if(normalizeTime >= 1.0){\r\n\t\twidth=u_WidthCurve[u_WidthCurveKeyLength - 1].w;\r\n\t}\r\n\telse{\r\n\t\tfor(int i = 0; i < 10; i ++ )\r\n\t\t{\r\n\t\t\tif(normalizeTime == u_WidthCurve[i].x){\r\n\t\t\t\twidth=u_WidthCurve[i].w;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tvec4 lastFrame = u_WidthCurve[i];\r\n\t\t\tvec4 nextFrame = u_WidthCurve[i + 1];\r\n\t\t\tif(normalizeTime > lastFrame.x && normalizeTime < nextFrame.x)\r\n\t\t\t{\r\n\t\t\t\tfloat duration = nextFrame.x - lastFrame.x;\r\n\t\t\t\tfloat t = (normalizeTime - lastFrame.x) / duration;\r\n\t\t\t\tfloat outTangent = lastFrame.z;\r\n\t\t\t\tfloat inTangent = nextFrame.y;\r\n\t\t\t\tfloat value1 = lastFrame.w;\r\n\t\t\t\tfloat value2 = nextFrame.w;\r\n\t\t\t\twidth=hermiteInterpolate(t, outTangent, inTangent, duration, value1, value2);\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\treturn width;\r\n}\t\r\n\r\nvoid main()\r\n{\r\n\tfloat normalizeTime = (u_CurTime - a_BirthTime) / u_LifeTime;\r\n\t\r\n\t#ifdef TILINGOFFSET\r\n\t\tv_Texcoord0 = vec2(a_Texcoord0X, 1.0 - a_Texcoord0Y) * u_TilingOffset.xy + u_TilingOffset.zw;\r\n\t#else\r\n\t\tv_Texcoord0 = vec2(a_Texcoord0X, a_Texcoord0Y);\r\n\t#endif\r\n\t\r\n\tv_Color = a_Color;\r\n\t\r\n\thighp vec4 vPos = u_Projection * u_View * vec4(a_Position + a_OffsetVector * getCurWidth(normalizeTime),1.0);\r\n\tfloat zOff = vPos.z / _Dist;\r\n\tvPos += _QOffset * zOff * zOff;\r\n\tgl_Position =vPos  ;\r\n\tgl_Position=remapGLPositionZ(gl_Position);\r\n}\r\n',"#ifdef GL_FRAGMENT_PRECISION_HIGH\r\n\tprecision highp float;\r\n#else\r\n\tprecision mediump float;\r\n#endif\r\n\r\nuniform sampler2D u_MainTexture;\r\nuniform vec4 u_MainColor;\r\n\r\nvarying vec2 v_Texcoord0;\r\nvarying vec4 v_Color;\r\n\r\nvoid main()\r\n{\r\n\tvec4 color = 2.0 * u_MainColor * v_Color;\r\n\t#ifdef MAINTEXTURE\r\n\t\tvec4 mainTextureColor = texture2D(u_MainTexture, v_Texcoord0);\r\n\t\tcolor *= mainTextureColor;\r\n\t#endif\r\n\tgl_FragColor = color;\r\n}\r\n\r\n     ",i),we.SHADERDEFINE_DIFFUSEMAP=Laya.Shader3D.getDefineByName("DIFFUSEMAP"),we.SHADERDEFINE_NORMALMAP=Laya.Shader3D.getDefineByName("NORMALMAP"),we.SHADERDEFINE_SPECULARMAP=Laya.Shader3D.getDefineByName("SPECULARMAP"),we.SHADERDEFINE_REFLECTMAP=Laya.Shader3D.getDefineByName("REFLECTMAP"),we.SHADERDEFINE_TILINGOFFSET=Laya.Shader3D.getDefineByName("TILINGOFFSET"),we.SHADERDEFINE_ADDTIVEFOG=Laya.Shader3D.getDefineByName("ADDTIVEFOG")}_getNumber(e){return this._shaderValues.getNumber(e)}_setNumber(e,t){this._shaderValues.setNumber(e,t)}_setColor(e,t){this._shaderValues.setVector(e,t)}_getColor(e){return this._shaderValues.getVector(e)}_setTexture(e,t){this._shaderValues.getTexture(e);this._shaderValues.setTexture(e,t)}_getTexture(e){return this._shaderValues.getTexture(e)}_addShaderDefine(e){this._shaderValues.addDefine(e)}_removeShaderDefine(e){this._shaderValues.removeDefine(e)}}we.BENDANGLE=164,we.BENDDISTANCE=165,we.isInit=!1;class Se extends ee{constructor(){super(),this._changeTime=0,this._delayTime=0,this._delayTime1=0}onStartGame(){}onEndGame(){}initialize(e){super.initialize(e,!1),this.player=e}init(e,t,i){t.transform.position.x=e.sceneRoot.playerFirstPos.x,t.transform.position.y=e.sceneRoot.playerFirstPos.y,t.transform.position.z=e.sceneRoot.playerFirstPos.z,t.transform.position=t.transform.position,super.init(e,t,i)}randStartPos(){this.isJumping||(this.isJumping=!1,this._path.length=0,this.isDie=!1,this.playerBase.skinnedMeshRenderer.enable=!0,this._curAction=0,this.running=!0,this.isJumping||this._isFirstRun||(this.diff_z=this._app.sceneRoot.mainPlayer.playerScript.diff_z-5,this._speed_z=this.baseSpeed,this.addSpeed(Q.randomRange(200,600)),this.playerMove(Q.randomRange(-2,2))))}firstHuaRunEnd(){super.firstHuaRunEnd(),this.startTransfo=!0,this.playerMove(Q.randomRange(-2,2))}changeBlionExp(e){e?this.playerBase.skinnedMeshRenderer.sharedMaterial instanceof re||(this._expMat||(this._expMat=new re,this._expMat.cloneMat(this.playerBase.skinnedMeshRenderer.material),this._expMat.albedoColor=new Laya.Vector4(1.05,1.1,1.1,1),this._expMat.albedoIntensity=1.25),this._expMat.albedoTexture=this._oldSkinMat.albedoTexture,this.playerBase.skinnedMeshRenderer.material=this._expMat,this.showTrail(!1),this.showHandTrail(!1),this.showSnowPar(!1)):this.playerBase.skinnedMeshRenderer.sharedMaterial instanceof re&&(this.playerBase.skinnedMeshRenderer.material=this._oldSkinMat.clone())}showTrail(e){e&&this.playerBase.skinnedMeshRenderer.sharedMaterial instanceof re||super.showTrail(e)}showHandTrail(e){e&&this.playerBase.skinnedMeshRenderer.sharedMaterial instanceof re||super.showHandTrail(e)}showSnowPar(e){e&&this.playerBase.skinnedMeshRenderer.sharedMaterial instanceof re||super.showSnowPar(e)}Update(e,t){if(super.Update(e,t),this.running&&this.startTransfo){this.autoMove();let e=this.diff_z-this._app.sceneRoot.mainPlayer.playerScript.diff_z;if(this.changeBlionExp(e>3&&(Math.abs(t.y)>1||Math.abs(t.x)>8)||e>0&&Math.abs(t.y)>15||e>5&&Math.abs(t.y)>2),this.playerBase.skinnedMeshRenderer.sharedMaterial instanceof re&&this.playerBase.skinnedMeshRenderer.sharedMaterial.setBendOffset(t),this._trail&&this._trail.trailRenderer.sharedMaterial instanceof we)this._trail.trailRenderer.sharedMaterial.setBendOffset(t);else if(this._snowTaril){let e=this._snowTaril.getChildByName("snowtaril");e&&e.trailRenderer.sharedMaterial instanceof we&&e.trailRenderer.sharedMaterial.setBendOffset(t)}if(this._trailLeft&&this._trailLeft.trailRenderer.sharedMaterial instanceof we)this._trailLeft.trailRenderer.sharedMaterial.setBendOffset(t);else if(this._snowTarilL){let e=this._snowTarilL.getChildByName("snowtarilL");e&&e.trailRenderer.sharedMaterial instanceof we&&e.trailRenderer.sharedMaterial.setBendOffset(t)}if(this._trailRight&&this._trailRight.trailRenderer.sharedMaterial instanceof we)this._trailRight.trailRenderer.sharedMaterial.setBendOffset(t);else if(this._snowTarilR){let e=this._snowTarilR.getChildByName("snowtarilR");e&&e.trailRenderer.sharedMaterial instanceof we&&e.trailRenderer.sharedMaterial.setBendOffset(t)}if(this._trailHandLeft&&this._trailHandLeft.trailRenderer.sharedMaterial instanceof we)this._trailHandLeft.trailRenderer.sharedMaterial.setBendOffset(t);else if(this._snowTarilHandL){let e=this._snowTarilHandL.getChildByName("snowtarilHandL");e&&e.trailRenderer.sharedMaterial instanceof we&&e.trailRenderer.sharedMaterial.setBendOffset(t)}if(this._trailHandRight&&this._trailHandRight.trailRenderer.sharedMaterial instanceof we)this._trailHandRight.trailRenderer.sharedMaterial.setBendOffset(t);else if(this._snowTarilHandR){let e=this._snowTarilHandR.getChildByName("snowtarilHandR");e&&e.trailRenderer.sharedMaterial instanceof we&&e.trailRenderer.sharedMaterial.setBendOffset(t)}}else(this._delayTime>0&&this._delayTime<=Laya.timer.currTimer||0==this._delayTime&&-88==this.diff_z&&this._app.sceneRoot.mainPlayer.playerScript.running&&this._app.sceneRoot.mainPlayer.playerScript.diff_z>=-75)&&(this.running=!0,this._delayTime=0)}autoMove(){let e=this._app.sceneRoot.roadMgr.checkCanMove(this.player.transform.position);0==e?this.diff_z>=600&&!this.isJumping&&Q.randomRange(0,1e3)<500&&this._changeTime<Laya.timer.currTimer&&(this._changeTime=Laya.timer.currTimer+Q.randomRange(3e3,6e3),this.playerMove(Q.randomRange(-2,2))):this.playerMove(e);let t=this.diff_z-this._app.sceneRoot.mainPlayer.playerScript.diff_z;!this.isJumping&&t<0&&Q.randomRange(0,1e3)<400&&this.addSpeed(Q.randomRange(200,600))}reset(e=0,t=0){super.reset(),this.offsetplayPos.x=e,this.player.transform.position=this.offsetplayPos,this._delayTime1=t||0,this._delayTime=this._delayTime1?Laya.timer.currTimer+this._delayTime1:0}changeSkinTrail(){this.randomSkin(),this.updateTuoWei(Q.randomRange(12,17))}randomSkin(){let e=this._app.sceneRoot.mainPlayer.playerScript.curSkinId-1,t=this._app.sceneRoot.mainPlayer.playerScript.curSkinId+(e<0?2:1);e=e<0?0:e,t>9&&(t=9,e--),this.updateSkin(Q.randomRange(e,t))}playDie(){super.playDie(),Laya.timer.clear(this,this.runAgain),this._app.sceneRoot.mainPlayer.playerScript.running&&Laya.timer.once(2e3,this,this.runAgain)}runAgain(){this.randStartPos()}destory(){super.destory()}}class Le extends Z{constructor(){super()}init(e){super.init(e)}updateOwner(e,t){super.updateOwner(e,t);let i=this.owner.getComponent(Se);this._robotScript&&i?this._robotScript=i:this._robotScript=this.owner.addComponent(Se);for(let e in t)this._robotScript[e]=t[e]}get robotScript(){return this._robotScript||(this._robotScript=this.owner.addComponent(Se)),this._robotScript}destroy(){this._robotScript&&(this.owner.destroyed,this._robotScript.destory(),this._robotScript=null),super.destroy()}}class Ee{constructor(e=0,t=255,i=1){this._r=0,this._g=0,this._b=0,this._min=0,this._max=255,this._step=1,this.__add=!0,this.__index=0,this._min=e,this._max=t,this._step=i,this._r=e,this._g=t,this._b=e,this.__index=0,this.__add=!0}init(e,t,i){this._r=e,this._g=t,this._b=i}get r(){return this._r}get g(){return this._g}get b(){return this._b}updateColor(){let e=this.__add?this._step:-this._step;switch(this.__index){case 0:this._r=this.checkValue(this._r+e);break;case 1:this._g=this.checkValue(this._g+e);break;case 2:this._b=this.checkValue(this._b+e)}}checkValue(e){return e>this._min&&e<this._max?e:(e<this._min&&(e=this._min),e>this._max&&(e=this._max),this.__index=(this.__index+1)%3,this.__add=!this.__add,e)}}!function(e){e[e.AD_VIDEO_COIN=0]="AD_VIDEO_COIN"}(D||(D={})),function(e){e[e.AD_BANNER_BOX=0]="AD_BANNER_BOX"}(V||(V={})),function(e){e[e.AD_BOX_DEFAULT=0]="AD_BOX_DEFAULT"}(N||(N={})),function(e){e[e.AD_INTERSTITIAL_COMMON=0]="AD_INTERSTITIAL_COMMON"}(k||(k={})),function(e){e[e.AD_CUSTOM_PIFU=7]="AD_CUSTOM_PIFU"}(P||(P={}));class Ae{}Ae.MAIN_RIGHT_AD=1,Ae.PIFU_LEFT_AD=2,Ae.BATTLE_LEFT_AD=3,Ae.RESULTS_MIDDLE_AD=4,Ae.RESULTS_RIGHT_AD=5,function(e){e[e.AD_GameBanner_LEVEL=0]="AD_GameBanner_LEVEL"}(B||(B={})),function(e){e[e.AD_GamePortal_1=0]="AD_GamePortal_1"}(G||(G={})),function(e){e[e.INDEX_RIGHT=0]="INDEX_RIGHT",e[e.BATTLE=1]="BATTLE",e[e.TRY_USE=2]="TRY_USE",e[e.REWARD=3]="REWARD",e[e.RELIFE=4]="RELIFE",e[e.SHOP=5]="SHOP",e[e.SHOP_ITEM=6]="SHOP_ITEM"}(F||(F={}));class xe{}xe.MAIN_LEFT_AD=1,xe.MAIN_RIGHT_AD=2,xe.RESULT_PASS_AD=3,xe.RESULT_FRIEND_AD=4,xe.RESULT_HOT_AD=5,xe.BOX_AD=6,xe.SHIP_OTHER=999;class Te{}Te.MAIN_TOP_AD=1,Te.BATTLE_LEFT_AD=2,Te.MAIN_RIGHT_AD=3;class be{}be.SKIP_OTHER=0,be.MAIN_LEFT_AD=1,be.MAIN_RIGHT_AD=2,be.MAIN_ICON_AD=3,be.BATTLE_AD=4,be.RESULT_TOP_AD=5,be.RESULT_RIGHT_AD=6,function(e){e[e.Failed=0]="Failed",e[e.Normal=1]="Normal",e[e.Jump=2]="Jump"}(z||(z={})),function(e){e[e.AD_GAME_PORTAL_1=0]="AD_GAME_PORTAL_1",e[e.AD_GAME_PORTAL_HENG=1]="AD_GAME_PORTAL_HENG",e[e.AD_GAME_NATIVE=2]="AD_GAME_NATIVE",e[e.AD_GAME_SINGLE_NATIVE=3]="AD_GAME_SINGLE_NATIVE"}(U||(U={})),function(e){e[e.AD_CUSTOM_MAIN=0]="AD_CUSTOM_MAIN",e[e.AD_CUSTOM_MAIN_SINGLE_LEFT=1]="AD_CUSTOM_MAIN_SINGLE_LEFT",e[e.AD_CUSTOM_SINGLE_RIFHT2=2]="AD_CUSTOM_SINGLE_RIFHT2",e[e.AD_CUSTOM_SINGLE_LEFT=3]="AD_CUSTOM_SINGLE_LEFT",e[e.AD_CUSTOM_TOP=4]="AD_CUSTOM_TOP",e[e.AD_CUSTOM_MAIN_RIGHT=5]="AD_CUSTOM_MAIN_RIGHT",e[e.AD_CUSTOM_MAIN_MATRIX=6]="AD_CUSTOM_MAIN_MATRIX"}(H||(H={})),function(e){e[e.IMG=0]="IMG",e[e.ICON=1]="ICON"}(Y||(Y={}));class Re{constructor(){this.mBridge=null,this.mIsRVideoUseAble=!1,this.mIsBannerUseAble=!1,this.mIsNativeUseAble=!1,this.mIsInterstitialUseAble=!1,this.onVideoSuccess=null,this.onVideoFail=null,this.onVideoLoadedFail=null,Laya.Render.isConchApp&&(Laya.Browser.onAndroid?this.mBridge=window.PlatformClass.createClass("com.base.SDKHelper"):Laya.Browser.onIOS,Laya.Browser.window.callJs=(e=>{Re.I.callJs(e)})),this.onVideoSuccess=null,this.onVideoFail=null,this.onVideoLoadedFail=null}static get I(){return h.get(Re)}callNative(e){if(!Laya.Render.isConchApp)return;let t=JSON.stringify(e);Laya.Browser.onAndroid?this.mBridge.call("callAndroid",t):Laya.Browser.onIOS&&this.mBridge.call("calliOS:",t)}callJs(e){let t=JSON.parse(e);switch(t.action){case Re.ACTION_ADS:switch((t=t.data).type){case Re.ADS_BANNER:switch(t.event){case"loaded":this.mIsBannerUseAble=!0}break;case Re.ADS_INTERSTITIAL:switch(t.event){case"loaded":this.mIsInterstitialUseAble=!0}break;case Re.ADS_NATIVE:switch(t.event){case"loaded":this.mIsNativeUseAble=!0}break;case Re.ADS_REWARDVIDEO:switch(t.event){case"error":this.mIsRVideoUseAble=!1;break;case Re.ADS_EVENT_LOADED:this.mIsRVideoUseAble=!0;break;case Re.ADS_EVENT_LOADED_FAILED:this.mIsRVideoUseAble=!1,this.onVideoLoadedFail&&this.onVideoLoadedFail();break;case Re.ADS_EVENT_FINISH:1==t.complete?this.onVideoSuccess&&this.onVideoSuccess():this.onVideoFail&&this.onVideoFail()}}}}vibrate(e){this.callNative({action:"system",data:{method:"shake",duration:e}})}log(e){this.callNative({action:"log",data:{msg:e}})}logEvent(e,t){this.callNative({action:"event",data:{event_id:e,msg:t}})}initNative(){this.callNative({action:"init",data:{}})}preloadRewardAD(){this.callNative({action:Re.ACTION_ADS,data:{type:Re.ADS_REWARDVIDEO,event:Re.ADS_EVENT_LOAD}})}isRewardADLoaded(){return this.mIsRVideoUseAble||this.callNative({action:Re.ACTION_ADS,data:{type:Re.ADS_REWARDVIDEO,event:Re.ADS_EVENT_LOADED}}),this.mIsRVideoUseAble}playRewardAD(){this.isRewardADLoaded()&&this.callNative({action:Re.ACTION_ADS,data:{type:Re.ADS_REWARDVIDEO,event:Re.ADS_EVENT_SHOW}})}preloadInterstitialAD(e){this.callNative({action:Re.ACTION_ADS,data:{type:Re.ADS_INTERSTITIAL,event:Re.ADS_EVENT_LOAD}})}isInterstitialADLoaded(){return this.mIsInterstitialUseAble||this.callNative({action:Re.ACTION_ADS,data:{type:Re.ADS_INTERSTITIAL,event:Re.ADS_EVENT_LOADED}}),this.mIsInterstitialUseAble}playInterstitialAD(){this.callNative({action:Re.ACTION_ADS,data:{type:Re.ADS_INTERSTITIAL,event:Re.ADS_EVENT_SHOW}})}isBannerUseAble(){return this.mIsBannerUseAble||this.callNative({action:Re.ACTION_ADS,data:{type:Re.ADS_BANNER,event:Re.ADS_EVENT_LOADED}}),this.mIsBannerUseAble}playBannerAD(e){this.callNative({action:Re.ACTION_ADS,data:{type:Re.ADS_BANNER,event:Re.ADS_EVENT_SHOW}})}removeBannerAD(e){this.callNative({action:Re.ACTION_ADS,data:{type:Re.ADS_BANNER,event:Re.ADS_EVENT_HIDE}})}preloadNativeAD(){this.callNative({action:Re.ACTION_ADS,data:{type:Re.ADS_NATIVE,event:Re.ADS_EVENT_LOAD}})}isNativeADLoaded(){return this.mIsNativeUseAble||this.callNative({action:Re.ACTION_ADS,data:{type:Re.ADS_NATIVE,event:Re.ADS_EVENT_LOADED}}),this.mIsNativeUseAble}playNativeAD(e){this.callNative({action:Re.ACTION_ADS,data:{type:Re.ADS_NATIVE,event:Re.ADS_EVENT_SHOW,click:e}})}}Re.ACTION_ADS="ads",Re.ADS_BANNER="Banner",Re.ADS_INTERSTITIAL="Interstitial",Re.ADS_REWARDVIDEO="RewardVideo",Re.ADS_NATIVE="Native",Re.ADS_EVENT_LOAD="load",Re.ADS_EVENT_LOADED="loaded",Re.ADS_EVENT_LOADED_FAILED="loaded_failed",Re.ADS_EVENT_FINISH="finish",Re.ADS_EVENT_SHOW="show",Re.ADS_EVENT_HIDE="hide";class Me{constructor(){this.initAdvert()}initAdvert(){this.initInterstitialAd(),this.mCloseVideoCallerInterstitial=null,this.mCloseVideoFuncInterstitial=null,this.mShowVideoCallerInterstitial=null,this.mShowVideoFuncInterstitial=null,this.mInterstitialCb=null}initInterstitialAd(){this.mAdInterstitialMap={},Re.I.preloadInterstitialAD(Re.ADS_INTERSTITIAL)}getInterstitialAd(e){return Re.I.isInterstitialADLoaded()}showInterstitialAd(e,t,i,n,a){this.mCloseVideoCallerInterstitial=t,this.mCloseVideoFuncInterstitial=i,this.mShowVideoCallerInterstitial=n,this.mShowVideoFuncInterstitial=a,Re.I.playInterstitialAD()}onCloseVideoInterstitial(e){let t=!1;(e&&e.isEnded||void 0===e)&&(t=!0),this.mCloseVideoCallerInterstitial&&this.mCloseVideoFuncInterstitial&&this.mCloseVideoFuncInterstitial.call(this.mCloseVideoCallerInterstitial,t)}}class Ce{static debug(e,...t){T.I.getConf().logLevel<=u.debug&&console.debug(e,...t)}static log(e,...t){T.I.getConf().logLevel<=u.log&&console.log(e,...t)}static info(e,...t){T.I.getConf().logLevel<=u.info&&console.info(e,...t)}static warn(e,...t){T.I.getConf().logLevel<=u.warn&&console.warn(e,...t)}static error(e,...t){T.I.getConf().logLevel<=u.error&&console.error(e,...t)}}class Oe{constructor(){this.mCount=0,this.mTable={}}get table(){return this.mTable}add(e,t){return this.containsKey(e)?(Ce.error("DictionaryNum Add error,same key already exist:",e),!1):(this.mCount++,this.mTable[e]=t,!0)}remove(e){return!!this.containsKey(e)&&(this.mCount--,delete this.mTable[e],!0)}keys(){let e=new Array;for(let t in this.mTable)e.push(Number(t));return e}containsKey(e){return this.mTable.hasOwnProperty(e.toString())}values(){let e=new Array;for(let t in this.mTable)e.push(this.mTable[t]);return e}containesValue(e){for(let t in this.mTable)if(this.mTable[t]==e)return!0;return!1}get count(){return this.mCount}get(e){return this.mTable[e]}set(e,t){this.mTable[e]=t}clear(){this.mTable={},this.mCount=0}toString(){let e="{";for(let t in this.mTable)e+=`\n\t${t} : ${this.mTable[t]}`;return e+"\n}"}}class De{constructor(){this.dicEvent=new Oe}addEntityListener(e){let t=this.dicEvent.get(e.numberID);null==t&&(t=new r,this.dicEvent.add(e.numberID,t)),t.addEntity(e)}addListener(e,t,i){let n=this.dicEvent.get(e);null==n&&(n=new r,this.dicEvent.add(e,n)),n.add(t,i)}removeListener(e,t,i){let n=this.dicEvent.get(e);null!=n&&n.remove(t,i)}triggerListener(e,t){let i=this.dicEvent.get(e);null!=i&&i.invoke(t)}clearListener(e){let t=this.dicEvent.get(e);null!=t&&t.Dispose(),this.dicEvent.remove(e)}clearAllListener(){for(let e in this.dicEvent.table)this.dicEvent.table[e].Clear();this.dicEvent.clear()}}class Ve{constructor(){this.triggerLock=!1,this.addList=new a,this.removeList=new a,this.triggerList=new a,this.numDispatcher=new De,this.strDispatcher=new s}static get instance(){return Ve.getInstance()}static getInstance(){return null==Ve.mInstance&&(Ve.mInstance=new Ve),Ve.mInstance}addListener(e,t,i){if(this.triggerLock){let n=new o(t,i);return"number"==typeof e?n.numberID=e:"string"==typeof e&&(n.stringID=e),void this.addList.add(n)}"number"==typeof e?this.numDispatcher.addListener(e,t,i):"string"==typeof e&&this.strDispatcher.addListener(e,t,i)}removeListener(e,t,i){if(this.triggerLock){let n=new o(t,i);return"number"==typeof e?n.numberID=e:"string"==typeof e&&(n.stringID=e),void this.removeList.add(n)}"number"==typeof e?this.numDispatcher.removeListener(e,t,i):"string"==typeof e&&this.strDispatcher.removeListener(e,t,i)}triggerListener(e,t){if(this.triggerLock){let i=new o(null,null);return i.args=t,"number"==typeof e?i.numberID=e:"string"==typeof e&&(i.stringID=e),void this.triggerList.add(i)}this.triggerLock=!0,"number"==typeof e?this.numDispatcher.triggerListener(e,t):"string"==typeof e&&this.strDispatcher.triggerListener(e,t),this.triggerLock=!1,this.afterTrigger()}afterTrigger(){for(let e=0;e<this.removeList.count;e++){let t=this.removeList.get(e);t.stringID?this.strDispatcher.removeListener(t.stringID,t.eCaller,t.eAction):this.numDispatcher.removeListener(t.numberID,t.eCaller,t.eAction)}this.removeList.clear();for(let e=0;e<this.addList.count;e++){let t=this.addList.get(e);t.stringID?this.strDispatcher.addEntityListener(t):this.numDispatcher.addEntityListener(t)}this.addList.clear(),this.triggerLock=!0;let e=this.triggerList.count;for(let t=0;t<e;t++){let e=this.triggerList.get(t);e.stringID?this.strDispatcher.triggerListener(e.stringID,e.args):this.numDispatcher.triggerListener(e.numberID,e.args)}this.triggerList.removeFrom(0,e),this.triggerLock=!1,(this.triggerList.count>0||this.removeList.count>0||this.addList.count>0)&&this.afterTrigger()}clearListener(e){"number"==typeof e?this.numDispatcher.clearListener(e):"string"==typeof e&&this.strDispatcher.clearListener(e)}}class Ne{constructor(){Laya.Browser.onMiniGame?"object"==typeof tt?this.mSdk=window.tt:this.mSdk=window.wx:Laya.Browser.onQQMiniGame?this.mSdk=window.qq:(Laya.Browser.onVVMiniGame||Laya.Browser.onQGMiniGame)&&(this.mSdk=window.qg)}static get I(){return h.get(Ne)}getSDK(){return this.mSdk}registerBGEvent(){this.mSdk?(this.mSdk.onHide(e=>{Ve.instance.triggerListener(Ne.GameOnHideEvent,e)}),this.mSdk.onShow(e=>{Ve.instance.triggerListener(Ne.GameOnShowEvent,e)})):Laya.stage.on(Laya.Event.VISIBILITY_CHANGE,this,this.onVisiblityEvent)}onVisiblityEvent(){Laya.stage.isVisibility?Ve.instance.triggerListener(Ne.GameOnShowEvent):Ve.instance.triggerListener(Ne.GameOnHideEvent)}}Ne.GameOnShowEvent="GameOnShowEvent",Ne.GameOnHideEvent="GameOnHideEvent";class ke{constructor(){if(this.platformVersionCodeNumber=0,this.platformVersionCodeString="",this.isDY=!1,this.isTT=!1,this.isWx=!1,this.hasScreenFringe=!1,this.isIphoneX=!1,this.mStatusBarHeight=0,this.model="",this.version="",this.language="",this.sdk=Ne.I.getSDK(),null==this.sdk)return;if(!this.sdk.getSystemInfoSync)return;let e=this.sdk.getSystemInfoSync();this.mStatusBarHeight=e.statusBarHeight*Laya.stage.width/Laya.Browser.clientWidth,this.language=e.language,Laya.Browser.onMiniGame||Laya.Browser.onQQMiniGame?(this.platformVersionCodeString=e.SDKVersion,this.model=e.model,this.version=e.version):(Laya.Browser.onVVMiniGame||Laya.Browser.onQGMiniGame)&&(this.platformVersionCodeNumber=e.platformVersionCode),Laya.Browser.onMiniGame&&("object"==typeof tt?(this.isTT=!0,"DOUYIN"===e.appName.toUpperCase()&&(this.isDY=!0)):this.isWx=!0),Laya.Browser.onMiniGame&&"iPhone X"===e.model.substring(0,8)&&(this.isIphoneX=!0),Laya.Browser.onMiniGame&&(e.windowWidth>=800||e.windowWidth/e.windowHeight>2)&&(this.hasScreenFringe=!0)}static get I(){return h.get(ke)}compareVersion(e){return Laya.Browser.onMiniGame||Laya.Browser.onQQMiniGame?(Ce.log("-------compareVersion------ wxqqtt version:",this.platformVersionCodeString),Ce.log("-------compareVersion------ wxqqtt vv:",e),this.compareVersionWX(this.platformVersionCodeString,e)):Laya.Browser.onVVMiniGame||Laya.Browser.onQGMiniGame?(Ce.log("-------compareVersion------ oppovivo version:",this.platformVersionCodeNumber),Ce.log("-------compareVersion------ oppovivo vv:",e),this.platformVersionCodeNumber>Number(e)?1:this.platformVersionCodeNumber==Number(e)?0:-1):void 0}compareVersionWX(e,t){let i=e.split("."),n=t.split(".");for(var a=Math.max(i.length,n.length);i.length<a;)i.push("0");for(;n.length<a;)n.push("0");for(var o=0;o<a;o++){var r=parseInt(i[o]),s=parseInt(n[o]);if(r>s)return 1;if(r<s)return-1}return 0}isDOUYIN(){return this.isDY}isiPhoneX(){return this.isIphoneX}isScreenFringe(){return this.hasScreenFringe}isTTMiniGame(){return this.isTT}isWxMiniGame(){return this.isWx}isQQMiniGame(){return Laya.Browser.onQQMiniGame}isOPPOH5Game(){return"object"==typeof OPPO}statusBarHeight(){return this.mStatusBarHeight}getModel(){return this.model}getVersion(){return this.version}getLanguage(){return this.language}}class Pe{constructor(){this.sdk=window.wx,this.initAdvert()}initAdvert(){this.initGameIconAd(),this.initGamePortalAd(),this.initGameBannerAd()}initGameIconAd(){this.mAdGameIconMap={}}initGamePortalAd(){this.mAdGamePortalMap={}}initGameBannerAd(){this.mAdGameBannerMap={}}getGameBannerAd(e,t,i,n){let a=Laya.Browser.clientWidth-20,o=100*Laya.Browser.clientWidth/320,r=this.sdk.getSystemInfoSync();i&&(a=i),n&&(o=n);let s=Laya.Browser.clientHeight-o-10;t&&(s=t);let l=T.I.getConf().ad.gamebanner[e];if(Ce.log("getGameBannerAd adUnitId:",l),!this.mAdGameBannerMap[e.toString()]&&l&&""!=l){let t=null;this.sdk.createGameBanner&&((t=this.sdk.createGameBanner({adUnitId:l,style:{left:.5*(r.windowWidth-a),top:s,width:a,height:o}}))&&(t.onLoad(()=>{t.style.left=(Laya.Browser.clientWidth-t.style.width)/2,t.style.top=s}),t.onResize(e=>{t.style.top=s,t.style.left=(Laya.Browser.clientWidth-e.width)/2}),t.onError(()=>{Ce.log("getGameBannerAd onError"),this.mAdGameBannerMap[e.toString()]=null})),this.mAdGameBannerMap[e.toString()]=t)}else this.mAdGameBannerMap[e.toString()]&&(this.mAdGameBannerMap[e.toString()].style.top=t);return this.mAdGameBannerMap[e.toString()]}showGameBannerAd(e,t,i,n){if(-1==ke.I.compareVersion("2.7.5"))return null;let a=this.getGameBannerAd(e,t,i,n);if(a&&a){a.show().catch(e=>{Ce.error(e)});let e=100;t&&(e=t),a.style.top=e,a.style.left=(Laya.Browser.clientWidth-a.style.width)/2}return a}hideGameBannerAd(e){let t=this.mAdGameBannerMap[e.toString()];t&&t.hide()}getGamePortalAd(e,t){let i=T.I.getConf().ad.gameportal[e];if(Ce.log("getGamePortalAd adUnitId:",i),!this.mAdGamePortalMap[e.toString()]&&i&&""!=i){let n=null;this.sdk.createGamePortal?((n=this.sdk.createGamePortal({adUnitId:i}))&&(n.onLoad(()=>{}),n.onError(()=>{Ce.log("getGamePortalAd onError"),this.mAdGamePortalMap[e.toString()]=null})),this.mAdGamePortalMap[e.toString()]=n):this.mAdGamePortalMap[e.toString()]&&(this.mAdGamePortalMap[e.toString()].style.top=t)}return this.mAdGamePortalMap[e.toString()]}showGamePortalAd(e,t){if(-1==ke.I.compareVersion("2.7.5"))return null;let i=this.getGamePortalAd(e,t);return i&&i&&i.load().then(()=>{i.show()}).catch(e=>{Ce.error(e)}),i}getGameIconAd(e,t){let i=T.I.getConf().ad.gameicon[e];if(!this.mAdGameIconMap[e.toString()]&&i&&""!=i){let t=null;this.sdk.createGameIcon&&(t=this.sdk.createGameIcon({adUnitId:i,count:3})),this.mAdGameIconMap[e.toString()]=t}return this.mAdGameIconMap[e.toString()]}showGameIconAd(e,t){if(-1==ke.I.compareVersion("2.8.2"))return null;let i=this.getGameIconAd(e,t);i&&i&&i.load().then(()=>{i.show()}).catch(e=>{Ce.error(e)})}}class Be{constructor(){this.mShowTTBanner=!0,this.mVVGreateBannerTime=0,this.sdk=window.wx,this.mErrorVideoCaller=null,this.mErrorVideoFunc=null,this.initAdvert()}initAdvert(){this.initBannerAd()}initBannerAd(){this.mBannerAdMap={}}setShowTTBanner(e){this.mShowTTBanner=e}clearAllBannerKey(){this.mBannerAdMap={}}clearBannerKey(e){this.mBannerAdMap[e.toString()]=null}getBannerAd(e,t,i,n,a){let o=T.I.getConf().ad.banner[e];if(Ce.log("WX getBannerAd adUnitId:",o),!this.mBannerAdMap[e.toString()]&&o&&""!=o&&this.sdk.createBannerAd){let r=Laya.Browser.clientWidth-20,s=100*Laya.Browser.clientWidth/320,l=this.sdk.getSystemInfoSync(),d=null;n&&(r=n),a&&(s=a);let h=Laya.Browser.clientHeight-s-10;t&&(h=t/Laya.stage.height*l.windowHeight);let c=.5*(l.windowWidth-r);i&&(c=i/Laya.stage.width*l.windowWidth),-1!=ke.I.compareVersion("2.0.4")&&(d=this.sdk.createBannerAd({adUnitId:o,adIntervals:30,style:{left:c,top:h,width:r,height:s}})),d&&(d.onResize(e=>{let n=this.sdk.getSystemInfoSync(),a=n.windowHeight-e.height-10;t&&(a=t/Laya.stage.height*n.windowHeight);let o=.5*(n.windowWidth-e.width);i&&(o=i/Laya.stage.width*n.windowWidth),d.style.top=a,d.style.left=o}),d.onError(()=>{let o={};o.adkey=e,o.mTop=t,o.mLeft=i,o.mWidht=n,o.mHeight=a,this.onErrorVideo(o),Ce.log("getBannerAd onError")})),this.mBannerAdMap[e.toString()]=d}else this.mBannerAdMap[e.toString()]&&(this.mBannerAdMap[e.toString()].style.top=t);return this.mBannerAdMap[e.toString()]}showBannerAd(e,t,i,n,a,o,r){this.mErrorVideoCaller=o,this.mErrorVideoFunc=r;let s=this.getBannerAd(e,t,i,n,a);if(s){let o=this.sdk.getSystemInfoSync(),r=Laya.Browser.clientHeight-s.style.height-10;t&&(r=t/Laya.stage.height*o.windowHeight);let d=(Laya.Browser.clientWidth-s.style.width)/2;if(i&&(d=i/Laya.stage.width*o.windowWidth),this.mBannerAdMap[e.toString()]){var l=s.show();l&&l.then(()=>{Ce.log("WX  banner广告显示成功")}).catch(o=>{let r={};r.adkey=e,r.mTop=t,r.mLeft=i,r.mWidht=n,r.mHeight=a,this.onErrorVideo(r),Ce.log("WX  banner广告组件出现问题",o)}),s.style.top=r,s.style.left=d}else s.offLoad(),s.onLoad(()=>{if(this.mShowTTBanner){var o=s.show();o&&o.then(()=>{Ce.log("@122222 广告显示成功")}).catch(o=>{let r={};r.adkey=e,r.mTop=t,r.mLeft=i,r.mWidht=n,r.mHeight=a,this.onErrorVideo(r),Ce.log(" @122222 广告组件出现问题",o)})}s.style.top=r,s.style.left=d,this.mBannerAdMap[e.toString()]=s})}return s}hideBannerAd(e){let t=this.mBannerAdMap[e.toString()];t&&t.hide()}onErrorVideo(e){this.mErrorVideoCaller&&this.mErrorVideoFunc&&this.mErrorVideoFunc.call(this.mErrorVideoCaller,e)}}class Ge extends Be{constructor(){super(),this.sdk=window.tt}getBannerAd(e,t,i,n){let a=T.I.getConf().ad.banner[e];if(Ce.log("getBannerAd adUnitId:",a),!this.mBannerAdMap[e.toString()]&&a&&""!=a&&this.sdk.createBannerAd){let i=320,n=112,o=this.sdk.getSystemInfoSync(),r=null,s=Laya.Browser.clientHeight-n;t&&(s=t),-1!=ke.I.compareVersion("1.32.0")&&(r=this.sdk.createBannerAd({adUnitId:a,adIntervals:60,style:{left:.5*(o.windowWidth-i),top:s,width:i,height:n}})),r&&(r.onResize(e=>{let i=this.sdk.getSystemInfoSync(),n=i.windowHeight-e.height;t&&(n=t),r.style.top=n,r.style.left=(i.windowWidth-e.width)/2}),r.onError(()=>{Ce.log("getBannerAd onError")})),this.mBannerAdMap[e.toString()]=r}return this.mBannerAdMap[e.toString()]}showBannerAd(e,t,i,n,a,o){if(ke.I.isDOUYIN())return null;let r=this.getBannerAd(e,t);if(r){let i=Laya.Browser.clientHeight-r.style.height;if(t&&(i=t),this.mBannerAdMap[e.toString()]){var s=r.show();s&&s.then(()=>{Ce.log("@11111 广告显示成功")}).catch(e=>{Ce.log("@111 广告组件出现问题",e)})}else r.offLoad(),r.onLoad(()=>{if(this.mShowTTBanner){var t=r.show();t&&t.then(()=>{Ce.log("@122222 广告显示成功")}).catch(e=>{Ce.log(" @122222 广告组件出现问题",e)})}r.style.top=i,r.style.left=(Laya.Browser.clientWidth-r.style.width)/2,this.mBannerAdMap[e.toString()]=r})}return r}}class Fe extends Be{constructor(){super(),this.sdk=window.qq}getBannerAd(e,t,i,n){let a=T.I.getConf().ad.banner[e];if(Ce.log("QQ getBannerAd adUnitId:",a),!this.mBannerAdMap[e.toString()]&&a&&""!=a&&this.sdk.createBannerAd){let i=320,n=112,o=Laya.Browser.clientHeight-n;t&&(o=t);let r=this.sdk.getSystemInfoSync(),s=this.sdk.createBannerAd({adUnitId:a,style:{left:.5*(r.windowWidth-i),top:o,width:i,height:n}});s&&(s.onResize(e=>{let i=this.sdk.getSystemInfoSync(),n=i.windowHeight-e.height;t&&(n=t),s.style.top=n,s.style.left=(i.windowWidth-e.width)/2}),s.onError(()=>{Ce.log("getBannerAd onError")})),this.mBannerAdMap[e.toString()]=s}else this.mBannerAdMap[e.toString()]&&(this.mBannerAdMap[e.toString()].style.top=t);return this.mBannerAdMap[e.toString()]}}class ze extends Be{constructor(){super(),this.sdk=window.qg}getBannerAd(e,t,i,n){let a=T.I.getConf().ad.banner[e];if(Ce.log("getBannerAd adUnitId:",a),!this.mBannerAdMap[e.toString()]&&a&&""!=a){let i=null;-1!=ke.I.compareVersion("1031")&&(t?(Ce.log("~~~~mTop  getBannerAd adUnitId:",a),i=this.sdk.createBannerAd({posId:a})):(Ce.log("~~~~no mTop  getBannerAd adUnitId:",a),i=this.sdk.createBannerAd({posId:a,style:{}})),i&&(i.offClose(),i.onClose(()=>{Ce.log("getBannerAd onClose"),i=null,this.mBannerAdMap[e.toString()]=null}),i.offError(),i.onError(t=>{Ce.log(t),this.mBannerAdMap[e.toString()]=null}))),this.mBannerAdMap[e.toString()]=i}return this.mBannerAdMap[e.toString()]}showBannerAd(e,t,i,n,a,o){if((new Date).getTime()-this.mVVGreateBannerTime<=3e3)return null;this.mVVGreateBannerTime=(new Date).getTime();let r=this.getBannerAd(e,t);if(r&&this.mBannerAdMap[e.toString()]){var s=r.show();s&&s.then(()=>{Ce.log("@11111 广告显示成功")})}return r}hideBannerAd(e){Ce.log("banner广告");let t=this.mBannerAdMap[e.toString()];if(t){Ce.log("banner广告存在");var i=t.hide();i&&i.then(()=>{this.mBannerAdMap[e.toString()]=null,Ce.log("banner广告隐藏成功")}).catch(e=>{Ce.log("banner广告销隐藏失败",e)})}}}class Ue extends Be{constructor(){super(),this.sdk=window.qg}getBannerAd(e,t,i,n){let a=T.I.getConf().ad.banner[e];if(Ce.log("getBannerAd adUnitId:",a),!this.mBannerAdMap[e.toString()]&&a&&""!=a&&this.sdk.createBannerAd){let i=null;-1!=ke.I.compareVersion("1051")&&((i=this.sdk.createBannerAd({adUnitId:a})).offLoad(),i.onLoad(function(){console.log("banner 广告加载成功");let e=Laya.Browser.clientHeight-i.style.height;t&&(e=t),i.style.top=e,i.style.left=(Laya.Browser.clientWidth-i.style.width)/2}),i.offHide(),i.onHide(function(){console.log("banner 广告隐藏")}),i.offError(),i.onError(e=>{console.log("banner 广告出错",e),i.destroy(),i=null,this.mBannerAdMap[a]=null}),i.offResize(),i.onResize(function(e){console.log("banner 宽度："+e.width+", banner 高度："+e.height)})),this.mBannerAdMap[e.toString()]=i}else this.mBannerAdMap[e.toString()]&&(this.mBannerAdMap[e.toString()].style.top=t);return this.mBannerAdMap[e.toString()]}showBannerAd(e,t,i,n,a,o){let r=this.getBannerAd(e,t);if(r&&-1!=ke.I.compareVersion("1051")){var s=r.show();s&&s.then(()=>{Ce.log("banner 广告显示成功")})}return r}hideBannerAd(e){Ce.log("banner广告");let t=this.mBannerAdMap[e.toString()];t&&t.hide()}clearBannerKey(e){}}class He{constructor(){if(this.mDestroyWhenStop=!1,Ve.instance.addListener(Ne.GameOnShowEvent,this,this.onGameShowEvent),Ve.instance.addListener(Ne.GameOnHideEvent,this,this.onGameHideEvent),Ne.I.getSDK()&&Ne.I.getSDK().onAudioInterruptionEnd&&Ne.I.getSDK().onAudioInterruptionBegin){let e=this;Ne.I.getSDK().onAudioInterruptionEnd(function(){e.onAudioInterruptionEnd()}),Ne.I.getSDK().onAudioInterruptionBegin(function(){e.onAudioInterruptionBegin()})}}static get I(){return He.getInstance()}static getInstance(){return null==He.instance&&(He.instance=new He),He.instance}onGameShowEvent(){Laya.SoundManager.musicMuted=!1,Laya.SoundManager.soundMuted=!1}onGameHideEvent(){Laya.SoundManager.musicMuted=!0,Laya.SoundManager.soundMuted=!0}onAudioInterruptionBegin(){Laya.SoundManager.musicMuted=!0,Laya.SoundManager.soundMuted=!0}onAudioInterruptionEnd(){Laya.SoundManager.musicMuted=!1,Laya.SoundManager.soundMuted=!1,this.playOldMusic()}playOldMusic(){He.mOldBgmName&&(Laya.SoundManager.stopMusic(),Laya.SoundManager.playMusic(`music/${He.mOldBgmName}.mp3`,0,null,null))}init(e,t=!1){Laya.SoundManager.autoStopMusic=!0,this.mDestroyWhenStop=t,this.playBGM(e)}playBGM(e){Laya.Browser.onVVMiniGame&&ke.I.compareVersion("1063")<=0?console.log("VIVO低于1063屏蔽背景音乐"):C.I.isMusicMute&&He.mOldBgmName!=e&&(Laya.SoundManager.playMusic(`music/${e}.mp3`,0,null,null),this.mDestroyWhenStop&&null!=He.mOldBgmName&&Laya.SoundManager.destroySound(`music/${He.mOldBgmName}.mp3`),He.mOldBgmName=e)}stopBGM(){Laya.SoundManager.stopMusic(),this.mDestroyWhenStop&&null!=He.mOldBgmName&&Laya.SoundManager.destroySound(`music/${He.mOldBgmName}.mp3`),He.mOldBgmName=null}playSound(e,t,i,n,a,o){if(C.I.isSoundMute)return Laya.Render.isConchApp&&(t=".wav"),null==t&&(t=".mp3"),e+=t,e=Laya.Render.isConchApp?`sound/native/${e}`:`sound/default/${e}`,Laya.SoundManager.playSound(e,i,n,a,o)}stopSound(e,t){Laya.Render.isConchApp&&(t=".wav"),null==t&&(t=".mp3"),e+=t,e=Laya.Render.isConchApp?`sound/native/${e}`:`sound/default/${e}`,Laya.SoundManager.stopSound(e)}setMusicVolume(e){Laya.SoundManager.setMusicVolume(e)}setSoundVolume(e){Laya.SoundManager.setSoundVolume(e)}}He.mOldBgmName=null;class Ye{}class Xe{constructor(){this.TimeOut=5e3,this.httpEventId="HttpMgr_Event_Result",this.event=new s}static get instance(){return Xe.getInstance()}static getInstance(){return null==Xe.mInstance&&(Xe.mInstance=new Xe),Xe.mInstance}post(e,t,i="json"){this.createHttpRequest(e).send(e,JSON.stringify(t),"post",i,["Content-Type","application/json"])}get(e,t="json",i){Laya.Browser.onVVMiniGame?window.qg.request({url:e,dataType:t,method:"GET",success:t=>{this.onComplete(e,t.data)},fail:(t,i)=>{let n={error:t,code:i};this.onError(e,n)}}):i?this.createHttpRequest(e).send(e,void 0,"get",t,i):this.createHttpRequest(e).send(e,void 0,"get",t)}createHttpRequest(e){let t=new Laya.HttpRequest;return t.http.timeout=this.TimeOut,t.once(Laya.Event.COMPLETE,this,this.onComplete,[e]),t.once(Laya.Event.ERROR,this,this.onError,[e]),t}onComplete(e,t){this.triggerListener(e,!0,t)}onError(e,t){this.triggerListener(e,!1,t)}triggerListener(e,t,i){let n=new Ye;n.url=e,n.result=t,n.data=i,this.event.triggerListener(this.httpEventId,n)}addListener(e,t){this.event.addListener(this.httpEventId,e,t)}removeListener(e,t){this.event.removeListener(this.httpEventId,e,t)}}class We{deleteAll(){Laya.LocalStorage.clear()}deleteKey(e){Laya.LocalStorage.removeItem(e)}getNumber(e,t){let i=Laya.LocalStorage.getItem(e);return i?Number(i):t}setNumber(e,t){Laya.LocalStorage.setItem(e,t.toString())}getString(e,t){let i=Laya.LocalStorage.getItem(e);return i||t}setString(e,t){Laya.LocalStorage.setItem(e,t)}getBoolean(e,t){let i=Laya.LocalStorage.getItem(e);return i?"1"==i:t}setBoolean(e,t){let i=t?"1":"0";Laya.LocalStorage.setItem(e,i)}getObject(e,t){let i=Laya.LocalStorage.getJSON(e);return i||t}setObject(e,t){Laya.LocalStorage.setJSON(e,t)}}class Ke{constructor(){this.storage=new We}static get instance(){return Ke.getInstance()}static getInstance(){return null==Ke.mInstance&&(Ke.mInstance=new Ke),Ke.mInstance}deleteAll(){this.storage.deleteAll()}deleteKey(e){this.storage.deleteKey(e)}getNumber(e,t){return this.storage.getNumber(e,t)}setNumber(e,t){return this.storage.setNumber(e,t)}getString(e,t){return this.storage.getString(e,t)}setString(e,t){this.storage.setString(e,t)}getBoolean(e,t){return this.storage.getBoolean(e,t)}setBoolean(e,t){this.storage.setBoolean(e,t)}getObject(e,t){return this.storage.getObject(e,t)}setObject(e,t){this.storage.setObject(e,t)}}class je{constructor(e,t){this.success=e,this.identity=t}}class qe{constructor(e,t,i="",n="",a="",o=0){this.success=e,this.token=t,this.openid=i,this.unionid=n,this.name=a,this.res_version=o}}class Ze{constructor(e,t){this.result=e,this.res=t}}class Qe{static isNullOrEmpty(e){return!e||e==Qe.empty}static isNullOrWhiteSpace(e){try{return null==e||"undefined"==e||e.toString().replace(/\s/g,"").length<1}catch(e){return Ce.log(e),!1}}static join(e,...t){try{let i=t[0];if(Array.isArray(i)||i instanceof Array){let t=Qe.empty;for(let n=0;n<i.length;n++){let a=i[n];n<i.length-1?t+=a+e:t+=a}return t}if("object"==typeof i){let t=Qe.empty,n=i;return Object.keys(i).forEach(i=>{t+=n[i]+e}),t=t.slice(0,t.length-e.length)}let n=t;return Qe.joinString(e,...n)}catch(e){return Ce.log(e),Qe.empty}}static format(e,...t){try{return e.match(Qe.regexNumber)?Qe.formatString(Qe.regexNumber,e,t):e.match(Qe.regexObject)?Qe.formatString(Qe.regexObject,e,t,!0):e}catch(e){return Ce.log(e),Qe.empty}}static formatString(e,t,i,n=!1){return t.replace(e,(e,t)=>{let a,o=e.split(":");return o.length>1&&(t=o[0].replace("{",""),e=o[1].replace("}","")),null==(a=n?i[0][t]:i[t])||null==a||e.match(/{\d+}/)?a:void 0!==(a=Qe.parsePattern(e,a))&&null!=a?a:Qe.empty})}static parsePattern(e,t){switch(e){case"L":return t=t.toLowerCase();case"U":return t=t.toUpperCase();case"d":if("string"==typeof t)return Qe.getDisplayDateFromString(t);if(t instanceof Date)return Qe.format("{0:00}.{1:00}.{2:0000}",t.getDate(),t.getMonth(),t.getFullYear());break;case"s":if("string"==typeof t)return Qe.getSortableDateFromString(t);if(t instanceof Date)return Qe.format("{0:0000}-{1:00}-{2:00}",t.getFullYear(),t.getMonth(),t.getDate());break;case"n":"string"!=typeof t&&(t=t.toString());let i=t.replace(/,/g,".");if(isNaN(parseFloat(i))||i.length<=3)break;let n=i.split(/[^0-9]+/g),a=n;n.length>1&&(a=[Qe.joinString("",...n.splice(0,n.length-1)),n[n.length-1]]);let o=a[0],r=o.length%3,s=r>0?o.substring(0,r):Qe.empty,l=o.substring(r).match(/.{3}/g);return t=(s=s+"."+Qe.join(".",l))+(a.length>1?","+a[1]:"")}return"number"!=typeof t&&isNaN(t)||isNaN(+e)||Qe.isNullOrWhiteSpace(t)?t:Qe.formatNumber(t,e)}static getDisplayDateFromString(e){let t;if((t=e.split("-")).length<=1)return e;let i=t[t.length-1],n=t[t.length-2],a=t[t.length-3];return`${i=(i=i.split("T")[0]).split(" ")[0]}.${n}.${a}`}static getSortableDateFromString(e){let t=e.replace(",","").split(".");if(t.length<=1)return e;let i=t[t.length-1].split(" "),n=Qe.empty;i.length>1&&(n=i[i.length-1]);let a=`${t[t.length-1].split(" ")[0]}-${t[t.length-2]}-${t[t.length-3]}`;return!Qe.isNullOrWhiteSpace(n)&&n.length>1?a+=`T${n}`:a+="T00:00:00",a}static formatNumber(e,t){let i=t.length,n=e.toString();if(i<=n.length)return n;let a=i-n.length;return new Array(a+=1).join("0")+n}static joinString(e,...t){let i=Qe.empty;for(let n=0;n<t.length;n++){if("string"==typeof t[n]&&Qe.isNullOrWhiteSpace(t[n])||"number"!=typeof t[n]&&"string"!=typeof t[n])continue;i+=""+t[n];for(let a=n+1;a<t.length;a++)if(!Qe.isNullOrWhiteSpace(t[a])){i+=e,n=a-1;break}}return i}static strlen(e){let t=0;for(let i=0;i<e.length;i++){let n=e.charCodeAt(i);if(n<=127)t++;else if(n<=2047)t+=2;else if(n>=55296&&n<=56319){i++;let n=e.charCodeAt(i);!Number.isNaN(n)&&n>=56320&&n<=57343&&(t+=4)}else t+=n<=65535?3:4}return t}static replaceStr(e,t){if(t.length>0)for(let i=0,n=t.length;i<n;i++)e=e.split("{"+(i+1)+"}").join(t[i]);return e}}Qe.regexNumber=/{(\d+(:\w*)?)}/g,Qe.regexObject=/{(\w+(:\w*)?)}/g,Qe.empty="";class $e{constructor(){this.params=new n}get(e){return this.params.get(e)}add(e,t){if(this.params.containsKey(e))return!1;let i=t;"object"==typeof t&&(i=JSON.stringify(t)),this.params.add(e,i)}toMap(e){if(!Qe.isNullOrEmpty(e)){let t=e.split("&");for(let e in t){let t=e.split("=");this.params.add(t[0],t[1])}}}ToString(){let e="",t=0;for(let i in this.params.table){t++,e+=`${i}=${this.params.get(i)}${t==this.params.count?"":"&"}`}return e}}class Je{constructor(){this.name="uc10d016",this.uuid="uc10d016",Xe.instance.addListener(this,this.onLoginComplete),this.shareParam=Ke.instance.getString("H5Share_query"),Qe.isNullOrEmpty(this.shareParam)||Ke.instance.setString("H5Share_query",""),this.name=Ke.instance.getString("H5Login_name",`${(new Date).getTime()}${Math.random()}`),this.uuid=Ke.instance.getString("H5Login_uuid",`${(new Date).getTime()}${Math.random()}`),Ke.instance.setString("H5Login_name",this.name),Ke.instance.setString("H5Login_uuid",this.uuid)}login(e,t){this.caller=e,this.func=t;let i=new $e;i.toMap(Ke.instance.getString("H5Share_query"));let n=i.get("invite_token");n=n||"",this.url=`${p.ucenter}/api/user/login2`;let a={uuid:this.uuid,gamekey:"0"};Xe.instance.post(this.url,a)}onLoginComplete(e){if(e.url==this.url&&(Ce.log(e),this.caller&&this.func)){let t=e.data.data;c.instance.openid=t.union_id;let i=new Ze(e.result,new qe(e.data.message,t.token,t.union_id,t.union_id,this.name,e.data.res_version));this.func.call(this.caller,i)}}checkUserInfoAuthorize(e,t){t.call(e,!0)}applyUserInfoAuthorize(e,t,i,n,a,o,r){let s=new je(!0,r);return o.call(a,!0,s),null}destroyAuthorizeBtn(e){}getUserInfo(){return null}getArea(){return""}getSex(){return 0}getLaunchShareQuery(){if(!Qe.isNullOrEmpty(this.shareParam)){let e={},t=this.shareParam.split("&");for(let i in t){let t=i.split("=");e[t[0]]=t[1]}return e}return null}getLaunchReferrerInfo(){return null}getLaunchScene(){return null}}class et{constructor(e,t){this.success=e,this.title=t}}class it{constructor(){Laya.stage.stage.on(Laya.Event.FOCUS,this,this.onFocus),Laya.stage.stage.on(Laya.Event.BLUR,this,this.onBLUR)}share(e,t,i,n,a){this.caller=n,this.func=a,Ke.instance.setString("H5Share_query",i),this.OnShareComplete(!0,e)}OnShareComplete(e,t){let i=new et(e,t);this.func.call(this.caller,i)}setDefaultShareContent(e,t,i){}setDefaultShareHandler(e,t){}setVisibleHandler(e,t){this.visibleCaller=e,this.visibleFunc=t}onFocus(){this.visibleCaller&&this.visibleFunc.call(this.visibleCaller,!0,null)}onBLUR(){this.visibleCaller&&this.visibleFunc.call(this.visibleCaller,!1,null)}}class nt{constructor(){this.group=0,this.model="",this.version=""}initAnalysis(){this.gamekey=T.I.getConf().gamekey,this.url=`${T.I.getConf().ucenter}/api/logs/action`,""!=Ke.instance.getString(nt.OK_ANALYSIS_OPENID,"")&&(c.instance.openid=Ke.instance.getString(nt.OK_ANALYSIS_OPENID,"")),this.group=Ke.instance.getNumber(nt.OK_ANALYSIS_GROUP,-1),this.group++,Ke.instance.setNumber(nt.OK_ANALYSIS_GROUP,this.group),this.model=ke.I.getModel(),this.version=ke.I.getVersion()}traceEvent(e,t){let i={action_id:e,gamekey:this.gamekey,openid:c.instance.openid,model:this.model,version:this.version,group:this.group,param:t};d.instance.post(this.url,i)}updateGroup(){this.group++,Ke.instance.setNumber(nt.OK_ANALYSIS_GROUP,this.group)}traceNavigateEvent(e,t,i){}traceCustomEvent(e,t){}}nt.OK_ANALYSIS_GROUP="OK_ANALYSIS_GROUP",nt.OK_ANALYSIS_OPENID="OK_ANALYSIS_OPENID";class at{constructor(){this.wx=window.wx}login(e,t,i=!1){this.loginCaller=e,this.loginFunc=t,this.wx.login({success:e=>{e.code?i?this.refreshUserInfo(e.code):this.requestToken(e.code):this.onLoginComplete(!1,new qe(!1,`wx.login callback success but no code,errMsg:${e.errMsg}`))},fail:()=>{this.onLoginComplete(!1,new qe(!1,"wx.login callback fail"))}})}requestToken(e){let t={};t={appid:p.appId,code:e,gamekey:p.gamekey},Ce.log("requestToken loginData :",t);let i=`${p.ucenter}/api/user/login2`;this.wx.request({url:i,method:"POST",data:t,success:e=>{Ce.log("wx login request res:",e),e&&e.data&&200==e.data.code&&e.data.data&&e.data.data.open_id?(c.instance.openid=e.data.data.open_id,Ke.instance.setString(nt.OK_ANALYSIS_OPENID,c.instance.openid),this.onLoginComplete(!0,new qe(!0,e.data.data.token,e.data.data.open_id,e.data.data.union_id))):(e&&e.data&&e.data.code&&Ce.log("wx login request failed code:",e.data.code),e&&e.data&&e.data.message&&Ce.log("wx login request failed message:",e.data.message),this.onLoginComplete(!1,new qe(!1,"wx.request callback success but request not success")))},fail:e=>{Ce.log("fail:",e),this.onLoginComplete(!1,new qe(!1,`wx.request callback fail,${e}`))}})}requestTokenWithInfo(e){let t=this.wx.getLaunchOptionsSync(),i="";for(let e in t.query)i=`&${e}=${t.query[e]}`;let n={},a="",o="";t&&t.query&&t.query.oGamekey&&(a=t.query.oGamekey),t&&t.query&&t.query.oUid&&(o=t.query.oUid),n={appid:p.appId,code:e,gamekey:p.gamekey,o_gamekey:a,o_uid:o,encrypted_data:c.instance.encryptedData,iv:c.instance.iv},Ce.log("requestToken loginData :",n);let r=`${p.ucenter}/api/user/login2`;this.wx.request({url:r,method:"POST",data:n,success:e=>{Ce.log("wx login request res:",e),e&&e.data&&200==e.data.code&&e.data.data&&e.data.data.open_id?(c.instance.openid=e.data.data.open_id,Ke.instance.setString(nt.OK_ANALYSIS_OPENID,c.instance.openid),this.onLoginComplete(!0,new qe(!0,e.data.data.token,e.data.data.open_id,e.data.data.union_id))):(e&&e.data&&e.data.code&&Ce.log("wx login request failed code:",e.data.code),e&&e.data&&e.data.message&&Ce.log("wx login request failed message:",e.data.message),this.onLoginComplete(!1,new qe(!1,"wx.request callback success but request not success")))},fail:e=>{Ce.log("fail:",e),this.onLoginComplete(!1,new qe(!1,`wx.request callback fail,${e}`))}})}destroyAuthorizeBtn(e){e&&e.destroy()}onLoginComplete(e,t){let i=new Ze(e,t);this.loginFunc.call(this.loginCaller,i)}checkUserInfoAuthorize(e,t){this.userInfo?t.call(e,!0):this.wx.getSetting({success:i=>{i.authSetting["scope.userInfo"]?this.setUserInfo(e,t):t.call(e,!1)},fail:i=>{t.call(e,!1)}})}applyUserInfoAuthorize(e,t,i,n,a,o,r){if(this.userInfo){let e=new je(!0,r);return void o.call(a,e)}let s=this.wx.createUserInfoButton({type:"text",text:"",style:{left:e,top:t,width:i,height:n,fontSize:16,color:"#ffffff",borderRadius:4}});return s.onTap(e=>{"getUserInfo:ok"==e.errMsg?(s.destroy(),this.setUserInfo(a,o,!0,r)):this.wx.showModal({title:"提示",content:"授权失败,请重试!",showCancel:!1,complete(){let e=new je(!1,r);o.call(a,e)}})}),s}getUserInfo(){return this.userInfo}getArea(){return this.userInfo?this.userInfo.city:""}getSex(){return this.userInfo?this.userInfo.gender:0}setUserInfo(e,t,i,n){this.wx.getUserInfo({success:a=>{if(this.userInfo=a.userInfo,c.instance.encryptedData=a.encryptedData,c.instance.iv=a.iv,Ce.log("--- setUserInfo ---:",a),i){let i=new je(!0,n);t.call(e,i)}else t.call(e,!0)},fail:a=>{if(i){let i=new je(!1,n);t.call(e,i)}else t.call(e,!1)}})}getLaunchShareQuery(){let e=this.wx.getLaunchOptionsSync();return e&&e.query?e.query:null}getLaunchReferrerInfo(){let e=this.wx.getLaunchOptionsSync();return e&&e.referrerInfo?e.referrerInfo:null}getLaunchScene(){let e=this.wx.getLaunchOptionsSync();return e&&e.scene?e.scene:null}refreshUserInfo(e){this.wx.getSetting({success:t=>{t.authSetting["scope.userInfo"]&&this.wx.getUserInfo({success:t=>{this.userInfo=t.userInfo,c.instance.encryptedData=t.encryptedData,c.instance.iv=t.iv,this.requestToken(e)},fail:e=>{}})},fail:e=>{}})}}class ot{constructor(){this.wx=window.wx;let e=this.wx.getSystemInfoSync();this.platform=e.platform}pay(e,t,i){this.payCaller=t,this.payFunc=i,this.requestAddOrder(e)}requestAddOrder(e){let t=`${p.ucenter}/pay/add_wxmini_order`;this.wx.request({url:t,data:{game_id:p.appId,goods_id:e,platform:this.platform},method:"POST",header:{"Content-Type":"application/json"},success:e=>{200==e.statusCode?this.onAddOrderComplete(!0,e.data):this.onAddOrderComplete(!1,e)},fail:e=>{this.onAddOrderComplete(!1,e)}})}onAddOrderComplete(e,t){Ce.log("OnAddOrderComplete:",e,",res",t),e?this.requestMidasPayment(t):(Ce.error("AddOrder fail:",t),this.invokePayResult(!1))}requestMidasPayment(e){this.orderId=e.order_id,this.wx.requestMidasPayment({mode:"game",env:0,offerId:e.offer_id,currencyType:"CNY",platform:this.platform,buyQuantity:e.buyQuantity,zoneId:"1",success:e=>{this.onMidasPaymentComplete(!0,e)},fail:t=>{this.onMidasPaymentComplete(!1,e)}})}onMidasPaymentComplete(e,t){Ce.log("OnMidasPaymentComplete:",e,",res",t),e?this.requestDeliverOrder(t):(Ce.error("MidasPayment fail:",t),this.invokePayResult(!1))}requestDeliverOrder(e){let t=`${p.ucenter}/pay/deliver_wxmini_order`;this.wx.request({url:t,data:{order_id:this.orderId,platform:this.platform},method:"POST",header:{"Content-Type":"application/json"},success:e=>{200==e.statusCode?this.onDeliverOrderComplete(!0,e.data):this.onDeliverOrderComplete(!1,e)},fail:e=>{this.onDeliverOrderComplete(!1,e)}})}onDeliverOrderComplete(e,t){Ce.log("OnDeliverOrderComplete:",e,",res",t),e||Ce.error("DeliverOrder fail:",t),this.invokePayResult(e)}invokePayResult(e){this.payCaller&&this.payFunc&&this.payFunc.call(this.payCaller,e)}}class rt{constructor(){let e=window.wx;e&&(this.openContext=e.getOpenDataContext())}postGraphicsCmd(e,t,i){if(!this.openContext)return;let n=e.width,a=e.height;this.openContext.canvas.width=1*n,this.openContext.canvas.height=1*a;let o=new Laya.Point;o=e.localToGlobal(o);let r=Laya.stage._canvasTransform,s=new Laya.Matrix(r.a,0,0,r.d,o.x*r.a,o.y*r.d);this.openContext.postMessage({eventId:t,canvasData:{scale:1,matrix:s},extraData:i})}clearGraphicsCmd(e){this.openContext&&(this.openContext.postMessage({eventId:e}),this.shareTexture&&this.shareTexture.destroy())}openRank(e){this.postGraphicsCmd(e,X.openRank)}closeRank(){this.clearGraphicsCmd(X.closeRank)}requestRank(e,t){this.openContext&&this.openContext.postMessage({eventId:X.requestRank,requestData:{rankType:e,key:t}})}pushScore(e,t,i){this.openContext&&this.openContext.postMessage({eventId:X.pushScore,pushData:{key:e,score:t,unit:i}})}openSurpass(e,t){}closeSurpass(){}}!function(e){e[e.pushOpenId=1]="pushOpenId",e[e.pushScore=2]="pushScore",e[e.openRank=3]="openRank",e[e.requestRank=4]="requestRank",e[e.closeRank=5]="closeRank"}(X||(X={}));class st{constructor(){this.defTime=3e3,this.curTime=0,this.wx=window.wx,this.showShareMenu()}showShareMenu(){-1!=ke.I.compareVersion("2.11.3")&&Laya.Browser.onAndroid?this.wx.showShareMenu({withShareTicket:!0,menus:["shareAppMessage","shareTimeline"]}):this.wx.showShareMenu({withShareTicket:!0}),this.wx.aldOnShareAppMessage?this.wx.aldOnShareAppMessage(()=>(this.defaultCaller&&this.defaultFunc&&this.defaultFunc.call(this.defaultCaller),{title:this.defTitle,imageUrl:this.defImgUrl,query:this.defQuery})):this.wx.onShareAppMessage(()=>(this.defaultCaller&&this.defaultFunc&&this.defaultFunc.call(this.defaultCaller),{title:this.defTitle,imageUrl:this.defImgUrl,query:this.defQuery})),this.wx.updateShareMenu({withShareTicket:!0}),Ve.instance.addListener(Ne.GameOnShowEvent,this,this.onGameShowEvent),Ve.instance.addListener(Ne.GameOnHideEvent,this,this.onGameHideEvent)}onGameShowEvent(e){this.resultTitle&&(this.onShareComplete((new Date).getTime()-this.curTime>=this.defTime,this.resultTitle),this.curTime=0,this.resultTitle=void 0),this.visibleFunc.call(this.visibleCaller,!0,e)}onGameHideEvent(e){this.visibleFunc.call(this.visibleCaller,!1,e)}share(e,t,i,n,a){this.resultCaller=n,this.resultFunc=a,this.resultTitle=e,this.curTime=(new Date).getTime(),this.wx.aldShareAppMessage?this.wx.aldShareAppMessage({title:e,imageUrl:t,query:i}):this.wx.shareAppMessage({title:e,imageUrl:t,query:i})}onShareComplete(e,t){let i=new et(e,t);this.resultFunc.call(this.resultCaller,i)}setDefaultShareContent(e,t,i){this.defTitle=e,this.defImgUrl=t,this.defQuery=i}setDefaultShareHandler(e,t){this.defaultCaller=e,this.defaultFunc=t}setVisibleHandler(e,t){this.visibleCaller=e,this.visibleFunc=t}}class lt extends at{constructor(){super(),this.wx=window.qq}requestToken(e){let t={};t={appid:p.appId,code:e,gamekey:p.gamekey},Ce.log("loginData:",t);let i=`${p.ucenter}/api/user/login2`;this.wx.request({url:i,method:"POST",data:t,success:e=>{Ce.log("qq login request res:",e),e&&e.data&&200==e.data.code&&e.data.data&&e.data.data.open_id?(c.instance.openid=e.data.data.open_id,Ke.instance.setString(nt.OK_ANALYSIS_OPENID,c.instance.openid),this.onLoginComplete(!0,new qe(!0,e.data.data.token,e.data.data.open_id,e.data.data.union_id))):this.onLoginComplete(!1,new qe(!1,"qq.request callback success but request not success"))},fail:e=>{Ce.log("fail:",e),this.onLoginComplete(!1,new qe(!1,`qq.request callback fail,${e}`))}})}}class dt extends st{constructor(){super(),this.wx=window.qq,this.showShareMenu()}}class ht extends st{constructor(){super(),this.wx=window.tt,this.showShareMenu()}}class ct extends at{constructor(){super(),this.wx=window.tt}login(e,t){this.loginCaller=e,this.loginFunc=t,this.wx.login({force:!1,success:e=>{e?this.requestTokenTT(e.code,e.anonymousCode):this.onLoginComplete(!1,new qe(!1,`wx.login callback success but no code,errMsg:${e.errMsg}`))},fail:()=>{this.onLoginComplete(!1,new qe(!1,"wx.login callback fail"))}})}requestTokenTT(e,t){let i={};i=e?{appid:p.appId,code:e,anonymous_code:t,gamekey:p.gamekey}:{appid:p.appId,anonymous_code:t,gamekey:p.gamekey},Ce.log("loginData:",i);let n=`${p.ucenter}/api/user/login2`;this.wx.request({url:n,method:"POST",data:i,success:e=>{Ce.log("tt login request res:",e),e&&e.data&&200==e.data.code&&e.data.data&&e.data.data.open_id?(c.instance.openid=e.data.data.open_id,Ke.instance.setString(nt.OK_ANALYSIS_OPENID,c.instance.openid),this.onLoginComplete(!0,new qe(!0,e.data.data.token,e.data.data.open_id,e.data.data.union_id))):this.onLoginComplete(!1,new qe(!1,"qq.request callback success but request not success"))},fail:e=>{Ce.log("fail:",e),this.onLoginComplete(!1,new qe(!1,`qq.request callback fail,${e}`))}})}applyUserInfoAuthorize(e,t,i,n,a,o,r){if(this.userInfo){let e=new je(!0,r);return void o.call(a,e)}let s=this;this.wx.authorize({scope:"scope.userInfo",success(e){s.wx.getUserInfo({withCredentials:!1,success(e){s.userInfo=e.userInfo;let t=new je(!0,r);o.call(a,t)},fail(e){s.wx.showModal({title:"提示",content:"授权失败,请重试!",success(){},fail(){},complete(){let e=new je(!1,r);o.call(a,e)}})}})},fail(e){s.wx.showModal({title:"提示",content:"授权失败,请重试!",success(){},fail(){},complete(){let e=new je(!1,r);o.call(a,e)}})},complete(){}})}}class pt extends rt{constructor(){super(),this.wx=window.tt,this.wx&&(this.openContext=this.wx.getOpenDataContext())}}class mt{constructor(){this.wx=window.qg}setDefaultShareContent(e,t,i){}setDefaultShareHandler(e,t){}setVisibleHandler(e,t){}showShareMenu(){}share(e,t,i,n,a){-1!=ke.I.compareVersion("1056")?this.wx.share({success:function(){},fail:function(e,t){},cancel:function(){},complete:function(){}}):this.wx.showToast({message:"该功能暂不支持, 请升级平台版本"})}}class ut extends at{constructor(){super(),this.wx=window.qg}login(e,t,i=!1){this.loginCaller=e,this.loginFunc=t,this.wx.login({success:e=>{e?(this.userInfo=e.data,this.userInfo.gender=this.userInfo.sex,this.userInfo.avatarUrl=this.userInfo.avatar,"F"==this.userInfo.sex?this.userInfo.gender=2:"M"==this.userInfo.sex?this.userInfo.gender=1:this.userInfo.gender=0,this.userInfo.location&&(this.userInfo.city=this.userInfo.location),c.instance.oToken=e.token,e.data&&e.data.uid?this.requestToken(e.data):this.onLoginComplete(!1,new qe(!1,"oppo id is null"))):this.onLoginComplete(!1,new qe(!1,`wx.login callback success but no code,errMsg:${e.errMsg}`))},fail:e=>{this.onLoginComplete(!1,new qe(!1,"wx.login callback fail"))}})}requestToken(e){d.instance.addListener(this,this.onLoginUcenter);let t={};t={appid:p.appId,uuid:e.uid,gamekey:p.gamekey},this.url=`${p.ucenter}/api/user/login2`,d.instance.post(this.url,t)}checkUserInfoAuthorize(e,t){t.call(e,!0)}applyUserInfoAuthorize(e,t,i,n,a,o,r){let s=new je(!0,r);return o.call(a,!0,s),null}destroyAuthorizeBtn(e){}getUserInfo(){return this.userInfo}onLoginUcenter(e){e.url==this.url&&(d.instance.removeListener(this,this.onLoginUcenter),e&&e.data&&200==e.data.code&&e.data.data&&e.data.data.open_id?(c.instance.openid=e.data.data.open_id,Ke.instance.setString(nt.OK_ANALYSIS_OPENID,c.instance.openid),this.onLoginComplete(!0,new qe(!0,e.data.data.token,e.data.data.open_id,e.data.data.union_id))):this.onLoginComplete(!1,new qe(!1,"qg.request callback success but request not success")))}}class gt extends at{constructor(){super(),this.wx=window.OPPO}login(e,t,i=!1){this.loginCaller=e,this.loginFunc=t,this.wx.login({packageName:T.I.getConf().pkg,callback:e=>{e?(console.error("login:"),console.error(e),this.userInfo=e,this.userInfo.gender=this.userInfo.sex,this.userInfo.avatarUrl=this.userInfo.avatar,this.userInfo.nickName=this.userInfo.userName,"F"==this.userInfo.sex?this.userInfo.gender=2:"M"==this.userInfo.sex?this.userInfo.gender=1:this.userInfo.gender=0,c.instance.oToken=e.token,this.requestToken(e)):this.onLoginComplete(!1,new qe(!1,`oppo h5.login callback success but no code,errMsg:${e.errMsg}`))}})}requestToken(e){d.instance.addListener(this,this.onLoginUcenter);let t={};t={appid:p.appId,uuid:e.userId,gamekey:p.gamekey},this.url=`${p.ucenter}/api/user/login2`,d.instance.post(this.url,t)}checkUserInfoAuthorize(e,t){t.call(e,!0)}applyUserInfoAuthorize(e,t,i,n,a,o,r){let s=new je(!0,r);return o.call(a,!0,s),null}destroyAuthorizeBtn(e){}getUserInfo(){return this.userInfo}onLoginUcenter(e){e.url==this.url&&(console.log("onLoginUcenter"),console.log(e),d.instance.removeListener(this,this.onLoginUcenter),e&&e.data&&200==e.data.code&&e.data.data&&e.data.data.open_id?(c.instance.openid=e.data.data.open_id,Ke.instance.setString(nt.OK_ANALYSIS_OPENID,c.instance.openid),this.onLoginComplete(!0,new qe(!0,e.data.data.token,e.data.data.open_id,e.data.data.union_id))):this.onLoginComplete(!1,new qe(!1,"oppo h5.request callback success but request not success")))}getLaunchShareQuery(){return null}getLaunchReferrerInfo(){return null}getLaunchScene(){return null}}class ft{}ft.GAME_SDK_CONFIG="GAME_SDK_CONFIG";class yt{constructor(){this.init=!1,"undefined"!=typeof YDSDK&&(this.init=!0)}static get I(){return h.get(yt)}start(){this.init&&YDSDK.start()}load(){this.init&&YDSDK.load({onSuccess:e=>{Ve.instance.triggerListener(ft.GAME_SDK_CONFIG,e)}})}onGameShowEvent(e){this.init&&YDSDK.onShow()}onGameHideEvent(e){this.init&&YDSDK.onHide()}onShare(){this.init&&YDSDK.onShare({})}onLevelStatistics(e){this.init&&YDSDK.onLevelStatistics({guanqia:e.guanqia,type:e.type})}onWeidu(e){this.init&&YDSDK.onWeidu({weidu:e.weidu})}onEvent(e){this.init&&YDSDK.onEvent(e)}getSaleData(){this.init&&YDSDK.getSaleData((e,t)=>{console.log("YDSDK.getSaleData"),console.log(e),console.log(t),console.log(t.isOpenSale),console.log(t.saleData);let i=T.I.getConf();if(i.jumptoGameList=[],e&&t.isOpenSale)for(let e of t.saleData){console.log(e);let t={};t.appId=e.bAppid,t.appName=e.bName,e.piList[0].btitle&&""!=e.piList[0].btitle&&(t.appName=e.piList[0].btitle),t.icon=e.piList[0].bIcon,t.path=e.piList[0].bPath,t.page=e.lcList[0].p,t.grid=e.lcList[0].gList[0].g,t.iconId=e.lcList[0].gList[0].idx,i.jumptoGameList.push(t)}})}onSaleActionUpLoad(e,t){this.init&&YDSDK.onSaleActionUpLoad(e.page,e.grid,e.iconid,e.appid,t)}}class _t{static get I(){return h.get(_t)}constructor(){Ve.instance.addListener(Ne.GameOnShowEvent,this,this.onGameShowEvent),Ve.instance.addListener(Ne.GameOnHideEvent,this,this.onGameHideEvent)}start(){yt.I.start(),this.onEvent({event:"game_start",time:Date.now(),scene:"load_scene"})}load(){yt.I.load()}onGameShowEvent(e){yt.I.onGameShowEvent(e)}onGameHideEvent(e){yt.I.onGameHideEvent(e)}onShare(){yt.I.onShare()}onLevelStatistics(e){yt.I.onLevelStatistics(e)}onWeidu(e){yt.I.onWeidu(e)}onEvent(e){yt.I.onEvent(e)}getSaleData(){yt.I.getSaleData()}onSaleActionUpLoad(e,t){yt.I.onSaleActionUpLoad(e,t)}}class It extends at{constructor(){super(),this.wx=window.qg}login(e,t,i=!1){this.loginCaller=e,this.loginFunc=t,this.wx.login({success:e=>{e?(console.error("---login:",e),this.userInfo=e.data,this.userInfo.gender=this.userInfo.sex,this.userInfo.avatarUrl=this.userInfo.avatar,"F"==this.userInfo.sex?this.userInfo.gender=2:"M"==this.userInfo.sex?this.userInfo.gender=1:this.userInfo.gender=0,this.userInfo.location&&(this.userInfo.city=this.userInfo.location),c.instance.oToken=e.token,e.token?this.requestToken(e.token):(console.log("vivo id is null"),this.onLoginComplete(!1,new qe(!1,"oppo id is null")))):this.onLoginComplete(!1,new qe(!1,`wx.login callback success but no code,errMsg:${e.errMsg}`))},fail:e=>{console.log("fail:",e),this.onLoginComplete(!1,new qe(!1,"wx.login callback fail"))}})}requestToken(e){d.instance.addListener(this,this.onLoginUcenter);let t={};t={appid:p.appId,gamekey:p.gamekey,password:e,app_key:T.I.getConf().app_key,pkg_name:T.I.getConf().pkg},this.url=`${p.ucenter}/api/user/login2`,d.instance.post(this.url,t)}checkUserInfoAuthorize(e,t){t.call(e,!0)}applyUserInfoAuthorize(e,t,i,n,a,o,r){let s=new je(!0,r);return o.call(a,!0,s),null}destroyAuthorizeBtn(e){}getUserInfo(){return this.userInfo}onLoginUcenter(e){e.url==this.url&&(Ce.log("--VIVO---LoginUcenter-----",e),d.instance.removeListener(this,this.onLoginUcenter),e&&e.data&&200==e.data.code&&e.data.data&&e.data.data.open_id?(c.instance.openid=e.data.data.open_id,Ke.instance.setString(nt.OK_ANALYSIS_OPENID,c.instance.openid),this.onLoginComplete(!0,new qe(!0,e.data.data.token,e.data.data.open_id,e.data.data.union_id))):this.onLoginComplete(!1,new qe(!1,"vv.request callback success but request not success")))}}class vt{constructor(){this.buildSDK(),this.dispatcher=new s}static get I(){return h.get(vt)}addListener(e,t,i){this.dispatcher.addListener(e,t,i)}removeListener(e,t,i){this.dispatcher.removeListener(e,t,i)}buildSDK(){Laya.Browser.onMiniGame?"object"==typeof tt?(this.loginSDK=new ct,this.shareSDK=new ht,this.rankSDK=new pt):(this.loginSDK=new at,this.shareSDK=new st,this.paymentSDK=new ot,this.rankSDK=new rt):Laya.Browser.onQQMiniGame?(this.loginSDK=new lt,this.shareSDK=new dt):Laya.Browser.onVVMiniGame?(this.loginSDK=new It,this.shareSDK=new mt):Laya.Browser.onQGMiniGame?this.loginSDK=new ut:ke.I.isOPPOH5Game()?this.loginSDK=new gt:Laya.Browser.onTTMiniGame?(this.loginSDK=new ct,this.shareSDK=new ht,this.rankSDK=new pt):window.FBInstant||(this.loginSDK=new Je,this.shareSDK=new it),this.okAnalysis=new nt,this.setVisibleHandler()}login(e=!1){this.loginSDK&&this.loginSDK.login(this,this.onLogin,e)}onLogin(e){this.dispatcher.triggerListener(vt.LoginApp,e)}checkUserInfoAuthorize(){this.loginSDK&&this.loginSDK.checkUserInfoAuthorize(this,this.onCheckUserInfoAuthorize)}onCheckUserInfoAuthorize(e){this.dispatcher.triggerListener(vt.CheckUserInfoAuthorize,e)}applyUserInfoAuthorize(e,t=0){if(this.loginSDK){let i=Laya.Browser.clientWidth/Laya.stage.width,n=new Laya.Point,a=(n=e.localToGlobal(n)).x*i,o=n.y*i,r=e.width*i,s=e.height*i;return this.loginSDK.applyUserInfoAuthorize(a,o,r,s,this,this.onApplyUserInfoAuthorize,t)}return null}onApplyUserInfoAuthorize(e){this.dispatcher.triggerListener(vt.ApplyUserInfoAuthorize,e)}destroyAuthorizeBtn(e){this.loginSDK&&this.loginSDK.destroyAuthorizeBtn(e)}getUserInfo(){return this.loginSDK?this.loginSDK.getUserInfo():null}getArea(){return this.loginSDK?this.loginSDK.getArea():""}getSex(){return this.loginSDK?this.loginSDK.getSex():0}getLaunchShareQuery(){return this.loginSDK?this.loginSDK.getLaunchShareQuery():null}getLaunchReferrerInfo(){return this.loginSDK?this.loginSDK.getLaunchReferrerInfo():null}getLaunchScene(){return this.loginSDK?this.loginSDK.getLaunchScene():null}onVisible(e,t){this.dispatcher.triggerListener(vt.VisibleChange,{isVisible:e,res:t})}share(e,t,i){this.shareSDK&&this.shareSDK.share(e,t,i,this,this.onShare),_t.I.onShare()}onShare(e){this.dispatcher.triggerListener(vt.ShareApp,e)}setDefaultShareContent(e,t,i){this.shareSDK&&this.shareSDK.setDefaultShareContent(e,t,i)}setDefaultShareHandler(e,t){this.shareSDK&&this.shareSDK.setDefaultShareHandler(e,t)}setVisibleHandler(){this.shareSDK&&this.shareSDK.setVisibleHandler(this,this.onVisible)}payment(e){this.paymentSDK&&this.paymentSDK.pay(e,this,this.onPayment)}onPayment(e){this.dispatcher.triggerListener(vt.Payment,e)}openRank(e){this.rankSDK&&this.rankSDK.openRank(e)}closeRank(){this.rankSDK&&this.rankSDK.closeRank()}requestRank(e=1,t="rank"){this.rankSDK&&this.rankSDK.requestRank(e,t)}pushRank(e="rank",t,i="关"){this.rankSDK&&this.rankSDK.pushScore(e,t,i)}openSurpass(e,t){this.rankSDK&&this.rankSDK.openSurpass(e,t)}closeSurpass(){this.rankSDK&&this.rankSDK.closeSurpass()}initAnalysis(){this.okAnalysis&&this.okAnalysis.initAnalysis()}traceEvent(e,t){this.okAnalysis&&this.okAnalysis.traceEvent(e,t)}traceNavigateEvent(e,t,i){this.okAnalysis&&this.okAnalysis.traceNavigateEvent(e,t,i)}traceCustomEvent(e,t){this.okAnalysis&&this.okAnalysis.traceCustomEvent(e,t)}updateGroup(){this.okAnalysis&&this.okAnalysis.updateGroup()}}vt.ShareApp="ShareApp",vt.LoginApp="LoginApp",vt.Payment="Payment",vt.CheckUserInfoAuthorize="CheckUserInfoAuthorize",vt.ApplyUserInfoAuthorize="ApplyUserInfoAuthorize",vt.VisibleChange="VisibleChange";class wt{static clamp(e,t,i){return e>i?i:e<t?t:e}static clamp01(e){return wt.clamp(e,0,1)}static lerp(e,t,i){return i>0&&i<1?(t-e)*i+e:i<=0?e:t}static random(e,t){return Math.round(Math.random()*(t-e))+e}static randomFloat(e,t){return Math.random()*(t-e)+e}static similar(e,t,i=.1){let n=e-t;return n>-i&&n<i}static isInRegion(e,t){let i,n,a,o,r,s,l=0,d=t.length;for(let h=0;h<d;h++){if(e.x==t[h].x&&e.y==t[h].y)return!0;if(i=t[h%d],n=t[(h+1)%d],a=i.x,r=n.x,(o=i.y)==(s=n.y))continue;if(e.y<Math.min(o,s))continue;if(e.y>Math.max(o,s))continue;r-(r-a)*(s-e.y)/(s-o)<e.x||l++}return l%2==1}static get2VectorAngle(e,t){let i=e.x*t.x+e.y*t.y,n=Math.sqrt(e.x*e.x+e.y*e.y)*Math.sqrt(t.x*t.x+t.y*t.y);return 0!=n?i/n:0}static getAngleByVector(e,t){if(0===t){if(e<0)return 270;if(e>=0)return 90}if(0===e)return t>=0?0:180;let i=Math.abs(t)/Math.abs(e),n=0;return t>0&&e<0?n=270+180*Math.atan(i)/Math.PI:t>0&&e>0?n=90-180*Math.atan(i)/Math.PI:t<0&&e<0?n=270-180*Math.atan(i)/Math.PI:t<0&&e>0&&(n=90+180*Math.atan(i)/Math.PI),n}static changeAngle(e,t,i){let n,a,o,r,s,l,d,h,c,p;return n=Math.cos(.5*i),a=Math.sin(.5*i),s=Math.cos(.5*t),{qx:h=n*(l=Math.sin(.5*t))*(o=Math.cos(.5*e))+a*s*(r=Math.sin(.5*e)),qy:c=n*s*r-a*l*o,qz:p=a*s*o-n*l*r,qw:d=n*s*o+a*l*r}}static getRandomArray(e,t,i){const n=[];for(let i=e;i<=t;i++)n.push(i);const a=[],o=n.length>=i?i:n.length;for(let e=0;e<=o-1;e++){const e=Math.floor(Math.random()*n.length);a.push(n[e]),n.splice(e,1)}return a}static randomArray(e,t=5){let i=e.length;for(;0!=t;){t--;let n=wt.random(0,i-1),a=wt.random(0,i-1),o=e[n];e[n]=e[a],e[a]=o}}static angle2rad(e){return.017453293*e}static rad2angle(e){return e/.017453293}static get2DAngle(e,t,i,n){let a=i-e,o=n-t;if(0===o){if(a<0)return 270;if(a>=0)return 90}if(0===a){if(o>=0)return 0;if(o<0)return 180}let r=0;return 0!=a&&(r=Math.atan(o/a)/Math.PI*180),a<0&&(r+=180),r<0&&(r+=360),r}static getNewUuid(){return++wt.globalId}static plucker(e,t){return[e[0]*t[1]-t[0]*e[1],e[0]*t[2]-t[0]*e[2],e[0]-t[0],e[1]*t[2]-t[1]*e[2],e[2]-t[2],t[1]-e[1]]}static sideOp(e,t){return e[0]*t[4]+e[1]*t[5]+e[2]*t[3]+e[3]*t[2]+e[4]*t[0]+e[5]*t[1]}static checkLineAndTriangle(e,t,i,n,a){let o=this.plucker(n,i),r=this.plucker(a,n),s=this.plucker(i,a),l=this.plucker(e,t),d=this.sideOp(l,o),h=this.sideOp(l,r),c=this.sideOp(l,s);return 0==d&&0==h&&0==c?1:d>0&&h>0&&c>0||d<0&&h<0&&c<0?2:0==d&&h*c>0||0==h&&d*c>0||0==c&&d*h>0?3:0==d&&0==h||0==d&&0==c||0==h&&0==c?4:0}static CROSS(e,t,i){e[0]=t[1]*i[2]-t[2]*i[1],e[1]=t[2]*i[0]-t[0]*i[2],e[2]=t[0]*i[1]-t[1]*i[0]}static DOT(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}static SUB(e,t,i){e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2]}static intersect_triangle(e,t,i,n,a){let o=[],r=[],s=[],l=[],d=[];this.SUB(o,n,i),this.SUB(r,a,i),this.CROSS(l,t,r);let h=this.DOT(o,l);if(h>-wt.EPSILON&&h<wt.EPSILON)return[];let c=1/h;this.SUB(s,e,i);let p=this.DOT(s,l)*c;if(p<0||p>1)return[];this.CROSS(d,s,o);let m=this.DOT(t,d)*c;return m<0||p+m>1?[]:[this.DOT(r,d)*c,p,m]}}wt.globalId=Math.floor(516*Math.random()),wt.EPSILON=1e-10,function(e){e[e.InviteFriend=1e4]="InviteFriend",e[e.DoubleCoin=10001]="DoubleCoin",e[e.Rank=10002]="Rank"}(W||(W={}));class St{constructor(){vt.I.addListener(vt.ShareApp,this,this.onShareApp)}static get I(){return h.get(St)}initDefaultShare(){vt.I.setDefaultShareHandler(this,this.randomDefaultShareContent)}randomDefaultShareContent(){let e,t=St.ShareList.length;if(t>0){let i=wt.random(1,t);e=St.ShareList[i-1]}let i=new $e;c.instance.uid&&""!=c.instance.uid&&i.add("inviter_gid",c.instance.uid),vt.I.setDefaultShareContent(e.des,this.toShareImgUrl(e.icon),i.ToString())}toShareImgUrl(e){return Laya.ResourceVersion.manifest&&Laya.ResourceVersion.manifest[e]&&(e=Laya.ResourceVersion.manifest[e]),e}share(e,t,i,n){if(Laya.Browser.onMiniGame);else if(Laya.Browser.onQQMiniGame);else if(!Laya.Browser.onVVMiniGame)return Laya.Browser.onQGMiniGame,!1;let a,o=St.ShareList.length;if(o>0){let e=wt.random(1,o);a=St.ShareList[e-1]}t&&(a.des=t),i&&(a.icon=i);let r=new $e;return a.share_id?r.add("share_id",a.share_id):r.add("share_id",e),n&&(n.room_id&&r.add("room_id",n.room_id),n.port&&r.add("port",n.port),n.room_index&&r.add("room_index",n.room_index)),c.instance.uid&&""!=c.instance.uid&&r.add("inviter_gid",c.instance.uid),vt.I.share(a.des,this.toShareImgUrl(a.icon),r.ToString()),!0}onShareApp(e){let t=new et;t.success=!1,e.success?Laya.timer.once(this.getStayTime(),this,this.shareSuccess,[t]):(t.success=!1,Ve.instance.triggerListener("shareApp",t))}shareSuccess(e){e.success=!0,Ve.instance.triggerListener("shareApp",e)}getStayTime(){return St.ShareTime}}St.ShareList=[],St.ShareTime=1e3;class Lt{constructor(){this.mVidePlayTime=0,this.sdk=window.wx,this.initAdvert()}initAdvert(){this.initVideoAd(),this.mCloseVideoCaller=null,this.mCloseVideoFunc=null,this.mShowVideoCaller=null,this.mShowVideoFunc=null,this.mCb=null,this.mHideFlag=0,this.mVidePlayTime=0,Ve.instance.addListener("shareApp",this,this.onShareResultEvent),Ve.instance.addListener(Ne.GameOnShowEvent,this,this.gameOnShowEvent),Ve.instance.addListener(Ne.GameOnHideEvent,this,this.gameOnHideEvent)}initVideoAd(){this.mAdVideoMap={}}gameOnShowEvent(e){2==this.mHideFlag&&(this.mHideFlag=3)}gameOnHideEvent(e){1==this.mHideFlag&&(this.mHideFlag=2)}getVideoAd(e){let t=T.I.getConf().ad.video[e];if(Ce.log("getVideoAd key:",t),!this.mAdVideoMap[e.toString()]&&t&&""!=t&&this.sdk.createRewardedVideoAd){Ce.log("createVideoAd adkey:"+t);let i=this.sdk.createRewardedVideoAd({adUnitId:t});this.mAdVideoMap[e.toString()]=i}return this.mAdVideoMap[e.toString()]}showVideoAd(e,t,i,n,a){this.mCloseVideoCaller=t,this.mCloseVideoFunc=i,this.mShowVideoCaller=n,this.mShowVideoFunc=a,Laya.SoundManager.musicMuted=!0,Laya.SoundManager.soundMuted=!0,He.I.setSoundVolume(0),He.I.stopBGM();let o=this.getVideoAd(e);o?(o.onLoad(()=>{Ce.log("激励视频 广告加载成功")}),this.mCb&&o.offClose(this.mCb),this.mCb=(e=>{this.onCloseVideo(e)}),o.onClose(this.mCb),o.offError(),o.onError(e=>{this.videoAdErrfun(e)}),this.mHideFlag=1,o.show().then(()=>{Ce.log("激励视频 广告显示成功")}).catch(()=>{o.load().then(()=>o.show().catch(e=>{this.mHideFlag=0,this.onVideoLoadFail(),Ce.log("激励视频 广告显示失败"+e)}))})):(this.onVideoLoadFail(),this.mHideFlag=0)}videoAdErrfun(e){this.onVideoLoadFail(),this.mHideFlag=0,Ce.log("激励视频 报错 res:",e)}onVideoLoadFail(){this.mIsListenShare=!1,St.I.share(W.InviteFriend)?this.mIsListenShare=!0:this.onCloseVideo({isEnded:!1})}onShareResultEvent(e){this.mIsListenShare&&(this.mIsListenShare=!1,this.onCloseVideo({isEnded:e.success}))}onCloseVideo(e){let t=!1;(e&&e.isEnded||void 0===e)&&(t=!0),Laya.SoundManager.musicMuted=!1,Laya.SoundManager.soundMuted=!1,He.I.setSoundVolume(1),He.I.playBGM("bgm");let i=z.Failed;t&&(i=3==this.mHideFlag?z.Jump:z.Normal),this.mHideFlag=0,this.mCloseVideoCaller&&this.mCloseVideoFunc&&this.mCloseVideoFunc.call(this.mCloseVideoCaller,i)}}class Et extends Lt{constructor(){super(),this.sdk=window.tt}showVideoAd(e,t,i,n,a){this.mCloseVideoCaller=t,this.mCloseVideoFunc=i,this.mShowVideoCaller=n,this.mShowVideoFunc=a,Laya.SoundManager.musicMuted=!0,Laya.SoundManager.soundMuted=!0,He.I.setSoundVolume(0),He.I.stopBGM();let o=this.getVideoAd(e);o?(o.offError(this.videoAdErrfun.bind(this)),o.onError(this.videoAdErrfun.bind(this)),o.show().then(()=>{}).catch(e=>{o.load().then(()=>{o.show()})})):St.I.share(W.InviteFriend)||this.onCloseVideo({isEnded:!0})}}class At extends Lt{constructor(){super(),this.sdk=window.qq}}class xt{}xt.MoonGameBoxPanel="MoonGameBoxPanel",xt.MoonGuideGesturePanel="MoonGuideGesturePanel",xt.MoonTipPanel="MoonTipPanel",xt.MoonConfirmPanel="MoonConfirmPanel",xt.MoonMainAdPanel="MoonMainAdPanel",xt.MoonMainAd2Panel="MoonMainAd2Panel",xt.MoonResultsPanel="MoonResultsPanel",xt.MoonResults2Panel="MoonResults2Panel";class Tt extends xt{}Tt.LoadingPanel="LoadingPanel",Tt.BattleFailPanel="BattleFailPanel",Tt.BattleWinPanel="BattleWinPanel",Tt.BattleMainPanel="BattleMainPanel",Tt.BattleGesturePanel="BattleGesturePanel",Tt.BattlePipeiPanel="BattlePipeiPanel",Tt.BattleFreeUsePanel="BattleFreeUsePanel",Tt.BattleRandomPanel="BattleRandomPanel",Tt.BattleCountDownPanel="BattleCountDownPanel",Tt.TopBarPanel="TopBarPanel",Tt.AddCoinPanel="AddCoinPanel",Tt.BattleOfflinePanel="BattleOfflinePanel",Tt.BattleMedalPanel="BattleMedalPanel",Tt.ContactGMPanel="ContactGMPanel",Tt.BattleSettingPanel="BattleSettingPanel",Tt.BattleWarnningPanel="BattleWarnningPanel",function(e){e[e.Normal=0]="Normal",e[e.Top=1]="Top",e[e.Dialog=2]="Dialog",e[e.Waiting=3]="Waiting",e[e.Last=4]="Last"}(K||(K={}));class bt{constructor(){this.dicLayerNode=new Oe}static get instance(){return bt.getInstance()}static getInstance(){return null==bt.mInstance&&(bt.mInstance=new bt),bt.mInstance}get uiRoot(){return this.mRoot}init(e){this.mRoot=this.createNode("UIRoot"),e.addChild(this.mRoot);for(let e=0;e<K.Last;e++){let t=this.createNode(K[e]);this.uiRoot.addChild(t),this.dicLayerNode.add(e,t)}}createNode(e){let t=new Laya.UIComponent;return t.mouseEnabled=!0,t.mouseThrough=!0,t.left=0,t.right=0,t.top=0,t.bottom=0,t.name=e,t}getLayer(e){return this.dicLayerNode.get(e)}enableEvent(e){for(let t in this.dicLayerNode.table){this.dicLayerNode.get(t).mouseEnabled=e}}}!function(e){e[e.Idle=0]="Idle",e[e.Preparing=1]="Preparing",e[e.Success=2]="Success",e[e.Fail=3]="Fail"}(j||(j={}));class Rt{constructor(e,t){this.mPath=e,this.mCtrl=t,this.state=j.Idle,this.mIsShow=!1}get path(){return this.mPath}get ctrl(){return this.mCtrl}get view(){return this.mView}get isShow(){return this.mIsShow}initial(){this.mCtrl.initial(),this.prepareView()}dispose(){this.state==j.Success&&this.mCtrl.end(),this.mCtrl.dispose(),this.mCtrl=null,this.state==j.Success&&(this.viewParent.removeChild(this.mView),this.mView.destroy(),this.mView=null)}show(e){if(this.args=e,this.mIsShow){if(this.viewParent){this.mView.visible||(this.mView.visible=!0);let e=this.viewParent.numChildren;e=e>0?e-1:0,this.viewParent.setChildIndex(this.mView,e)}}else this.mIsShow=!0,this.state==j.Success?this.onShow():this.prepareView()}hide(){this.mIsShow&&(this.mIsShow=!1,this.state==j.Success&&(this.mCtrl.hide(),this.viewParent.removeChild(this.mView)))}update(e){this.state==j.Success&&this.mIsShow&&this.mCtrl.update(e)}visiable(e){this.mView&&this.mView.visible!=e&&this.mIsShow&&(this.mView.visible=e)}resize(){this.state==j.Success&&this.mCtrl.resize()}prepareView(){this.state!=j.Idle&&this.state!=j.Fail||(this.state=j.Preparing,this.mCtrl.prepare(this,this.onViewComplete))}onViewComplete(e,t,i){e?(this.state=j.Success,this.mView=t,this.viewParent=bt.instance.getLayer(i),this.mView.name=this.mPath,this.mCtrl.start(),this.mCtrl.resize(),this.mIsShow&&this.onShow()):this.state=j.Fail}onShow(){this.viewParent.addChild(this.mView),this.mCtrl.show(this.args),this.args=null}}class Mt{constructor(){this.PathPattern=/(?:\/)/g,this.dicPanels=new n}static get instance(){return Mt.getInstance()}static getInstance(){return null==Mt.mInstance&&(Mt.mInstance=new Mt),Mt.mInstance}init(e){this.panelCreator=e}show(e,t){let i=this.dicPanels.get(e);null==i&&(i=new Rt(e,this.panelCreator.createPanel(e)),this.dicPanels.add(e,i),i.initial()),i.show(t)}hide(e){let t=this.dicPanels.get(e);null!=t&&t.hide()}destroy(e){let t=this.dicPanels.get(e);null!=t&&(t.hide(),t.dispose(),this.dicPanels.remove(e))}update(e){for(let t in this.dicPanels.table)this.dicPanels.table[t].update(e)}visiable(e,t){let i=this.dicPanels.get(e);null!=i&&i.visiable(t)}resize(){for(let e in this.dicPanels.table)this.dicPanels.table[e].resize()}getPanel(e){let t=this.dicPanels.get(e);return null!=t?t.ctrl:null}isShow(e){return!!this.dicPanels.containsKey(e)&&this.dicPanels.get(e).isShow}findChild(e,t){if(!t)return null;let i=t.split(this.PathPattern),n=e,a=i.length;for(;a>0&&n;){let e=i[i.length-a];n="."==e?n.parent:n.getChildByName(e),a--}return n}}class Ct extends Lt{constructor(){super(),this.mVVGreateVideoTime=0,this.sdk=window.qg}getVideoAd(e){let t=T.I.getConf().ad.video[e];if(Ce.log("VVgetVideoAd key:",t),!this.mAdVideoMap[e.toString()]&&t&&""!=t&&this.sdk.createRewardedVideoAd){Ce.log("VVcreateVideoAd adkey:"+t);let i=null;-1!=ke.I.compareVersion("1041")&&(i=this.sdk.createRewardedVideoAd({posId:t})),this.mAdVideoMap[e.toString()]=i}return this.mAdVideoMap[e.toString()]}showVideoAd(e,t,i,n,a){if(this.mCloseVideoCaller=t,this.mCloseVideoFunc=i,this.mShowVideoCaller=n,this.mShowVideoFunc=a,(new Date).getTime()-this.mVVGreateVideoTime<=3e3)return Mt.instance.show(Tt.MoonTipPanel,"暂无视频, 请稍后再试!!!!!"),null;this.mVVGreateVideoTime=(new Date).getTime(),Laya.SoundManager.musicMuted=!0,Laya.SoundManager.soundMuted=!0,He.I.setSoundVolume(0),He.I.stopBGM();let o=this.getVideoAd(e);if(o){this.mKey=e,o.offError(this.videoAdErrfun.bind(this)),o.onError(this.videoAdErrfun.bind(this));const t=e=>{this.onCloseVideo(e)};o.offClose(t),o.onClose(t),o.offLoad(),o.onLoad(()=>{Ce.log("VV激励视频加载完成");let e=o.show();e&&e.then(()=>{console.log("VV激励视频广告展示完成")}).catch(e=>{this.videoAdErrfun(JSON.stringify(e)),Ce.log("VV激励广告展示失败"+JSON.stringify(e))})});let i=o.load();i&&i.catch(e=>{Ce.log("vv激励广告load失败"+JSON.stringify(e)),this.videoAdErrfun(JSON.stringify(e))})}else this.onCloseVideo({isEnded:!0})}videoAdErrfun(e){Mt.instance.show(Tt.MoonTipPanel,"暂无视频, 请稍后再试"),this.onVideoLoadFail(),this.mHideFlag=0}onVideoLoadFail(){this.onCloseVideo({isEnded:!1})}}class Ot extends Lt{constructor(){super(),this.sdk=window.qg}getVideoAd(e){let t=T.I.getConf().ad.video[e];if(Ce.log("getVideoAd key:",t),!this.mAdVideoMap[e.toString()]&&t&&""!=t&&this.sdk.createRewardedVideoAd){Ce.log("createVideoAd adkey:"+t);let i=null;-1!=ke.I.compareVersion("1051")&&(Ce.log("onQGMiniGame createVideoAd adkey:"+t),i=this.sdk.createRewardedVideoAd({adUnitId:t})),i&&(this.mCb&&i.offClose(this.mCb),this.mCb=(e=>{this.onCloseVideo(e),(e&&e.isEnded||void 0===e)&&(i.offLoad(null),i.load())}),i.onClose(this.mCb),i.load()),this.mAdVideoMap[e.toString()]=i}return this.mAdVideoMap[e.toString()]}showVideoAd(e,t,i,n,a){this.mCloseVideoCaller=t,this.mCloseVideoFunc=i,this.mShowVideoCaller=n,this.mShowVideoFunc=a,Laya.SoundManager.musicMuted=!0,Laya.SoundManager.soundMuted=!0,He.I.setSoundVolume(0),He.I.stopBGM();let o=this.getVideoAd(e);o?(this.mKey=e,o.offError(this.videoAdErrfun.bind(this)),o.onError(this.videoAdErrfun.bind(this)),-1!=ke.I.compareVersion("1051")&&(o.load(),o.onLoad(()=>{o.show()}))):St.I.share(W.InviteFriend)||this.onCloseVideo({isEnded:!0})}videoAdErrfun(e){if(super.videoAdErrfun(e),Mt.instance.show(Tt.MoonTipPanel,"暂无视频, 请稍后再试"),this.mAdVideoMap[this.mKey.toString()]){let e=this.mAdVideoMap[this.mKey.toString()];e&&(e.destroy(),e=null),this.mAdVideoMap[this.mKey.toString()]=null}}}class Dt{constructor(){this.sdk=window.wx,this.lastTime=0,this.initAdvert()}initAdvert(){this.initInterstitialAd(),this.mCloseVideoCallerInterstitial=null,this.mCloseVideoFuncInterstitial=null,this.mShowVideoCallerInterstitial=null,this.mShowVideoFuncInterstitial=null,this.mInterstitialCb=null}initInterstitialAd(){this.mAdInterstitialMap={}}getInterstitialAd(e){let t=T.I.getConf().ad.interstitial[e];if(!this.mAdInterstitialMap[e.toString()]&&t&&""!=t){Ce.log("createInterstitialoAd key:"+t);let i=null;(i=this.sdk.createInterstitialAd({adUnitId:t}))&&(i.onLoad(()=>{Ce.log("WX 插屏 广告加载成功")}),this.mInterstitialCb&&i.offClose(this.mInterstitialCb),this.mInterstitialCb=(e=>{this.onCloseVideoInterstitial(e)}),i.onClose(this.mInterstitialCb)),this.mAdInterstitialMap[e.toString()]=i}return this.mAdInterstitialMap[e.toString()]}showInterstitialAd(e,t,i,n,a){}onCloseVideoInterstitial(e){let t=!1;e&&e.isEnded||void 0===e?(t=!0,Ce.log("正常播放结束，可以下发游戏奖励")):Ce.log("关闭播放结束，不可以下发游戏奖励"),this.mCloseVideoCallerInterstitial&&this.mCloseVideoFuncInterstitial&&this.mCloseVideoFuncInterstitial.call(this.mCloseVideoCallerInterstitial,t)}}class Vt extends Dt{constructor(){super(),this.mVVGreateInterstitialTime=0,this.sdk=window.qg}getInterstitialAd(e){let t=T.I.getConf().ad.interstitial[e];if(!this.mAdInterstitialMap[e.toString()]&&t&&""!=t){Ce.log("createInterstitialoAd key:"+t);let i=null;this.sdk.createInterstitialAd&&-1!=ke.I.compareVersion("1031")&&(i=this.sdk.createInterstitialAd({posId:t})),i&&(i.onLoad(()=>{}),this.mInterstitialCb&&i.offClose(this.mInterstitialCb),this.mInterstitialCb=(e=>{this.onCloseVideoInterstitial(e)}),i.onClose(this.mInterstitialCb)),this.mAdInterstitialMap[e.toString()]=i}return this.mAdInterstitialMap[e.toString()]}showInterstitialAd(e,t,i,n,a){this.mCloseVideoCallerInterstitial=t,this.mCloseVideoFuncInterstitial=i,this.mShowVideoCallerInterstitial=n,this.mShowVideoFuncInterstitial=a;let o=this.getInterstitialAd(e),r=!0;if((new Date).getTime()-this.mVVGreateInterstitialTime<=3e3&&(r=!1),o&&r){o.offError(),o.onError(e=>{this.onCloseVideoInterstitial({isEnded:!0})});let t=o.show();this.mVVGreateInterstitialTime=(new Date).getTime(),t&&t.then(()=>{Ce.log("插屏广告展示成功")}).catch(t=>{switch(this.mAdInterstitialMap[e.toString()]=null,t.code){case 30003:Ce.log("新用户1天内不能曝光Banner，请将手机时间调整为1天后，退出游戏重新进入");break;case 30009:Ce.log("10秒内调用广告次数超过1次，10秒后再调用");break;case 30002:Ce.log("load广告失败，重新加载广告"),this.vivoRetryShow(e);break;case 3e4:Ce.log("广告对象长时间不用会被回收导致或者是创建初始化未完成或未初始化 (等待初始化首次加载完成)"),this.vivoRetryShow(e);break;default:Ce.log("插屏广告展示失败"),Ce.log(JSON.stringify(t))}})}else this.onCloseVideoInterstitial({isEnded:!0})}vivoRetryShow(e){let t=T.I.getConf().ad.interstitial[e];if(!this.mAdInterstitialMap[e.toString()]&&this.sdk.createInterstitialAd&&t&&""!=t){let e=this.sdk.createInterstitialAd({posId:t}).show();e&&e.then(()=>{Ce.log("插屏广告展示成功")}).catch(e=>{Ce.log("插屏广告展示失败-重试"),Ce.log(JSON.stringify(e))})}}}class Nt extends Dt{constructor(){super(),this.sdk=window.qg}getInterstitialAd(e){let t=T.I.getConf().ad.interstitial[e];if(!this.mAdInterstitialMap[e.toString()]&&t&&""!=t){Ce.log("createInterstitialoAd key:"+t);let i=null;this.sdk.createInsertAd&&-1!=ke.I.compareVersion("1051")&&(Ce.log("onQGMiniGame createInterstitialoAd key:"+t),i=this.sdk.createInsertAd({adUnitId:t})),i&&(this.mInterstitialCb&&i.offClose(this.mInterstitialCb),this.mInterstitialCb=(e=>{this.onCloseVideoInterstitial(e)}),i.onClose(this.mInterstitialCb)),this.mAdInterstitialMap[e.toString()]=i}return this.mAdInterstitialMap[e.toString()]}showInterstitialAd(e,t,i,n,a){this.mCloseVideoCallerInterstitial=t,this.mCloseVideoFuncInterstitial=i,this.mShowVideoCallerInterstitial=n,this.mShowVideoFuncInterstitial=a;let o=this.getInterstitialAd(e);o?(o.offError(),o.onError(e=>{this.onCloseVideoInterstitial({isEnded:!0})}),-1!=ke.I.compareVersion("1051")&&(o.load(),o.onLoad(()=>{o.show()}))):this.onCloseVideoInterstitial({isEnded:!0})}}class kt{constructor(){this.sdk=window.wx,this.initAdvert()}initAdvert(){this.initBoxAd()}initBoxAd(){this.mAdBoxMap={}}getBoxAd(e,t){let i=T.I.getConf().ad.box[e];if(!this.mAdBoxMap[e.toString()]&&i&&""!=i){let t=null;"function"==typeof this.sdk.createGridAd&&((t=this.sdk.createGridAd({adUnitId:T.I.getConf().ad.box[e],adTheme:"white",gridCount:5,style:{left:(Laya.Browser.clientWidth-330)/2,top:(Laya.Browser.clientHeight-100)/2,width:330,opacity:.8}})).style.left=(Laya.Browser.clientWidth-t.style.width)/2,t.style.top=(Laya.Browser.clientHeight-100)/2),this.mAdBoxMap[e.toString()]=t}return this.mAdBoxMap[e.toString()]}showBox(e){let t=this.getBoxAd(e);return t&&(t.show(),t.style.top=120),t}hideBox(e){let t=this.getBoxAd(e);t&&t.hide()}}class Pt extends kt{constructor(){super(),this.sdk=window.qq}getBoxAd(e,t){let i=T.I.getConf().ad.box[e];if(!this.mAdBoxMap[e.toString()]&&i&&""!=i){let t=this.sdk.createAppBox({adUnitId:T.I.getConf().ad.box[e]});this.mAdBoxMap[e.toString()]=t}return this.mAdBoxMap[e.toString()]}showBox(e){let t=this.getBoxAd(e);return t&&t.load().then(()=>{t.show()}),t}hideBox(e){}}class Bt extends Dt{constructor(){super(),this.sdk=window.qq}getInterstitialAd(e){let t=T.I.getConf().ad.interstitial[e];if(!this.mAdInterstitialMap[e.toString()]&&t&&""!=t&&-1!=ke.I.compareVersion("1.12.0")){Ce.log("QQ createInterstitialoAd key:"+t);let i=null;(i=this.sdk.createInterstitialAd({adUnitId:t}))&&(Ce.log("QQ 222 createInterstitialoAd key:"+t),i.load().catch(e=>{Ce.error("QQ 222 createInterstitialoAd load error",e)}),i.onLoad(()=>{Ce.log("WX 插屏 广告加载成功")}),this.mInterstitialCb&&i.offClose(this.mInterstitialCb),this.mInterstitialCb=(e=>{this.onCloseVideoInterstitial(e)}),i.onClose(this.mInterstitialCb)),this.mAdInterstitialMap[e.toString()]=i}return this.mAdInterstitialMap[e.toString()]}showInterstitialAd(e,t,i,n,a){this.mCloseVideoCallerInterstitial=t,this.mCloseVideoFuncInterstitial=i,this.mShowVideoCallerInterstitial=n,this.mShowVideoFuncInterstitial=a;let o=this.getInterstitialAd(e);o?(o.offError(),o.onError(e=>{this.onCloseVideoInterstitial({isEnded:!0}),Ce.log("QQ插屏视频 广告加载失败 res:",e)}),o.show().catch(()=>{o.load().then(()=>o.show()).catch(e=>{this.onCloseVideoInterstitial({isEnded:!0}),Ce.log("QQ 插屏 广告显示失败"+e)})})):this.onCloseVideoInterstitial({isEnded:!0})}}class Gt{constructor(){this.initAdvert()}initAdvert(){this.initVideoAd(),this.mCloseVideoCaller=null,this.mCloseVideoFunc=null,this.mShowVideoCaller=null,this.mShowVideoFunc=null,this.mCb=null}initVideoAd(){this.mAdVideoMap={},Re.I.preloadRewardAD()}getVideoAd(e){return Re.I.isRewardADLoaded()}showVideoAd(e,t,i,n,a){this.mCloseVideoCaller=t,this.mCloseVideoFunc=i,this.mShowVideoCaller=n,this.mShowVideoFunc=a,Re.I.onVideoSuccess=(()=>{this.onCloseVideo({isEnded:!0})}),Re.I.onVideoFail=(()=>{this.videoAdErrfun(null)}),Re.I.onVideoLoadedFail=(()=>{this.videoAdErrfun(null)}),Re.I.playRewardAD()}videoAdErrfun(e){this.onCloseVideo({isEnded:!1})}onCloseVideo(e){let t=!1;(e&&e.isEnded||void 0===e)&&(t=!0),this.mCloseVideoCaller&&this.mCloseVideoFunc&&this.mCloseVideoFunc.call(this.mCloseVideoCaller,t)}}class Ft{constructor(){this.mVidePlayTime=0,this.sdk=window.wx,this.initAdvert()}initAdvert(){this.initVideoAd(),this.mCloseVideoCaller=null,this.mCloseVideoFunc=null,this.mShowVideoCaller=null,this.mShowVideoFunc=null,this.mCb=null,this.mHideFlag=0,this.mVidePlayTime=0}initVideoAd(){if(this.mAdVideoMap={},T.I.getConf().ad.video.length>0)for(let e=0;e<T.I.getConf().ad.video.length;e++){let t=T.I.getConf().ad.video[e];YDSDK.initShareVideo({moduleId:t,onUpdate:(e,t)=>{console.error("YDSDK.initShareVideo"),console.error(e),console.error(t)}})}}getVideoAd(e){let t=T.I.getConf().ad.video[e];return console.error("getVideoAd"),console.error("adkey:"+e),console.error("key:"+t),null}showVideoAd(e,t,i,n,a){this.mCloseVideoCaller=t,this.mCloseVideoFunc=i,this.mShowVideoCaller=n,this.mShowVideoFunc=a,Laya.SoundManager.musicMuted=!0,Laya.SoundManager.soundMuted=!0,He.I.setSoundVolume(0),He.I.stopBGM();let o=T.I.getConf().ad.video[e];console.error("showVideoAd"),console.error("adkey:"+e),console.error("videoAd:"+o),YDSDK.onShareVideo({moduleId:o,onFail:(e,t,i)=>{console.log("===onFail=m===",e),console.log("===onFail=type===",t),console.log("===onFail=errCode===",i),this.onCloseVideo({isEnded:!1})},onSuccess:(e,t,i)=>{console.log("===onSuccess=m===",e),console.log("===onSuccess=type===",t),console.log("===onSuccess=type===",i),this.onCloseVideo({isEnded:!0})}})}onCloseVideo(e){let t=!1;(e&&e.isEnded||void 0===e)&&(t=!0),Laya.SoundManager.musicMuted=!1,Laya.SoundManager.soundMuted=!1,He.I.setSoundVolume(1),He.I.playBGM("bgm");let i=z.Failed;t&&(i=3==this.mHideFlag?z.Jump:z.Normal),this.mHideFlag=0,this.mCloseVideoCaller&&this.mCloseVideoFunc&&this.mCloseVideoFunc.call(this.mCloseVideoCaller,i)}}class zt{constructor(){this.mVidePlayTime=0,this.gameGad=!1,this.timestamp=0,this.sdk=window.wx,this.initAdvert()}initAdvert(){this.initVideoAd(),this.mCloseVideoCaller=null,this.mCloseVideoFunc=null,this.mShowVideoCaller=null,this.mShowVideoFunc=null,this.mCb=null,this.mHideFlag=0,this.mVidePlayTime=0}initVideoAd(){this.mAdVideoMap={}}getVideoAd(e){let t=T.I.getConf().ad.video[e];if(Ce.log("getVideoAd key:",t),!this.mAdVideoMap[e.toString()]&&t&&""!=t&&this.sdk.createRewardedVideoAd){Ce.log("createVideoAd adkey:"+t);let i=this.sdk.createRewardedVideoAd({adUnitId:t});i&&(i.onLoad(()=>{this.mVidePlayTime=(new Date).getTime(),console.log("激励视频 广告加载成功")}),i.onError(e=>{console.log("激励视频 广告加载失败 res:",e)}),this.mCb&&i.offClose(this.mCb),this.mCb=(e=>{this.onCloseVideo(e),(e&&e.isEnded||void 0===e)&&i.load()}),i.onClose(this.mCb),i.load()),this.mAdVideoMap[e.toString()]=i}return this.mAdVideoMap[e.toString()]}showVideoAd(e,t,i,n,a){this.gameGad=!0,this.mCloseVideoCaller=t,this.mCloseVideoFunc=i,this.mShowVideoCaller=n,this.mShowVideoFunc=a,Laya.SoundManager.musicMuted=!0,Laya.SoundManager.soundMuted=!0,He.I.setSoundVolume(0),He.I.stopBGM();let o=this.getVideoAd(e);o?(o.offError(this.videoAdErrfun.bind(this)),o.onError(this.videoAdErrfun.bind(this)),this.mHideFlag=1,o.show().catch(()=>{o.load().then(()=>o.show().catch(e=>{this.mHideFlag=0,this.onVideoLoadFail()}))})):(this.onVideoLoadFail(),this.mHideFlag=0)}videoAdErrfun(e){this.onVideoLoadFail(),this.mHideFlag=0}onVideoLoadFail(){this.mIsListenShare=!1;let e=this;this.gameGad&&(this.gameGad=!1,wx.getGameGad(t=>{"LOOKSUC"==t.msg?(this.mHideFlag=3,e.onCloseVideo({isEnded:!0})):"LOOKFAIL"==t.msg?e.onCloseVideo({isEnded:!1}):"SHOWADFAIL"==t.msg?e.onCloseVideo({isEnded:!1}):"NAVIGATEFAIL"==t.msg&&e.onCloseVideo({isEnded:!1})}))}onCloseVideo(e){let t=!1;(e&&e.isEnded||void 0===e)&&(t=!0),Laya.SoundManager.musicMuted=!1,Laya.SoundManager.soundMuted=!1,He.I.setSoundVolume(1),He.I.playBGM("bgm");let i=z.Failed;t&&(i=3==this.mHideFlag?z.Jump:z.Normal),this.mHideFlag=0,this.mCloseVideoCaller&&this.mCloseVideoFunc&&this.mCloseVideoFunc.call(this.mCloseVideoCaller,i)}}class Ut extends Dt{constructor(){super(),this.sdk=window.tt}}class Ht{constructor(){this.sdk=window.wx,this.initAdvert()}initAdvert(){this.initVideoAd(),this.mCloseVideoCaller=null,this.mCloseVideoFunc=null,this.mShowVideoCaller=null,this.mShowVideoFunc=null,Ve.instance.addListener("shareApp",this,this.onShareResultEvent),Ve.instance.addListener(Ne.GameOnShowEvent,this,this.gameOnShowEvent),Ve.instance.addListener(Ne.GameOnHideEvent,this,this.gameOnHideEvent)}initVideoAd(){this.mAdVideoMap={}}gameOnShowEvent(e){}gameOnHideEvent(e){}getVideoAd(e){let t=T.I.getConf().ad.video[e];if(Ce.log("getVideoAd key:",t),!this.mAdVideoMap[e.toString()]&&t&&""!=t&&this.sdk.createRewardedVideoAd){Ce.log("createVideoAd adkey:"+t);let i=this.sdk.createRewardedVideoAd({adUnitId:t});this.mAdVideoMap[e.toString()]=i}return this.mAdVideoMap[e.toString()]}showVideoAd(e,t,i,n,a){this.mCloseVideoCaller=t,this.mCloseVideoFunc=i,this.mShowVideoCaller=n,this.mShowVideoFunc=a,Laya.SoundManager.musicMuted=!0,Laya.SoundManager.soundMuted=!0,He.I.setSoundVolume(0),He.I.stopBGM();let o=this.getVideoAd(e);if(o){o.onLoad(()=>{console.log("激励视频 广告加载成功")});try{o.errorFunc&&o.offError(o.errorFunc)}catch(e){console.warn("--------------videoAd.errorFunc error:"),console.error(e)}o.errorFunc=(e=>{this.videoAdErrorfun(e)}),o.onError(o.errorFunc);try{o.closeFunc&&o.offClose(o.closeFunc)}catch(e){console.warn("--------------videoAd.offClose error:"),console.error(e)}o.closeFunc=(e=>{this.videoAdClosefun(e)}),o.onClose(o.closeFunc),o.show().catch(()=>{o.load().then(()=>o.show()).catch(e=>{console.log("激励视频 广告显示失败")})})}else console.log("创建激励视频广告实例失败"),this.onVideoShowFail(null)}videoAdClosefun(e){console.log("激励视频 广告关闭");let t=!1;e&&e.isEnded||void 0===e?(t=!0,this.onVideoBack(t,e)):this.onVideoBack(t,"closeAD")}videoAdErrorfun(e){console.log("激励视频错误事件。",e),this.onVideoShowFail(e)}onVideoShowFail(e){this.mIsListenShare=!1,St.I.share(W.InviteFriend)?(this.mIsListenShare=!0,this.ErrorRes=e):this.onVideoBack(!1,e)}onShareResultEvent(e){this.mIsListenShare&&(this.mIsListenShare=!1,this.onVideoBack(e.success,this.ErrorRes))}onVideoBack(e,t){Laya.SoundManager.musicMuted=!1,Laya.SoundManager.soundMuted=!1,He.I.setSoundVolume(1),He.I.playBGM("bgm"),this.mCloseVideoCaller&&this.mCloseVideoFunc&&(console.log("回调参数",e,t),this.mCloseVideoFunc.call(this.mCloseVideoCaller,e,t))}}class Yt extends Be{constructor(){super(),this.sdk=window.qg}getBannerAd(e,t,i,n){let a=T.I.getConf().ad.banner[e];if(Ce.log("getBannerAd adUnitId:",a,"---",e),a&&!this.mBannerAdMap[a]&&""!=a){let e=null;-1!=ke.I.compareVersion("1031")&&(t?(Ce.log("~~~~mTop  getBannerAd adUnitId:",a),e=this.sdk.createBannerAd({posId:a,style:{left:240,top:850}})):(Ce.log("~~~~no mTop  getBannerAd adUnitId:",a),e=this.sdk.createBannerAd({posId:a,style:{}})),e&&(this.mVVGreateBannerTime=(new Date).getTime(),e.offClose(),e.onClose(()=>{Ce.log("getBannerAd onClose"),e.destroy(),e=null,this.mBannerAdMap[a]=null}),e.offError(),e.onError(t=>{Ce.log(t),e.destroy(),e=null,this.mBannerAdMap[a]=null}))),this.mBannerAdMap[a]=e}return this.mBannerAdMap[a]}showBannerAd(e,t,i,n,a,o){if((new Date).getTime()-this.mVVGreateBannerTime<=3e3)return null;this.mVVGreateBannerTime=(new Date).getTime();let r=T.I.getConf().ad.banner[e],s=this.getBannerAd(e,t);if(s&&this.mBannerAdMap[r]){var l=s.show();l&&l.then(()=>{Ce.log("banner 广告显示成功")})}return s}hideBannerAd(e){let t=T.I.getConf().ad.banner[e],i=this.mBannerAdMap[t];if(i){var n=i.hide();n&&n.then(()=>{i.destroy(),this.mBannerAdMap[t]=null,Ce.log("banner广告--隐藏成功--第一次")}).catch(e=>{Ce.log("banner广告销--隐藏失败--第一次",e);var n=i.hide();n&&n.then(()=>{i.destroy(),this.mBannerAdMap[t]=null,Ce.log("banner广告--隐藏成功--第2次")}).catch(e=>{Ce.log("banner广告--隐藏失败----第2次",e),i.destroy(),this.mBannerAdMap[t]=null})})}}}class Xt{}Xt.UPDATE_COIN=1001,Xt.UPDATE_DIAMOND=1002,Xt.RED_POINT=1003,Xt.MUSIC_ON=1004,Xt.MUSIC_OFF=1005,Xt.MUSIC_DOWN=1006,Xt.LUCKY_DRAW=1007,Xt.BOX_REWARD=1008,Xt.UPDATE_TI=1009,Xt.NEW_LEVEL=2e3,Xt.START_LEVEL=2001,Xt.GAME_OVER=2002,Xt.REVIVE=2003,Xt.BACK_MENU=2004,Xt.LEVEL_INIT=600,Xt.LEVEL_BEGIN=601,Xt.LEVEL_GIVEUP=602,Xt.LEVEL_FAILGET=603,Xt.LEVEL_WINGET=604,Xt.LEVEL_GAMEEND=605,Xt.VIVO_AD_TOOMUCH="VIVO_AD_TOOMUCH",Xt.MOOM_MAINAD_CLICK="MOOM_MAINAD_CLICK";class Wt{constructor(){this.mVVGreateVideoTime=0,this.sdk=window.qg,this.initAdvert()}initAdvert(){this.initVideoAd(),this.mCloseVideoCaller=null,this.mCloseVideoFunc=null,this.mShowVideoCaller=null,this.mShowVideoFunc=null}initVideoAd(){this.mAdVideoMap={}}getVideoAd(e){let t=T.I.getConf().ad.video[e];if(Ce.log("getVideoAd key:",t),!this.mAdVideoMap[e.toString()]&&t&&""!=t&&this.sdk.createRewardedVideoAd){Ce.log("createVideoAd adkey:"+t);let i=null;-1!=ke.I.compareVersion("1041")&&(i=this.sdk.createRewardedVideoAd({posId:t})),this.mAdVideoMap[e.toString()]=i}return this.mAdVideoMap[e.toString()]}showVideoAd(e,t,i,n,a){if(this.mCloseVideoCaller=t,this.mCloseVideoFunc=i,this.mShowVideoCaller=n,this.mShowVideoFunc=a,(new Date).getTime()-this.mVVGreateVideoTime<=1e3)return Mt.instance.show(Tt.MoonTipPanel,"暂无视频, 请稍后再试"),Ve.instance.triggerListener(Xt.VIVO_AD_TOOMUCH,this.mVVGreateVideoTime),null;this.mVVGreateVideoTime=(new Date).getTime(),Laya.SoundManager.musicMuted=!0,Laya.SoundManager.soundMuted=!0,He.I.setSoundVolume(0),He.I.stopBGM();let o=this.getVideoAd(e);if(o){this.mKey=e,o.offError(this.videoAdErrorfun.bind(this)),o.onError(this.videoAdErrorfun.bind(this)),o.offClose(this.videoAdClosefun.bind(this)),o.onClose(this.videoAdClosefun.bind(this));let t=o.load();t&&t.catch(e=>{Ce.log("激励广告load失败"+JSON.stringify(e))}),o.offLoad(),o.onLoad(()=>{let e=o.show();e&&e.catch(e=>{Ce.log("激励广告展示失败"+JSON.stringify(e))})})}else console.log("创建激励视频广告实例失败"),this.onVideoShowFail(null)}videoAdClosefun(e){console.log("激励视频 广告关闭回调",e);let t=!1;e&&e.isEnded||void 0===e?(t=!0,this.onVideoBack(t,e)):this.onVideoBack(t,"closeAD")}videoAdErrorfun(e){if(Mt.instance.show(Tt.MoonTipPanel,"暂无视频, 请稍后再试"),this.mAdVideoMap[this.mKey.toString()]){let e=this.mAdVideoMap[this.mKey.toString()];e&&(e.destroy(),e=null),this.mAdVideoMap[this.mKey.toString()]=null}this.onVideoShowFail(e)}onVideoBack(e,t){Laya.SoundManager.musicMuted=!1,Laya.SoundManager.soundMuted=!1,He.I.setSoundVolume(1),He.I.playBGM("MAINBG"),this.mCloseVideoCaller&&this.mCloseVideoFunc&&(console.log("回调参数",e,t),this.mCloseVideoFunc.call(this.mCloseVideoCaller,e,t))}onVideoShowFail(e){this.onVideoBack(!1,e)}}function __awaiter(e,t,i,n){return new(i||(i=Promise))(function(a,o){function fulfilled(e){try{step(n.next(e))}catch(e){o(e)}}function rejected(e){try{step(n.throw(e))}catch(e){o(e)}}function step(e){e.done?a(e.value):new i(function(t){t(e.value)}).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())})}class Kt{constructor(e,t){this._lastShowTime=0,this._refreshInterval=0,this._refreshInterval=e>0?e:0,this._lastShowTime=0,t>0&&(this._lastShowTime=Date.now()+1e3*t-1e3*this._refreshInterval)}isReadyToRefresh(){return this.getNextRefreshInterval()<=0}getNextRefreshInterval(){let e=0;if(this._refreshInterval>0&&this._lastShowTime>0){let t=Date.now();e=this._refreshInterval-(t-this._lastShowTime)/1e3}return e}updateLastShowTime(){this._lastShowTime=Date.now()}}function getOption(e,t,i){return e&&void 0!==e[t]?e[t]:i}class jt{constructor(e,t,i,n){this._maxLoadError=0,this._errorCounter=0,this._fatalError=!1,this._sharedTimer=null,this._adId=e,this._state=ni.NONE,this._type=t,this._sharedTimer=i,this._fatalError=!1,console.assert(!!i,"sharedTimer is invalid",i),this._maxLoadError=getOption(n,"maxLoadError",0)}getStateName(){return function(e){let t="NONE";switch(e){case ni.NEW:t="NEW";break;case ni.LOADING:t="LOADING";break;case ni.LOADED:t="LOADED";break;case ni.PLAYING:t="PLAYING"}return t}(this._state)}getAdTypeName(){return this._type==ii.INTERSTITIAL?"插屏广告":this._type==ii.REWARDED_VIDEO?"激励视频广告":this._type==ii.BANNER?"Banner":"UNKNOWN"}getInfo(){return`[${this.getAdTypeName()}:${this._adId}:${this.getStateName()}]`}isReadyToRefresh(){return this._sharedTimer.isReadyToRefresh()}getNextRefreshInterval(){return this._sharedTimer.getNextRefreshInterval()}updateLastShowTime(){this._sharedTimer.updateLastShowTime()}increaseErrorCounter(){this._errorCounter++}resetErrorCounter(){this._errorCounter=0}setFatalError(){this._fatalError=!0}isErrorTooMany(){return this._fatalError||this._maxLoadError>0&&this._errorCounter>=this._maxLoadError}}class qt extends jt{constructor(e,t,i){super(e,ii.BANNER,t,i)}showAsync(){return __awaiter(this,void 0,void 0,function*(){if(!this.isReadyToRefresh())throw console.log("播放太频繁，还需间隔"+this.getNextRefreshInterval()+" 秒: "+this.getInfo()),pi;if(this.isErrorTooMany())throw console.log("太多错误，停止加载: "+this.getInfo()),ui;try{this._state=ni.PLAYING,console.log("开始显示广告: "+this.getInfo()),yield FBInstant.loadBannerAdAsync(this._adId),console.log("显示广告成功: "+this.getInfo()),this.updateLastShowTime(),this.resetErrorCounter()}catch(e){throw console.error("显示广告失败: "+this.getInfo(),e),e.code==fi||(e.code==yi?(console.error("广告无法填充，不再继续请求: "+this.getInfo()),this.setFatalError()):this.increaseErrorCounter()),e}})}hideAsync(){return __awaiter(this,void 0,void 0,function*(){if(this._state!=ni.PLAYING)throw console.log("广告没有在播放中: "+this.getInfo()),mi;try{console.log("隐藏广告: "+this.getInfo()),yield FBInstant.hideBannerAdAsync(),this._state=ni.NONE}catch(e){throw console.error("隐藏广告失败: "+this.getInfo(),e),e}})}}class Zt extends jt{constructor(e,t,i,n){super(e,t,i,n),this._adInstance=null,this._autoLoadOnPlay=getOption(n,"autoLoadOnPlay",!1)}loadAsync(){return __awaiter(this,void 0,void 0,function*(){if(null==this._adInstance){if(this._state!=ni.NONE)return void console.log("当前状态未满足加载条件, 正在获取广告对象: "+this.getInfo());this._state=ni.NEW,console.log("获取广告对象: "+this.getInfo()),this._adInstance=yield this.createAdInstanceAsync(this._adId)}if(this._state!=ni.NEW)throw console.log("当前状态未满足加载条件: "+this.getInfo()),this._state==ni.LOADING?(console.log("广告正在加载中，不要重复加载"+this.getInfo()),si):ri;if(this.isErrorTooMany())throw console.log("太多错误，停止加载: "+this.getInfo()),ui;try{return this._state=ni.LOADING,console.log("开始加载广告: "+this.getInfo()),yield this._adInstance.loadAsync(),this._state=ni.LOADED,this.resetErrorCounter(),console.log("广告加载成功: "+this.getInfo()),!0}catch(e){if(console.error("广告加载失败: "+this.getInfo(),e),e.code==yi)console.error("广告无法填充，不再继续请求: "+this.getInfo()),this.setFatalError();else{this.increaseErrorCounter(),this._state=ni.NEW;let e=10*this._errorCounter+ti;console.log("延迟"+e+"秒后, 自动重新加载: "+this.getInfo()),waitTimeSecond(e,this.loadAsync.bind(this))}throw e}})}isReady(){return null!=this._adInstance&&this._state==ni.LOADED}showAsync(){return __awaiter(this,void 0,void 0,function*(){if(!this.isReady())throw console.log("当前状态未满足播放条件: "+this.getInfo()),this._state==ni.PLAYING?di:li;if(!this.isReadyToRefresh())throw console.log("播放太频繁，还需间隔"+this.getNextRefreshInterval()+" 秒: "+this.getInfo()),pi;try{return this._state=ni.PLAYING,console.log("开始播放广告: "+this.getInfo()),yield this._adInstance.showAsync(),console.log("播放广告完毕: "+this.getInfo()),this._adInstance=null,this._state=ni.NONE,this.updateLastShowTime(),this._autoLoadOnPlay&&(console.log("延迟"+ti+"秒后, 自动重新加载: "+this.getInfo()),waitTimeSecond(ti,this.loadAsync.bind(this))),!0}catch(e){throw console.log("播放广告失败: "+this.getInfo(),e),e.code==fi?this._state=ni.LOADED:(this._adInstance=null,this._state=ni.NONE,this._autoLoadOnPlay&&(console.log("延迟"+ti+"秒后, 自动重新加载: "+this.getInfo()),waitTimeSecond(ti,this.loadAsync.bind(this)))),e}})}}class Qt extends Zt{constructor(e,t,i){super(e,ii.INTERSTITIAL,t,i)}createAdInstanceAsync(e){return __awaiter(this,void 0,void 0,function*(){return yield FBInstant.getInterstitialAdAsync(this._adId)})}}class $t extends Zt{constructor(e,t,i){super(e,ii.REWARDED_VIDEO,t,i)}createAdInstanceAsync(e){return __awaiter(this,void 0,void 0,function*(){return yield FBInstant.getRewardedVideoAsync(this._adId)})}}const Jt=3,ei=3,ti=1;var ii,ni;function waitTimeSecond(e,t){return __awaiter(this,void 0,void 0,function*(){return new Promise((i,n)=>{setTimeout(()=>{t&&t(),i()},1e3*e)})})}!function(e){e[e.INTERSTITIAL=0]="INTERSTITIAL",e[e.REWARDED_VIDEO=1]="REWARDED_VIDEO",e[e.BANNER=2]="BANNER"}(ii||(ii={})),function(e){e[e.NONE=0]="NONE",e[e.NEW=1]="NEW",e[e.LOADING=2]="LOADING",e[e.LOADED=3]="LOADED",e[e.PLAYING=4]="PLAYING"}(ni||(ni={}));const ai={code:"EXCEED_MAX_AD_INSTANCE",message:"广告对象不允许超过 "+Jt},oi={code:"NO_READY_AD_INSTANCE",message:"没有加载完毕的广告，或者广告播放太频繁"},ri={code:"NOT_READY_FOR_LOAD",message:"当前状态不允许再次加载"},si={code:"AD_IS_LOADING",message:"广告正在加载"},li={code:"NOT_READY_FOR_PLAYING",message:"没有可以播放的广告"},di={code:"AD_IS_PLAYING",message:"广告正在播放"},hi={code:"NO_BANNER_AD",message:"没有添加Banner广告"},ci={code:"API_NOT_SUPPORT",message:"广告接口不支持"},pi={code:"TOO_FAST_SHOW",message:"广告播放太频繁"},mi={code:"NOT_PLAYING",message:"广告没有播放"},ui={code:"TOO_MANY_ERRORS",message:"太多错误, 停止操作"},gi="loadBannerAdAsync",fi="RATE_LIMITED",yi="ADS_NO_FILL";class _i{static getVersion(){return"1.0.2"}static addInterstitial(e,t=ei){null==this._interstitialTimer&&(this._interstitialTimer=new Kt(this.defaultInterstitialTimerOption.refreshInterval,this.defaultInterstitialTimerOption.delayForFirstAd));for(let i=0;i<t;i++){if(this._interstitialAds.length>=Jt)throw console.log("添加插屏广告失败, 超出限制: "+this._interstitialAds.length,e),ai;let t=new Qt(e,this._interstitialTimer,this.defaultInterstitialOption);this._interstitialAds.push(t),console.log("添加插屏广告: "+e,"count: "+this._interstitialAds.length)}return this._interstitialAds.length}static addRewardedVideo(e,t=ei){null==this._rewardedVideoTimer&&(this._rewardedVideoTimer=new Kt(this.defaultRewardedVideoTimerOption.refreshInterval,this.defaultRewardedVideoTimerOption.delayForFirstAd));for(let i=0;i<t;i++){if(this._rewardedVideos.length>=Jt)throw console.log("添加激励视频广告失败, 超出限制: "+this._rewardedVideos.length,e),ai;let t=new $t(e,this._rewardedVideoTimer,this.defaultRewardedVideoOption);this._rewardedVideos.push(t),console.log("添加激励视频广告: "+e,"count: "+this._rewardedVideos.length)}return this._rewardedVideos.length}static addBanner(e){null==this._bannerTimer&&(this._bannerTimer=new Kt(this.defaultBannerTimerOption.refreshInterval,this.defaultBannerTimerOption.delayForFirstAd));let t=new qt(e,this._bannerTimer,this.defaultBannerOption);return this._banners.push(t),console.log("添加Banner广告: "+e,"count: "+this._banners.length),t}static loadAll(){return __awaiter(this,void 0,void 0,function*(){return console.log("初始化广告队列"),yield this.loadAllAsync()})}static loadAllAsync(){return __awaiter(this,void 0,void 0,function*(){console.log("FBAdManager Version: "+this.getVersion()),console.log("初始化广告队列");for(let e=0;e<this._rewardedVideos.length;e++){const t=this._rewardedVideos[e];e>0&&(yield waitTimeSecond(.1));try{yield t.loadAsync()}catch(e){}}for(let e=0;e<this._interstitialAds.length;e++){const t=this._interstitialAds[e];e>0&&(yield waitTimeSecond(.1));try{yield t.loadAsync()}catch(e){}}})}static _isAdReady(e){let t=e==ii.INTERSTITIAL?this._interstitialAds:this._rewardedVideos,i=!1;for(let e=0;e<t.length;e++){const n=t[e];if(n.isReady()&&n.isReadyToRefresh()){i=!0;break}}return i}static _showAsync(e){let t=e==ii.INTERSTITIAL?this._interstitialAds:this._rewardedVideos,i=null;for(let e=0;e<t.length;e++){const n=t[e];if(n.isReady()&&n.isReadyToRefresh()){i=n;break}}if(null!=i)return i.showAsync();throw oi}static _getAdTimer(e){return e==ii.INTERSTITIAL?this._interstitialTimer:e==ii.REWARDED_VIDEO?this._rewardedVideoTimer:this._bannerTimer}static isInterstitialAdReady(){return this._isAdReady(ii.INTERSTITIAL)}static showInterstitialAd(){return __awaiter(this,void 0,void 0,function*(){return yield this._showAsync(ii.INTERSTITIAL)})}static isRewardedVideoReady(){return this._isAdReady(ii.REWARDED_VIDEO)}static showRewardedVideo(){return __awaiter(this,void 0,void 0,function*(){return yield this._showAsync(ii.REWARDED_VIDEO)})}static checkApiSupport(e){return FBInstant.getSupportedAPIs().indexOf(e)>=0}static isBannerSupport(){return void 0===this._bannerSupport&&(this._bannerSupport=this.checkApiSupport(gi)),this._bannerSupport}static isBannerReady(){if(this._banners.length<=0)throw hi;return this._banners[0].isReadyToRefresh()}static showBannerAsync(){return __awaiter(this,void 0,void 0,function*(){if(!this.isBannerSupport())throw ci;if(this._banners.length<=0)throw hi;let e=this._banners[0];return yield e.showAsync()})}static hideBannerAsync(){return __awaiter(this,void 0,void 0,function*(){if(!this.isBannerSupport())throw ci;if(this._banners.length<=0)throw hi;let e=this._banners[0];return yield e.hideAsync()})}}_i._interstitialAds=[],_i._rewardedVideos=[],_i._banners=[],_i._interstitialTimer=null,_i._rewardedVideoTimer=null,_i._bannerTimer=null,_i._bannerSupport=void 0,_i.defaultInterstitialOption={autoLoadOnPlay:!0,maxLoadError:3},_i.defaultRewardedVideoOption={autoLoadOnPlay:!0,maxLoadError:3},_i.defaultBannerOption={autoLoadOnPlay:!0,maxLoadError:1},_i.defaultInterstitialTimerOption={refreshInterval:45,delayForFirstAd:45},_i.defaultRewardedVideoTimerOption={refreshInterval:0,delayForFirstAd:0},_i.defaultBannerTimerOption={refreshInterval:40,delayForFirstAd:0};class Ii extends Be{constructor(){super(),this.sdk=window.FBAdManager}getBannerAd(e,t,i,n){let a=T.I.getConf().ad.banner[e];if(Ce.log("getBannerAd adUnitId:",a),!this.mBannerAdMap[e.toString()]&&a&&""!=a){let t=_i.addBanner(a);this.mBannerAdMap[e.toString()]=t}return this.mBannerAdMap[e.toString()]}showBannerAd(e,t,i,n,a,o){let r=this.getBannerAd(e,t);return r&&_i.isBannerReady()&&_i.showBannerAsync().then(()=>{}).catch(e=>{Ce.log("显示Banner广告: 失败，原因: "+e.message)}),r}hideBannerAd(e){Ce.log("banner广告"),this.mBannerAdMap[e.toString()]&&_i.hideBannerAsync().then(()=>{}).catch(e=>{Ce.log("隐藏Banner广告: 失败，原因: "+e.message)})}}class vi extends Dt{constructor(){super(),this.sdk=window.FBAdManager}getInterstitialAd(e){let t=T.I.getConf().ad.interstitial[e];return!this.mAdInterstitialMap[e.toString()]&&t&&""!=t&&(Ce.log("createInterstitialoAd key:"+t),_i.addInterstitial(t,1),this.mAdInterstitialMap[e.toString()]=t),this.mAdInterstitialMap[e.toString()]}showInterstitialAd(e,t,i,n,a){_i.isInterstitialAdReady()&&_i.showInterstitialAd().then(()=>{}).catch(e=>{})}}class wi extends Lt{constructor(){super(),this.sdk=window.FBAdManager}getVideoAd(e){let t=T.I.getConf().ad.video[e];return Ce.log("getVideoAd key:",t),!this.mAdVideoMap[e.toString()]&&t&&""!=t&&(Ce.log("createVideoAd adkey:"+t),_i.addRewardedVideo(t,1),this.mAdVideoMap[e.toString()]=t),this.mAdVideoMap[e.toString()]}showVideoAd(e,t,i,n,a){if(this.mCloseVideoCaller=t,this.mCloseVideoFunc=i,this.mShowVideoCaller=n,this.mShowVideoFunc=a,_i.isRewardedVideoReady()){let e=this;_i.showRewardedVideo().then(()=>{e.mCloseVideoCaller&&e.mCloseVideoFunc&&e.mCloseVideoFunc.call(e.mCloseVideoCaller,z.Normal)}).catch(t=>{e.videoAdErrfun(null)})}else this.videoAdErrfun(null)}videoAdErrfun(e){super.videoAdErrfun(e),Mt.instance.show(Tt.MoonTipPanel,"ad load fail, wait a minute")}}class Si{constructor(){this.mShowTTBanner=!0,this.mVVGreateBannerTime=0,this.mErrorVideoCaller=null,this.mErrorVideoFunc=null,this.initAdvert()}initAdvert(){this.initBannerAd()}initBannerAd(){this.mBannerAdMap={}}setShowTTBanner(e){this.mShowTTBanner=e}clearAllBannerKey(){this.mBannerAdMap={}}clearBannerKey(e){this.mBannerAdMap[e.toString()]=null}getBannerAd(e,t,i,n,a){return Re.I.isBannerUseAble()}showBannerAd(e,t,i,n,a,o,r){return this.mErrorVideoCaller=o,this.mErrorVideoFunc=r,Re.I.playBannerAD("banner"),e}hideBannerAd(e){Re.I.removeBannerAD("banner")}onErrorVideo(e){this.mErrorVideoCaller&&this.mErrorVideoFunc&&this.mErrorVideoFunc.call(this.mErrorVideoCaller,e)}}class Li extends Be{constructor(){super(),this.sdk=typeof minigame}getBannerAd(e,t,i,n){}showBannerAd(e,t,i,n,a,o){MiniGameAds.isBannerReady()?MiniGameAds.showBanner().then(()=>{console.info("新接口播放横幅广告: 成功")}).catch(e=>{console.error("新接口播放横幅广告: 失败，原因: "+e.message)}):console.info("横幅广告没有加载成功，无法播放")}hideBannerAd(e){MiniGameAds.hideBanner().then(()=>{console.info("新接口隐藏激励广告: 成功")}).catch(e=>{console.error("新接口隐藏激励广告: 失败，原因: "+e.message)})}}class Ei extends Lt{constructor(){super(),this.sdk=typeof minigame}getVideoAd(e){return!0}showVideoAd(e,t,i,n,a){this.mCloseVideoCaller=t,this.mCloseVideoFunc=i,this.mShowVideoCaller=n,this.mShowVideoFunc=a,console.log("进入播放)))))"),MiniGameAds.isRewardvideoReady()?MiniGameAds.showRewardedVideo().then(()=>{console.info("新接口播放激励广告: 成功"),this.onCloseVideo({isEnded:!0})}).catch(e=>{console.error("新接口播放激励广告: 失败，原因: "+e.message),this.onCloseVideo({isEnded:!1})}):(console.info("激励视频没有加载成功，无法播放"),this.onCloseVideo({isEnded:!1}))}videoAdErrfun(e){}}class Ai extends Dt{constructor(){super(),this.sdk=typeof minigame}getInterstitialAd(e){}showInterstitialAd(e,t,i,n,a){this.mCloseVideoCallerInterstitial=t,this.mCloseVideoFuncInterstitial=i,this.mShowVideoCallerInterstitial=n,this.mShowVideoFuncInterstitial=a,MiniGameAds.isInterstitialReady()?MiniGameAds.showInterstitial().then(()=>{console.info("新接口播放插屏广告: 成功")}).catch(e=>{console.error("新接口播放插屏广告: 失败，原因: "+e.message)}):console.info("插屏广告没有加载成功，无法播放")}}class xi{constructor(){this.gameAdvertSDK=null,this.bannerAdvertSDK=null,this.videoAdvertSDK=null,this.interstitialAdvertSDK=null,this.boxAdvertSDK=null,this.nativeAdvertSDK=null,Laya.Render.isConchApp?(this.videoAdvertSDK=new Gt,this.interstitialAdvertSDK=new Me,this.bannerAdvertSDK=new Si):Laya.Browser.onMiniGame?"object"==typeof tt?(Ce.log("init广告sdk 头条"),this.bannerAdvertSDK=new Ge,this.videoAdvertSDK=new Et):(Ce.log("init广告sdk 微信"),this.bannerAdvertSDK=new Be,"undefined"!=typeof YDSDK?this.videoAdvertSDK=new Ft:wx.getGameGad?this.videoAdvertSDK=new zt:wx.leuok?this.videoAdvertSDK=new Ht:this.videoAdvertSDK=new Lt,this.interstitialAdvertSDK=new Dt,this.gameAdvertSDK=new Pe,this.boxAdvertSDK=new kt):Laya.Browser.onQQMiniGame?(Ce.log("init广告sdk QQ"),this.bannerAdvertSDK=new Fe,this.videoAdvertSDK=new At,this.interstitialAdvertSDK=new Bt,this.boxAdvertSDK=new Pt):Laya.Browser.onVVMiniGame?(Ce.log("init广告sdk vivo"),qg.leuok?(console.error("--=====-=--LYVVBannerAdvert=-==-=-=-=-=-"),this.videoAdvertSDK=new Wt,this.bannerAdvertSDK=new Yt):(this.bannerAdvertSDK=new ze,this.videoAdvertSDK=new Ct),this.interstitialAdvertSDK=new Vt):Laya.Browser.onQGMiniGame?(Ce.log("init广告sdk oppo"),this.bannerAdvertSDK=new Ue,this.videoAdvertSDK=new Ot,this.interstitialAdvertSDK=new Nt):Laya.Browser.onTTMiniGame?(Ce.log("init广告sdk 头条"),this.bannerAdvertSDK=new Ge,this.videoAdvertSDK=new Et,this.interstitialAdvertSDK=new Ut):"object"==typeof FBInstant?"undefined"!=typeof minigame?(this.bannerAdvertSDK=new Li,this.videoAdvertSDK=new Ei,this.interstitialAdvertSDK=new Ai):(this.bannerAdvertSDK=new Ii,this.videoAdvertSDK=new wi,this.interstitialAdvertSDK=new vi):Ce.error("init广告sdk 错误!")}static get I(){return h.get(xi)}getGameBannerAd(e,t){return this.gameAdvertSDK?this.gameAdvertSDK.getGameBannerAd(e,t):null}showGameBannerAd(e,t){return this.gameAdvertSDK?this.gameAdvertSDK.showGameBannerAd(e,t):null}hideGameBannerAd(e){this.gameAdvertSDK&&this.gameAdvertSDK.hideGameBannerAd(e)}getGamePortalAd(e,t){return this.gameAdvertSDK?this.gameAdvertSDK.getGamePortalAd(e,t):null}showGamePortalAd(e,t){return this.gameAdvertSDK?this.gameAdvertSDK.showGamePortalAd(e,t):null}getGameIconAd(e,t){return this.gameAdvertSDK?this.gameAdvertSDK.getGameIconAd(e,t):null}showGameIconAd(e,t){return this.gameAdvertSDK?this.gameAdvertSDK.showGameIconAd(e,t):null}setShowTTBanner(e){if(this.bannerAdvertSDK)return this.bannerAdvertSDK.setShowTTBanner(e)}getBannerAd(e,t,i,n){return this.bannerAdvertSDK?this.bannerAdvertSDK.getBannerAd(e,t,i,n):null}showBannerAd(e,t,i,n,a,o,r){if(this.bannerAdvertSDK){let s=null;return s=o&&r?this.bannerAdvertSDK.showBannerAd(e,t,i,n,a,o,r):this.bannerAdvertSDK.showBannerAd(e,t,i,n,a,this,this.onBannerError)}return null}onBannerError(e){if(this.gameAdvertSDK&&e)return this.gameAdvertSDK.showGameBannerAd(e.adkey,e.mTop,e.mWidht,e.mHeight)}showBannerAdByPro(e,t,i,n){if(this.bannerAdvertSDK){let a=null,o=0;n&&(o=n);let r=Laya.Browser.clientWidth-o,s=Laya.Browser.clientWidth*t/i;return this.showBannerAd(e,a,r,s)}return null}hideBannerAd(e){this.bannerAdvertSDK&&this.bannerAdvertSDK.hideBannerAd(e),this.gameAdvertSDK&&this.hideGameBannerAd(e)}clearBannerKey(e){this.bannerAdvertSDK&&this.bannerAdvertSDK.clearBannerKey(e)}clearAllBannerKey(){this.bannerAdvertSDK&&this.bannerAdvertSDK.clearAllBannerKey()}getVideoAd(e){return this.videoAdvertSDK?this.videoAdvertSDK.getVideoAd(e):null}showVideoAd(e,t,i,n,a){if(T.I.getConf().showVideo){if(this.videoAdvertSDK)return this.videoAdvertSDK.showVideoAd(e,t,i,n,a);null!=t&&null!=i&&i.call(t,!0)}else null!=t&&null!=i&&i.call(t,!0)}getInterstitialAd(e){return this.interstitialAdvertSDK?this.interstitialAdvertSDK.getInterstitialAd(e):null}showInterstitialAd(e,t,i,n,a){return this.interstitialAdvertSDK?this.interstitialAdvertSDK.showInterstitialAd(e,t,i,n,a):(null!=t&&null!=i&&i.call(t,!1),null)}existInterstitialAd(){return null!=this.interstitialAdvertSDK}getBoxAd(e,t){return this.boxAdvertSDK?this.boxAdvertSDK.getBoxAd(e,t):null}showBox(e){return this.boxAdvertSDK?this.boxAdvertSDK.showBox(e):null}hideBox(e){this.boxAdvertSDK&&this.boxAdvertSDK.hideBox(e)}preloadNativeAD(){return this.nativeAdvertSDK?this.nativeAdvertSDK.preloadNativeAD():null}isNativeADLoaded(){return!!this.nativeAdvertSDK&&this.nativeAdvertSDK.isNativeADLoaded()}playNativeAD(e){return this.nativeAdvertSDK?this.nativeAdvertSDK.playNativeAD(e):null}}class Ti{}Ti.MATRIX_LIST="/matrix/matrix-list",Ti.SKIP_STATISTICS="/api/report/matrix-data",Ti.AD_SWITCH_LIST="/matrix/adSwitch/list",Ti.DATA_STATISTICS="/api/report/log";class bi{}var Ri,Mi,Ci,Oi,Di;bi.MATRIX_TYPE_SHOW=1,bi.MATRIX_TYPE_CLIK=2,bi.MATRIX_TYPE_ACT=3,bi.MATRIX_TYPE_JUMP=4,function(e){e[e.INIT=100]="INIT",e[e.VIEW_LOADING=101]="VIEW_LOADING",e[e.VIEW_INDEX=102]="VIEW_INDEX",e[e.LOGIN_SUCCESS=103]="LOGIN_SUCCESS",e[e.LV_START=200]="LV_START",e[e.LV_END=201]="LV_END",e[e.LV_TIP=202]="LV_TIP",e[e.LV_START2=203]="LV_START2",e[e.LV_END2=204]="LV_END2",e[e.LV_SKIP=205]="LV_SKIP",e[e.LV_RELIVE=206]="LV_RELIVE",e[e.ONLINE_TIME=300]="ONLINE_TIME"}(Ri||(Ri={}));class Vi{constructor(){if(this.deviceBrand="",this.deviceModel="",this.deviceSystem="",this.onTimeLimit=3e4,this.isOnShow=!0,this.isStartOn=!1,this.isBattle=!1,this.levelDuration=0,this.isIgnore=!1,this.sdk=Ne.I.getSDK(),Ve.instance.addListener(Ne.GameOnHideEvent,this,this.onGameHideEvent),Ve.instance.addListener(Ne.GameOnShowEvent,this,this.onGameShowEvent),d.instance.addListener(this,this.onGetConfComplete),Vi.getLoalData(Vi.localKey,t=>{e.isNullOrEmpty(t)?(console.log("没有数据没有数据"),Vi.localData.guid=Vi.uuid(),Vi.localData.onTime=0,Vi.localData.city="",Vi.setLocalData(Vi.localKey,Vi.localData)):(console.log("有数据了",t),"{"==(t=unescape(t)).charAt(0)&&(t=JSON.parse(t)),e.isNullOrEmpty(t.guid)?Vi.localData.guid=Vi.uuid():Vi.localData.guid=t.guid,e.isNullOrEmpty(t.onTime)?Vi.localData.onTime=0:Vi.localData.onTime=t.onTime,e.isNullOrEmpty(t.city)?Vi.localData.city="":Vi.localData.city=t.city,Vi.localData.openid=t.openid)}),this.sdk&&this.sdk.getSystemInfoSync){let e=this.sdk.getSystemInfoSync();this.deviceBrand=e.brand,this.deviceModel=e.model,this.deviceSystem=e.system}if(Laya.timer.frameLoop(1,this,this.addOnTime),!Laya.Browser.onMiniGame){if(Laya.Render.isConchApp)return;console.log("http://134.175.208.44:2440/ip2region"),d.instance.get("http://134.175.208.44:2440/ip2region")}}static get I(){return h.get(Vi)}addOnTime(){if(this.isStartOn&&Vi.I.isOnShow){if(this.isIgnore)return void(this.isIgnore=!1);Vi.localData.onTime+=Laya.timer.delta,Vi.localData.onTime>this.onTimeLimit?this.statisticsReport(Ri.ONLINE_TIME):Vi.setLocalData(Vi.localKey,Vi.localData),this.isBattle&&(this.levelDuration+=Laya.timer.delta)}}static getLoalData(e,t){var i=Laya.LocalStorage.getItem(e);t&&t(i)}static setLocalData(e,t){try{let i=JSON.stringify(t);Laya.LocalStorage.setItem(e,i)}catch(e){console.log(e)}}onGameHideEvent(){this.isOnShow=!1}onGameShowEvent(){this.isOnShow=!0,this.isIgnore=!0}statisticsReport(e,t=-1,i=-1,n=0){if(!T.I.getConf().needOKStatis)return;let a;e==Ri.VIEW_INDEX&&(this.isStartOn=!0),e!=Ri.LV_START&&e!=Ri.LV_START2||(this.isBattle=!0,this.levelDuration=0),null!=Vi.localData.openid&&null!=Vi.localData.openid&&""!=Vi.localData.openid&&"undefined"!=Vi.localData.openid||(Vi.localData.openid=c.instance.openid,Vi.setLocalData(Vi.localKey,Vi.localData));let o=Math.floor(Vi.localData.onTime/1e3);console.log("statisticsReport",Vi.localData),a={type:e,gamekey:T.I.getConf().gamekey,deviceModel:this.deviceModel,deviceSystem:this.deviceSystem,deviceBrand:this.deviceBrand,openid:Vi.localData.openid,guid:Vi.localData.guid,appVersion:T.I.getConf().version,appBuild:T.I.getConf().version,level:t>0?t:C.I.getCurLevel(),levelDuration:e==Ri.LV_END||e==Ri.LV_END2?Math.floor(this.levelDuration/1e3):-1,mac:"",res:i,sex:vt.I.getSex(),city:Laya.Browser.onMiniGame?vt.I.getArea():Vi.localData.city,phone:"",gold:C.I.getCoin(),score:n,net:-1,duration:o,timestamp:(new Date).getTime().toString().substr(0,10),adid:"91f18e75-eaf4-4ef8-bf19-d3e776f517c4"},o>0&&(Vi.localData.onTime-=1e3*o,Vi.setLocalData(Vi.localKey,Vi.localData));let r={message:JSON.stringify(a),version:1};this.statisticsUrl=`${T.I.getConf().reportUrl}${Ti.DATA_STATISTICS}`,Ce.log(this.statisticsUrl),Ce.log(a),d.instance.post(this.statisticsUrl,r)}onGetConfComplete(e){"http://134.175.208.44:2440/ip2region"==e.url&&(console.log("onGetConfCompletehttp:",e),Vi.localData.city=e.data.city_name,Vi.setLocalData(Vi.localKey,Vi.localData))}static uuid(){for(var e=[],t=0;t<36;t++)e[t]="0123456789abcdef".substr(Math.floor(16*Math.random()),1);return e[14]="4",e[19]="0123456789abcdef".substr(3&e[19]|8,1),e[8]=e[13]=e[18]=e[23]="-",e.join("")}}Vi.localKey="okInfo",Vi.localData={guid:"",openid:"",onTime:0,city:""};class Ni{constructor(){this.matrixList={},this.adSwitchList={},d.instance.addListener(this,this.onGetConfComplete)}static get I(){return h.get(Ni)}getMatrixList(e,t=-1,i=-1){let n;this.appId=e.appId,n={version:e.version,sgamekey:e.gamekey,position:t,index:i,city:Vi.localData.city},console.log("getMatrixList",n),this.mtrixListUrl=`${e.matrixUrl}${Ti.MATRIX_LIST}`,d.instance.post(this.mtrixListUrl,n)}jumpStatistics(e,t,i,n,a,o=-1){let r;r={uid:t,type:i,sgamekey:e.gamekey,tgamekey:n,position:a,index:o,timestamp:(new Date).getTime().toString().substr(0,10)};let s={message:JSON.stringify(r)};this.skipStatisticsUrl=`${e.reportUrl}${Ti.SKIP_STATISTICS}`,console.log(r),d.instance.post(this.skipStatisticsUrl,s)}getAdSwitchList(e){let t;console.log("getAdSwitchList",Vi.localData),console.log("getAdSwitchList",Vi.localData.city),t={version:e.version,gamekey:e.gamekey,city:Vi.localData.city},console.log("getAdSwitchList",t),this.adSwitchListUrl=`${e.matrixUrl}${Ti.AD_SWITCH_LIST}`,d.instance.post(this.adSwitchListUrl,t)}getMatrixByPosition(e){if(null==this.matrixList[e])return null;let t=[];return Object.keys(this.matrixList[e]).forEach(i=>{t.push(this.matrixList[e][i])}),this.sort(t,"index"),t}getAdSwitchByPosition(e){return null==this.adSwitchList[e]?null:this.adSwitchList[e]}onGetConfComplete(e){if(e.url==this.mtrixListUrl){if(console.log("http:",e),e.result&&e.data&&200==e.data.code&&e.data.data)for(const t of e.data.data){let e={};for(const i of t.matrix)i.appid!=this.appId&&(e[i.index]=i);this.matrixList[t.position]=e}}else if(e.url==this.adSwitchListUrl){if(console.log("http:",e),e.result&&e.data&&200==e.data.code&&e.data.data)for(const t of e.data.data)this.adSwitchList[t.position]=t;console.log(this.adSwitchList)}}sort(e,t=null){return e.sort((e,i)=>{switch(typeof e){case"number":return e<i?-1:e>i?1:0;case"string":return e.localeCompare(i);case"object":return"number"==typeof e[t]?e[t]<i[t]?-1:e[t]>i[t]?1:0:"string"==typeof e[t]?e[t].localeCompare(i[t]):0;default:return 0}})}checkSkip(){let e=Ni.I.getAdSwitchByPosition(be.SKIP_OTHER);if(null!=e&&1==e.state&&e.pv>0){if(wt.random(0,100)<=e.pv){let e=Ni.I.getMatrixByPosition(xe.SHIP_OTHER);if(null!=e&&e.length>0){let t=0;for(let i=0;i<e.length;i++){t+=e[i].weight}if(t>0){let i=wt.random(0,t),n=0;for(let t=0;t<e.length;t++){let a=e[t];if(i<=(n+=a.weight)){this.openGame(a,xe.SHIP_OTHER);break}}}}}}}openGame(e,t){let i;ke.I.isWxMiniGame()?i=window.wx:ke.I.isQQMiniGame()&&(i=window.qq),null!=i&&(Ni.I.jumpStatistics(T.I.getConf(),c.instance.openid,bi.MATRIX_TYPE_CLIK,e.tgamekey,t,e.index),_t.I.onSaleActionUpLoad(e,1),i.navigateToMiniProgram({appId:e.appid,path:e.path,success:function(i){Ni.I.jumpStatistics(T.I.getConf(),c.instance.openid,bi.MATRIX_TYPE_ACT,e.tgamekey,t,e.index),_t.I.onSaleActionUpLoad(e,2)},fail:function(t){_t.I.onSaleActionUpLoad(e,3)}}))}}class ki{constructor(){this.isSupport=!1,this.mErrorCaller={},this.mHideCaller={},this.isSupport=ke.I.isWxMiniGame(),this.isSupport&&(this.sdk=window.wx,this.mErrorCaller={},this.mErrorFunc={},this.mHideCaller={},this.mHideFunc={},this.initAdvert())}static get I(){return h.get(ki)}initAdvert(){this.initCustomAd()}initCustomAd(){this.mAdMap={}}getCustomAd(e,t,i=10){if(!this.isSupport)return;let n=T.I.getConf().ad.custom[e];if(!this.mAdMap[e.toString()]&&n&&""!=n){let a=null;if("function"==typeof this.sdk.createCustomAd&&-1!=ke.I.compareVersion("2.11.1")){let o=this.sdk.getSystemInfoSync(),r=100;t&&(r=t/Laya.stage.height*o.windowHeight);let s=10;i&&(s=i/Laya.stage.width*o.windowWidth),(a=this.sdk.createCustomAd({adUnitId:n,adIntervals:30,style:{left:s,top:r,width:375,fixed:!0}})).onError(e=>{console.log("getCustomAd",n,e)}),a.onLoad(e=>{});let l=this;a.onHide(t=>{l.onHideAD(e,t)})}this.mAdMap[e.toString()]=a}return this.mAdMap[e.toString()]}showCustom(e,t,i,n,a,o,r){if(!this.isSupport)return;this.mErrorCaller[e]=n,this.mErrorFunc[e]=a,this.mHideCaller[e]=o,this.mHideFunc[e]=r;let s=this.getCustomAd(e,t,i);if(s&&!s.isShow()){let t=this;s.show().then(()=>{console.log("WX showCustom显示成功:",e)}).catch(i=>{t.onErrorAD(e,i)})}return s}hideCustom(e){if(!this.isSupport)return;let t=this.mAdMap[e.toString()];t&&t.isShow()&&t.hide()}onErrorAD(e,t){this.mErrorCaller[e]&&this.mErrorFunc[e]?this.mErrorFunc[e].call(this.mErrorCaller[e],t):console.log("onErrorAD:",t)}onHideAD(e,t){this.mHideCaller[e]&&this.mHideFunc[e]&&this.mHideFunc[e].call(this.mHideCaller[e],t)}}class Pi extends Laya.Sprite{constructor(e,t,i,n){super(),this.isDebug=!1,this.bendTimes=[1e4,1e4,7e3,1e4,11500,1e4,11500,1e4],this.curBendTime=0,this.dstIndex=0,this.changeTime=2e3,this.curBendAngle=new Laya.Vector4,this.robots=new Array,this._backGroundPos=new Laya.Vector3,this._jiasuDiffPlayer=new Laya.Vector3,this._tempColor=new Laya.Vector4,this._tempColor1=new Laya.Vector3,this._tempBuilder=new Laya.Vector4,this._isPlayJaSu=!1,this.score=0,this.passCount=0,this.state=0,this.reliveCount=0,this.is_relive=!1,this._dstAngleXIdx=-1,this._dstAngleYIdx=-1,this._isShow=!1,this.isNight=!1,this._fistGame=!0,this.changeColorTime=0,this._dstAngleV=new Laya.Vector4(0,0,0,0);let a=new Laya.Vector4(-100,0,0,0),o=new Laya.Vector4(100,0,0,0),r=new Laya.Vector4(0,10,0,0),s=new Laya.Vector4(0,-10,0,0),l=new Laya.Vector4(-100,-10,0,0),d=new Laya.Vector4(100,10,0,0),h=new Laya.Vector4(-100,0,0,0),c=new Laya.Vector4(100,0,0,0);this.dstAangles=[a,o,r,s,l,h,d,c],this._builderLayer=new Laya.Sprite3D,this._obstacleLayer=new Laya.Sprite3D,this._playerLayer=new Laya.Sprite3D,this._mapLayer=new Laya.Sprite3D,this._colorHelp=new Ee(0,255,2),this._colorBuilder=new Ee(64,127,.5),this.mouseEnabled=!1,this._app=e,this._url=i,this._preLoadArr=n}get eventDispatcher(){return this._eventDispatcher||(this._eventDispatcher=new Laya.EventDispatcher),this._eventDispatcher}get mainPlayer(){return this._mainPlayer}get cameraRoot(){return this._cameraRoot}get roadMgr(){return this._roadMgr||(this._roadMgr=new ve(this,this._app)),this._roadMgr}get mapLayer(){return this._mapLayer}get obstacleLayer(){return this._obstacleLayer}get builderLayer(){return this._builderLayer}get lscene(){return this._scene}get app(){return this._app}enterScene(){if(this.state>0)return;this.state=Pi.STATUS_LOAD,this.dispose();let e=[this._url];if(this._preLoadArr){let t=this._preLoadArr.length;for(let i=0;i<t;i++){let t=J.ObstacleTypeTemp[this._preLoadArr[i]-1];t&&(this.isNight?(t[7]&&t[7].length&&e.push($.scpath+t[7]),t[8]&&t[8].length&&e.push($.obstacle_model+t[8])):(t[5]&&t[5].length&&e.push($.scpath+t[5]),t[6]&&t[6].length&&e.push($.obstacle_model+t[6])))}}Laya.loader.create(e,Laya.Handler.create(this,this.loadScene))}show(){this._isShow=!0,this._scene&&this.addChildAt(this._scene,0)}hide(){this._isShow=!1,this._scene&&this._scene.removeSelf()}updateDstAngleData(e,t){if(!e&&!t)return this._dstAngleXs=null,this._dstAngleYs=null,this._dstAngleXIdx=this._dstAngleYIdx=-1,this.changeTime=2e3,void(this.curBendTime=0);e&&e.length?this._dstAngleXs=e.concat():this._dstAngleXs=null,t&&t.length?this._dstAngleYs=t.concat():this._dstAngleYs=null,this._dstAngleXIdx=this._dstAngleYIdx=-1}resize(e,t){this.size(e,t),this._scene&&this._scene.size(e,t)}loadScene(){this._scene=Laya.Loader.getRes(this._url),this.initScene();let e=this._preLoadArr?this._preLoadArr.length:0;for(let t=0;t<e;t++)this._roadMgr&&this._roadMgr.preCreateObstacle(this._preLoadArr[t])}initScene(){if(!this._scene)return;this.show(),this._colorHelp.init(88,186,219),this._colorBuilder.init(86,110.5,118.75),this.lscene.addChild(this._builderLayer),this.lscene.addChild(this._mapLayer),this.lscene.addChild(this._obstacleLayer),this.lscene.addChild(this._playerLayer),this.camera||(this.camera=this._scene.getChildByName("Main Camera"),this.camera.enableHDR=!1,this.cameraPos=this.camera.transform.position.clone()),this.cameraFirst||(this.cameraFirst=this._scene.getChildByName("Main CameraFirst"),this.camera.enableHDR=!1,this.cameraFirst.active=!1),this.camera.transform.position=this.cameraFirst.transform.position.clone(),this._cameraRoot||(this._cameraRoot=this.camera.addComponent(ae)),this._cameraRoot.init(this,this.camera),this.directionLight||(this.directionLight=this.camera.getChildByName("Directional Light")),this.goldPosV||(this.goldPosV=new Laya.Vector3,this.camera.convertScreenCoordToOrthographicCoord(new Laya.Vector3(10,10,0),this.goldPosV)),this.playerFirstPos||(this.playerFirstPos=new Laya.Vector3(0,12.1,-88));let e=this._scene.getChildByName("role");if(!this._mainPlayer){let t=e.getChildByName("D01");this.playerClone=t.clone(),t.transform.position=this.playerFirstPos.clone(),this._mainPlayer=new ne,this._mainPlayer.init(t),this._mainPlayer.rigidbodyEnable=!0,this._mainPlayer.boxColliderEnable=!0,this.cameraRoot.distancePlayerZ=t.transform.position.z-this.camera.transform.position.z,this.cameraRoot.distancePlayerY=t.transform.position.y-this.camera.transform.position.y,this.cameraRoot.distancePlayerZ1=this.playerClone.transform.position.z-this.cameraPos.z,this.cameraRoot.distancePlayerY1=this.playerClone.transform.position.y-this.cameraPos.y,this._mainPlayer.playerScript.init(this._app,t,!0),this._mainPlayer.playerScript.isNight=this.isNight}if(this._qiliuEffect||(this._qiliuEffect=this._app.isInNight?e.getChildByName("qiuliu"):e.getChildByName("jiasuqiliu")),this._qiliuEffect&&(this._qiliuEffect.active=!1),!this._backGround&&(this._backGround=this._scene.getChildByName("GackGround"),this._backGround)){this._backGroundDiffP=this._backGround.transform.position.z-this.playerClone.transform.position.z,this._backGround.transform.position.cloneTo(this._backGroundPos),this._backGround02=this._backGround.getChildByName("background02"),this._backGround01=this._backGround.getChildByName("background01");let e=new re;e.albedoTexture=Laya.loader.getRes(this._app.isInNight?$.night_model+"snow.jpg":$.scene_model+"subastanceall.jpg"),this._backGround01.meshRenderer.material=e}let t=this._scene.getChildByName("map");t&&(t.active=!1,this.roadObj=t.getChildByName("round_snow"),this.builderObj=t.getChildByName("snow_hill"),this.treeObj=t.getChildByName("tree_snow01"),this._app.isInNight?this.adverObj=t.getChildByName("adver"):this.adverObj=t.getChildByName("snow_hill_s")),this._roadMgr&&(this._tempColor.x=this._colorHelp.r/255,this._tempColor.y=this._colorHelp.g/255,this._tempColor.z=this._colorHelp.b/255,this._tempBuilder.x=this._colorBuilder.r/255,this._tempBuilder.y=this._colorBuilder.g/255,this._tempBuilder.z=this._colorBuilder.b/255,this.roadMgr.init(this._tempColor,this._tempBuilder)),this._effectFireworks=Laya.loader.getRes($.fireworks),this._effectFireworks&&(this._effectFireworks.removeSelf(),this._effectFireworks1=this._effectFireworks.clone(),this._effectFireworks1.removeSelf(),this.state=Pi.STATUS_LOADED)}readyGo(e=!1){C.I.playMusic(1),Laya.SoundManager.soundMuted=!1,this.state==Pi.STATUS_END?this.state=Pi.STATUS_RELIFE:this.state=Pi.STATUS_START,this.mainPlayer&&(this.mainPlayer.playerScript.isDie=!1,this.mainPlayer.playerScript.running=!0),e&&this.initRobot(!0)}initRobot(e=!1){if(!this.robots.length)for(var t=0;t<4;t++){let e=new Le,t=this.playerClone.clone();t.name="robot",this._playerLayer.addChild(t),e.init(t),e.rigidbodyEnable=!0,e.boxColliderEnable=!0,e.robotScript.init(this._app,t,!1),e.robotScript.changeSkinTrail(),this.robots.push(e)}let i=this._fistGame?200:250;this._fistGame=!1;let n=this.robots.length;for(t=0;t<n;t++){let n=this.robots[t];if(n)if(n.active=!0,e)n.robotScript.running?n.robotScript.diff_z-this._mainPlayer.playerScript.diff_z>85&&n.robotScript.randStartPos():n.robotScript.isDie&&n.robotScript.diff_z>=this._mainPlayer.playerScript.diff_z?Laya.timer.once(1e3,this,e=>{e&&e.robotScript.randStartPos()},[n]):n.robotScript.randStartPos();else{n.robotScript.curPower=J.MAX_POWER;var a=(2==t?2:t-2)+Q.randomRange(-3,3)/10;n.robotScript.reset(a,(t+1)*i),n.robotScript._moveDiffX=a,n.robotScript._desDiffX=Math.round(a)}}}onUpdate(e){if(this.isGamePlay()){this.changeColorTime-=e,this._mainPlayer.playerScript.running&&this.updateScore(this.score+1),this.changeColorTime<0&&(this._colorHelp.updateColor(),this._tempColor1.x=this._tempColor.x=this._colorHelp.r/255,this._tempColor1.y=this._tempColor.y=this._colorHelp.g/255,this._tempColor1.z=this._tempColor.z=this._colorHelp.b/255,this._colorBuilder.updateColor(),this._tempBuilder.x=this._colorBuilder.r/255,this._tempBuilder.y=this._colorBuilder.g/255,this._tempBuilder.z=this._colorBuilder.b/255,this.changeColorTime=100),this._mainPlayer.playerScript.startTransfo?(this.curBendTime+=20/24*e,this.curBendTime>=this.changeTime&&(this._dstAngleXIdx=this._dstAngleXs&&this._dstAngleXs.length?this.RandBlendIndex(this._dstAngleXIdx,0,this._dstAngleXs.length-1):-1,this._dstAngleV.x=this._dstAngleXIdx>=0?this._dstAngleXs[this._dstAngleXIdx]:0,this._dstAngleYIdx=this._dstAngleYs&&this._dstAngleYs.length?this.RandBlendIndex(this._dstAngleYIdx,0,this._dstAngleYs.length-1):-1,this._dstAngleV.y=this._dstAngleYIdx>=0?this._dstAngleYs[this._dstAngleYIdx]:0,this.score>=1e4&&0==this._dstAngleV.x&&0==this._dstAngleV.y&&(this._dstAngleV.x=J.DST_ANGLEXS[Q.randomRange(0,J.DST_ANGLEXS.length-1)],this._dstAngleV.y=J.DST_ANGLEYS[Q.randomRange(0,J.DST_ANGLEYS.length-1)]),this.dstIndex=this.RandBlendIndex(this.dstIndex,0,this.bendTimes.length-1),this.changeTime=this.bendTimes[this.dstIndex],this.curBendTime=0)):(this._dstAngleV.x=0,this._dstAngleV.y=0,this.curBendAngle.x=0,this.curBendAngle.y=0);let n,a=this.curBendTime/this.changeTime,o=this._dstAngleV;Laya.Vector4.lerp(this.curBendAngle,o,a/20,this.curBendAngle),this._roadMgr&&this.roadMgr.update(e,this.curBendAngle,this._tempColor,this._tempBuilder),this._mainPlayer&&this._mainPlayer.playerScript.Update(e,this.curBendAngle);let r=this.robots.length;for(var t=0;t<r;t++){(n=this.robots[t].robotScript).Update(e,this.curBendAngle);let i=n.diff_z-this.mainPlayer.playerScript.diff_z;i<=-10&&n.running&&this._mainPlayer.playerScript.startTransfo&&n.randStartPos(),i<=-2&&!n.isPass&&(n.isPass=!0,this.updatePassCount(this.passCount+1)),i>=2&&n.isPass&&(n.isPass=!1,this.updatePassCount(this.passCount-1))}var i;if(this._backGround&&this.mainPlayer&&(this._backGroundPos.z=this.mainPlayer.playerScript.diff_z+this._backGroundDiffP,this._backGround.transform.position=this._backGroundPos),this._backGround01&&this._backGround01.meshRenderer.sharedMaterial instanceof re&&this._backGround01.meshRenderer.sharedMaterial.setBendOffset(this.curBendAngle),this.showAddEffect){if(!this._isPlayJaSu)this._isPlayJaSu=!0,this._qiliuEffect&&(this._qiliuEffect.active=!0),(i=this._qiliuEffect.getComponent(Laya.Animator))&&(i.play(),i.speed=1)}else if(this._isPlayJaSu)this._isPlayJaSu=!1,this._qiliuEffect&&(this._qiliuEffect.active=!1),(i=this._qiliuEffect.getComponent(Laya.Animator))&&(i.speed=0);this._qiliuEffect&&this._qiliuEffect.active&&(this._qiliuEffect.transform.position.x=this.mainPlayer.owner.transform.position.x,this._qiliuEffect.transform.position.y=this.mainPlayer.owner.transform.position.y+.558,this._qiliuEffect.transform.position.z=this.mainPlayer.owner.transform.position.z-.3,this._qiliuEffect.transform.position=this._qiliuEffect.transform.position)}else this._backGround&&this.mainPlayer&&(this._backGroundPos.z=this.mainPlayer.playerScript.diff_z+this._backGroundDiffP,this._backGround.transform.position=this._backGroundPos);this._cameraRoot&&this._cameraRoot.Update(e)}RandBlendIndex(e,t,i){let n,a=0;do{if(n=Q.randomRange(t,i),++a>=100)break}while(n==e);return n}gameEnd(){if(this.state!=Pi.STATUS_OVER&&this.state!=Pi.STATUS_END){if(this._colorHelp.init(88,186,219),this._colorBuilder.init(86,110.5,118.75),this.state==Pi.STATUS_START?this.state=Pi.STATUS_END:this.state==Pi.STATUS_RELIFE&&(this.state=Pi.STATUS_OVER),this.reliveCount>=2&&(this.state=Pi.STATUS_OVER),Laya.Browser.onMiniGame){let e=Ni.I.getAdSwitchByPosition(be.BATTLE_AD);null!=e&&1==e.state&&ki.I.hideCustom(H.AD_CUSTOM_SINGLE_LEFT)}Ce.log("SceneRoot-close-hideBannerAd"),xi.I.hideBannerAd(V.AD_BANNER_BOX),mn.showDialog(mn.RELIVEVIEW,!0,!0),Laya.SoundManager.stopMusic(),C.I.playSound("sounds/lose1.mp3")}}isGamePlay(){return this.state==Pi.STATUS_START||this.state==Pi.STATUS_RELIFE||this.state==Pi.STATUS_END}isGameReady(){return this.state==Pi.STATUS_LOADED}updatePassCount(e){if(e<0)e=0;else if(e>15)return;this.passCount=e,this._passEvent?this._passEvent.data=e:this._passEvent=new te(te.PASS_CHANGE,e),Gi.evt.dispatchEvent(this._passEvent)}updateScore(e){e<0&&(e=0),this.score=e,this._scoreEvent?this._scoreEvent.data=e:this._scoreEvent=new te(te.SCORE_CHANGE,e),Gi.evt.dispatchEvent(this._scoreEvent)}relive(e=0,t=0){this._mainPlayer&&(t&&(this._mainPlayer.playerScript.wudiEndTime=Laya.timer.currTimer+t),e&&(this._mainPlayer.playerScript.addSpeedTime=Laya.timer.currTimer+e),this._mainPlayer.playerScript.addPower()),this.readyGo(!0)}reset(){this.is_relive=!1,this._colorHelp.init(88,186,219),this._colorBuilder.init(86,110.5,118.75),this.updateScore(0),this.updatePassCount(0),this.reliveCount=0,this.state=Pi.STATUS_LOADED,this._isPlayJaSu=!1,this.curBendAngle.setValue(0,0,0,0),this.mainPlayer.playerScript.reset(),this._cameraRoot.reset(),this._tempColor.x=this._colorHelp.r/255,this._tempColor.y=this._colorHelp.g/255,this._tempColor.z=this._colorHelp.b/255,this._tempBuilder.x=this._colorBuilder.r/255,this._tempBuilder.y=this._colorBuilder.g/255,this._tempBuilder.z=this._colorBuilder.b/255,this.roadMgr.reset(this._tempColor,this._tempBuilder),this.updateDstAngleData();let e=this.robots.length;for(var t=0;t<e;t++){let e=this.robots[t];e&&(e.robotScript.changeSkinTrail(),e.active=!1)}}updateSkin(){this.mainPlayer&&this.mainPlayer.playerScript&&this.mainPlayer.playerScript.refushSkinTrail(!0)}clear(){this.removeSelf()}resetScene(){this._colorHelp.init(88,186,219),this._colorBuilder.init(86,110.5,118.75),this.is_relive=!1,this.state==Pi.STATUS_END&&(this.updatePassCount(0),this._isPlayJaSu=!1,this.mainPlayer.playerScript.reset(),this._cameraRoot.reset(),this._roadMgr&&(this._tempColor.x=this._colorHelp.r/255,this._tempColor.y=this._colorHelp.g/255,this._tempColor.z=this._colorHelp.b/255,this._tempBuilder.x=this._colorBuilder.r/255,this._tempBuilder.y=this._colorBuilder.g/255,this._tempBuilder.z=this._colorBuilder.b/255,this.roadMgr.reset(this._tempColor,this._tempBuilder)),this.reliveCount=0)}playFireworksEffect(e,t,i,n,a){Laya.timer.clear(this,this.playFireworksEnd),this._effectFireworks.particleSystem.play();let o=this._effectFireworks.getChildByName("fireworks01");o&&o.particleSystem.play(),this._effectFireworks.transform.position.x=e-n,this._effectFireworks.transform.position.y=t,this._effectFireworks.transform.position.z=i,this._effectFireworks.transform.position=this._effectFireworks.transform.position,this._effectFireworks.transform.localRotationEulerY=a,this._effectFireworks.parent||this._playerLayer.addChild(this._effectFireworks),this._effectFireworks1.particleSystem.play();let r=this._effectFireworks1.getChildByName("fireworks01");r&&r.particleSystem.play(),this._effectFireworks1.transform.position.x=e+n,this._effectFireworks1.transform.position.y=t,this._effectFireworks1.transform.position.z=i,this._effectFireworks1.transform.position=this._effectFireworks1.transform.position,this._effectFireworks1.transform.localRotationEulerY=a,this._effectFireworks1.parent||this._playerLayer.addChild(this._effectFireworks1),Laya.timer.once(5e3,this,this.playFireworksEnd)}playFireworksEnd(){if(!this._effectFireworks)return;this._effectFireworks.particleSystem.stop();let e=this._effectFireworks.getChildByName("fireworks01");if(e&&e.particleSystem.stop(),this._effectFireworks.removeSelf(),this._effectFireworks1){this._effectFireworks1.particleSystem.stop(),this._effectFireworks1.getChildByName("fireworks01")&&e.particleSystem.stop(),this._effectFireworks1.removeSelf()}}setSnowParEffect(e){e&&(this._effectSnowPars=e,this._effectSnowPars.removeSelf())}playSnowParEffect(e,t,i,n){if(!this._effectSnowPars)return;Laya.timer.clear(this,this.playSnowParEnd),this._effectSnowPars.particleSystem.play();let a=this._effectSnowPars.getChildByName("qi");a&&a.particleSystem.play(),this._effectSnowPars.transform.position.x=e,this._effectSnowPars.transform.position.y=t,this._effectSnowPars.transform.position.z=i,this._effectSnowPars.transform.position=this._effectSnowPars.transform.position,this._effectSnowPars.transform.localRotationEulerY=n,this._effectSnowPars.parent||this._playerLayer.addChild(this._effectSnowPars),Laya.timer.once(5e3,this,this.playSnowParEnd)}playSnowParEnd(){if(!this._effectSnowPars)return;this._effectSnowPars.particleSystem.stop();let e=this._effectSnowPars.getChildByName("qi");e&&e.particleSystem.stop(),this._effectSnowPars.removeSelf()}dispose(){this._cameraRoot&&(this._cameraRoot.destory(),this._cameraRoot=null),this._mainPlayer&&(this._mainPlayer.destroy(),this._mainPlayer=null),this.camera&&(this.camera.destroy(),this.camera=null),this.directionLight&&(this.directionLight.destroy(),this.directionLight=null),this.roadMgr&&this.roadMgr.clear(),this._scene&&(this._scene.destroy(!0),this._scene=null),Laya.loader.clearRes(this._url),Laya.loader.clearUnLoaded(),Laya.SoundManager.stopAllSound()}}Pi.STATUS_NONE=0,Pi.STATUS_LOAD=1,Pi.STATUS_LOADED=2,Pi.STATUS_START=3,Pi.STATUS_END=4,Pi.STATUS_RELIFE=5,Pi.STATUS_OVER=6;class Bi{constructor(){this._smart=2,this._moveSpeed=4,this._roateVec3=new Laya.Vector3,this._runVec3=new Laya.Vector3,this._oldx=0,this._isMouseDown=!1,this._targetx=0,this._targety=0,Laya.stage.on(Laya.Event.MOUSE_DOWN,this,this.mouseEvent),Laya.stage.on(Laya.Event.MOUSE_UP,this,this.mouseEvent),Laya.stage.on(Laya.Event.MOUSE_MOVE,this,this.mouseEvent)}initScene(e){this.sceneRoot=e}mouseEvent(e){this.sceneRoot&&(e.type==Laya.Event.MOUSE_DOWN?this.onMouseDown(e):e.type==Laya.Event.MOUSE_UP||e.type==Laya.Event.MOUSE_OUT?this.onMouseUp(e):e.type==Laya.Event.MOUSE_MOVE&&this.onMouseMove(e))}onMouseDown(e){e.target instanceof In||(!this.sceneRoot.mainPlayer.playerScript.isDie&&(this.sceneRoot.mainPlayer.playerScript.running=!0),this._oldPos||(this._oldPos=new Laya.Vector3),this._curPos||(this._curPos=new Laya.Vector3),this._oldPos.x=Laya.stage.mouseX,this._oldPos.z=Laya.stage.mouseY,this._isMouseDown=!0)}onMouseUp(e){e.target instanceof In||(this._isMouseDown=!1,this._oldx=this._runVec3.x)}onMouseMove(e){if(!this._isMouseDown)return;if(!this.sceneRoot.isGamePlay())return;if(this._targetx=Laya.stage.mouseX,this._targety=Laya.stage.mouseY,this._targetx>this._oldPos.x?this._targetx=this._oldPos.x+(this._targetx-this._oldPos.x)*this._smart:this._targetx<this._oldPos.x&&(this._targetx=this._oldPos.x-(this._oldPos.x-this._targetx)*this._smart),this._targety>this._oldPos.y?this._targety=this._oldPos.y+(this._targety-this._oldPos.y)*this._smart:this._targety<this._oldPos.y&&(this._targety=this._oldPos.y-(this._oldPos.y-this._targety)*this._smart),this._curPos.x=this._targetx,this._curPos.z=this._targety,Laya.Vector3.subtract(this._oldPos,this._curPos,this._curPos),0==this._curPos.x&&0==this._curPos.z)return void console.log("====不转向？",this._oldPos,this._curPos);Laya.Vector3.normalize(this._curPos,this._curPos),this._curPos.cloneTo(this._roateVec3);let t=180*Math.atan2(this._roateVec3.z,this._roateVec3.x)/Math.PI;var i=t*Math.PI/180;t<40&&t>-40&&(t=40,i=.7),(t<-140||t>140)&&(t=140,i=2.44),this._runVec3.x=this._oldx+Math.cos(i)*this._moveSpeed,this.sceneRoot.mainPlayer.playerScript.playerMove(this._runVec3.x)}}class Gi extends Laya.Scene{constructor(){super(),this.isInNight=!1,this._isBlur=!1,this._isPause=!1,this._nextUpdateTime=0,this.width=720,this.height=Laya.stage.height,Gi.app=this,this._uiRoot=new mn,Laya.stage.addChildAt(this._uiRoot,1),Laya.stage.on(Laya.Event.BLUR,this,this.onBlur),Laya.stage.on(Laya.Event.FOCUS,this,this.onFocus),Laya.stage.on(Laya.Event.VISIBILITY_CHANGE,this,this.onVisibleChange),Gi.evt.addEventListener(te.MAP_CHANGE,this.onMapChange,this),this.tc=new Bi}get sceneRoot(){return this.isInNight?this._sceneNightRoot:this._sceneRoot}get uiRoot(){return this._uiRoot}set mainPlayer(e){this._mainPlayer=e}startGame(){Laya.timer.frameLoop(1,this,this.onUpdate),Gi.app.isInNight=12==C.I.map,Laya.SoundManager.setMusicVolume(1==C.I.bgm?.8:0),Gi.app.uiRoot.showHud()}onMapChange(e){Gi.app.isInNight=2==e.data,Gi.app.updateScene()}onBlur(){Laya.Browser.onPC||(this._isBlur=!0)}onFocus(){Laya.Browser.onPC||(this._isBlur=!1,C.isExit&&fn.hideAdv(Ci.bannerAdId))}onVisibleChange(){this._isBlur=!Laya.stage.renderingEnabled}pauseGame(e=!1){this._isPause=!0}playGame(e=!1){this._isPause=!1}updateScene(){let e=this.sceneRoot;if(e&&!e.isGameReady())return;let t=Laya.timer.currTimer;this._nextUpdateTime=t+6e4,this.isInNight?(de.clear(),this._sceneRoot&&this._sceneRoot.clear(),this._sceneNightRoot?this._sceneNightRoot.updateSkin():(this._sceneNightRoot=new Pi(this,this._mainPlayer,$.scene_night,[7,8,10]),this._sceneNightRoot.isNight=!0,this._sceneNightRoot.resize(720,Laya.stage.height),this._sceneNightRoot.enterScene()),this._sceneNightRoot.parent||Laya.stage.addChildAt(this._sceneNightRoot,0),Gi.app.tc.initScene(this._sceneNightRoot)):(de.clear(),this._sceneNightRoot&&this._sceneNightRoot.clear(),this._sceneRoot?this._sceneRoot.updateSkin():(this._sceneRoot=new Pi(this,this._mainPlayer,$.scene,[7,8,10]),this._sceneRoot.resize(720,Laya.stage.height),this._sceneRoot.enterScene()),this._sceneRoot.parent||Laya.stage.addChildAt(this._sceneRoot,0),Gi.app.tc.initScene(this._sceneRoot))}onUpdate(){if(this._isBlur)return;if(this._isPause)return;let e=Laya.timer.currTimer,t=Laya.timer.delta;t>1e4&&(t=0),this._nextUpdateTime<=e&&this.updateScene(),this.isInNight?this._sceneNightRoot&&this._sceneNightRoot.onUpdate(t):this._sceneRoot&&this._sceneRoot.onUpdate(t),this._uiRoot&&this._uiRoot.onUpdate(t),de.update(t)}}Gi.evt=new class{constructor(){this._eventsMap=null}addEventListener(e,t,i){this._eventsMap||(this._eventsMap=new Object);let n=this._eventsMap[e];n||(n=this._eventsMap[e]=[]);let a={listener:t,thisObject:i};for(let e=0;e<n.length;e++){let a=n[e];if(a.listener==t&&a.thisObject==i)return}n.push(a)}hasEventListener(e){return this._eventsMap&&null!=this._eventsMap[e]}removeEventListener(e,t,i){if(null==this._eventsMap)return;let n=this._eventsMap[e];for(let e=0;n&&e<n.length;e++){let a=n[e];if(a.listener==t&&a.thisObject==i)return void n.splice(e,1)}}removeEventListenerByName(e){if(null==this._eventsMap)return;let t=this._eventsMap[e];t&&(t.length=0)}removeEventListenerByTarget(e){if(null!=this._eventsMap)for(let t in this._eventsMap){let i=this._eventsMap[t];if(i)for(let t=0;i&&t<i.length;t++)if(i[t].thisObject==e)return void i.splice(t,1)}}removeEventListenerByNameAndTarget(e,t){if(null==this._eventsMap)return;let i=this._eventsMap[e];if(i)for(let e=0;i&&e<i.length;e++)if(i[e].thisObject==t)return void i.splice(e,1)}dispatchEvent(e){let t=this._eventsMap;if(!t)return!0;let i=t[e.type];if(!i)return!0;let n=i.length;if(0==n)return!0;e.target=this;let a=[].concat(...i);for(let t=0;t<n;t++){let i=a[t];i&&i.listener.call(i.thisObject,e)}}};class Fi{static substitute(e,...t){if(null==e)return"";var i,n=t.length;1==n&&t[0]instanceof Array?n=(i=t[0]).length:i=t;for(var a=0;a<n;a++)e=e.replace(new RegExp("\\{"+a+"\\}","g"),i[a]);return e}static isEmpty(e){return null==e||0==e.length}static trim(e){return null==e?null:this.rtrim(this.ltrim(e))}static ltrim(e){if(null==e)return null;return e.replace(/^\s*/,"")}static rtrim(e){if(null==e)return null;return e.replace(/\s*$/,"")}static beginsWith(e,t){return t==e.substring(0,t.length)}static endsWith(e,t){return t==e.substring(e.length-t.length)}static getParameter(e,t){if(!e||0==e.length)return"";let i=e.substring(e.indexOf("?")+1,e.length).split("&"),n={};for(let e=0;e<i.length;e++){let t=i[e];n[t.substring(0,t.indexOf("=")).toLowerCase()]=t.substring(t.indexOf("=")+1,t.length)}var a=n[t.toLowerCase()];return a&&void 0!==a?a:""}static paddingLeft(e,t,i){var n=i-e.length;if(n<=0)return e;e=String(e);for(var a=0;a<n;a++)e=t+e;return e}static formatDate(e,t){if(!e)return null;let i={"y+":e.getFullYear(),"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),"S+":e.getMilliseconds()};for(let e in i)new RegExp("("+e+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?i[e]:("00"+i[e]).substr((""+i[e]).length)));return t}static sampleNum(e){return e<=99999?e.toString():(e=Math.floor(e/1e4))<=99999?e+"万":(e=Math.floor(e/1e4))+"亿"}static substituteByIndex(e,t,i){return null==e?"":e=e.replace(new RegExp("\\{"+t+"\\}","g"),i)}}class zi{constructor(e,t,i,n,a){this._list=[e,t,i,n,a]}set maxPower(e){if(this._maxPower!=e-1){this._maxPower=e-1;for(let e=0;e<5;e++){this._list[e].visible=this._maxPower>=e}}}set curPower(e){this._curPower=e-1;for(let e=0;e<5;e++){this._list[e].alpha=this._curPower>=e?1:.3}}}class Ui{constructor(){this.isLoad=!1,this.isShow=!1,this.support=!1,this.gamePortalAd=null,this.support=Laya.Browser.onQGMiniGame&&qg.getSystemInfoSync().platformVersionCode>=1076,this.initDrawerGameAd()}static get I(){return h.get(Ui)}isSupport(){return this.support}initDrawerGameAd(){if(!this.support)return;if(0==T.I.getConf().ad.gameportal.length||null==T.I.getConf().ad.gameportal[0])return;this.gamePortalAd=qg.createGamePortalAd({adUnitId:T.I.getConf().ad.gameportal[0]});let e=this;this.gamePortalAd.onLoad(()=>{console.error("onLoad","互推盒子九宫格广告加载成功 this.isLoad:"+e.isShow),e.isLoad=!0,e.isShow&&e.gamePortalAd.show().then(()=>{console.error("gamePortalAd show success")}).catch(t=>{console.error("gamePortalAd show fail with:"+t.errCode+","+t.errMsg),e.onClose()})}),this.gamePortalAd.onClose(()=>{e.onClose(),console.error("互推盒子九宫格广告关闭")}),this.gamePortalAd.onError(t=>{e.onClose(),console.error("互推盒子九宫格广告出错"),console.error(t)})}showPlatformDrawerGameAd(e,t){if(!this.support)return;e&&(this.mCloseCaller=e),t&&(this.mCloseFunc=t);let i=this;this.isShow=!0,this.isLoad?this.gamePortalAd.show().then(()=>{}).catch(e=>{i.onClose()}):this.gamePortalAd.load().then(()=>{}).catch(e=>{i.onClose()})}onClose(){this.mCloseCaller&&this.mCloseFunc&&this.mCloseFunc.call(this.mCloseCaller),this.mCloseCaller=null,this.mCloseFunc=null,this.isLoad=!1,this.isShow=!1,this.gamePortalAd.load().then(()=>{}).catch(e=>{})}}class Hi{constructor(){this.TIME=4e4,this.mAdMap={},this.mLastData={}}static get I(){return h.get(Hi)}createNativeAd(e,t,i){if(!Laya.Browser.onQGMiniGame)return;let n=T.I.getConf().ad.gameportal[e];i.visible=!1;let a=this;if(Ce.log("创建原生广告",e,i),null!=a.mAdMap[e.toString()]&&null!=a.mAdMap[e.toString()]&&this.mAdMap[e.toString()].skip&&(a.mLastData[e.toString()]=a.mAdMap[e.toString()],a.mAdMap[e.toString()].nativeAd.offLoad(null),a.mAdMap[e.toString()].nativeAd.offError(null),a.mAdMap[e.toString()].nativeAd.destroy(),a.mAdMap[e.toString()]=null),null!=a.mAdMap[e.toString()]&&null!=a.mAdMap[e.toString()]||!n||""==n)Ce.log("本地有数据",e,a.mAdMap),a.mAdMap[e.toString()].view=i,a.showNativeInfo(a.mAdMap[e.toString()].nativeCurrentAd,t,i),a.AddFreshAd(e,t,i);else{Ce.log("创建原生广告",e);let o=qg.createNativeAd({adUnitId:n});o.offLoad(null),o.offError(null),o.onLoad(function(n){let r;Ce.log("原生广告加载完成-onload触发",e),Ce.log(n),n&&n.adList&&n.adList.length>0?(r=n.adList.pop(),i&&(a.showNativeInfo(r,t,i),a.reportAdShow(o,r.adId.toString())),a.mAdMap[e.toString()]={nativeAd:o,view:i,nativeCurrentAd:r,skip:!1},a.AddFreshAd(e,t,i)):i&&null!=a.mLastData[e.toString()]&&null!=a.mLastData[e.toString()]&&(a.mAdMap[e.toString()]=a.mLastData[e.toString()],Ce.log("原生广告为空-使用旧的",e,a.mAdMap[e.toString()]),a.mAdMap[e.toString()].view=i,a.showNativeInfo(a.mAdMap[e.toString()].nativeCurrentAd,t,i),a.AddFreshAd(e,t,i))}),o.onError(n=>{Ce.log("原生广告加载异常",e,n),i&&null!=a.mLastData[e.toString()]&&null!=a.mLastData[e.toString()]&&(a.mAdMap[e.toString()]=a.mLastData[e.toString()],Ce.log("原生广告加载异常-使用旧的",e,a.mAdMap[e.toString()]),a.mAdMap[e.toString()].view=i,a.showNativeInfo(a.mAdMap[e.toString()].nativeCurrentAd,t,i)),a.AddFreshAd(e,t,i)}),o.load()}}showNativeInfo(e,t,i){Ce.log("展示原生广告",t,i),t==Y.IMG?(i.skin=e.imgUrlList.length>0?e.imgUrlList[0]:e.icon,i.visible=!0):(i.skin=e.icon?e.icon:e.imgUrlList[0],i.visible=!0)}reportAdShow(e,t){Ce.log("上报广告曝光",t),e.reportAdShow({adId:t})}reportAdClick(e,t){return!Laya.Browser.onQGMiniGame||(Ce.log("上报广告点击1",e,this.mAdMap),null==this.mAdMap[e.toString()]||null==this.mAdMap[e.toString()]||null==this.mAdMap[e.toString()].nativeAd||this.mAdMap[e.toString()].skip?(Ce.log("不需要点击上报",this.mAdMap[e.toString()]),!1):(this.mAdMap[e.toString()].nativeAd.reportAdClick({adId:this.mAdMap[e.toString()].nativeCurrentAd.adId}),this.mAdMap[e.toString()].skip=!0,Ce.log("上报广告点击",this.mAdMap[e.toString()].nativeCurrentAd.adId),Ce.log("重新加载一次原生广告",e),this.createNativeAd(e,t,this.mAdMap[e.toString()].view),!0))}AddFreshAd(e,t,i){t==Y.IMG?(Laya.timer.clear(this,this.loopCompleteAd),Laya.timer.loop(this.TIME,this,this.loopCompleteAd,[e,t,i])):(Laya.timer.clear(this,this.loopCompleteAd2),Laya.timer.loop(this.TIME,this,this.loopCompleteAd2,[e,t,i]))}loopCompleteAd(e,t,i){Ce.log("广告换一个",e),null!=this.mAdMap[e.toString()]&&null!=this.mAdMap[e.toString()]&&(this.mAdMap[e.toString()].skip=!0),this.createNativeAd(e,t,i)}loopCompleteAd2(e,t,i){Ce.log("广告换一个",e),this.mAdMap[e.toString()]&&null!=this.mAdMap[e.toString()]&&(this.mAdMap[e.toString()].skip=!0),this.createNativeAd(e,t,i)}}class Yi{constructor(){this.isSupport=!1,this.isSupport=Laya.Browser.onVVMiniGame,this.isSupport&&(this.mErrorCaller=null,this.mErrorFunc=null,this.mHideCaller=null,this.mHideFunc=null,this.initAdvert())}static get I(){return h.get(Yi)}initAdvert(){this.initCustomAd()}initCustomAd(){this.reloadTimes={},this.mAdMap={}}getBoxPoralAd(e,t,i=10){if(!this.isSupport)return;let n=this,a=T.I.getConf().ad.gameportal[e];if(!n.mAdMap[e.toString()]&&a&&""!=a)if(qg.createBoxPortalAd){let o=null;(o=qg.createBoxPortalAd({posId:a,marginTop:t})).onLoad(()=>{n.reloadTimes[e]=0,console.error("onLoad","互推盒子九宫格广告加载成功")}),o.onError(a=>{console.log("盒子九宫格广告加载失败",a),null==n.reloadTimes[e]&&(n.reloadTimes[e]=0),n.reloadTimes[e]<3&&(console.log("加载次数:",n.reloadTimes[e]),Laya.timer.once(1500,n,n.showBoxPoralAd,[e,t,i]),n.reloadTimes[e]=n.reloadTimes[e]+1)}),o.onClose(e=>{console.log("互推盒子九宫格广告关闭"),o.show().then(e=>{console.log("show success")}).catch(t=>{console.log("show fail with:"+t.errCode+","+t.errMsg),n.onErrorAD(e)})}),n.mAdMap[e.toString()]=o}else console.log("暂不支持互推盒子相关 API");return n.mAdMap[e.toString()]}showBoxPoralAd(e,t,i,n,a,o,r){if(!this.isSupport)return;this.mErrorCaller=n,this.mErrorFunc=a,this.mHideCaller=o,this.mHideFunc=r;let s=this.getBoxPoralAd(e,t,i);if(s){let e=this;s.show().then(e=>{console.log("show success")}).catch(t=>{console.log("show fail with:"+t.errCode+","+t.errMsg),e.onErrorAD(t)})}return s}hideBoxPoralAd(e){if(!this.isSupport)return;let t=this.mAdMap[e.toString()];t&&t.hide()}onErrorAD(e){this.mErrorCaller&&this.mErrorFunc&&this.mErrorFunc.call(this.mErrorCaller,e)}onHideAD(e){this.mHideCaller&&this.mHideFunc&&this.mHideFunc.call(this.mHideCaller,e)}}class Xi{constructor(){this.TIME=4e4,this.mAdMap={},this.mLastData={}}static get I(){return h.get(Xi)}createNativeAd(e,t,i){if(!Laya.Browser.onVVMiniGame)return;let n=T.I.getConf().ad.gameportal[e];i.visible=!1;let a=this;if(Ce.log("创建原生广告",e,a.mAdMap),null!=a.mAdMap[e.toString()]&&null!=a.mAdMap[e.toString()]&&this.mAdMap[e.toString()].skip&&(a.mLastData[e.toString()]=a.mAdMap[e.toString()],a.mAdMap[e.toString()].nativeAd.offLoad(null),a.mAdMap[e.toString()].nativeAd.offError(null),a.mAdMap[e.toString()]=null),null!=a.mAdMap[e.toString()]&&null!=a.mAdMap[e.toString()]||!n||""==n)Ce.log("本地有数据",e,a.mAdMap),a.mAdMap[e.toString()].view=i,a.showNativeInfo(a.mAdMap[e.toString()].nativeCurrentAd,t,i),a.AddFreshAd(e,t,i);else{Ce.log("创建原生广告",e);let o=qg.createNativeAd({adUnitId:n});o.offLoad(null),o.offError(null),o.onLoad(function(n){let r;Ce.log("原生广告加载完成-onload触发",e),Ce.log(n),n&&n.adList&&n.adList.length>0?(r=n.adList.pop(),i&&(a.showNativeInfo(r,t,i),a.reportAdShow(o,r.adId.toString())),a.mAdMap[e.toString()]={nativeAd:o,view:i,nativeCurrentAd:r,skip:!1},a.AddFreshAd(e,t,i)):i&&null!=a.mLastData[e.toString()]&&null!=a.mLastData[e.toString()]&&(a.mAdMap[e.toString()]=a.mLastData[e.toString()],Ce.log("原生广告为空-使用旧的",e,a.mAdMap[e.toString()]),a.mAdMap[e.toString()].view=i,a.showNativeInfo(a.mAdMap[e.toString()].nativeCurrentAd,t,i),a.AddFreshAd(e,t,i))}),o.onError(n=>{Ce.log("原生广告加载异常",e,n),i&&null!=a.mLastData[e.toString()]&&null!=a.mLastData[e.toString()]&&(a.mAdMap[e.toString()]=a.mLastData[e.toString()],Ce.log("原生广告加载异常-使用旧的",e,a.mAdMap[e.toString()]),a.mAdMap[e.toString()].view=i,a.showNativeInfo(a.mAdMap[e.toString()].nativeCurrentAd,t,i)),a.AddFreshAd(e,t,i)}),o.load()}}showNativeInfo(e,t,i){Ce.log("展示原生广告",t,e),t==Y.IMG?(i.skin=e.imgUrlList[0],i.visible=!0):(i.skin=e.icon?e.icon:e.imgUrlList[0],i.visible=!0)}reportAdShow(e,t){Ce.log("上报广告曝光",t),e.reportAdShow({adId:t})}reportAdClick(e,t){return!Laya.Browser.onVVMiniGame||(Ce.log("上报广告点击1",e,this.mAdMap),null==this.mAdMap[e.toString()]||null==this.mAdMap[e.toString()]||null==this.mAdMap[e.toString()].nativeAd||this.mAdMap[e.toString()].skip?(Ce.log("不需要点击上报",this.mAdMap[e.toString()]),!1):(this.mAdMap[e.toString()].nativeAd.reportAdClick({adId:this.mAdMap[e.toString()].nativeCurrentAd.adId}),this.mAdMap[e.toString()].skip=!0,Ce.log("上报广告点击",this.mAdMap[e.toString()].nativeCurrentAd.adId),Ce.log("重新加载一次原生广告",e),this.createNativeAd(e,t,this.mAdMap[e.toString()].view),!0))}AddFreshAd(e,t,i){t==Y.IMG?(Laya.timer.clear(this,this.loopCompleteAd),Laya.timer.loop(this.TIME,this,this.loopCompleteAd,[e,t,i])):(Laya.timer.clear(this,this.loopCompleteAd2),Laya.timer.loop(this.TIME,this,this.loopCompleteAd2,[e,t,i]))}loopCompleteAd(e,t,i){Ce.log("广告换一个",e),null!=this.mAdMap[e.toString()]&&null!=this.mAdMap[e.toString()]&&(this.mAdMap[e.toString()].skip=!0),this.createNativeAd(e,t,i)}loopCompleteAd2(e,t,i){Ce.log("广告换一个",e),this.mAdMap[e.toString()]&&null!=this.mAdMap[e.toString()]&&(this.mAdMap[e.toString()].skip=!0),this.createNativeAd(e,t,i)}}class Wi extends O.HudViewUI{constructor(){super(),this._curPower=0,this._maxPower=2,this._posxs=88,this._posxdis=36,this.gameState=!1,this._addspeedT=0,this.btnRank.on(Laya.Event.CLICK,this,this.onRank),this.btnSetting.on(Laya.Event.CLICK,this,this.onSetting),this.btnPifu.on(Laya.Event.CLICK,this,this.onPifu),this.btn_power.on(Laya.Event.CLICK,this,this.onAddSpeed),this.btnShuoming.on(Laya.Event.CLICK,this,this.onShuoming),this.btnMore.on(Laya.Event.CLICK,this,this.onMore),Gi.evt.addEventListener(te.POWER_CHANGE,this.powerChange,this),Gi.evt.addEventListener(te.PASS_CHANGE,this.passChange,this),Gi.evt.addEventListener(te.SCORE_CHANGE,this.scoreChange,this),Gi.evt.addEventListener(te.MONEY_CHANGE,this.moneyChange,this),this.resetRadar(),this.btnStart.on(Laya.Event.CLICK,this,this.startGame),this.height=Laya.stage.height,this._powerBar=new zi(this.bar1,this.bar2,this.bar3,this.bar4,this.bar5),this.btnRank.visible=!1,Laya.Browser.onVVMiniGame&&(this.btnMore.visible=!1),Vi.I.statisticsReport(Ri.VIEW_INDEX)}initHud(){if(this._initBanner||(Laya.stage.height>1285?(this.box_head.top=30,this.imgGuide.top=90):(this.box_head.top=0,this.imgGuide.top=60),this._initBanner=!0),this.gameState=!1,this.mouseThrough=!1,this.box_btns.visible=!0,this.box_head.visible=!0,this.box_bar.visible=!1,this.btn_power.visible=!1,this.box_match.visible=!1,this.imgGuide.visible=!1,this.ani2.play(),Gi.evt.dispatchEvent(new te(te.MONEY_CHANGE)),Laya.timer.frameLoop(30,this,this.radarChange),this.ov_native.visible=!1,this.ov_native_battle.visible=!1,Laya.Browser.onVVMiniGame){let e=1e3;if(qg.getSystemInfoSync){e=qg.getSystemInfoSync().screenHeight/2-100}Yi.I.showBoxPoralAd(U.AD_GAME_PORTAL_1,e,1,this,null)}if(Laya.Browser.onMiniGame&&Mt.instance.show(Tt.MoonMainAdPanel,{adEnum:V.AD_BANNER_BOX}),Laya.Browser.onQGMiniGame||Laya.Browser.onVVMiniGame){let e=Ni.I.getAdSwitchByPosition(Ae.MAIN_RIGHT_AD);if(null==e||0==e.state)this.ov_native.visible=!1;else{this.ov_native.visible=!0;let e=this.ov_native.getChildByName("icon");Laya.Browser.onVVMiniGame?Xi.I.createNativeAd(U.AD_GAME_SINGLE_NATIVE,Y.ICON,e):Hi.I.createNativeAd(U.AD_GAME_SINGLE_NATIVE,Y.ICON,e),e.on(Laya.Event.MOUSE_OVER,this,()=>{Laya.Browser.onVVMiniGame?Xi.I.reportAdClick(U.AD_GAME_SINGLE_NATIVE,Y.ICON):Hi.I.reportAdClick(U.AD_GAME_SINGLE_NATIVE,Y.ICON)}),this.ov_native_close.on(Laya.Event.CLICK,this,()=>{this.ov_native.visible=!1})}Ce.log("HudView-showBannerAd"),xi.I.showBannerAd(V.AD_BANNER_BOX)}(Laya.Browser.onMiniGame||Laya.Browser.onVVMiniGame)&&xi.I.showInterstitialAd(k.AD_INTERSTITIAL_COMMON,null,null)}powerChange(e){if(e&&(this._curPower=e.data.power,this._maxPower=e.data.maxPower,e.data.music&&(C.I.playSound("sounds/life.mp3"),e.data.pos))){var t=e.data.pos;let i=Laya.Pool.getItemByClass("xuehua",Laya.Image);i.skin="comp/xuehua.png",this.addChild(i);let n=(t.x-40)/Laya.stage.clientScaleX,a=(t.y-125)/Laya.stage.clientScaleY;i.pos(n,a);let o=a-200;Laya.Tween.to(i,{y:o,alpha:.7},500,Laya.Ease.quartOut,Laya.Handler.create(this,this.playXuehuaEnd,[i]))}this._powerBar.maxPower=this._maxPower,this._powerBar.curPower=this._curPower}playXuehuaEnd(e){e&&(e.removeSelf(),Laya.Pool.recover("xuehua",e))}radarChange(){var e=Gi.app.sceneRoot;if(e.isGamePlay()&&e.robots.length){var t=e.mainPlayer.transform.position.z,i=-e.mainPlayer.playerScript._desDiffX;this.mainpalyer.y=85,Laya.Tween.to(this.mainpalyer,{x:this._posxs+i*this._posxdis},400);for(var n=0;n<4;n++){let i=e.robots[n];if(i){var a=i.robotScript.player.transform.position.z-t,o=-Math.floor(i.robotScript._desDiffX),r=this["robot"+(n+1)];(a=85-a)>180&&(a=180),a<10&&(a=10),Laya.Tween.to(r,{x:this._posxs+o*this._posxdis,y:a},400)}}}}resetRadar(){this.robot1.y=this.robot2.y=this.robot3.y=this.robot4.y=this.mainpalyer.y=180,this.robot1.x=this._posxs-2*this._posxdis,this.robot2.x=this._posxs-this._posxdis,this.mainpalyer.x=this._posxs,this.robot3.x=this._posxs+this._posxdis,this.robot4.x=this._posxs+2*this._posxdis}passChange(e){this.lblPass.text=Fi.substitute("has exceeded {0} players",e.data)}scoreChange(e){this.lblScroe.text=e.data+"m"}moneyChange(e){e.data&&this.addCoinPlay(e.data.pos,e.data.add)}addCoinPlay(e,t){let i=Laya.Pool.getItemByClass("coinitem",O.box.CoinItemUI);i.labelcoin.value=t.toString(),this.addChild(i);let n=(e.x-40)/Laya.stage.clientScaleX,a=(e.y-125)/Laya.stage.clientScaleY;i.pos(n,a);let o=a-200;Laya.Tween.to(i,{y:o,alpha:.7},500,Laya.Ease.quartOut,Laya.Handler.create(this,this.playCoinEnd,[i]))}playCoinEnd(e){e&&(e.removeSelf(),Laya.Pool.recover("coinitem",e))}onRank(e){Laya.Browser.onMiniGame&&(Mt.instance.hide(Tt.MoonMainAdPanel),mn.showDialog(mn.RANKVIEW,!1,!0))}onSetting(e){Laya.Browser.onMiniGame?Mt.instance.hide(Tt.MoonMainAdPanel):(Laya.Browser.onQGMiniGame||Laya.Browser.onVVMiniGame)&&(Ce.log("HudView-onSetting-hideBannerAd"),xi.I.hideBannerAd(V.AD_BANNER_BOX)),mn.showDialog(mn.SETTTINGVIEW,!1,!0)}onShuoming(){Laya.Browser.onMiniGame?Mt.instance.hide(Tt.MoonMainAdPanel):(Laya.Browser.onQGMiniGame||Laya.Browser.onVVMiniGame)&&(Ce.log("HudView-onShuoming-hideBannerAd"),xi.I.hideBannerAd(V.AD_BANNER_BOX)),mn.showDialog(mn.SHUOMINGVIEW,!1,!0)}onPifu(e){Laya.Browser.onMiniGame?Mt.instance.hide(Tt.MoonMainAdPanel):(Laya.Browser.onQGMiniGame||Laya.Browser.onVVMiniGame)&&(Ce.log("HudView-onPifu-hideBannerAd"),xi.I.hideBannerAd(V.AD_BANNER_BOX)),mn.showDialog(mn.PIFUVIEW)}onMore(){let e={};if(e.adEnum=V.AD_BANNER_BOX,Laya.Browser.onMiniGame){let t=Ni.I.getMatrixByPosition(xe.BOX_AD);null==t||t.length<=0?(Mt.instance.hide(Tt.MoonMainAdPanel),ki.I.showCustom(H.AD_CUSTOM_MAIN_MATRIX,250,1,this,this.onErrorCoustBoxAd,this,this.onHideCoustBoxAd)):(Mt.instance.show(Tt.MoonGameBoxPanel,e),xi.I.showInterstitialAd(k.AD_INTERSTITIAL_COMMON,null,null))}else Laya.Browser.onQGMiniGame&&Ui.I.showPlatformDrawerGameAd()}onErrorCoustBoxAd(e){Mt.instance.show(Tt.MoonTipPanel,"加载数据失败,请稍后重试."),Laya.Browser.onMiniGame&&Mt.instance.show(Tt.MoonMainAdPanel,{adEnum:V.AD_BANNER_BOX})}onHideCoustBoxAd(e){Laya.Browser.onMiniGame&&Mt.instance.show(Tt.MoonMainAdPanel,{adEnum:V.AD_BANNER_BOX})}startGame(){if(Laya.Browser.onMiniGame,Laya.Browser.onQGMiniGame||Laya.Browser.onVVMiniGame){let e=Ni.I.getAdSwitchByPosition(Ae.MAIN_RIGHT_AD);if(null!=e&&1==e.state&&e.pv>0){wt.random(0,100)<=e.pv&&(Laya.Browser.onVVMiniGame?Xi.I.reportAdClick(U.AD_GAME_SINGLE_NATIVE,Y.ICON):Hi.I.reportAdClick(U.AD_GAME_SINGLE_NATIVE,Y.ICON))}}Laya.Browser.onMiniGame?Mt.instance.hide(Tt.MoonMainAdPanel):(Laya.Browser.onQGMiniGame||Laya.Browser.onVVMiniGame)&&(Ce.log("HudView-hideBannerAd"),xi.I.hideBannerAd(V.AD_BANNER_BOX)),Laya.Browser.onVVMiniGame&&Yi.I.hideBoxPoralAd(U.AD_GAME_PORTAL_1),this.imgGuide.visible=!1,this.box_btns.visible=!1,this.box_head.visible=!1,this.mouseThrough=!0,this.box_bar.visible=!0,this.btn_power.visible=!0,this.box_match.visible=!0,this.lbl_num.text=Q.randomRange(5,9).toString(),1==C.I.right_left?this.btn_power.right=18:this.btn_power.left=18,Gi.app.sceneRoot.initRobot(),this.resetRadar();var e=C.I.getUnLock(0).length;if(e>0&&Math.random()<.1*e?mn.showDialog(mn.FREEUSEVIEW,!1,!0):mn.showDialog(mn.PIPEIVIEW,!1,!0),this.gameState=!0,this.ani2.stop(),C.I.gameStart(),Laya.Browser.onMiniGame){let e=Ni.I.getAdSwitchByPosition(be.BATTLE_AD);null!=e&&1==e.state&&ki.I.showCustom(H.AD_CUSTOM_SINGLE_LEFT,e.topMargin,e.leftMargin)}else if(Laya.Browser.onQGMiniGame||Laya.Browser.onVVMiniGame){let e=Ni.I.getAdSwitchByPosition(Ae.BATTLE_LEFT_AD);if(null==e||0==e.state)this.ov_native_battle.visible=!1;else{this.ov_native_battle.visible=!0;let e=this.ov_native_battle.getChildByName("icon");Laya.Browser.onVVMiniGame?Xi.I.createNativeAd(U.AD_GAME_SINGLE_NATIVE,Y.ICON,e):Hi.I.createNativeAd(U.AD_GAME_SINGLE_NATIVE,Y.ICON,e),e.on(Laya.Event.MOUSE_OVER,this,()=>{Laya.Browser.onVVMiniGame?Xi.I.reportAdClick(U.AD_GAME_SINGLE_NATIVE,Y.ICON):Hi.I.reportAdClick(U.AD_GAME_SINGLE_NATIVE,Y.ICON)}),this.ov_native_battle_close.on(Laya.Event.CLICK,this,()=>{this.ov_native_battle.visible=!1})}}Vi.I.statisticsReport(Ri.LV_START,1)}onAddSpeed(e){Gi.app.sceneRoot.mainPlayer.playerScript.manualAddSpeed(J.ADD_SPEED_TIME)&&(this.btn_power.mouseEnabled=!1,this.btn_power.alpha=.5,clearTimeout(this._addspeedT),this._addspeedT=setTimeout(()=>{this.btn_power.mouseEnabled=!0,this.btn_power.alpha=1},J.ADD_SPEED_TIME))}}class Ki extends O.SettingViewUI{constructor(){super(),this.btnBg.on(Laya.Event.MOUSE_DOWN,this,this.onBg),this.btnEffect.on(Laya.Event.MOUSE_DOWN,this,this.onEffect),this.btnShake.on(Laya.Event.MOUSE_DOWN,this,this.onShake),this.btnOprate.on(Laya.Event.MOUSE_DOWN,this,this.onOprate),this.onBg(null,!0),this.onEffect(null,!0),this.onShake(null,!0),this.onOprate(null,!0)}onOpened(e){Ce.log("SettingView-showBannerAd"),xi.I.showBannerAd(V.AD_BANNER_BOX),Laya.Browser.onMiniGame||Laya.Browser.onVVMiniGame?xi.I.showInterstitialAd(k.AD_INTERSTITIAL_COMMON,null,null):"object"==typeof FBInstant&&"undefined"!=typeof minigame&&xi.I.showInterstitialAd(k.AD_INTERSTITIAL_COMMON,null,null)}onBg(e,t=!1){t||(C.I.bgm=~C.I.bgm),1==C.I.bgm?(this.tag1.x=64,Laya.UIUtils.gray(this.btnBg,!1),Laya.SoundManager.setMusicVolume(.8),C.I.playSound()):(this.tag1.x=7,Laya.UIUtils.gray(this.btnBg,!0),Laya.SoundManager.setMusicVolume(0))}onEffect(e,t=!1){t||(C.I.effect=~C.I.effect),1==C.I.effect?(this.tag2.x=64,Laya.UIUtils.gray(this.btnEffect,!1),Laya.SoundManager.setSoundVolume(1),C.I.playSound(),Laya.LocalStorage.setItem("soundMute","1")):(this.tag2.x=7,Laya.UIUtils.gray(this.btnEffect,!0),Laya.SoundManager.setSoundVolume(0),Laya.LocalStorage.setItem("soundMute","0"))}onShake(e,t=!1){t||(C.I.shake=~C.I.shake),1==C.I.shake?(this.tag3.x=64,Laya.UIUtils.gray(this.btnShake,!1),C.I.playSound()):(this.tag3.x=7,Laya.UIUtils.gray(this.btnShake,!0))}onOprate(e,t=!1){t||(C.I.right_left=~C.I.right_left),1==C.I.right_left?(this.tag4.x=64,Laya.UIUtils.gray(this.btnOprate,!1),C.I.playSound(),Gi.app.uiRoot.hudView.btn_power.right=18,this.lblOprate.text="right hand to speed up"):(this.tag4.x=7,Gi.app.uiRoot.hudView.btn_power.left=18,Laya.UIUtils.gray(this.btnOprate,!0),this.lblOprate.text="right hand to speed up")}close(e){super.close(e),C.I.playSound("sounds/close.mp3"),C.I.save(),Ce.log("SettingView-close-hideBannerAd"),xi.I.hideBannerAd(V.AD_BANNER_BOX),Laya.Browser.onMiniGame?Mt.instance.show(Tt.MoonMainAdPanel,{adEnum:V.AD_BANNER_BOX}):(Laya.Browser.onQGMiniGame||Laya.Browser.onVVMiniGame)&&(Ce.log("SettingView-close-showBannerAd"),xi.I.showBannerAd(V.AD_BANNER_BOX))}}class ji{static init(){Laya.Browser.onMiniGame&&(wx.showShareMenu({withShareTicket:!0,success:()=>{},fail:()=>{},complete:()=>{}}),wx.onShareAppMessage(()=>{let e=ji.shareLocalPics[Q.randomRange(0,5)];return{title:e.title,imageUrl:e.image,success:e=>{e.errMsg},fail:e=>{"shareAppMessage:fail cancel"==e.errMsg||e.errMsg},complete:()=>{(new Date).getTime()}}}))}static share(){if(Laya.Browser.onMiniGame){un.adv("share");var e=ji.sharePics[Q.randomRange(0,5)];wx.shareAppMessage({imageUrlId:e.id,imageUrl:e.url,success:()=>{},fail:()=>{},complete:()=>{}})}}static share2(){if(Laya.Browser.onMiniGame){ji.shareState=!0,ji.currTime=(new Date).getTime(),un.adv("share");var e=ji.sharePics[Q.randomRange(0,5)];wx.shareAppMessage({imageUrlId:e.id,imageUrl:e.url,success:()=>{},fail:()=>{},complete:()=>{}})}}static shareFriend(e){let t=ji.shareLocalPics[Q.randomRange(0,5)];Laya.Browser.onMiniGame&&(wx.showShareMenu({withShareTicket:!0,success:()=>{},fail:()=>{},complete:()=>{e&&e()}}),wx.shareAppMessage({title:t.title,imageUrl:t.image,query:"roomID=",success(t){wx.getSystemInfo({success:i=>{"android"==i.platform&&wx.getShareInfo({shareTicket:t.shareTickets,success:t=>{e&&e()},fail:()=>{ji.alert("请分享到群")},complete:()=>{}}),"ios"==i.platform&&(null!=t.shareTickets?(wx.getShareInfo({shareTicket:t.shareTickets,success:t=>{e&&e()},fail:()=>{ji.alert("请分享到群")},complete:()=>{}}),e&&e()):ji.alert("请分享到群"))},fail:()=>{},complete:()=>{}})}}))}static alert(e){Laya.Browser.onMiniGame&&wx.showToast({title:e,icon:"success",image:"",duration:2e3,mask:!1,success:()=>{},fail:()=>{},complete:()=>{}})}}ji.currTime=0,ji.endTime=0,ji.shareState=!1,ji.shareCall=null,ji.puaseState=!1,ji.puaseCall=null,ji.isMissTaske=!1,ji.isMissTaske2=!1,ji.missTakeCall=null,ji.missTakeCall2=null,ji.sharePics=[{id:"WPicRyFDTFO3HVpiA2xxyA==",url:"https://mmocgame.qpic.cn/wechatgame/Pu96n8f7giasyWJsAPFhFFXUezGlScBhu4icticptt3iadnv27eK88kzdjQwKDj1icatK/0"},{id:"OESur37HQRW6Q8U55neT1g==",url:"https://mmocgame.qpic.cn/wechatgame/Pu96n8f7giavaEjqLXykXLgL9rPTwiaem0ODVdSQTxiauzoGfo4y1E7yNYypSp6nWDH/0"},{id:"5gM8PFMWQIS3U3fZXg1zSQ==",url:"https://mmocgame.qpic.cn/wechatgame/Pu96n8f7giauKhmCg2roMqkNGwy7MCbWPPsYlaut1MxQ3GR2zBX2garSFuITzFOGq/0"},{id:"h1y4VVQnROi8pXqG0+kN+Q==",url:"https://mmocgame.qpic.cn/wechatgame/Pu96n8f7giauCHdC40r4RtUvZDO16syhVLTP2IWjy1PWiaqDiaTyaicVsZHOBTa8SKUic/0"},{id:"NUDsj53VQsiOETJKRIE7ZA==",url:"https://mmocgame.qpic.cn/wechatgame/Pu96n8f7giascCPvD6ZUib5OaZpGzpfbUhwfCtzEz5vkZUMj4Z973t9wyVRJx0OV6P/0"},{id:"ZxlsoFrRRdiXo4rruQdVNg==",url:"https://mmocgame.qpic.cn/wechatgame/Pu96n8f7giasME4ZDlz8LA4AprqZ4Iic5se1rjFmRkuc3gDv8swBgHxiaaLNbFOQcKG/0"}],ji.shareLocalPics=[{title:"我在南方的寒冬里玩滑雪精英，你在北方的艳阳里还等啥咧？",image:"https://mmocgame.qpic.cn/wechatgame/Pu96n8f7giasyWJsAPFhFFXUezGlScBhu4icticptt3iadnv27eK88kzdjQwKDj1icatK/0"},{title:"等冬奥会再去滑雪？不如现在就浪起来！",image:"https://mmocgame.qpic.cn/wechatgame/Pu96n8f7giavaEjqLXykXLgL9rPTwiaem0ODVdSQTxiauzoGfo4y1E7yNYypSp6nWDH/0"},{title:"大冷天还滑什么手机，精英一起来滑雪吧！",image:"https://mmocgame.qpic.cn/wechatgame/Pu96n8f7giauKhmCg2roMqkNGwy7MCbWPPsYlaut1MxQ3GR2zBX2garSFuITzFOGq/0"},{title:"滑雪精英，一起来吧！",image:"https://mmocgame.qpic.cn/wechatgame/Pu96n8f7giauCHdC40r4RtUvZDO16syhVLTP2IWjy1PWiaqDiaTyaicVsZHOBTa8SKUic/0"},{title:"帅气小哥哥，都在户外运动！",image:"https://mmocgame.qpic.cn/wechatgame/Pu96n8f7giascCPvD6ZUib5OaZpGzpfbUhwfCtzEz5vkZUMj4Z973t9wyVRJx0OV6P/0"},{title:"漂亮小姐姐，都在户外运动！",image:"https://mmocgame.qpic.cn/wechatgame/Pu96n8f7giasME4ZDlz8LA4AprqZ4Iic5se1rjFmRkuc3gDv8swBgHxiaaLNbFOQcKG/0"}];class qi{constructor(e){this.soffset=0,this.svalue=0,this._target=e,this._target.on(Laya.Event.ROLL_OVER,this,this.onMouseOver),this._target.on(Laya.Event.ROLL_OUT,this,this.onMouseOut),e.elasticEnabled=!0}onMouseOver(){this._roll=!1}onMouseOut(){this.svalue=this._target.scrollBar.value,this._roll=!0}loopScroll(){this._roll&&(this.svalue>=this.soffset?this.state=!1:this.svalue<=0&&(this.state=!0),this.state?this.svalue+=2:this.svalue-=2,this._target.scrollBar.value=this.svalue)}onShow(e){if(this._roll=!0,this._target.array=e,this._target.refresh(),this._target.scrollBar&&(this._target.scrollBar.rollRatio=0),this._target.array){var t=this._target.getCell(0);if(!t)return;this._target.scrollBar instanceof Laya.VScrollBar?(this._offset=t.height+this._target.spaceY,this.soffset=this._offset*Math.round(this._target.array.length/this._target.repeatX)-this._target.height):(this._offset=t.width+this._target.spaceX,this.soffset=this._offset*Math.round(this._target.array.length/this._target.repeatY)-this._target.width),Laya.timer.frameLoop(2,this,this.loopScroll)}}onHide(){this._target.timer.clear(this,this.loopScroll),this._target.array=null}}class Zi extends O.ReLiveViewUI{constructor(){super(),this._isReLive=!1,this._reliveT=-1,this._loopT=-1,this._time=3,this._normalRelived=!1,this.isBanner=!0,this.btnShare.on(Laya.Event.CLICK,this,this.onShare),this.btnRelive.on(Laya.Event.CLICK,this,this.onReLive),this.lbl_normal.on(Laya.Event.CLICK,this,this.normalLive),this._autoSC=new qi(this.list1),ji.puaseCall=(()=>{Gi.app.playGame(),this._normalRelived?(this._normalRelived=!1,this._isReLive=!0,this.relive(),C.reliveTimes++):this.startTime()}),ji.shareCall=(()=>{var e=ji.endTime-ji.currTime;this._normalRelived=e>3e3,ji.puaseState&&(ji.puaseState=!1,ji.puaseCall&&ji.puaseCall())})}open(e,t){if((Laya.Browser.onQGMiniGame||Laya.Browser.onVVMiniGame)&&(this.btnShare.visible=!1),this.ov_native.visible=!1,this.list1.visible=!1,Laya.Browser.onVVMiniGame||Laya.Browser.onQGMiniGame){let e=Ni.I.getAdSwitchByPosition(Ae.RESULTS_MIDDLE_AD);if(null==e||0==e.state)this.ov_native.visible=!1;else{this.ov_native.visible=!0;let e=this.ov_native.getChildByName("icon");Laya.Browser.onVVMiniGame?Xi.I.createNativeAd(U.AD_GAME_NATIVE,Y.IMG,e):Hi.I.createNativeAd(U.AD_GAME_NATIVE,Y.IMG,e),e.on(Laya.Event.MOUSE_OVER,this,()=>{Laya.Browser.onVVMiniGame?Xi.I.reportAdClick(U.AD_GAME_NATIVE,Y.IMG):Hi.I.reportAdClick(U.AD_GAME_NATIVE,Y.IMG)}),this.btn_close.on(Laya.Event.CLICK,this,()=>{this.ov_native.visible=!1})}if(null==(e=Ni.I.getAdSwitchByPosition(Ae.RESULTS_RIGHT_AD))||0==e.state)this.isBanner=!1,this.ov_native2.visible=!1;else{this.ov_native2.visible=!0;let e=this.ov_native2.getChildByName("icon");Laya.Browser.onVVMiniGame?Xi.I.createNativeAd(U.AD_GAME_SINGLE_NATIVE,Y.ICON,e):Hi.I.createNativeAd(U.AD_GAME_SINGLE_NATIVE,Y.ICON,e),e.on(Laya.Event.MOUSE_OVER,this,()=>{Laya.Browser.onVVMiniGame?Xi.I.reportAdClick(U.AD_GAME_SINGLE_NATIVE,Y.ICON):Hi.I.reportAdClick(U.AD_GAME_SINGLE_NATIVE,Y.ICON)}),this.ov_native_close.on(Laya.Event.CLICK,this,()=>{this.ov_native2.visible=!1})}}else if(Laya.Browser.onMiniGame){this.ov_native.visible=!1,this.ov_native2.visible=!1;let e=Ni.I.getMatrixByPosition(xe.RESULT_PASS_AD);if(null==e||e.length<=0)this.list1.visible=!1;else{this.list1.visible=!0;let t=[];for(const i of e)t.push(i.tgamekey);this.list1.vScrollBarSkin="",this.list1.elasticEnabled=!1,this.list1.scrollBar.rollRatio=0,this.list1.renderHandler=new Laya.Handler(this,this.onRenderItem),this.list1.array=e,this.list1.setAutoScroll(1,1,500),Ni.I.jumpStatistics(T.I.getConf(),c.instance.openid,bi.MATRIX_TYPE_SHOW,t.join(","),xe.RESULT_PASS_AD)}let t=Ni.I.getAdSwitchByPosition(be.RESULT_RIGHT_AD);null!=t&&1==t.state&&ki.I.showCustom(H.AD_CUSTOM_SINGLE_RIFHT2,t.topMargin,t.leftMargin)}this.isBanner&&(Ce.log("ReliveView-hideBannerAd"),xi.I.showBannerAd(V.AD_BANNER_BOX)),Laya.Browser.onMiniGame||Laya.Browser.onVVMiniGame?xi.I.showInterstitialAd(k.AD_INTERSTITIAL_COMMON,null,null):"object"==typeof FBInstant&&"undefined"!=typeof minigame&&xi.I.showInterstitialAd(k.AD_INTERSTITIAL_COMMON,null,null),super.open(e,t)}onRenderItem(e,t){let i=e.dataSource;e.getChildByName("img_icon").skin=i.icon}onOpened(e){super.onOpened(e),this.lbl_normal.mouseEnabled=!0,this.btnRelive.mouseEnabled=!0,this.lblScore.text=Gi.app.sceneRoot.score.toString(),this.lblPass.text=Gi.app.sceneRoot.passCount.toString(),C.I.makemoney+=5*Gi.app.sceneRoot.passCount,C.I.save(),C.reliveTimes<2&&(this.lbl_normal.visible=!0),this.lblTimes.text="3",this._time=3,this.startTime()}startTime(){this._loopT=setInterval(()=>{this.onTimer()},1e3)}onTimer(){this._time<=0?this.close():(this.lblTimes.text=this._time.toString(),this._time--)}onReLive(){if(this._isReLive=!0,clearInterval(this._loopT),Laya.Render.isConchApp&&!xi.I.getVideoAd(0))return void xi.I.getVideoAd(0);let e=this;xi.I.showVideoAd(D.AD_VIDEO_COIN,this,t=>{t?e.relive():(e._isReLive=!1,e.startTime())})}relive(){this._isReLive&&(Vi.I.statisticsReport(Ri.LV_RELIVE,1),Gi.app.sceneRoot&&Gi.app.sceneRoot.relive(3e3,3e3)),this.close()}normalLive(){if(clearInterval(this._loopT),Laya.Browser.onMiniGame,Laya.Browser.onQGMiniGame||Laya.Browser.onVVMiniGame){let e=Ni.I.getAdSwitchByPosition(Ae.RESULTS_MIDDLE_AD),t=!1;if(null!=e&&1==e.state&&e.pv>0){wt.random(0,100)<=e.pv&&(t=Laya.Browser.onVVMiniGame?Xi.I.reportAdClick(U.AD_GAME_NATIVE,Y.IMG):Hi.I.reportAdClick(U.AD_GAME_NATIVE,Y.IMG))}if(!t&&null!=(e=Ni.I.getAdSwitchByPosition(Ae.RESULTS_RIGHT_AD))&&1==e.state&&e.pv>0){wt.random(0,100)<=e.pv&&(Laya.Browser.onVVMiniGame?Xi.I.reportAdClick(U.AD_GAME_SINGLE_NATIVE,Y.ICON):Hi.I.reportAdClick(U.AD_GAME_SINGLE_NATIVE,Y.ICON))}}this.close()}close(e){if(Laya.Browser.onMiniGame){let e=Ni.I.getAdSwitchByPosition(be.RESULT_RIGHT_AD);null!=e&&1==e.state&&ki.I.hideCustom(H.AD_CUSTOM_SINGLE_RIFHT2)}this.isBanner&&xi.I.hideBannerAd(V.AD_BANNER_BOX),clearTimeout(this._reliveT),clearInterval(this._loopT),super.close(e)}onClosed(e){if(super.onClosed(e),this.lbl_normal.visible=!1,this._isReLive){if(Laya.Browser.onMiniGame){let e=Ni.I.getAdSwitchByPosition(be.BATTLE_AD);null!=e&&1==e.state&&ki.I.showCustom(H.AD_CUSTOM_SINGLE_LEFT,e.topMargin,e.leftMargin,this,null)}Ce.log("ReliveView-showBannerAd"),xi.I.showBannerAd(V.AD_BANNER_BOX)}else Vi.I.statisticsReport(Ri.LV_END,1,0,Gi.app.sceneRoot.score),_n.localData.makemoney>0&&mn.showDialog(mn.REWARDVIEW,!1,!0),_n.localData.makemoney<=0&&(Gi.app.sceneRoot&&Gi.app.sceneRoot.reset(),Gi.app.uiRoot.showHud());this._isReLive=!1}onShare(e){ji.shareFriend()}}class Qi extends O.GuideUI{constructor(){super(),this.bottom=200,this.centerX=0,this.ani1.on(Laya.Event.COMPLETE,this,()=>{this.hide()})}show(){this.ani1.play(0,!1),Gi.app.pauseGame(!0),Laya.stage.addChild(this)}hide(){Gi.app.playGame(!0),this.ani1.stop(),this.removeSelf()}}class $i extends O.PipeiViewUI{constructor(){super(),this._time2=-1,this._ais=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16],this._times=6,this._t3=0,this._t=0,this._t2=0,this._clickTimes=0,this.height=Laya.stage.height}onOpened(e){super.onOpened(e),this.list.array=this._ais,this.list.refresh(),setTimeout(()=>{this.listEffect()},100),Ce.log("PipeiView-hideBannerAd"),xi.I.showBannerAd(V.AD_BANNER_BOX)}listEffect(){var e=0;this._time2=setInterval(()=>{var t=this.list.getCell(e);t&&e<16?t.endEffect():(clearInterval(this._time2),this.beforClose()),e++},100)}beforClose(){this.close()}close(e){super.close(e),C.I.playSound("sounds/close.mp3"),setTimeout(()=>{Gi.app.sceneRoot&&Gi.app.sceneRoot.readyGo()},500)}onClosed(e){super.onClosed(e),this.list.array=null,this.list.refresh(),clearInterval(this._time2);var t=C.I.guide;t&&0!=t||(C.I.guide=1,this._guide||(this._guide=new Qi),this._guide.show()),Laya.timer.clearAll(this),clearTimeout(this._t),clearTimeout(this._t2),clearTimeout(this._t3),this.box2.visible=!0,this.box1.visible=!1,this._times=6,this.lblValue.text="0%",this.progressBar.value=0}}class Ji extends O.PifuViewUI{constructor(){super(),this._curTab=-1,this._selectIdx=-1,this.bg.height=Laya.stage.height,this.bg.y=1280-Laya.stage.height>>1,this._layer=new Laya.Sprite,this._layer.mouseEnabled=!1,this.addChildAt(this._layer,1),this.list.renderHandler=Laya.Handler.create(this,this.onRenderHandler,null,!1),this.list.selectHandler=Laya.Handler.create(this,this.onSelectHandler,null,!1),this.list.selectEnable=!0,this.tabTitle.selectHandler=Laya.Handler.create(this,this.selectTab,null,!1),this.btnLeft.on(Laya.Event.CLICK,this,this.onPrevClick),this.btnRight.on(Laya.Event.CLICK,this,this.onNextClick),Gi.evt.addEventListener(te.MONEY_CHANGE,this.moneyChange,this),this.btnClose.visible=!1}onOpened(e){if(super.onOpened(e),this.selectTab(Ji.TAB_PLAYER),Gi.evt.dispatchEvent(new te(te.MONEY_CHANGE)),Laya.Browser.onQGMiniGame?this.btnClose.visible=!0:this._t=setTimeout(()=>{this.btnClose.visible=!0},3e3),(Laya.Browser.onMiniGame||Laya.Browser.onVVMiniGame)&&xi.I.showInterstitialAd(k.AD_INTERSTITIAL_COMMON,null,null),this.ov_native.visible=!1,Laya.Browser.onMiniGame){let e=Ni.I.getAdSwitchByPosition(P.AD_CUSTOM_PIFU);null!=e&&1==e.state&&ki.I.showCustom(P.AD_CUSTOM_PIFU,e.topMargin,e.leftMargin)}else if(Laya.Browser.onQGMiniGame||Laya.Browser.onVVMiniGame){let e=Ni.I.getAdSwitchByPosition(Ae.PIFU_LEFT_AD);if(null==e||0==e.state)this.ov_native.visible=!1;else{this.ov_native.visible=!0;let e=this.ov_native.getChildByName("icon");Laya.Browser.onVVMiniGame?Xi.I.createNativeAd(U.AD_GAME_SINGLE_NATIVE,Y.ICON,e):Hi.I.createNativeAd(U.AD_GAME_SINGLE_NATIVE,Y.ICON,e),e.on(Laya.Event.MOUSE_OVER,this,()=>{Laya.Browser.onVVMiniGame?Xi.I.reportAdClick(U.AD_GAME_SINGLE_NATIVE,Y.ICON):Hi.I.reportAdClick(U.AD_GAME_SINGLE_NATIVE,Y.ICON)}),this.ov_native_close.on(Laya.Event.CLICK,this,()=>{this.ov_native.visible=!1})}}else"object"==typeof FBInstant&&"undefined"!=typeof minigame&&xi.I.showInterstitialAd(k.AD_INTERSTITIAL_COMMON,null,null)}moneyChange(e){this.lbl_money.text=C.I.money+""}selectTab(e){e!=this._curTab&&(this._curTab=e,this._layer.removeChildren(),this.tabTitle.selectedIndex=this._curTab,this.list.array=this.getDataByType(e),this.list.refresh(),this.box_bar.visible=0==this._curTab,this.img.visible=0!=e,this._selectIdx=-1,this.list.selectedIndex=-1,this.lblMap.visible=!1,e==Ji.TAB_PLAYER?this.list.selectedIndex=C.I.pifu:e==Ji.TAB_MAP?(this.list.selectedIndex=C.I.map-11,this.lblMap.visible=!0):e==Ji.TAB_TRAIL&&(this.list.selectedIndex=C.I.tuowei-13))}getDataByType(e){this._listData?this._listData.length=0:this._listData=[];let t=J.SkinTemp.length;for(let i=0;i<t;i++){let t=J.SkinTemp[i];t&&t[1]==e&&this._listData.push(t)}return this._listData}onRenderHandler(e,t){let i=this._listData[t];e.setData(i,t+1,this.list.selectedIndex==t)}onPrevClick(){this._selectIdx<=0||(this.list.selectedIndex=this._selectIdx-1,this.list.scrollTo(this.list.selectedIndex))}onNextClick(){let e=this._listData.length;this._selectIdx>=e-1||(this.list.selectedIndex=this._selectIdx+1,this.list.scrollTo(this.list.selectedIndex))}onSelectHandler(e){if(this._selectIdx==e)return;this._selectIdx=e,this._selectItem&&(this._selectItem.isSelected=!1);let t=this.list.selectedItem;if(!t)return;t.isSelected=!0,this._selectItem=t;let i=$.scpath+t[5];if(this._curTab==Ji.TAB_PLAYER){i=i.replace(".lh",".ls"),this.progress_hp.value=t[2]/5,this.progress_speed.value=t[3]/J.SPEED_SKIN_MAX;let n=Laya.Loader.getRes(i);n?this.onLoadPlayerSkinEnd(n,!0):(Gi.app.uiRoot.showWaiting(this),Laya.Sprite3D.load(i,Laya.Handler.create(this,this.onLoadPlayerSkinEnd))),-1==C.I.pifus[e]&&(this._pifuEvent||(this._pifuEvent=new te(te.PIFU_CHANGE)),this._pifuEvent.data={id:t[0],free:!1},Gi.evt.dispatchEvent(this._pifuEvent)),this.img.filters=null}else if(this._curTab==Ji.TAB_MAP)this.img.filters=null,this.img.skin=t[6],-1==C.I.maps[e]&&(this._mapEvent||(this._mapEvent=new te(te.MAP_CHANGE)),this._mapEvent.data=t[7][0],C.I.map=t[0],Gi.evt.dispatchEvent(this._mapEvent)),this.lblMap.text=t[7][1],this.lblMap.color=11==t[0]?"#ffffff":"#cd0aff";else if(this._curTab==Ji.TAB_TRAIL){this.progress_hp.value=0,this.progress_speed.value=0,this.img.skin="ren/tuowei.png",Ji.redMat[0]=t[7][0]/255,Ji.redMat[6]=t[7][1]/255,Ji.redMat[12]=t[7][2]/255;let i=new Laya.ColorFilter(Ji.redMat);this.img.filters=[i],-1==C.I.tuoweis[e]&&(this._trailEvent||(this._trailEvent=new te(te.TRAIL_CHANGE)),this._trailEvent.data=t[0],Gi.evt.dispatchEvent(this._trailEvent))}else this.progress_hp.value=0,this.progress_speed.value=0}onLoadPlayerSkinEnd(e,t=!1){t||Gi.app.uiRoot.hideWaiting(),e&&this._curTab==Ji.TAB_PLAYER&&(this._layer.removeChildren(),this._layer.addChild(e))}close(e){if(this._curTab=-1,this._selectIdx=-1,this._layer&&this._layer.removeChildren(),super.close(e),C.I.playSound("sounds/close.mp3"),C.I.save(),Ce.log("PifuView-close-hideBannerAd"),xi.I.hideBannerAd(V.AD_BANNER_BOX),Laya.Browser.onMiniGame){let e=Ni.I.getAdSwitchByPosition(P.AD_CUSTOM_PIFU);null!=e&&1==e.state&&ki.I.hideCustom(P.AD_CUSTOM_PIFU),Mt.instance.show(Tt.MoonMainAdPanel,{adEnum:V.AD_BANNER_BOX})}}onClosed(e){super.onClosed(e),this.btnClose.visible=!1}}Ji.TAB_PLAYER=0,Ji.TAB_MAP=1,Ji.TAB_TRAIL=2,Ji.redMat=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0];class en extends O.TuijianViewUI{constructor(){super()}open(e,t){super.open(e,t),Laya.Browser.onMiniGame&&(this.list.array=un.miniList,this.list.refresh())}close(e){_n.playSound("sounds/close.mp3"),super.close(e)}}class tn extends O.RankViewUI{constructor(){super(),this.bg.height=Laya.stage.height,this.bg.y=1280-Laya.stage.height>>1,Gi.evt.addEventListener(te.GAME_SCORE,this.postForce,this),this.btnClose.visible=!1}onOpened(e){super.onOpened(e),this.mouseThrough=!1,Laya.Browser.onQGMiniGame?this.btnClose.visible=!0:this._t=setTimeout(()=>{this.btnClose.visible=!0},3e3),this.openView.postMsg({type:"getList",value:""}),xi.I.showBannerAd(V.AD_BANNER_BOX),(Laya.Browser.onMiniGame||Laya.Browser.onVVMiniGame)&&xi.I.showInterstitialAd(k.AD_INTERSTITIAL_COMMON,null,null)}postForce(e){this.openView.postMsg({type:"setData",value:e.data})}close(e){super.close(e),C.I.playSound("sounds/close.mp3"),Ce.log("ShuomingView-close-hideBannerAd"),xi.I.hideBannerAd(V.AD_BANNER_BOX),Laya.Browser.onMiniGame?Mt.instance.show(Tt.MoonMainAdPanel,{adEnum:V.AD_BANNER_BOX}):(Laya.Browser.onQGMiniGame||Laya.Browser.onVVMiniGame)&&(Ce.log("ShuomingView-close-showBannerAd"),xi.I.showBannerAd(V.AD_BANNER_BOX))}onClosed(e){super.onClosed(e),this.btnClose.visible=!1}}class nn extends O.ShuomingUI{constructor(){super()}onOpened(e){Ce.log("ShuomingView-showBannerAd"),xi.I.showBannerAd(V.AD_BANNER_BOX),Laya.Browser.onMiniGame||Laya.Browser.onVVMiniGame?xi.I.showInterstitialAd(k.AD_INTERSTITIAL_COMMON,null,null):"object"==typeof FBInstant&&"undefined"!=typeof minigame&&xi.I.showInterstitialAd(k.AD_INTERSTITIAL_COMMON,null,null)}close(e){super.close(e),C.I.playSound("sounds/close.mp3"),Ce.log("ShuomingView-close-hideBannerAd"),xi.I.hideBannerAd(V.AD_BANNER_BOX),Laya.Browser.onMiniGame?Mt.instance.show(Tt.MoonMainAdPanel,{adEnum:V.AD_BANNER_BOX}):(Laya.Browser.onQGMiniGame||Laya.Browser.onVVMiniGame)&&(Ce.log("ShuomingView-close-showBannerAd"),xi.I.showBannerAd(V.AD_BANNER_BOX))}}class an extends O.AlertUI{constructor(){super(),this.btnCancel.on(Laya.Event.CLICK,this,this.onCancel),this.btnSure.on(Laya.Event.CLICK,this,this.onSure.bind(this))}setData(e){this._data=e,this.lblText.text=e.text,this._sure=e.onSure,this._cancel=e.onCancel}close(e){super.close(e),C.I.playSound("sounds/close.mp3")}onSure(e){this._data&&this._data.data&&this._data.data[4]>C.I.money?mn.getDialog(mn.ALERTVIEW).setData({data:null,text:"金币不足！",onSure:null,onCancel:null}):(this._sure&&this._sure(),this.close())}onCancel(e){this._cancel&&this._cancel(),this.close()}}class on{constructor(e){this._coins=new Array,this._target=e}showCoin(e,t,i){for(var n=10==e?120:150,a=10==e?80:100;e>0;){var o=Laya.Pool.getItemByClass("image",Laya.Image);o.skin="comp/jinbi.png",this._coins.push(o),this._target.addChild(o),o.x=363+Q.randomRange(-n,n),o.y=543+Q.randomRange(-a,a),e--}Laya.timer.frameLoop(3,this,()=>{for(var e=2;e>0;){if(e--,this._coins.length<=0)return void Laya.timer.clearAll(this);var n=520-this._target.x,a=50-this._target.y-(Laya.stage.height-1280),o=this._coins.pop();Laya.Tween.to(o,{x:n,y:a},1500,Laya.Ease.backIn,Laya.Handler.create(this,(e,n)=>{Gi.app.uiRoot.hudView.ani1.play(0,!1),e.removeSelf(),Laya.Pool.recover("image",e),t&&t(n),0==n&&i&&i()},[o,this._coins.length]))}})}}class rn extends O.RewardUI{constructor(){super(),this.lbl_thanks.visible=!1,this.lbl_thanks.on(Laya.Event.CLICK,this,this.onOneReward),this.btnRelive.on(Laya.Event.CLICK,this,this.on3Reward),this.img_open.visible=!1,this._coinEff=new on(this)}onOpened(e){if(super.onOpened(e),this.img_open.visible=!1,this.img_close.visible=!0,this.ani1.play(),this.ani3.play(),this.lbl_thanks.mouseEnabled=!0,this.btnRelive.mouseEnabled=!0,this.lbl_money.value=C.I.makemoney.toString(),Laya.Browser.onQGMiniGame?this.lbl_thanks.visible=!0:this._rewardT=setTimeout(()=>{this.lbl_thanks.visible=!0},1500),this.ov_native.visible=!1,Laya.Browser.onVVMiniGame||Laya.Browser.onQGMiniGame){let e=Ni.I.getAdSwitchByPosition(Ae.RESULTS_RIGHT_AD);if(null==e||0==e.state)this.ov_native.visible=!1;else{this.ov_native.visible=!0;let e=this.ov_native.getChildByName("icon");Laya.Browser.onVVMiniGame?Xi.I.createNativeAd(U.AD_GAME_SINGLE_NATIVE,Y.ICON,e):Hi.I.createNativeAd(U.AD_GAME_SINGLE_NATIVE,Y.ICON,e),e.on(Laya.Event.MOUSE_OVER,this,()=>{Laya.Browser.onVVMiniGame?Xi.I.reportAdClick(U.AD_GAME_SINGLE_NATIVE,Y.ICON):Hi.I.reportAdClick(U.AD_GAME_SINGLE_NATIVE,Y.ICON)}),this.ov_native_close.on(Laya.Event.CLICK,this,()=>{this.ov_native.visible=!1})}Ce.log("RewardView-showBannerAd"),xi.I.showBannerAd(V.AD_BANNER_BOX)}else Laya.Browser.onMiniGame&&Mt.instance.show(Tt.MoonMainAdPanel,{adEnum:V.AD_BANNER_BOX});Laya.Browser.onMiniGame||Laya.Browser.onVVMiniGame?xi.I.showInterstitialAd(k.AD_INTERSTITIAL_COMMON,null,null):"object"==typeof FBInstant&&"undefined"!=typeof minigame&&xi.I.showInterstitialAd(k.AD_INTERSTITIAL_COMMON,null,null)}onOneReward(){if(Laya.Browser.onMiniGame?Mt.instance.hide(Tt.MoonMainAdPanel):(Laya.Browser.onQGMiniGame||Laya.Browser.onVVMiniGame)&&(Ce.log("HudView-hideBannerAd"),xi.I.hideBannerAd(V.AD_BANNER_BOX)),Laya.Browser.onMiniGame){let e=Ni.I.getMatrixByPosition(xe.RESULT_HOT_AD),t=Ni.I.getMatrixByPosition(xe.RESULT_FRIEND_AD);if(null!=t&&t.length>0||null!=e&&e.length>0){let e={};e.mgoonCaller=this,e.mgoonFunc=this.on1Reward,e.adEnum=V.AD_BANNER_BOX,Mt.instance.show(Tt.MoonResultsPanel,e)}else this.on1Reward()}else{if(Laya.Browser.onQGMiniGame||Laya.Browser.onVVMiniGame){let e=Ni.I.getAdSwitchByPosition(Ae.RESULTS_RIGHT_AD);if(null!=e&&1==e.state&&e.pv>0){wt.random(0,100)<=e.pv&&(Laya.Browser.onVVMiniGame?Xi.I.reportAdClick(U.AD_GAME_SINGLE_NATIVE,Y.ICON):Hi.I.reportAdClick(U.AD_GAME_SINGLE_NATIVE,Y.ICON))}}this.on1Reward()}}on1Reward(){this.img_open.visible=!0,this.img_close.visible=!1,this.ani3.stop(),this.ani2.play(0,!1),this.lbl_thanks.mouseEnabled=!1,this.btnRelive.mouseEnabled=!1;C.I.makemoney;this._coinEff.showCoin(10,e=>{e%2==0&&C.I.playSound("sounds/life.mp3")},()=>{C.I.setMakemoney(1),this.close()})}on3Reward(){let e=this;Laya.Browser.onMiniGame?Mt.instance.hide(Tt.MoonMainAdPanel):(Laya.Browser.onQGMiniGame||Laya.Browser.onVVMiniGame)&&(Ce.log("HudView-hideBannerAd"),xi.I.hideBannerAd(V.AD_BANNER_BOX)),xi.I.showVideoAd(D.AD_VIDEO_COIN,this,t=>{t?e.threeReward():e.on1Reward()})}threeReward(){this.img_open.visible=!0,this.img_close.visible=!1,this.ani3.stop(),this.ani2.play(0,!1),this.lbl_thanks.mouseEnabled=!1,this.btnRelive.mouseEnabled=!1;C.I.makemoney;this._coinEff.showCoin(30,e=>{e%2==0&&C.I.playSound("sounds/life.mp3")},()=>{C.I.setMakemoney(3),this.close()}),clearTimeout(this._rewardT)}close(e){clearTimeout(this._rewardT),clearTimeout(this._t2),C.I.playSound("sounds/close.mp3"),super.close(e)}onClosed(e){C.I.save(),this.img_open.visible=!1,this.img_close.visible=!0,super.onClosed(e),this.ani1.stop(),this.ani2.stop(),this.ani3.stop(),this.lbl_thanks.visible=!1,Gi.app.sceneRoot&&Gi.app.sceneRoot.reset(),Gi.app.uiRoot.showHud()}}class sn extends O.FreeUseUI{constructor(){super(),this._freeIndex=0,this._layer=new Laya.Sprite,this._layer.mouseEnabled=!1,this.addChild(this._layer),this._listData={},this.getDataByType(0),this.btnFree.on(Laya.Event.CLICK,this,this.onUse),this.lbl_close.on(Laya.Event.CLICK,this,this.close),this.lbl_close.visible=!1}onOpened(e){super.onOpened(e),this.showFree(),this.lbl_close.mouseEnabled=!0,this.btnFree.mouseEnabled=!0,Laya.Browser.onQGMiniGame?this.lbl_close.visible=!0:this._closeT=setTimeout(()=>{this.lbl_close.visible=!0},1500),Ce.log("FreeUseView-hideBannerAd"),xi.I.showBannerAd(V.AD_BANNER_BOX),(Laya.Browser.onMiniGame||Laya.Browser.onVVMiniGame)&&xi.I.showInterstitialAd(k.AD_INTERSTITIAL_COMMON,null,null)}getDataByType(e){let t=J.SkinTemp.length;for(let i=0;i<t;i++){let t=J.SkinTemp[i];t&&t[1]==e&&(this._listData[t[0]]=t)}return this._listData}showFree(){var e=_n.getUnLock(0),t=e[this._freeIndex];this._freeIndex++,this._freeIndex>=e.length&&(this._freeIndex=0);var i=this._listData[t];if(!i)return console.log(this._listData,e,i,t),void this.close();Gi.app.uiRoot.showWaiting(this);let n=$.scpath+i[5];n=n.replace(".lh",".ls"),this.progress_hp.value=i[2]/5,this.progress_speed.value=i[3]/J.SPEED_SKIN_MAX;let a=Laya.Loader.getRes(n);a?(this.onLoadPlayerSkinEnd(a,!0),setTimeout(()=>{Gi.app.uiRoot.hideWaiting()},500)):Laya.Sprite3D.load(n,Laya.Handler.create(this,this.onLoadPlayerSkinEnd)),this._pifuEvent||(this._pifuEvent=new te(te.PIFU_CHANGE)),this._pifuEvent.data={id:i[0],free:!0}}onLoadPlayerSkinEnd(e,t=!1){t||Gi.app.uiRoot.hideWaiting(),this._layer.removeChildren();var i=e.getChildAt(2);Laya.stage.height<=1280&&i.transform.translate(new Laya.Vector3(0,-.2,0)),this._layer.addChild(e)}onUse(e){!Laya.Render.isConchApp||xi.I.getVideoAd(0)?(xi.I.showVideoAd(D.AD_VIDEO_COIN,this,e=>{e?(this._pifuEvent&&Gi.evt.dispatchEvent(this._pifuEvent),this.close()):this.close()}),this.lbl_close.mouseEnabled=!1,this.btnFree.mouseEnabled=!1):xi.I.getVideoAd(0)}close(e){if(Laya.Browser.onMiniGame,Laya.Browser.onQGMiniGame||Laya.Browser.onVVMiniGame){let e=Ni.I.getAdSwitchByPosition(Ae.BATTLE_LEFT_AD);if(null!=e&&1==e.state&&e.pv>0){wt.random(0,100)<=e.pv&&(Laya.Browser.onVVMiniGame?Xi.I.reportAdClick(U.AD_GAME_SINGLE_NATIVE,Y.ICON):Hi.I.reportAdClick(U.AD_GAME_SINGLE_NATIVE,Y.ICON))}}Gi.app.uiRoot.hideWaiting(),clearTimeout(this._closeT),this._layer&&this._layer.removeChildren(),super.close(e),Ce.log("FreeUseView-close-hideBannerAd"),xi.I.hideBannerAd(V.AD_BANNER_BOX)}onClosed(e){super.onClosed(e),this.lbl_close.visible=!1,mn.showDialog(mn.PIPEIVIEW,!1,!0)}}class ln extends O.WaitingUI{constructor(){super(),this.centerX=0,this.centerY=0}show(e){e&&(e.addChild(this),this.ani1.play(0,!0))}hide(){this.removeSelf(),this.ani1.stop()}}class dn extends O.rewan.FriendInviteUI{constructor(){super(),this.txt_accept.on(Laya.Event.CLICK,this,this.onClick),this.txt_close.visible=!1}open(e,t){super.open(e,t),this.openView.postMsg({type:"showinfo",value:""})}onOpened(e){this.txt_close.visible=!1,this._time=setTimeout(()=>{this.txt_close.visible=!0},2500)}set dataSource(e){if(this._toappid=null,!e)return this._toappid="",super.dataSource=null,void(this._jump_path="");this._toappid=e.to_appid,this._jump_path=e.jump_path,super.dataSource=e,this.txt_game.text=e.togame_name}onClick(e){this._toappid,this.close()}onClosed(){clearTimeout(this._time),ji.puaseState&&(ji.puaseState=!1,ji.puaseCall&&ji.puaseCall()),fn.hideAdv(Ci.bannerAdId)}getRobotName(){return"雪地精英"}}class hn extends O.rewan.RewanUI{constructor(){super(),this.btnReturn.on(Laya.Event.CLICK,this,this.onClick),this.btnContinue.on(Laya.Event.CLICK,this,this.onContinue);var e=this.getChildAt(0);this.height=e.height=Laya.stage.height,this._autoSC=new qi(this.gameList),this.btnReturn.visible=!1,this.btnContinue.visible=!_n.isShen}onOpened(e){var t=un.miniList.concat(),i=t.length>8?t.slice(0,7):t,n=t.length>8?t.slice(7,t.length-1):t;this._autoSC.onShow(n),this.gameList2.array=i,this.gameList2.refresh(),this._t=setTimeout(()=>{this.btnReturn.visible=!0},2e3),this._oldBannerStatus=fn.bannerShow}onClick(){this.close(),this.deadState||!_n.rewanState||_n.isShen||mn.showDialog(mn.INVITEVIEW,!1,!0),_n.rewanState=!0,clearTimeout(this._t)}onContinue(){var e=un.miniList[Q.randomRange(0,un.miniList.length-1)];e&&un.sharePlay(e.to_appid,e.jump_path,!1)}close(e){super.close(e),clearTimeout(this._t),clearTimeout(this._t1),clearTimeout(this._t2)}onClosed(){this._autoSC.onHide(),super.onClosed(),this.gameList2.array=null,this.btnReturn.visible=!1,this._oldBannerStatus&&(_n.isExit=!1),this.callBack&&(this.callBack(),this.callBack=null),this.deadState&&(this.deadState=!1,mn.showDialog(mn.RELIVEVIEW,!0,!0))}}class cn extends O.MissTakeUI{constructor(){super(),this.ready=!1,this._times=6,this._t3=0,this._clickTimes=0,this.height=Laya.stage.height,this._coinEff=new on(this),this.btnRelive.on(Laya.Event.CLICK,this,this.onTimes),ji.missTakeCall=(()=>{this.ready=!0,fn.hideAdv(Ci.bannerAdId),this.ani2.play(0,!1),this.showEffect(),ji.isMissTaske=!1}),this._autoSc=new qi(this.list2)}onOpened(e){super.onOpened(e),ji.isMissTaske=!0,this.img_open.visible=!1,this.img_close.visible=!0,this.ani1.play(),this.ani3.play(),this.lblValue.text="0%",C.I.makemoney+=100,this.lbl_money.value=C.I.makemoney.toString(),Laya.timer.frameLoop(2,this,this.updateText),fn.hideAdv(Ci.bannerAdId),this._autoSc.onShow(un.miniList)}onTimes(){this._tweenBar&&(this._tweenBar.clear(),this._updateT=!1),clearTimeout(this._t3),this._clickTimes++;var e=this.progressBar.value;e>.06?this._times=100*e*1.3:this._times*=1.3,this._times>100&&(this._times=100),this._clickTimes%4==0&&(fn.showAdv(Ci.bannerAdId,null,null,0),setTimeout(()=>{fn.hideAdv(Ci.bannerAdId)},500)),this.lblValue.text=this._times.toFixed(0)+"%",this.progressBar.value=this._times/100,this._times>=100?(this.ready=!0,this.ani2.play(0,!1),this.showEffect()):this._t3=setTimeout(()=>{this.tweenBar()},300)}tweenBar(){var e=6e3*this.progressBar.value;this._updateT=!0,this._tweenBar=Laya.Tween.to(this.progressBar,{value:0},e)}updateText(){this._updateT&&(this._times=100*this.progressBar.value,this.lblValue.text=this._times.toFixed(0)+"%",this._times<6&&(this._times=6))}showEffect(){this._coinEff.showCoin(30,e=>{e%2==0&&C.I.playSound("sounds/life.mp3")},()=>{cn.isfirst&&C.I.setMakemoney(3),this.close()}),clearTimeout(this._rewardT)}close(e){ji.isMissTaske=!1,Laya.timer.clearAll(this),this._updateT=!1,this._times=6,this.progressBar.value=0,C.I.playSound("sounds/close.mp3"),fn.hideAdv(Ci.bannerAdId),super.close(e)}onClosed(e){super.onClosed(e),this._autoSc.onHide(),C.I.makemoney>0&&!cn.isfirst&&mn.showDialog(mn.REWARDVIEW,!1,!0),cn.isfirst=!1}}cn.isfirst=!1;class pn extends O.rewan.Rewan2UI{constructor(){super(),this.btnReturn.on(Laya.Event.CLICK,this,this.onClick);var e=this.getChildAt(0);this.height=e.height=Laya.stage.height}onOpened(e){_n.isFullScrenn()?(this.btnReturn.top=60,this.list2.repeatY=4,this.list2.height=662):(this.btnReturn.top=30,this.list2.repeatY=3,this.list2.height=484);var t=un.miniList.concat();this.list1.array=t.length>8?t.slice(0,7):t,this.list1.refresh(),this.list2.array=t.length>8?t.slice(7,t.length-1):t,this.list2.refresh(),_n.isExit&&fn.hideAdv(Ci.bannerAdId)}onClick(){this.close()}onClosed(){super.onClosed(),this.list1.array=null,this.list2.array=null,_n.isExit&&(_n.isExit=!1,_n.showBanner()),this.callBack&&(this.callBack(),this.callBack=null)}}class mn extends Laya.Sprite{constructor(){super(),mn._uiClasses[mn.PIFUVIEW]=Ji,mn._uiClasses[mn.PIPEIVIEW]=$i,mn._uiClasses[mn.RELIVEVIEW]=Zi,mn._uiClasses[mn.SETTTINGVIEW]=Ki,mn._uiClasses[mn.TUIJIANVIEW]=en,mn._uiClasses[mn.RANKVIEW]=tn,mn._uiClasses[mn.SHUOMINGVIEW]=nn,mn._uiClasses[mn.ALERTVIEW]=an,mn._uiClasses[mn.REWARDVIEW]=rn,mn._uiClasses[mn.FREEUSEVIEW]=sn,mn._uiClasses[mn.INVITEVIEW]=dn,mn._uiClasses[mn.REWANVIEW]=hn,mn._uiClasses[mn.REWAN2VIEW]=pn,mn._uiClasses[mn.MISSTAKEVIEW]=cn,bt.instance.getLayer(K.Normal).addChild(Laya.Dialog.manager)}showHud(){this._hudView||(un.upValueUser(),this._hudView=new Wi),this._hudView.initHud(),this.addChild(this._hudView),Laya.Browser.onMiniGame?Laya.stage.once(Laya.Event.CLICK,this,()=>{_n.playMusic(2)}):_n.playMusic(2)}get hudView(){return this._hudView}showWaiting(e){this._waiting||(this._waiting=new ln),this._waiting.show(e)}hideWaiting(){this._waiting&&this._waiting.hide()}static showDialog(e,t=!1,i=!1){var n=mn.getDialog(e);return i?n.popup(t,!0):n.show(t,!1),n}static closeDialog(e,t=!1){var i=mn._uiCache[e];i&&i.close()}static getDialog(e){var t=mn._uiCache[e];t||(t=new(0,mn._uiClasses[e]),mn._uiCache[e]=t);return t}onUpdate(e){}}mn.PIFUVIEW="PifuView",mn.PIPEIVIEW="PipeiView",mn.RELIVEVIEW="ReliveView",mn.SETTTINGVIEW="SettingView",mn.TUIJIANVIEW="TuijianView",mn.RANKVIEW="RankView",mn.SHUOMINGVIEW="ShuomingView",mn.ALERTVIEW="alertView",mn.REWARDVIEW="rewardView",mn.FREEUSEVIEW="freeUseView",mn.WAITINGVIEW="waitingview",mn.INVITEVIEW="inviteview",mn.REWANVIEW="rewanview",mn.REWAN2VIEW="rewan2view",mn.MISSTAKEVIEW="misstakeview",mn._uiClasses={},mn._uiCache={};class un{static getRanGameItem(){if(!un.miniList)return null;var e=Math.floor(Math.random()*un.miniList.length);return un.miniList[e]}static get2RanGameItem(){if(!un.miniList)return[];var e=un.miniList.length,t=Math.floor(Math.random()*e);return t==e-1?[un.miniList[t-1],un.miniList[t]]:[un.miniList[t],un.miniList[t+1]]}static init(){window.fyhd_sdk&&window.fyhd_sdk.getFyhd().startSdk()}static getFyhdUserInfo(e,t){if(window.fyhd_sdk){window.fyhd_sdk.getFyhd().getFyhdUserInfo({imageUrl:"https://zch5-update.szfyhd.com/tobeno1/wxgame/preload/kaishiyouxi-0e43e34d5d.png",left:192,top:900,width:342,height:97},e,e=>{C.user=e.result.user,C.user.avatarUrl||(C.user.avatarUrl="comp/head.jpg",C.user.nickname="自己"),un.upSiginData(C.user),un.uploginData(C.user),t&&t.call(null)})}}static adv(e){if(window.fyhd_sdk){var t={ad_type:e,openid:C.user.openid};window.fyhd_sdk.getFyhd().advertisement(t,()=>{})}}static shareRecomm(e){if(window.fyhd_sdk){window.fyhd_sdk.getFyhd().shareRecommend({},t=>{if(t&&1==t.code){if(t.data&&t.data.length>0)un.miniList=t.data;else{var i={icon:"https://xyxqd-admin-test.szfyhd.com/upload/2020/03/06/5e623335caa70.png",jump_path:"",jump_type:1,panel:8,qrcode:"",to_appid:"wxccbe8c6831202aeb",togame_name:"闯关第一名"};un.miniList=[i,i,i,i,i,i,i,i,i,i,i]}e&&e()}})}}static upSiginData(e){window.fyhd_sdk&&window.fyhd_sdk.getFyhd().loginData(e,()=>{})}static uploginData(e){if(window.fyhd_sdk){var t={openid:e.openid,role_id:e.openid,nickname:e.nickname};window.fyhd_sdk.getFyhd().loginData(t,()=>{})}}static upTiming(){if(window.fyhd_sdk){var e={openid:C.user.openid,timing:10};window.fyhd_sdk.getFyhd().timing(e,()=>{})}}static upValueUser(){if(window.fyhd_sdk){var e={openid:C.user.openid};window.fyhd_sdk.getFyhd().valueuser(e,()=>{})}}static sharePlay(e,t,i=!0){window.fyhd_sdk&&(un.adv("push"),Laya.Browser.window.wx.navigateToMiniProgram({appId:e,path:t,success(t){var i={openid:C.user.openid,to_appid:e};window.fyhd_sdk.getFyhd().sharePlay(i,e=>{})},fail(e){i&&mn.showDialog(mn.REWANVIEW,!1,!0)},complete(e){}}))}}un.miniList=[],function(e){e.banner="banner",e.jili="jili",e.chaping="chaping",e.gezi="gezi"}(Mi||(Mi={})),function(e){e.bannerAdId="adunit-banner",e.videoReward="adunit-6c6690e7192d86eb",e.videoRelive="adunit-cc78c65e499f0f3f",e.videoFreeSkin="adunit-ffea1d8ffb614aa3",e.videoChapinId="adunit-4b82065bce62c8fd",e.vedeoGeziId="adunit-da05c94900334b08"}(Ci||(Ci={}));class gn{constructor(e,t){this.isShow=!1,this._isTop=!1,this._advId=e,this._advType=t}show(e,t,i=!1){switch(this._sucCall=e,this._failCall=t,this.isShow=!i,this._advType){case Mi.jili:this._video||(this._video=wx.createRewardedVideoAd({adUnitId:this._advId}),this._video.onError(e=>{this._failCall&&(this._failCall(!0),this._failCall=null)}),this._video.onClose(e=>{e&&e.isEnded||void 0===e?this._sucCall&&(this._sucCall(!0),this._sucCall=null):this._failCall&&(this._failCall(!0),this._failCall=null)})),!i&&this._video&&this._video.load().then(()=>{this._video.show().catch(e=>{this._video.load().then(()=>this._video.show())})});break;case Mi.banner:if(!this._video){let e=_n.isFullScrenn()?400:350;this._video=wx.createBannerAd({adUnitId:this._advId,style:{left:(fn.sysInfo.screenWidth-e)/2,top:0,width:e}}),this._video.onResize(()=>{this.repos()}),this._video.onError(e=>{this._failCall&&(this._failCall(!0),this._failCall=null)})}!i&&this._video&&(this.repos(),this._video.show());break;case Mi.chaping:!this._video&&wx.createInterstitialAd&&(this._video=wx.createInterstitialAd({adUnitId:this._advId}),this._video.onError(e=>{this._failCall&&(this._failCall(!0),this._failCall=null)})),!i&&this._video&&this._video.show().catch(e=>{console.error(e)});break;case Mi.gezi:!this._video&&wx.createGridAd&&(this._video=wx.createGridAd({adUnitId:this._advId,adTheme:"white",gridCount:5,style:{left:0,top:0,width:330,opacity:.8}}),this._video.onError(e=>{this._failCall&&(this._failCall(!0),this._failCall=null)})),!i&&this._video&&this._video.show()}}repos(){if(this._video){var e=fn.sysInfo.screenWidth/2,t=fn.sysInfo.screenHeight;this._video.style.left=e-this._video.style.realWidth/2+.1,fn._isIpx?this._video.style.top=this._isTop?0:t-this._video.style.realHeight-15:this._video.style.top=this._isTop?0:t-this._video.style.realHeight+.1}}setPos(e=!1){this._isTop=e}destory(){}hide(){switch(this.isShow=!1,this._advType){case Mi.jili:break;case Mi.banner:this._video&&(this._video.hide(),this._video.destroy(),this._video=null);break;case Mi.chaping:case Mi.gezi:}}}class fn{static init(){if(fn._banners.forEach(e=>{fn.addAdv(e,Mi.banner)}),fn.addAdv(Ci.videoFreeSkin,Mi.jili),fn.addAdv(Ci.videoRelive,Mi.jili),fn.addAdv(Ci.videoReward,Mi.jili),Laya.timer.frameLoop(2,this,()=>{fn._advarr.length>0?fn._advarr.pop().show(null,null,!0):Laya.timer.clearAll(this)}),Laya.Browser.onMiniGame){var e=wx.getSystemInfoSync();fn.sysInfo=e,e.model.indexOf("iPhone X")>-1&&(fn._isIpx=!0)}}static clickBanner(e){null!=e&&(8==e.targetAction||9==e.targetAction||10==e.targetAction)&&e.targetPagePath.length>50&&(un.adv("banner"),fn.bannerClick=!0)}static addAdv(e,t){if(Laya.Browser.onMiniGame&&!(i=fn.getAdv(e))){var i=new gn(e,t);fn._advs[e]=i,fn._advarr.push(i)}}static showBanner(e=0){if(Laya.Browser.onMiniGame){0!=e&&(fn._bannerIndex=e);var t=fn.getNextBaner(),i=fn._banners[fn._bannerIndex],n=fn._advs[i];n&&(fn.hideBanner(),n.setPos(),n.show());t=fn.getNextBaner();var a=fn._banners[t],o=fn._advs[a];o&&o.show(null,null,!0),fn._bannerIndex++,fn._bannerIndex>=fn._banners.length&&(fn._bannerIndex=0)}}static getPreBaner(){var e=fn._bannerIndex-1;return e<0&&(e=fn._banners.length-1),e}static getNextBaner(){var e=fn._bannerIndex+1;return e>=fn._banners.length&&(e=0),e}static hideBanner(){for(const e in fn._advs)if(fn._advs.hasOwnProperty(e)){const t=fn._advs[e];t.isShow&&t._advType==Mi.banner&&t.hide()}}static showAdv(e,t,i,n=0){e==Ci.bannerAdId&&(fn.bannerShow=!0,xi.I.showBannerAd(V.AD_BANNER_BOX))}static hideAdv(e){xi.I.hideBannerAd(V.AD_BANNER_BOX)}static getAdv(e){return fn._advs?fn._advs[e]:null}}fn._advs={},fn._advarr=[],fn._bannerIndex=0,fn._banners=["adunit-70ff10b2db12ee06","adunit-6cdc95363012fc60","adunit-b64a1befbd2320f6","adunit-dc6d779eca801147","adunit-b3b6827a7d1bc3a5"],fn._isIpx=!1,fn.bannerClick=!1,fn.bannerShow=!1;class yn{constructor(){}static getTime(e=!1){return e?(new Date).getTime():this._date.getTime()}static getHours(e){return this._date.setTime(e),this._date.getHours()}static getTimeStr(e){return this._date.setTime(e),Fi.substitute("{0}-{1}-{2} {3}:{4}:{5}",this._date.getFullYear(),this._date.getMonth()+1,this._date.getDate(),Fi.paddingLeft(this._date.getHours().toString(),"0",2),Fi.paddingLeft(this._date.getMinutes().toString(),"0",2),Fi.paddingLeft(this._date.getSeconds().toString(),"0",2))}static getTimeStr1(e){return this._date.setTime(e),Fi.substitute("{0}年{1}月{2}日 {3}:{4}:{5}",this._date.getFullYear(),this._date.getMonth()+1,this._date.getDate(),Fi.paddingLeft(this._date.getHours().toString(),"0",2),Fi.paddingLeft(this._date.getMinutes().toString(),"0",2),Fi.paddingLeft(this._date.getSeconds().toString(),"0",2))}static getTimeStr2(e){return this._date.setTime(e),Fi.substitute("{0}年{1}月{2}日 星期{3}",this._date.getFullYear(),this._date.getMonth()+1,this._date.getDate(),yn.DAY_CHAR[this._date.getDay()])}static getTimeWeekDay(e){return this._date.setTime(e),this._date.getDay()}static getWeekDayTime(e,t,i){this._date.setTime(e);let n=this._date.getDay();t<=n&&(t+=7),this._date.setTime(e+1e3*yn.DAY_SECONDS*(t-n)),i||(i="00:00:00");let a=i.split(":");return this._date.setHours(Number(a[0]),Number(a[1]),Number(a[2])),this._date.getTime()}static getDayTime(e){return this._date.setTime(e),60*this._date.getHours()*60+60*this._date.getMinutes()+this._date.getSeconds()}static getDayTime1(e){this._date.setTime(e);let t=60*this._date.getHours()*60+60*this._date.getMinutes()+this._date.getSeconds();return Math.floor(e/1e3)-t}static getTimeShortStr(e){return this._date.setTime(e),Fi.substitute("{0}:{1}:{2}",this._date.getHours(),this._date.getMinutes(),this._date.getSeconds())}static getTimeShortStr2(e){let t=Q.parseInt(e/3600);e=Q.parseInt(e%3600);let i=Q.parseInt(e/60),n=Q.parseInt(e%60);return Fi.substitute("{0}:{1}:{2}",Fi.paddingLeft(t.toString(),"0",2),Fi.paddingLeft(i.toString(),"0",2),Fi.paddingLeft(n.toString(),"0",2))}static getTimeShortStr3(e){let t=Q.parseInt(e/60),i=Q.parseInt(e%60);return Fi.substitute("{0}:{1}",Fi.paddingLeft(t.toString(),"0",2),Fi.paddingLeft(i.toString(),"0",2))}static getTimeShortStr4(e){return e<60?"刚刚":(e=Q.parseInt(e/60))<60?e+"分钟前":(e=Q.parseInt(e/60))<24?e+"小时前":(e=Q.parseInt(e/24))+"天前"}static getTimeShortStr5(e){let t=Q.parseInt(e/yn.DAY_SECONDS);e=Q.parseInt(e%yn.DAY_SECONDS);let i=Q.parseInt(e/3600);e=Q.parseInt(e%3600);let n=Q.parseInt(e/60),a=Q.parseInt(e%60),o=Fi.substitute("{0}:{1}:{2}",Fi.paddingLeft(i.toString(),"0",2),Fi.paddingLeft(n.toString(),"0",2),Fi.paddingLeft(a.toString(),"0",2));return t>0&&(o=t+"天 "+o),o}static getTimeShortStr6(e){if(e<60)return"0分钟";let t=(e=Q.parseInt(e/60))%60+"分钟";return(e=Q.parseInt(e/60))?(t=e%24+"小时"+t,(e=Q.parseInt(e/60))?t=e+"天"+t:t):t}static getDayByTime(e){if(!e)return"0";e*=1e3,this._date.setTime(e);let t=this._date.getFullYear(),i=this._date.getMonth()+1,n=this._date.getDate();return t.toString()+"-"+i.toString()+"-"+n.toString()}dispose(){}}yn.SUNDAY=0,yn.MONDAY=1,yn.TUESDAY=2,yn.WEDNESDAY=3,yn.THURSDAY=4,yn.FRIDAY=5,yn.SATURDAY=6,yn.DAY_SECONDS=86400,yn.UTC_SECONDS=28800,yn._date=new Date,yn.DAY_CHAR=["日","一","二","三","四","五","六"];class _n{static gameStart(){_n.gameTimes++}static get isShen(){return!_n.isWhite}static init(){if(_n.startTime=(new Date).getTime(),fn.init(),Laya.Browser.onQGMiniGame){var e="http://cdn.ouku3.com/develop/off/oppo/101/config.json?v="+yn.getTime();Laya.loader.load(e,Laya.Handler.create(this,e=>{e&&(_n.isWhite=e.iswhite)}))}}static makemoney(e){_n.localData.money+=e*_n.localData.makemoney,_n.localData.makemoney=0}static getUnLock(e){var t=[];switch(e){case 0:_n.localData.pifus.forEach((e,i,n)=>{-1!=e&&t.push(e)});break;case 1:_n.localData.maps.forEach((e,i,n)=>{-1!=e&&t.push(e)});break;case 2:_n.localData.tuoweis.forEach((e,i,n)=>{-1!=e&&t.push(e)})}return t}static getLoalData(e,t){if(Laya.Browser.onMiniGame)wx.getStorage({key:e,success:e=>{t&&e.data&&t(""==e.data?null:JSON.parse(e.data))},fail:()=>{t&&t(null)},complete:()=>{}});else{var i=Laya.LocalStorage.getJSON(e);t&&t(i)}}static setLocalData(e,t){if(Laya.Browser.onMiniGame)wx.setStorage({key:e,data:t,success:()=>{},fail:()=>{},complete:()=>{}});else try{Laya.LocalStorage.setItem(e,t)}catch(e){console.log(e)}}static saveUserData(e=!0){try{e&&(_n.localData.firstGame=!1),_n.setLocalData("userData",JSON.stringify(_n.localData))}catch(e){console.log(e)}}static playSound(e="sounds/button2.mp3"){if(1==_n.localData.effect){Laya.Render.isConchApp&&(e=e.replace("mp3","wav")),"1"==Laya.LocalStorage.getItem("soundMute")&&Laya.SoundManager.playSound(e,1)}}static playMusic(e){2==e?Laya.SoundManager.playMusic("sounds/choice.mp3",0):Laya.SoundManager.playMusic("sounds/bgm.mp3",0)}static shock(){1==_n.localData.shake&&(Laya.Browser.onMiniGame?wx.vibrateLong({success:()=>{},fail:()=>{},complete:()=>{}}):(Laya.Browser.onQGMiniGame||Laya.Browser.onVVMiniGame)&&qg.vibrateLong({success:()=>{},fail:()=>{},complete:()=>{}}))}static showBanner(e=0){return xi.I.showBannerAd(V.AD_BANNER_BOX),!0}static isFullScrenn(){return Laya.stage.height>1280}}_n.startTime=0,_n.rewanState=!0,_n.gameTimes=0,_n.reliveTimes=0,_n.isExit=!1,_n.user={openid:"1",token:"2.0xxxxx",timestamp:"1510001111",sign:"xxxxxxxxxxxx",avatarUrl:"comp/head.jpg",nickname:"玩家"},_n.isWhite=!1,_n.localKey="userData",_n.localData={version:1,money:100,makemoney:0,pifu:0,tuowei:13,map:11,zhangai:0,bgm:1,effect:1,shake:1,right_left:1,pifus:[-1,2,3,4,5,6,7,8,9,10],maps:[-1,2],tuoweis:[-1,2,3,4,5,6],guide:0,firstGame:!0,white:!1};class In extends Laya.Image{constructor(e=null,t=""){super(e),this.scaleTime=100,this.initScaleX=1,this.initScaleY=1,this.on(Laya.Event.MOUSE_DOWN,this,this.scaleSmall),this.on(Laya.Event.MOUSE_UP,this,this.scaleBig),this.on(Laya.Event.MOUSE_OUT,this,this.scaleBig),this.frameOnce(2,this,this.onDelay)}onDelay(){this.initScaleX=this.scaleX||1,this.initScaleY=this.scaleY||1}scaleSmall(){Laya.Tween.to(this,{scaleX:.9,scaleY:.9},this.scaleTime),_n.playSound()}scaleBig(){Laya.Tween.to(this,{scaleX:this.initScaleX,scaleY:this.initScaleY},this.scaleTime)}}class vn extends O.box.HeadBoxUI{constructor(){super()}set dataSource(e){}onOpened(e){super.onOpened(e)}onClosed(e){super.onClosed(e)}}class wn extends O.box.PifuBoxUI{constructor(){super(),this._isSelected=!1,this._index=-1,this._isLocked=!1,this.btnActive.on(Laya.Event.CLICK,this,this.onActivePifu)}activePifu(){var e;switch(this.isVideo()||(C.I.money-=this.dataSource[4]),this.dataSource[1]){case 0:C.I.pifus[this._index-1]=-1,(e=new te(te.PIFU_CHANGE)).data={id:this.dataSource[0],free:!1};break;case 1:C.I.maps[this._index-1]=-1,(e=new te(te.MAP_CHANGE)).data=this.dataSource[7][0];break;case 2:C.I.tuoweis[this._index-1]=-1,(e=new te(te.TRAIL_CHANGE)).data=this.dataSource[0]}Gi.evt.dispatchEvent(e),Gi.evt.dispatchEvent(new te(te.MONEY_CHANGE)),mn.getDialog(mn.PIFUVIEW).list.refresh()}onActivePifu(e){if(!this._isLocked)if(this.isVideo()){let e=this;xi.I.showVideoAd(D.AD_VIDEO_COIN,this,t=>{t&&e.activePifu()})}else{var t=mn.getDialog(mn.ALERTVIEW);t.setData({data:this.dataSource,text:"是否花费"+this.dataSource[4]+"金币激活新外观？",onSure:()=>{this.activePifu()},onCancel:null}),t.popup(!1,!0)}}setData(e,t,i){if(!e)return this.clear(),this.sptTex.filters=[],void(this.dataSource=null);this._index=t,this.dataSource=e;var n=!1;switch(e[1]){case 0:this.sptTex.filters=[],this.sptTex.skin="ren/"+t+".jpg",n=-1==C.I.pifus[t-1];break;case 1:this.sptTex.filters=[],this.sptTex.skin=e[6],n=-1==C.I.maps[t-1];break;case 2:n=-1==C.I.tuoweis[t-1],this.sptTex.skin="ren/tuowei.png",Ji.redMat[0]=e[7][0]/255,Ji.redMat[6]=e[7][1]/255,Ji.redMat[12]=e[7][2]/255;let i=new Laya.ColorFilter(Ji.redMat);this.sptTex.filters=[i]}this.labelNum.text=t.toString();let a=e[4],o=this.isVideo();this._isLocked=!1,n||a<1?(this._isLocked=!0,this.img_jinbi.visible=!1,this.labelCost.text="owned",this.labelCost.color="#ffffff",this.btnActive.skin="comp/anniulv.png",this.labelCost.x=31):(this.img_jinbi.visible=!0,this.btnActive.skin="comp/anniulan.png",this.labelCost.color="#fdf133",this.labelCost.x=52,o?(this.labelCost.text="ad",this.img_jinbi.skin="comp/shipi.png"):(this.labelCost.text=a.toString(),this.img_jinbi.skin="comp/jinbi.png")),this.isSelected=i}isVideo(){return!!this.dataSource&&(this.dataSource[4]>0&&this.dataSource[4]<10)}set isSelected(e){this._isSelected=e,this.boxSelect.visible=e}clear(){this.sptTex.skin="",this.isSelected=!1,this.labelCost.text="",this.labelNum.text=""}}class Sn extends O.LoadingViewUI{constructor(){super(),this.preloadCount=0,this.subPackName=["scene","sounds"],this.subPackNameOV=["scene"],this.curValue=0,this.progress.value=0,this.height=Laya.stage.height,_n.isFullScrenn()?this.imgLogo.top=72:this.imgLogo.top=42}onOpened(e){Laya.Browser.onVVMiniGame?(this.subPackNameOV&&this.subPackNameOV.length>0&&(this.subPackName=this.subPackNameOV),this.loadSubPackage()):Laya.Browser.onMiniGame?this.loadSubPackage():this.loadRes()}close(e){Laya.timer.clearAll(this),super.close(e)}loadRes(){Laya.Browser.onQGMiniGame&&window.qg.setLoadingProgress({progress:0}),_n.init(),Laya.loader.load(["res/atlas/comp.atlas","res/atlas/rank.atlas","res/atlas/head.atlas","res/atlas/ren.atlas"],Laya.Handler.create(this,()=>{Laya.Browser.onMiniGame&&Laya.MiniAdpter.sendAtlasToOpenDataContext("res/atlas/rank.atlas"),Laya.loader.create($.preloads,Laya.Handler.create(this,()=>{new Gi,Gi.app.uiRoot.showWaiting(this),Laya.Browser.onMiniGame?(Gi.app.uiRoot.hideWaiting(),this.close(),Gi.app.startGame()):setTimeout(()=>{Gi.app.uiRoot.hideWaiting(),this.close(),Gi.app.startGame()},300),Laya.Browser.onQGMiniGame&&window.qg.loadingComplete({success:()=>{},complete:e=>{}})}),Laya.Handler.create(this,e=>{this.progress.value=.85*e+.15,this.lblState.text="加载中..."+(100*this.progress.value).toFixed(0)+"%",Laya.Browser.onQGMiniGame&&window.qg.setLoadingProgress({progress:(100*this.progress.value).toFixed(0)})}))}),Laya.Handler.create(this,e=>{this.progress.value=e,this.lblState.text="加载中..."+(100*this.progress.value).toFixed(0)+"%"}))}loadAsynSubPackage(e){let t;Laya.Browser.onQGMiniGame||Laya.Browser.onVVMiniGame?t=qg:Laya.Browser.onMiniGame&&(t=wx),console.log("loadAsynSubPackage:"+e);let i=this;t.loadSubpackage({name:e,success:function(e){i.preloadCount==i.subPackName.length-1?(console.error("load"),Laya.timer.clear(i,i.animPro),i.curValue=100,i.animPro(),i.loadRes()):(i.preloadCount++,i.loadAsynSubPackage(i.subPackName[i.preloadCount]))},fail:function(t){console.log("loadAsynSubPackage fail:"+e),i.loadAsynSubPackage(e)}}).onProgressUpdate(e=>{console.log("下载进度",e.progress),console.log("下载进度",e.progress/100),console.log("已经下载的数据长度",e.totalBytesWritten),console.log("预期需要下载的数据总长度",e.totalBytesExpectedToWrite)})}loadSubPackage(){this.preloadCount=0,this.loadAsynSubPackage(this.subPackName[this.preloadCount]),Laya.timer.frameLoop(10,this,this.animPro)}animPro(){this.curValue>100&&(this.curValue=0),this.lblState.text="加载中..."+(100*this.progress.value).toFixed(0)+"%",this.progress.value=this.curValue/100,this.curValue+=2}}class Ln extends O.rewan.box.GameBigItemUI{constructor(){super(),this.on(Laya.Event.CLICK,this,this.onClick)}set dataSource(e){if(this._toappid=null,!e)return this.gameIcon.skin="",this._toappid="",this.txt_name.text="",super.dataSource=null,void(this._jump_path="");this.gameIcon.skin=e.icon,this._toappid=e.to_appid,this.txt_name.text=e.togame_name,this._jump_path=e.jump_path,super.dataSource=e}onClick(e){this._toappid&&un.sharePlay(this._toappid,this._jump_path),"noinvite"==this.parent.parent.name?_n.rewanState=!1:_n.rewanState=!0}}class En extends O.box.PipeiBoxUI{constructor(){super()}set dataSource(e){if(super.dataSource=e,!e)return this.img_load.visible=!0,this.headImg.skin="comp/zaizaidi.png",void this.ani1.stop();this.ani1.play()}endEffect(){this.ani1.stop(),this.img_load.visible=!1,this.headImg.skin="head/"+super.dataSource+".jpg"}}class An extends Laya.List{constructor(){super(),this.mIsAutoScroll=!1,this.mAutoScrollSpeed=0,this.mAutoScrollDir=1,this.mAutoWaitTime=500}onEnable(){super.onEnable(),Laya.timer.frameLoop(1,this,this.onAutoScroll)}onDisable(){super.onDisable(),Laya.timer.clear(this,this.onAutoScroll)}setAutoScroll(e,t,i){this.scrollBar.max<50?this.mAutoScrollSpeed=0:(this.mAutoScrollSpeed=e,this.mAutoScrollDir=t,this.mAutoWaitTime=i)}onAutoScroll(){if(0==this.mAutoScrollSpeed)return;if(this.mAutoWaitTime>0)return void(this.mAutoWaitTime-=Laya.timer.delta);let e=this.scrollBar,t=e.value+1*this.mAutoScrollDir;e.value=t,t>=e.max?this.mAutoScrollDir>0&&(this.mAutoWaitTime=500,this.mAutoScrollDir=-1):t<=e.min&&this.mAutoScrollDir<0&&(this.mAutoWaitTime=500,this.mAutoScrollDir=1)}}class xn extends O.rewan.box.GameItemRewanUI{constructor(){super(),this.on(Laya.Event.CLICK,this,this.onClick)}set dataSource(e){if(this._toappid=null,!e)return this.gameIcon.skin="",this._toappid="",this.txt_name.text="",this._jump_path="",void(super.dataSource=null);var t=e.panel+3;t>16?t-=9:t<8&&(t=8),this.img_head.skin="rewan/type"+t+".png",this.txt_hot.text=e.panel<8?"热门":"top50",this.gameIcon.skin=e.icon,this._toappid=e.to_appid,this.txt_name.text=e.togame_name,this._jump_path=e.jump_path,this.txt_num.text=Q.randomRange(25e4,998888)+"人在玩",super.dataSource=e}onClick(e){this._toappid&&un.sharePlay(this._toappid,this._jump_path)}}class Tn extends O.rewan.box.GameItemUI{constructor(){super(),this.on(Laya.Event.CLICK,this,this.onClick)}set dataSource(e){if(this._toappid=null,!e)return this.gameIcon.skin="",this._toappid="",this.txt_name.text="",super.dataSource=null,void(this._jump_path="");this.gameIcon.skin=e.icon,this._toappid=e.to_appid,this.txt_name.text=e.togame_name,"noinvite1"==this.parent.parent.name?this.txt_name.color="#ffffff":this.txt_name.color="#000000",this._jump_path=e.jump_path,super.dataSource=e}onClick(e){this._toappid&&un.sharePlay(this._toappid,this._jump_path),-1!=this.parent.parent.name.indexOf("noinvite")?_n.rewanState=!1:_n.rewanState=!0}}class bn extends O.rewan.box.FakeBoxUI{constructor(){super(),this.on(Laya.Event.CLICK,this,this.onClick)}set dataSource(e){if(this._toappid=null,!e)return this.gameIcon.skin="",this._toappid="",this.txt_name.text="",super.dataSource=null,void(this._jump_path="");this.gameIcon.skin=e.icon,this._toappid=e.to_appid,this.txt_name.text=e.togame_name,this._jump_path=e.jump_path,super.dataSource=e,un.miniList[7]===e&&"list1"==this.parent.parent.name&&(this.gameIcon.skin="rewan/frame_07.png",this._toappid="",this.txt_name.text="")}onClick(e){this._toappid&&un.sharePlay(this._toappid,this._jump_path,!1)}}class Rn{constructor(){this.handlers=new Array}init(e,t,i,n,a){this.eName=e,this.target=t,this.caller=i,this.func=n,this.target.on(e,this,this.invoke,[t,a])}invoke(e,t){this.func&&this.func.call(this.caller,...t),Ve.instance.triggerListener(Rn.TriggerEvent,e)}equals(e){return this.target==e}dispose(){this.target.off(this.eName,this,this.invoke),this.eName=null,this.target=null,this.caller=null,this.func=null}static create(){return Laya.Pool.getItemByClass("ButtonTrigger",Rn)}static recycle(e){Laya.Pool.recover("ButtonTrigger",e)}}Rn.TriggerEvent=9999;class Mn{constructor(){this.assetList=[],this.uiLayer=K.Normal,this.showSound="res/audios/sound/showPanel.mp3",this.hideSound="res/audios/sound/hidePanel.mp3"}get view(){return this.mView}prepare(e,t){this.proxy=e,this.func=t,this.assetList.length>0?Laya.loader.load(this.assetList,Laya.Handler.create(this,this.onPrepareComplete)):(this.onPrepareComplete(!0),Ce.warn("this panel dont have assetlist,%s",this.mView.name))}onPrepareComplete(e){e?(this.mView=this.createView(),Laya.loader.off(Laya.Event.ERROR,this,this.onPrepareError),this.func.call(this.proxy,!0,this.mView,this.uiLayer)):Ce.error("onPrepareComplete: but is fail")}onPrepareError(e){Ce.error("UI OnPrepareError: %s",e),this.assetList.indexOf(e)>=0&&this.func.call(this.proxy,!1)}update(e){}resize(){}initial(){Laya.loader.on(Laya.Event.ERROR,this,this.onPrepareError),this.clicks=new a}start(){}show(e){this.content=this.findChild(this.mView,"content");let t=this.mView.getChildByName("box");this.addClickListener(t,this.closeSelf);let i=this.findChild(this.mView,"content/close");this.addClickListener(i,this.closeSelf),this.showAnimation()}hide(){for(let e of this.clicks.array)e.dispose(),Rn.recycle(e);this.clicks.clear()}end(){}dispose(){if(Laya.loader.off(Laya.Event.ERROR,this,this.onPrepareError),this.mView)for(let e of this.assetList)Laya.loader.clearRes(e)}showAnimation(){this.content&&(this.content.scale(0,0),Laya.Tween.to(this.content,{scaleX:1,scaleY:1},350,Laya.Ease.backOut,Laya.Handler.create(this,this.showAnimationComplete)))}showAnimationComplete(){}showPanel(e,t){Mt.instance.show(e,t)}hidePanel(e){Mt.instance.hide(e)}destroyPanel(e){Mt.instance.destroy(e)}closeSelf(){this.hidePanel(this.proxy.path)}destroySelf(){this.destroyPanel(this.proxy.path)}addClickListener(e,t,i,n){if(!e)return null;let a=Laya.Event.CLICK;n&&(a=n);let o=[];i&&(o=i);let r=Rn.create();return r.init(a,e,this,t,o),this.clicks.add(r),e}setVerticalListAttribute(e){e instanceof Laya.List&&(e.vScrollBarSkin="",e.scrollBar.elasticBackTime=300,e.scrollBar.elasticDistance=120),e instanceof Laya.Panel&&(e.vScrollBarSkin="",e.vScrollBar.elasticBackTime=300,e.vScrollBar.elasticDistance=120)}setHorizontalListAttribute(e){e instanceof Laya.List&&(e.hScrollBarSkin="",e.scrollBar.elasticBackTime=300,e.scrollBar.elasticDistance=120),e instanceof Laya.Panel&&(e.hScrollBarSkin="",e.hScrollBar.elasticBackTime=300,e.hScrollBar.elasticDistance=120)}findChild(e,t){return Mt.instance.findChild(e,t)}playSound(e){Qe.isNullOrEmpty(e)||Laya.SoundManager.playSound(e)}}class Cn extends Mn{constructor(){super(...arguments),this.assetList=["view/MoonGuideGestureView.json"]}createView(){return new O.view.MoonGuideGestureViewUI}show(e){super.show(e),this.view.size(Laya.stage.width,Laya.stage.height),this.view.Ani_Gesture.play(0,!0)}}class On extends Mn{constructor(){super(...arguments),this.animTime=1e3,this.widthOff=20,this.fontWidth=40,this.iconWidth=110,this.assetList=["view/MoonTip.json"]}createView(){return new O.view.MoonTipUI}initial(){super.initial(),this.uiLayer=K.Waiting}show(e){super.show(e),this.view.size(Laya.stage.width,Laya.stage.height),this.view.bg.visible=!0,this.view.bg.y=.5*Laya.stage.height,"string"==typeof e?(this.view.box_txt.visible=!0,this.view.content.text=e,this.view.bg.width=this.view.content.text.length*this.fontWidth+this.widthOff):(this.view.box_icon.visible=!0,this.view.lbl_icon.text=e[0],this.view.img_icon.skin=e[1],this.view.bg.width=this.view.lbl_icon.text.length*this.fontWidth+this.iconWidth),Laya.Tween.to(this.view.bg,{y:.3*Laya.stage.height},this.animTime,Laya.Ease.circOut,Laya.Handler.create(this,this.onMoveFinished))}onMoveFinished(){this.view.box_txt.visible=!1,this.view.box_icon.visible=!1,this.view.bg.width=0,this.closeSelf()}}class Dn extends Mn{constructor(){super(...arguments),this.adEnum=-1,this.showGames=!0,this.gamekeys=[],this.showMain=!0,this.assetList=["view/MoonMainAd.json"]}createView(){return new O.view.MoonMainAdUI}initial(){super.initial(),this.uiLayer=K.Dialog}start(){super.start()}end(){super.end()}show(e){super.show(e),this.view.size(Laya.stage.width,Laya.stage.height);let t=0;e&&e.top&&(this.view.List_Game1.top=e.top,this.view.List_Game2.top=e.top,t=e.top),null!=e&&null!=e.adEnum&&e.adEnum>=0&&(this.adEnum=e.adEnum,Ce.log("MoonMainAdPanel-showBannerAd"),xi.I.showBannerAd(this.adEnum)),null!=e&&null!=e.isMain&&(this.showMain=e.isMain),Ve.instance.addListener(Xt.MOOM_MAINAD_CLICK,this,this.onClickL);let i=T.I.getConf();this.view.List_Game1.visible=this.showGames,this.view.List_Game2.visible=this.showGames,this.gamekeys=[];let n=Ni.I.getMatrixByPosition(xe.MAIN_LEFT_AD);if(null==n||n.length<=0){if(this.view.List_Game1.visible=!1,Laya.Browser.onMiniGame){let e=Ni.I.getAdSwitchByPosition(be.MAIN_LEFT_AD);if(null!=e&&1==e.state){let i=t>0?t:e.topMargin;ki.I.showCustom(H.AD_CUSTOM_MAIN_SINGLE_LEFT,i,e.leftMargin,this,this.onErrorLeftCoustAd)}}}else{for(const e of n)this.gamekeys.push(e.tgamekey);this.view.List_Game1.vScrollBarSkin="",this.view.List_Game1.elasticEnabled=!1,this.view.List_Game1.scrollBar.rollRatio=0,this.view.List_Game1.renderHandler=new Laya.Handler(this,this.cellsForLeftGame),this.view.List_Game1.array=n,this.view.List_Game1.setAutoScroll(1,1,500),this.gamekeys.length>0&&Ni.I.jumpStatistics(i,c.instance.openid,bi.MATRIX_TYPE_SHOW,this.gamekeys.join(","),xe.MAIN_LEFT_AD)}this.gamekeys=[];let a=Ni.I.getMatrixByPosition(xe.MAIN_RIGHT_AD);if(null==a||a.length<=0){if(this.view.List_Game2.visible=!1,Laya.Browser.onMiniGame){let e=Ni.I.getAdSwitchByPosition(be.MAIN_RIGHT_AD);if(null!=e&&1==e.state){let i=t>0?t:e.topMargin;ki.I.showCustom(H.AD_CUSTOM_MAIN_RIGHT,i,e.leftMargin,this,this.onErrorRightCoustAd)}}}else{for(const e of a)this.gamekeys.push(e.tgamekey);this.view.List_Game2.vScrollBarSkin="",this.view.List_Game2.elasticEnabled=!1,this.view.List_Game2.scrollBar.rollRatio=0,this.view.List_Game2.renderHandler=new Laya.Handler(this,this.cellsForRightGame),this.view.List_Game2.array=a,this.view.List_Game2.setAutoScroll(1,1,500),this.gamekeys.length>0&&Ni.I.jumpStatistics(i,c.instance.openid,bi.MATRIX_TYPE_SHOW,this.gamekeys.join(","),xe.MAIN_RIGHT_AD)}if(Laya.Browser.onMiniGame&&this.showMain){let e=Ni.I.getAdSwitchByPosition(be.MAIN_ICON_AD);null!=e&&1==e.state&&ki.I.showCustom(H.AD_CUSTOM_MAIN,e.topMargin,e.leftMargin,this,null)}}onErrorLeftCoustAd(e){Ce.log("MoonMainAdPanel--onErrorLeftCoustAd---",e)}onErrorRightCoustAd(e){Ce.log("MoonMainAdPanel--onErrorRightCoustAd---",e)}onClickL(e){this.view.List_Game1.visible=!1,this.view.List_Game2.visible=!1,Laya.Browser.onMiniGame&&(ki.I.hideCustom(H.AD_CUSTOM_MAIN_RIGHT),ki.I.hideCustom(H.AD_CUSTOM_MAIN_SINGLE_LEFT),this.showMain&&ki.I.hideCustom(H.AD_CUSTOM_MAIN))}cellsForLeftGame(e,t){let i=e.dataSource;e.getChildByName("Img_Game").skin=i.icon,e.off(Laya.Event.CLICK,this,Ni.I.openGame),e.on(Laya.Event.CLICK,this,Ni.I.openGame,[i,xe.MAIN_LEFT_AD])}cellsForRightGame(e,t){let i=e.dataSource;e.getChildByName("Img_Game").skin=i.icon,e.off(Laya.Event.CLICK,this,Ni.I.openGame),e.on(Laya.Event.CLICK,this,Ni.I.openGame,[i,xe.MAIN_RIGHT_AD])}hide(){null!==this.adEnum&&void 0!==this.adEnum&&this.adEnum>=0&&(Ce.log("MoonMainAdPanel-hideBannerAd",this.adEnum),xi.I.hideBannerAd(this.adEnum)),Laya.Browser.onMiniGame&&(ki.I.hideCustom(H.AD_CUSTOM_MAIN_RIGHT),ki.I.hideCustom(H.AD_CUSTOM_MAIN_SINGLE_LEFT),ki.I.hideCustom(H.AD_CUSTOM_MAIN)),Ve.instance.removeListener(Xt.MOOM_MAINAD_CLICK,this,this.onClickL),super.hide()}}class Vn extends Mn{constructor(){super(...arguments),this.adEnum=-1,this.assetList=["view/MoonResults.json"]}createView(){return new O.view.MoonResultsUI}initial(){super.initial(),this.uiLayer=K.Dialog}show(e){super.show(e),this.view.size(Laya.stage.width,Laya.stage.height),this.mgoonCaller=e.mgoonCaller,this.mgoonFunc=e.mgoonFunc,this.adEnum=e.adEnum,null!==this.adEnum&&void 0!==this.adEnum&&this.adEnum>=0&&(Ce.log("MoonResultsPanel-showBannerAd"),xi.I.showBannerAd(this.adEnum)),this.addClickListener(this.view.goon,this.onClickL);let t=[],i=[],n=(T.I.getConf(),Ni.I.getMatrixByPosition(xe.RESULT_HOT_AD)),a=Ni.I.getMatrixByPosition(xe.RESULT_FRIEND_AD),o=[];if(null!=n&&n.length>0){for(const e of n)t.push(e.tgamekey);for(let e=0;e<n.length;e++){let t=n[e];o.push(t)}}o.length<=0?this.view.hgamelist.visible=!1:(this.view.hgamelist.hScrollBarSkin="",this.view.hgamelist.elasticEnabled=!1,this.view.hgamelist.scrollBar.rollRatio=0,this.view.hgamelist.renderHandler=new Laya.Handler(this,this.cellsForGame),this.view.hgamelist.array=o,this.view.hgamelist.setAutoScroll(1,1,500),Ni.I.jumpStatistics(T.I.getConf(),c.instance.openid,bi.MATRIX_TYPE_SHOW,t.join(","),xe.RESULT_HOT_AD));let r=[];if(null!=a&&a.length>0){for(const e of a)i.push(e.tgamekey);for(let e=0;e<a.length;e++){let t=a[e];r.push(t)}}r.length<=0?this.view.vgamelist.visible=!1:(this.view.vgamelist.vScrollBarSkin="",this.view.vgamelist.elasticEnabled=!1,this.view.vgamelist.scrollBar.rollRatio=0,this.view.vgamelist.renderHandler=new Laya.Handler(this,this.cellsForGame2),this.view.vgamelist.array=r,this.view.vgamelist.setAutoScroll(1,1,500),Ni.I.jumpStatistics(T.I.getConf(),c.instance.openid,bi.MATRIX_TYPE_SHOW,i.join(","),xe.RESULT_FRIEND_AD))}hide(){null!==this.adEnum&&void 0!==this.adEnum&&this.adEnum>=0&&(Ce.log("MoonResultsPanel-hideBannerAd",this.adEnum),xi.I.hideBannerAd(this.adEnum)),super.hide()}onClickL(e){Laya.Browser.onMiniGame&&Ni.I.checkSkip(),this.closeSelf(),this.mgoonCaller&&this.mgoonFunc&&this.mgoonFunc.call(this.mgoonCaller)}cellsForGame(e,t){let i=e.dataSource;e.getChildByName("Img_Game").skin=i.icon,e.off(Laya.Event.CLICK,this,Ni.I.openGame),e.on(Laya.Event.CLICK,this,Ni.I.openGame,[i,xe.RESULT_HOT_AD])}cellsForGame2(e,t){let i=e.dataSource,n=e.getChildByName("Img_Game"),a=i.appname;a.length>6&&(a=i.appname[0]+i.appname[1]+i.appname[2]+"..."),n.skin=i.banner,e.off(Laya.Event.CLICK,this,Ni.I.openGame),e.on(Laya.Event.CLICK,this,Ni.I.openGame,[i,xe.RESULT_FRIEND_AD])}}class Nn{constructor(){this.itemMap={}}static get I(){return h.get(Nn)}init(){}setDataGameToList(e,t){let i=T.I.getConf();if(i.bbbsReportItemMap.hasOwnProperty(e)){const n=i.bbbsReportItemMap[e];if(n&&n.id){Ce.log("BBBSUniomHelper setDataGameToList element.id:",n.id);let e=Nn.I.getDataGameList(n.id);if(Ce.log("BBBSUniomHelper setDataGameToList rlist:",e),e&&e.length>0)for(let i=0;i<e.length;i++){let n=e[i];n&&t.push(n)}}}}getDataGameList(e){Ce.log("BBBSUniomHelper getDataGameList flowType:",e);let t=this.getData(e),i=[];if(t)for(let n=0;n<t.length;n++){const a=t[n];if(a&&a.logo&&a.programName&&a.appID&&a.maxPic&&a.defaultUrl){Ce.log("!!!BBBSUniomHelper getDataGameList:",a);let t={};t.index=n+1,t.icon=a.logo,t.appName=a.programName,t.appId=a.appID,t.banner=a.maxPic,t.path=a.defaultUrl,t.flowType=e,t.isBBBS=!0,i.push(t)}}return i}getData(e){Ce.log("BBBSUniomHelper getData flowType:",e);let t=unionapi.getData(e);if(t)for(let i=0;i<t.length;i++){let n=t[i];n&&n.appID?(Ce.debug("BBBSUniomHelper getData:",n),this.itemMap[`${e}-${n.appID}`]=n):Ce.warn("BBBSUniomHelper getData data is null")}else Ce.warn("unionapi.getData arr is null");return Ce.log("BBBSUniomHelper itemMap:",this.itemMap),t}reportByAppId(e,t,i,n){let a=this.itemMap[`${t}-${e}`];a&&this.report(a,t,i,n)}report(e,t,i,n){unionapi.report(e,t,i,n)}}class kn extends Mn{constructor(){super(...arguments),this.adEnum=-1,this.adTop=0,this.assetList=["view/MoonResults2.json"]}createView(){return new O.view.MoonResults2UI}initial(){super.initial(),this.uiLayer=K.Dialog}show(e){super.show(e),this.view.size(Laya.stage.width,Laya.stage.height),null!=e&&void 0!==this.adEnum&&(this.adEnum=e.adEnum,this.adTop=e.adTop);let t=[],i=T.I.getConf();if(Laya.Browser.onVVMiniGame||Laya.Browser.onQGMiniGame){this.view.hgamebox.visible=!1,this.view.hgamelist.visible=!1;let e=Ni.I.getAdSwitchByPosition(Te.MAIN_TOP_AD);if(null==e||0==e.state);else{let e=this.view.ov_native.getChildByName("icon");Laya.Browser.onVVMiniGame?Xi.I.createNativeAd(U.AD_GAME_NATIVE,Y.IMG,e):Hi.I.createNativeAd(U.AD_GAME_NATIVE,Y.IMG,e),e.on(Laya.Event.MOUSE_OVER,this,()=>{Laya.Browser.onVVMiniGame?Xi.I.reportAdClick(U.AD_GAME_NATIVE,Y.IMG):Hi.I.reportAdClick(U.AD_GAME_NATIVE,Y.IMG)})}if(null==(e=Ni.I.getAdSwitchByPosition(Te.MAIN_RIGHT_AD))||0==e.state)this.view.ov_native2.visible=!1;else{this.view.ov_native2.visible=!0;let e=this.view.ov_native2.getChildByName("icon");Laya.Browser.onVVMiniGame?Xi.I.createNativeAd(U.AD_GAME_SINGLE_NATIVE,Y.ICON,e):Hi.I.createNativeAd(U.AD_GAME_SINGLE_NATIVE,Y.ICON,e),e.on(Laya.Event.MOUSE_OVER,this,()=>{Laya.Browser.onVVMiniGame?Xi.I.reportAdClick(U.AD_GAME_SINGLE_NATIVE,Y.ICON):Hi.I.reportAdClick(U.AD_GAME_SINGLE_NATIVE,Y.ICON)}),this.view.ov_native_close.on(Laya.Event.CLICK,this,()=>{this.view.ov_native2.visible=!1})}}else{this.view.ov_native2.visible=!1;let e=[],n=Ni.I.getMatrixByPosition(xe.RESULT_PASS_AD);if(null!=n&&n.length>0){for(const t of n)e.push(t.tgamekey);for(let e=0;e<n.length;e++){let a=n[e];t.push(a);let o={"坑位":a.index,"游戏":a.appName};(a.isBBBS||i.games_ald_ouku)&&b.I.sendEvent(`${a.icon}-${R.RESAULT2_SHOW}`,o)}}if(t.length<=0){if(this.view.hgamebox.visible=!1,this.view.hgamelist.visible=!1,Laya.Browser.onMiniGame){let e=Ni.I.getAdSwitchByPosition(be.RESULT_TOP_AD);null!=e&&1==e.state&&ki.I.showCustom(H.AD_CUSTOM_TOP,e.topMargin,e.leftMargin,this,this.onErrorCoustAd)}}else this.view.hgamebox.visible=!0,this.view.hgamelist.visible=!0,this.view.hgamelist.vScrollBarSkin="",this.view.hgamelist.elasticEnabled=!1,this.view.hgamelist.scrollBar.rollRatio=0,this.view.hgamelist.renderHandler=new Laya.Handler(this,this.cellsForGame),this.view.hgamelist.mouseHandler=new Laya.Handler(this,this.onGameCellEvent),this.view.hgamelist.array=t,this.view.hgamelist.setAutoScroll(1,1,500),Ni.I.jumpStatistics(T.I.getConf(),c.instance.openid,bi.MATRIX_TYPE_SHOW,e.join(","),xe.RESULT_PASS_AD)}if(null!==this.adEnum&&void 0!==this.adEnum&&this.adEnum>=0)if(Laya.Browser.onMiniGame){let e=Ni.I.getAdSwitchByPosition(be.RESULT_TOP_AD),t=Ni.I.getMatrixByPosition(xe.RESULT_PASS_AD);null!=t&&t.length>0||null==e||0==e.state?(Ce.log("MoonResults2Panel-show-showBannerAd"),null!==this.adTop&&void 0!==this.adTop&&this.adTop>0?xi.I.showBannerAd(this.adEnum,this.adTop):xi.I.showBannerAd(this.adEnum)):(Ce.log("MoonResults2Panel-show-hideBannerAd"),xi.I.hideBannerAd(this.adEnum))}else Ce.log("MoonResults2Panel-show-showBannerAd"),null!==this.adTop&&void 0!==this.adTop&&this.adTop>0?xi.I.showBannerAd(this.adEnum,this.adTop):xi.I.showBannerAd(this.adEnum);if(Laya.Browser.onMiniGame){let e=Ni.I.getAdSwitchByPosition(be.RESULT_RIGHT_AD);null!=e&&1==e.state&&ki.I.showCustom(H.AD_CUSTOM_SINGLE_RIFHT2,e.topMargin,e.leftMargin,this,null)}}onErrorCoustAd(e){Ce.log("MoonResults2Panel--onErrorTopCoustAd---"),null!==this.adEnum&&void 0!==this.adEnum&&this.adEnum>=0&&(Ce.log("MoonResults2Panel-onErrorCoustAd-showBannerAd"),null!==this.adTop&&void 0!==this.adTop&&this.adTop>0?xi.I.showBannerAd(this.adEnum,this.adTop):xi.I.showBannerAd(this.adEnum))}hide(){null!==this.adEnum&&void 0!==this.adEnum&&this.adEnum>=0&&(Ce.log("MoonResults2Panel-hide-hideBannerAd"),xi.I.hideBannerAd(this.adEnum)),Laya.Browser.onMiniGame&&(ki.I.hideCustom(H.AD_CUSTOM_TOP),ki.I.hideCustom(H.AD_CUSTOM_SINGLE_RIFHT2)),super.hide()}cellsForGame(e,t){let i=e.dataSource,n=e.getChildByName("Img_Game");if(null==i.statistics&&i.icon)n.skin=i.icon;else{let e=T.I.getConf();n.skin=`${e.gamesBasePath}/icon/${i.icon}.png`}e.off(Laya.Event.CLICK,this,Ni.I.openGame),e.on(Laya.Event.CLICK,this,Ni.I.openGame,[i,xe.RESULT_PASS_AD])}onGameCellEvent(e){if(e.type!=Laya.Event.CLICK)return;let t;if(ke.I.isWxMiniGame()?t=window.wx:ke.I.isQQMiniGame()&&(t=window.qq),null==t)return;let i=T.I.getConf(),n=e.currentTarget.dataSource,a={"坑位":n.index,"游戏":n.appName};(n.isBBBS||i.games_ald_ouku)&&b.I.sendEvent(`${n.icon}-${R.RESAULT2_CLICK}`,a),t.navigateToMiniProgram({appId:n.appId,path:"",success:function(e){let t={"坑位":n.index,"游戏":n.appName};(n.isBBBS||i.games_ald_ouku)&&b.I.sendEvent(`${n.icon}-${R.RESAULT2_ACT}`,t),n.isBBBS&&Nn.I.reportByAppId(n.appId,n.flowType,n.index,!0),Ce.log("MoonResults2Panel success jump to res:",e),Ce.log("MoonResults2Panel success jump to appName",n.appName),Ce.log("MoonResults2Panel success jump to flowType",n.flowType),Ce.log("MoonResults2Panel success jump to appId",n.appId)},fail:function(e){Ce.log("MoonResults2Panel fail jump to res:",e),Ce.log("MoonResults2Panel fail jump to appName",n.appName),Ce.log("MoonResults2Panel fail jump to flowType",n.flowType),Ce.log("MoonResults2Panel fail jump to appId",n.appId),n.isBBBS&&Nn.I.reportByAppId(n.appId,n.flowType,n.index,!1)}})}}class Pn extends Mn{constructor(){super(...arguments),this.adEnum=-1,this.assetList=["view/MoonGameBox.json"]}createView(){return new O.view.MoonGameBoxUI}initial(){super.initial(),this.uiLayer=K.Dialog}show(e){super.show(e),this.mgoonCaller=e.mgoonCaller,this.mgoonFunc=e.mgoonFunc;let t=[],i=Ni.I.getMatrixByPosition(xe.BOX_AD);for(const e of i)t.push(e.tgamekey);this.view.size(Laya.stage.width,Laya.stage.height),this.addClickListener(this.view.btn_close,this.onClick),this.view.list.vScrollBarSkin="",this.view.list.elasticEnabled=!1,this.view.list.scrollBar.rollRatio=0,this.view.list.renderHandler=new Laya.Handler(this,this.onRenderItem),this.view.list.array=i,this.view.list.setAutoScroll(1,1,500),this.view.btn_close.visible=!1,this.addClickListener(this.view.btn_close,this.onClick),Laya.timer.once(3e3,this,this.showCloseBtn),Ni.I.jumpStatistics(T.I.getConf(),c.instance.openid,bi.MATRIX_TYPE_SHOW,t.join(","),xe.BOX_AD),Laya.Browser.onMiniGame&&Mt.instance.hide(Tt.MoonMainAdPanel),null!=e&&null!=e.adEnum&&e.adEnum>=0&&(this.adEnum=e.adEnum,Ce.log("MoonGameBoxPanel-showBannerAd"),xi.I.showBannerAd(this.adEnum))}showCloseBtn(){this.view.btn_close.visible=!0}hide(){null!==this.adEnum&&void 0!==this.adEnum&&this.adEnum>=0&&(Ce.log("MoonGameBoxPanel-hideBannerAd"),xi.I.hideBannerAd(this.adEnum)),Laya.timer.clearAll(this),super.hide()}onClick(e){this.closeSelf(),this.mgoonCaller&&this.mgoonFunc?this.mgoonFunc.call(this.mgoonCaller):Laya.Browser.onMiniGame&&Mt.instance.show(Tt.MoonMainAdPanel,{adEnum:this.adEnum})}onRenderItem(e,t){let i=e.dataSource;e.getChildByName("img_icon").skin=i.icon,e.off(Laya.Event.CLICK,this,Ni.I.openGame),e.on(Laya.Event.CLICK,this,Ni.I.openGame,[i,xe.BOX_AD])}}class Bn extends Mn{constructor(){super(...arguments),this.assetList=["wxlocal/MoonConfirm.json"]}createView(){return new O.wxlocal.MoonConfirmUI}initial(){super.initial(),this.uiLayer=K.Normal}show(e){super.show(e),this.view.size(Laya.stage.width,Laya.stage.height),this.view.lbl_content.text=e[0],this.mCaller=e[1],this.mCallFunc=e[2],this.addClickListener(this.view.btn_try,this.onTryEvent)}hide(){super.hide()}onTryEvent(){let e=this.mCaller,t=this.mCallFunc;this.closeSelf(),t&&e&&t.call(e)}}class Gn extends Mn{constructor(){super(...arguments),this.adEnum=-1,this.showGames=!0,this.gamekeys=[],this.assetList=["view/MoonMainAd2.json"]}createView(){return new O.view.MoonMainAd2UI}initial(){super.initial(),this.uiLayer=K.Dialog}start(){super.start()}end(){super.end()}show(e){super.show(e),this.view.size(Laya.stage.width,Laya.stage.height);let t=0;e&&e.top&&(this.view.List_Game1.top=e.top,this.view.List_Game2.top=e.top,t=e.top),null!=e&&null!=e.adEnum&&e.adEnum>=0&&(this.adEnum=e.adEnum,Ce.log("MoonMainAd2Panel-showBannerAd"),xi.I.showBannerAd(this.adEnum));let i=T.I.getConf();if(this.view.List_Game1.visible=this.showGames,this.view.List_Game2.visible=this.showGames,this.view.List_Game3.visible=this.showGames,Laya.Browser.onVVMiniGame||Laya.Browser.onQGMiniGame){this.view.List_Game1.visible=!1,this.view.List_Game2.visible=!1,this.view.List_Game3.visible=!1;let e=Ni.I.getAdSwitchByPosition(Te.MAIN_TOP_AD);if(null==e||0==e.state);else{let e=this.view.ov_native.getChildByName("icon");Laya.Browser.onVVMiniGame?Xi.I.createNativeAd(U.AD_GAME_NATIVE,Y.IMG,e):Hi.I.createNativeAd(U.AD_GAME_NATIVE,Y.IMG,e),e.on(Laya.Event.MOUSE_OVER,this,()=>{Laya.Browser.onVVMiniGame?Xi.I.reportAdClick(U.AD_GAME_NATIVE,Y.IMG):Hi.I.reportAdClick(U.AD_GAME_NATIVE,Y.IMG)}),this.view.btn_close.on(Laya.Event.CLICK,this,()=>{})}if(null==(e=Ni.I.getAdSwitchByPosition(Te.MAIN_RIGHT_AD))||0==e.state)this.view.ov_native2.visible=!1;else{this.view.ov_native2.visible=!0;let e=this.view.ov_native2.getChildByName("icon");Laya.Browser.onVVMiniGame?Xi.I.createNativeAd(U.AD_GAME_SINGLE_NATIVE,Y.ICON,e):Hi.I.createNativeAd(U.AD_GAME_SINGLE_NATIVE,Y.ICON,e),e.on(Laya.Event.MOUSE_OVER,this,()=>{Laya.Browser.onVVMiniGame?Xi.I.reportAdClick(U.AD_GAME_SINGLE_NATIVE,Y.ICON):Hi.I.reportAdClick(U.AD_GAME_SINGLE_NATIVE,Y.ICON)}),this.view.ov_native_close.on(Laya.Event.CLICK,this,()=>{this.view.ov_native2.visible=!1})}}else{this.view.ov_native2.visible=!1,this.gamekeys=[];let e=Ni.I.getMatrixByPosition(xe.MAIN_LEFT_AD);if(null==e||e.length<=0){if(this.view.List_Game1.visible=!1,Laya.Browser.onMiniGame){let e=Ni.I.getAdSwitchByPosition(be.MAIN_LEFT_AD);if(null!=e&&1==e.state){let i=t>0?t:e.topMargin;ki.I.showCustom(H.AD_CUSTOM_MAIN_SINGLE_LEFT,i,e.leftMargin,this,this.onErrorLeftCoustAd)}}}else{for(const t of e)this.gamekeys.push(t.tgamekey);this.view.List_Game1.vScrollBarSkin="",this.view.List_Game1.elasticEnabled=!1,this.view.List_Game1.scrollBar.rollRatio=0,this.view.List_Game1.renderHandler=new Laya.Handler(this,this.cellsForLeftGame),this.view.List_Game1.array=e,this.view.List_Game1.setAutoScroll(1,1,500),this.gamekeys.length>0&&Ni.I.jumpStatistics(i,c.instance.openid,bi.MATRIX_TYPE_SHOW,this.gamekeys.join(","),xe.MAIN_LEFT_AD)}this.gamekeys=[];let n=Ni.I.getMatrixByPosition(xe.MAIN_RIGHT_AD);if(null==n||n.length<=0){if(this.view.List_Game2.visible=!1,Laya.Browser.onMiniGame){let e=Ni.I.getAdSwitchByPosition(be.MAIN_RIGHT_AD);if(null!=e&&1==e.state){let i=t>0?t:e.topMargin;ki.I.showCustom(H.AD_CUSTOM_MAIN_RIGHT,i,e.leftMargin,this,this.onErrorRightCoustAd)}}}else{for(const e of n)this.gamekeys.push(e.tgamekey);this.view.List_Game2.vScrollBarSkin="",this.view.List_Game2.elasticEnabled=!1,this.view.List_Game2.scrollBar.rollRatio=0,this.view.List_Game2.renderHandler=new Laya.Handler(this,this.cellsForRightGame),this.view.List_Game2.array=n,this.view.List_Game2.setAutoScroll(1,1,500),this.gamekeys.length>0&&Ni.I.jumpStatistics(i,c.instance.openid,bi.MATRIX_TYPE_SHOW,this.gamekeys.join(","),xe.MAIN_RIGHT_AD)}this.gamekeys=[];let a=Ni.I.getMatrixByPosition(xe.RESULT_PASS_AD);if(null==a||a.length<=0){if(this.view.List_Game3.visible=!1,Laya.Browser.onMiniGame){let e=Ni.I.getAdSwitchByPosition(be.RESULT_TOP_AD);if(null!=e&&1==e.state){let i=t>0?t:e.topMargin;ki.I.showCustom(H.AD_CUSTOM_TOP,i,e.leftMargin,this,this.onErrorTopCoustAd)}}}else{for(const e of a)this.gamekeys.push(e.tgamekey);this.view.List_Game3.hScrollBarSkin="",this.view.List_Game3.elasticEnabled=!1,this.view.List_Game3.scrollBar.rollRatio=0,this.view.List_Game3.renderHandler=new Laya.Handler(this,this.cellsForTopGame),this.view.List_Game3.array=a,this.view.List_Game3.setAutoScroll(1,1,500),this.gamekeys.length>0&&Ni.I.jumpStatistics(i,c.instance.openid,bi.MATRIX_TYPE_SHOW,this.gamekeys.join(","),xe.RESULT_PASS_AD)}}}onErrorLeftCoustAd(e){Ce.log("MoonMainAd2Panel--onErrorLeftCoustAd---",e)}onErrorRightCoustAd(e){Ce.log("MoonMainAd2Panel--onErrorRightCoustAd---",e)}onErrorTopCoustAd(e){Ce.log("MoonMainAd2Panel--onErrorTopCoustAd---",e)}cellsForLeftGame(e,t){let i=e.dataSource;e.getChildByName("Img_Game").skin=i.icon,e.off(Laya.Event.CLICK,this,Ni.I.openGame),e.on(Laya.Event.CLICK,this,Ni.I.openGame,[i,xe.MAIN_LEFT_AD])}cellsForRightGame(e,t){let i=e.dataSource;e.getChildByName("Img_Game").skin=i.icon,e.off(Laya.Event.CLICK,this,Ni.I.openGame),e.on(Laya.Event.CLICK,this,Ni.I.openGame,[i,xe.MAIN_RIGHT_AD])}cellsForTopGame(e,t){let i=e.dataSource;e.getChildByName("Img_Game").skin=i.icon,e.off(Laya.Event.CLICK,this,Ni.I.openGame),e.on(Laya.Event.CLICK,this,Ni.I.openGame,[i,xe.RESULT_PASS_AD])}hide(){null!==this.adEnum&&void 0!==this.adEnum&&this.adEnum>=0&&(Ce.log("MoonMainAd2Panel-hideBannerAd",this.adEnum),xi.I.hideBannerAd(this.adEnum)),Laya.Browser.onMiniGame&&(ki.I.hideCustom(H.AD_CUSTOM_MAIN_RIGHT),ki.I.hideCustom(H.AD_CUSTOM_MAIN_SINGLE_LEFT),ki.I.hideCustom(H.AD_CUSTOM_TOP)),super.hide()}}class Fn{createPanel(e){switch(e){case xt.MoonGameBoxPanel:return new Pn;case xt.MoonGuideGesturePanel:return new Cn;case xt.MoonTipPanel:return new On;case xt.MoonMainAdPanel:return new Dn;case xt.MoonMainAd2Panel:return new Gn;case xt.MoonResultsPanel:return new Vn;case xt.MoonResults2Panel:return new kn;case xt.MoonConfirmPanel:return new Bn}return null}}class zn{constructor(){this.sdk=Ne.I.getSDK()}static get I(){return h.get(zn)}checkUpdate(){if(this.sdk&&this.sdk!=window.qg){this.updateManager=this.sdk.getUpdateManager(),this.updateManager.onCheckForUpdate(function(e){Ce.log(e.hasUpdate)});let e=this;this.updateManager.onUpdateReady(function(){e.sdk.showModal({title:"更新提示",content:"新版本已经准备好，是否重启应用?",success:function(t){t.confirm&&e.updateManager.applyUpdate()}})}),this.updateManager.onUpdateFailed(function(){})}}}class Un{static get I(){return h.get(Un)}constructor(){}init(){Ne.I.getSDK()&&Ne.I.getSDK().setKeepScreenOn({keepScreenOn:!0,success:()=>{},fail:()=>{},complete:()=>{}})}}!function(e){e[e.Data=0]="Data",e[e.ResLoading=1]="ResLoading",e[e.Res3dLoading=2]="Res3dLoading",e[e.ResSingle=3]="ResSingle",e[e.ResCache=4]="ResCache"}(Oi||(Oi={}));class Hn extends Mn{constructor(){super(...arguments),this.assetList=["wxlocal/MoonLoading.json"],this.loadinglbl_load2D="loading 2d...",this.loadinglbl_load3D="loading 3d...",this.loadinglbl_Single="laoding game info...",this.loadinglbl_SubPkg="download source...",this.preloadCount=0,this.subPackWx=[],this.subPackOppo=[],this.subPackQQ=[],this.subPackTT=[],this.subPackVivo=[],this.loadCount=0,this.cdnNum=30,this.resLoading=[],this.res3dLoading=[],this.resSingle=[],this.nativefiles=[]}gameInitComplete(){}createView(){return new O.wxlocal.MoonLoadingUI}start(){super.start()}show(e){super.show(e),Ce.info("展示+++++"),_t.I.onWeidu({weidu:1}),this.view.version.text=T.I.getConf().version.toString(),this.nativefiles.length>0&&(ke.I.isWxMiniGame()||ke.I.isTTMiniGame()?Laya.MiniAdpter.nativefiles=this.nativefiles:ke.I.isQQMiniGame()&&(Laya.QQMiniAdapter.nativefiles=this.nativefiles));let t=T.I.getConf();if(_t.I.getSaleData(),t.needGetGamelist&&Ni.I.getMatrixList(t),t.needGetSwitchList&&(Laya.Browser.onQGMiniGame||Laya.Browser.onVVMiniGame||Laya.Browser.onMiniGame)&&Ni.I.getAdSwitchList(t),zn.I.checkUpdate(),Laya.Browser.onQGMiniGame)window.qg.setLoadingProgress({progress:0});else if(ke.I.isOPPOH5Game()){window.OPPO.getAppVersion()>=1200&&window.OPPO.setLoadingProgress(0)}if(Un.I.init(),this.view.loadcricle.play(),_t.I.onEvent({event:"load_gameres_start",time:Date.now(),scene:"load_scene"}),ke.I.isWxMiniGame()&&this.subPackWx.length>0){this.mCurPro=0,this.updateProgressView(),this.view.loadinglbl.text=this.loadinglbl_SubPkg;for(let e=0;e<this.subPackWx.length;e++)this.loadAsynSubPackage(this.subPackWx[e])}else if(Laya.Browser.onQGMiniGame&&this.subPackOppo.length>0){Ce.info("oppo loadAsynSubPackage"),this.mCurPro=0,this.updateProgressView(),this.view.loadinglbl.text=this.loadinglbl_SubPkg;for(let e=0;e<this.subPackOppo.length;e++)this.loadAsynSubPackage(this.subPackOppo[e])}else if(Laya.Browser.onVVMiniGame&&this.subPackVivo.length>0){Ce.info("vivo loadAsynSubPackage"),this.mCurPro=0,this.updateProgressView(),this.view.loadinglbl.text=this.loadinglbl_SubPkg;for(let e=0;e<this.subPackVivo.length;e++)this.loadAsynSubPackage(this.subPackVivo[e])}else if(Laya.Browser.onQQMiniGame&&this.subPackQQ.length>0){Ce.info("qq loadAsynSubPackage"),this.mCurPro=0,this.updateProgressView(),this.view.loadinglbl.text=this.loadinglbl_SubPkg;for(let e=0;e<this.subPackQQ.length;e++)this.loadAsynSubPackage(this.subPackQQ[e])}else if(Laya.Browser.onTTMiniGame&&this.subPackTT.length>0){Ce.info("tt loadAsynSubPackage"),this.mCurPro=0,this.updateProgressView(),this.view.loadinglbl.text=this.loadinglbl_SubPkg;for(let e=0;e<this.subPackTT.length;e++)this.loadAsynSubPackage(this.subPackTT[e])}else Ce.info("no SubPackage"),this.startGame();Vi.I.statisticsReport(Ri.VIEW_LOADING),Ne.I.registerBGEvent()}startGame(){this.mAddPro=this.mCurPro=this.mTargetPro=0,Laya.timer.frameLoop(1,this,this.onFrameUpdate),this.loadRecord()}loadAsynSubPackage(e){let t=this;if(Laya.Browser.onQGMiniGame||Laya.Browser.onVVMiniGame){qg.loadSubpackage({name:e,success:function(i){Ce.info(e+"加载成功"),t.ovSubPkgLoadFinish()},fail:function(t){Ce.info(e+"加载失败")}})}else if(Laya.Browser.onQQMiniGame){qq.loadSubpackage({name:e,success:function(e){t.subQQPkgLoadFinish()},fail:function(e){}})}else if(Laya.Browser.onTTMiniGame){tt.loadSubpackage({name:e,success:function(e){t.preloadCount<t.subPackTT.length?(t.loadAsynSubPackage(t.subPackTT[t.preloadCount]),t.preloadCount++):t.subTTPkgLoadFinish()},fail:function(e){}})}else{wx.loadSubpackage({name:e,success:function(e){t.subPkgLoadFinish()},fail:function(e){}})}}subPkgLoadFinish(){Ce.info("wx subPkgLoadFinish"),this.preloadCount++,this.mCurPro=this.preloadCount/this.subPackWx.length,this.updateProgressView(),this.preloadCount>=this.subPackWx.length&&this.startGame()}subQQPkgLoadFinish(){Ce.info("qq subPkgLoadFinish"),this.preloadCount++,this.mCurPro=this.preloadCount/this.subPackQQ.length,this.updateProgressView(),this.preloadCount>=this.subPackQQ.length&&this.startGame()}subTTPkgLoadFinish(){Ce.info("tt subPkgLoadFinish"),this.preloadCount++,this.mCurPro=this.preloadCount/this.subPackTT.length,this.updateProgressView(),this.preloadCount>=this.subPackTT.length&&this.startGame()}ovSubPkgLoadFinish(){Ce.info("ov subPkgLoadFinish"),this.preloadCount++;let e=!1;Laya.Browser.onQGMiniGame?(this.mCurPro=this.preloadCount/this.subPackOppo.length,e=this.preloadCount>=this.subPackOppo.length):(this.mCurPro=this.preloadCount/this.subPackVivo.length,e=this.preloadCount>=this.subPackVivo.length),this.updateProgressView(),e&&this.startGame()}hide(){Laya.timer.clearAll(this),vt.I.removeListener(vt.LoginApp,this,this.onLoginComplete),super.hide()}setTargetPro(e){this.mTargetPro=e,this.mCurPro>=this.mTargetPro?(this.mCurPro=this.mTargetPro,this.mAddPro=0,this.updateProgressView()):this.mAddPro=(this.mTargetPro-this.mCurPro)/20}onFrameUpdate(){if(this.mAddPro>0&&(this.mCurPro+=this.mAddPro,this.mCurPro>=this.mTargetPro&&(this.mCurPro=this.mTargetPro,this.mAddPro=0),this.updateProgressView()),this.mIsStepDone&&this.mCurPro>=this.mTargetPro)if(this.mIsStepDone=!1,this.mLoadingStep==Oi.ResLoading)this.loadRes3d();else if(this.mLoadingStep==Oi.Res3dLoading)this.onLoadedComplete();else if(this.mLoadingStep==Oi.ResSingle)this.mLoadingStep=Oi.ResCache,this.onResCache();else if(this.mLoadingStep==Oi.ResCache)if(_t.I.onEvent({event:"load_gameres_p100",time:Date.now(),scene:"load_scene"}),_t.I.onEvent({event:"game_init_start",time:Date.now(),scene:"home_scene"}),this.gameInitComplete(),_t.I.onWeidu({weidu:105}),Laya.Browser.onQGMiniGame)window.qg.loadingComplete({complete:function(e){}});else if(ke.I.isOPPOH5Game()){window.OPPO.getAppVersion()>=1200&&window.OPPO.loadingComplete()}}onResCache(){this.setTargetPro(1),this.mIsStepDone=!0}loadRes(){this.mLoadingStep=Oi.ResLoading,this.view.loadinglbl.text=this.loadinglbl_load2D,this.setTargetPro(0),T.I.getConf().basePath.length>0&&(Laya.URL.basePath=`${T.I.getConf().basePath[this.loadCount%3]}${T.I.getConf().version}/`),Ce.info("Laya.URL.basePath:",Laya.URL.basePath),_t.I.onEvent({event:"load_gameres_p20",time:Date.now(),scene:"load_scene"}),this.resLoading.length>0?Laya.loader.load(this.resLoading,Laya.Handler.create(this,this.onLoadResComplete),Laya.Handler.create(this,this.setTargetPro,null,!1)):this.onLoadResComplete(!0)}onLoadResComplete(e){e?(this.mIsStepDone=!0,this.setTargetPro(1)):this.loadResError()}loadResError(){this.loadCount++,(Laya.Browser.onMiniGame||Laya.Browser.onQQMiniGame||Laya.Browser.onQGMiniGame)&&Laya.MiniAdpter.removeAll(),Laya.Browser.onVVMiniGame&&Laya.VVMiniAdapter.removeAll(),this.loadCount<this.cdnNum&&Laya.timer.once(500,this,this.loadRes)}loadRes3d(){this.view.loadinglbl.text=this.loadinglbl_load3D,this.mLoadingStep=Oi.Res3dLoading,this.setTargetPro(0),this.initRes3dArray(),_t.I.onEvent({event:"load_gameres_p40",time:Date.now(),scene:"load_scene"}),this.res3dLoading.length>0?Laya.loader.create(this.res3dLoading,Laya.Handler.create(this,this.onLoadRes3dComplete),Laya.Handler.create(this,this.setTargetPro,null,!1)):this.onLoadRes3dComplete(!0)}onLoadRes3dComplete(e){e?(this.mIsStepDone=!0,this.setTargetPro(1)):this.loadResError()}initRes3dArray(){}updateProgressView(){if(this.view.bar.x=-this.view.bar.width*(1-this.mCurPro),this.view.tPgs.text=Math.round(100*this.mCurPro)+"%",this.updateProgressChild(),Laya.Browser.onQGMiniGame)window.qg.setLoadingProgress({progress:100*this.mCurPro});else if(ke.I.isOPPOH5Game()){window.OPPO.getAppVersion()>=1200&&window.OPPO.setLoadingProgress(100*this.mCurPro)}}updateProgressChild(){}loadRecord(){if(this.mLoadingStep=Oi.Data,this.view.loadinglbl.text=this.loadinglbl_Single,this.setTargetPro(0),g.dont==T.I.getConf().loginLevel?this.loadRecordNoData():(vt.I.addListener(vt.LoginApp,this,this.onLoginComplete),vt.I.login()),_t.I.load(),T.I.getConf().ad.video.length>0)for(let e=0;e<T.I.getConf().ad.video.length;e++)xi.I.getVideoAd(e)}loadRecordNoData(){C.I.readLocal(),Vi.I.statisticsReport(Ri.LOGIN_SUCCESS),this.loadRes()}onLoginComplete(e){e.result?(vt.I.removeListener(vt.LoginApp,this,this.onLoginComplete),c.instance.uid=e.res.openid,this.loadRecordNoData()):g.must==T.I.getConf().loginLevel?Mt.instance.show(xt.MoonConfirmPanel,["网络状况不佳，请检查网络后\n重新进入游戏",this,()=>{vt.I.login()}]):this.loadRecordNoData(),this.onExtendLoginComplete()}onExtendLoginComplete(){}onLoadedComplete(){this.mLoadingStep=Oi.ResSingle,this.setTargetPro(0),_t.I.onEvent({event:"load_gameres_p60",time:Date.now(),scene:"load_scene"}),this.resSingle.length>0?Laya.loader.create(this.resSingle,Laya.Handler.create(this,this.onResSingleComplete),Laya.Handler.create(this,this.setTargetPro)):this.onResSingleComplete(!0)}onResSingleComplete(e){this.mIsStepDone=!0,this.setTargetPro(1)}dispose(){this.view.img_logo.dispose(),this.view.img_bg.dispose(),super.dispose()}}class Yn extends Hn{constructor(){super(...arguments),this.resLoading=["res/atlas/comp.atlas","res/atlas/comp.png","res/atlas/rank.atlas","res/atlas/rank.png","res/atlas/rewan.atlas","res/atlas/rewan.png","res/atlas/head.atlas","res/atlas/head.png","res/atlas/ren.atlas","res/atlas/ren.png","res/atlas/ui.atlas","res/atlas/ui.png","loading/beij.jpg","loading/progress_xx1$bar.png","loading/progress_xx1.png","comp/di.jpg","comp/logo.png","version.json","HudView.scene","HudView.json","LoadingView.json","LoadingView.scene","unpack.json","fileconfig.json"],this.subPackVivo=["scene","sounds","res","head","share","comp"],this.subPackWx=["scene","sounds","res","head","share","comp"],this.res3dLoading=$.preloads,this.resSingle=[]}show(e){super.show(e)}gameInitComplete(){console.log("gameInitComplete*****"),Laya.SoundManager.useAudioMusic=!1,He.I.init("bgm",!1),He.I.setMusicVolume(.2),new Gi,Gi.app.startGame(),Mt.instance.hide(Tt.LoadingPanel)}createAnimation(e){var t=null;return Qe.isNullOrEmpty(e)||((t=new Laya.Animation).loadAnimation(e),this.view.activity_box.addChild(t),t.pos(.5*this.view.activity_box.width,.5*this.view.activity_box.height),t.autoPlay=!0,this.stopAnimation(t)),t}playAnimation(e,t=!1){e&&(e.visible=!0,e.play(0,t))}disposeAnimation(e){e&&(this.stopAnimation(e),e.destroy(!0))}stopAnimation(e){e&&(e.stop(),e.visible=!1)}}class Xn extends Fn{createPanel(e){switch(e){case Tt.LoadingPanel:return new Yn}return super.createPanel(e)}}class Wn extends Laya.Script{constructor(){super()}onAwake(){console.log("进入start"),bt.instance.init(Laya.stage),Mt.instance.init(new Xn),this.onResize(),Laya.stage.on(Laya.Event.RESIZE,this,this.onResize)}onEnable(){Mt.instance.show(Tt.LoadingPanel)}onDisable(){}onResize(){Mt.instance.resize()}onDestroy(){Laya.stage.off(Laya.Event.RESIZE,this,this.onResize)}}class Kn{constructor(){}static init(){var e=Laya.ClassUtils.regClass;e("script/gui/ScaleButton.ts",In),e("script/gui/box/HeadBox.ts",vn),e("script/gui/box/PifuBox.ts",wn),e("script/gui/LoadingView.ts",Sn),e("script/gui/rewan/box/GameBigItemRender.ts",Ln),e("script/gui/box/PipeiBox.ts",En),e("moon/core/ui/extension/ListEx.ts",An),e("script/gui/rewan/box/GameItemRenderRewan.ts",xn),e("script/gui/rewan/box/GameItemRender.ts",Tn),e("script/gui/rewan/box/FakeBoxItemRender.ts",bn),e("moon/Start.ts",Wn)}}Kn.width=720,Kn.height=1280,Kn.scaleMode="fixedwidth",Kn.screenMode="none",Kn.alignV="middle",Kn.alignH="center",Kn.startScene="PifuView.scene",Kn.sceneRoot="",Kn.debug=!1,Kn.stat=!1,Kn.physicsDebug=!1,Kn.exportSceneToJson=!0,Kn.init();class jn{static fixSingletonList(){Laya.SingletonList.prototype._remove=function(e){if(-1!=e&&(this.length--,e!==this.length)){var t=this.elements[this.length];t&&(this.elements[e]=t,t._setIndexInList(e))}};var e=Laya.SimpleSingletonList.prototype.add;Laya.SimpleSingletonList.prototype.add=function(t){-1===t._getIndexInList()&&e.call(this,t)},Laya.SimpleSingletonList.prototype.remove=function(e){var t=e._getIndexInList();if(this.length--,t!==this.length){var i=this.elements[this.length];this.elements[t]=i,i&&i._setIndexInList&&i._setIndexInList(t)}e._setIndexInList(-1)}}}class qn{static formatPrefab(e,t="3d/prefab"){if(this.isVip){if(e&&""!==e&&void 0!==e&&"object"!=typeof tt){if(Laya.Browser.onIOS&&Laya.Browser.onMiniGame)return`${t}/iOS/${e}`;if((Laya.Browser.onMiniGame||Laya.Browser.onVVMiniGame||Laya.Browser.onQGMiniGame)&&Laya.Browser.onAndroid)return`${t}/Android/${e}`}if(Laya.Render.isConchApp){if(Laya.Browser.onAndroid)return`${t}/Android/${e}`;if(Laya.Browser.onIOS)return`${t}/iOS/${e}`}}return`${t}/Conventional/${e}`}static formatRes(e,t="3d/res",i=Di.Image){let n="Conventional";switch(this.isVip&&(e&&""!==e&&void 0!==e&&"object"!=typeof tt&&(Laya.Browser.onIOS&&Laya.Browser.onMiniGame?n="iOS":(Laya.Browser.onMiniGame||Laya.Browser.onVVMiniGame||Laya.Browser.onQGMiniGame)&&Laya.Browser.onAndroid&&(n="Android")),Laya.Render.isConchApp&&(Laya.Browser.onAndroid?n="Android":Laya.Browser.onIOS&&(n="iOS"))),i){case Di.Image:return`${t}/${n}/img/${e}`}return""}static formatScene(e){if(this.isVip){if(e&&""!==e&&void 0!==e&&"object"!=typeof tt){if(Laya.Browser.onIOS&&Laya.Browser.onMiniGame)return`3d/scene/iOS/${e}`;if((Laya.Browser.onMiniGame||Laya.Browser.onVVMiniGame||Laya.Browser.onQGMiniGame)&&Laya.Browser.onAndroid)return`3d/scene/Android/${e}`}if(Laya.Render.isConchApp){if(Laya.Browser.onAndroid)return`3d/scene/Android/${e}`;if(Laya.Browser.onIOS)return`3d/scene/iOS/${e}`}}return`3d/scene/Conventional/${e}`}static newFormatScene(e){if(this.isVip){if(e&&""!==e&&void 0!==e&&"object"!=typeof tt){if(Laya.Browser.onIOS&&Laya.Browser.onMiniGame)return`3d/scene/${e}/iOS/${e}.ls`;if((Laya.Browser.onMiniGame||Laya.Browser.onVVMiniGame||Laya.Browser.onQGMiniGame)&&Laya.Browser.onAndroid)return`3d/scene/${e}/Android/${e}.ls`}if(Laya.Render.isConchApp){if(Laya.Browser.onAndroid)return`3d/scene/${e}/Android/${e}.ls`;if(Laya.Browser.onIOS)return`3d/scene/${e}/iOS/${e}.ls`}}return`3d/scene/${e}/Conventional/${e}.ls`}static formatUiScene(e){if(this.isVip){if(e&&""!==e&&void 0!==e&&"object"!=typeof tt){if(Laya.Browser.onIOS&&Laya.Browser.onMiniGame)return`3d/uiscene/iOS/${e}`;if((Laya.Browser.onMiniGame||Laya.Browser.onVVMiniGame||Laya.Browser.onQGMiniGame)&&Laya.Browser.onAndroid)return`3d/uiscene/Android/${e}`}if(Laya.Render.isConchApp){if(Laya.Browser.onAndroid)return`3d/uiscene/Android/${e}`;if(Laya.Browser.onIOS)return`3d/uiscene/iOS/${e}`}}return`3d/uiscene/Conventional/${e}`}static formatLoadPrefab(e){for(let t in e)e[t]=qn.formatPrefab(e[t]);return e}static formatLoadScene(e){for(let t in e)e[t]=qn.formatScene(e[t]);return e}}qn.isVip=!0,function(e){e[e.Image=0]="Image"}(Di||(Di={}));new class{constructor(){window.Laya3D?Laya3D.init(Kn.width,Kn.height):Laya.init(Kn.width,Kn.height,Laya.WebGL),Laya.Physics&&Laya.Physics.enable(),Laya.DebugPanel&&Laya.DebugPanel.enable(),Laya.stage.scaleMode=Kn.scaleMode,Laya.stage.screenMode=Laya.Stage.SCREEN_NONE,Laya.stage.alignV=Laya.Stage.ALIGN_CENTER,Laya.stage.alignH=Laya.Stage.ALIGN_MIDDLE,Laya.Render.isConchApp?Laya.stage.scaleMode=Laya.Stage.SCALE_FIXED_WIDTH:Laya.Browser.onPC?Laya.stage.scaleMode=Laya.Stage.SCALE_SHOWALL:Laya.stage.scaleMode=Laya.Stage.SCALE_FIXED_AUTO,Laya.URL.exportSceneToJson=Kn.exportSceneToJson,(Kn.debug||"true"==Laya.Utils.getQueryString("debug"))&&Laya.enableDebugPanel(),Kn.physicsDebug&&Laya.PhysicsDebugDraw&&Laya.PhysicsDebugDraw.enable(),Kn.stat&&Laya.Stat.show(),Laya.MouseManager.multiTouchEnabled=!1,jn.fixSingletonList(),qn.isVip=!1,Vi.I.statisticsReport(Ri.INIT),Laya.ResourceVersion.enable("version.json",Laya.Handler.create(this,this.onVersionLoaded),Laya.ResourceVersion.FILENAME_VERSION)}onVersionLoaded(){Laya.AtlasInfoManager.enable("fileconfig.json",Laya.Handler.create(this,this.onConfigLoaded))}onConfigLoaded(){Laya.loader.create([{url:"wxlocal/bg0.png",type:Laya.Loader.IMAGE},{url:"wxlocal/icon_logo.png",type:Laya.Loader.IMAGE},{url:"wxlocal/loadBar.png",type:Laya.Loader.IMAGE},{url:"wxlocal/loadBg.png",type:Laya.Loader.IMAGE},{url:"wxlocal/load_circle.png",type:Laya.Loader.IMAGE},{url:"wxlocal/logo.png",type:Laya.Loader.IMAGE},{url:"wxlocal/MoonLoading.json",type:Laya.Loader.JSON},{url:"wxlocal/Start.json",type:Laya.Loader.JSON},{url:"wxlocal/loadcricle.ani",type:Laya.Loader.JSON}],Laya.Handler.create(this,this.onPrepareComplete))}onPrepareComplete(){if("object"==typeof FBInstant&&(console.log("FB"),"undefined"!=typeof minigame)){let e=this;minigame.initializeAsync().then(function(){console.log("FB initializeAsync"),minigame.getEntryPointAsync().then(function(e){console.info("Entry Point: ",e)});const t=minigame.context.getType();console.info("Context Type: ",t),e.startMiniGameSDK()})}M.ProductName="skiing2",St.ShareList.push({des:"雪地冒险玩, 冲鸭!",icon:"share/1.jpg"}),St.ShareList.push({des:"雪地冒险玩, 冲鸭!",icon:"share/2.jpg"}),St.ShareList.push({des:"雪地冒险玩, 冲鸭!",icon:"share/3.jpg"}),St.ShareList.push({des:"雪地冒险玩, 冲鸭!",icon:"share/4.jpg"}),St.ShareList.push({des:"雪地冒险玩, 冲鸭!",icon:"share/5.jpg"}),St.ShareList.push({des:"雪地冒险玩, 冲鸭!",icon:"share/6.jpg"}),Laya.Scene.open("wxlocal/Start.scene")}startMiniGameSDK(){"undefined"!=typeof minigame&&(minigame.setLoadingProgress(100),minigame.startGameAsync().then(function(){console.log("startGameAsync++")}).catch(function(e){console.info("startGameAsync error: "+e)}))}}}();
var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function __(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(__.prototype=i.prototype,new __)}}();!function(){return function r(e,t,i){function o(n,s){if(!t[n]){if(!e[n]){var l="function"==typeof require&&require;if(!s&&l)return l(n,!0);if(a)return a(n,!0);var c=new Error("Cannot find module '"+n+"'");throw c.code="MODULE_NOT_FOUND",c}var u=t[n]={exports:{}};e[n][0].call(u.exports,function(t){return o(e[n][1][t]||t)},u,u.exports,r,e,t,i)}return t[n].exports}for(var a="function"==typeof require&&require,n=0;n<i.length;n++)o(i[n]);return o}}()({1:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=e("./view/bigItem"),n=function(){function GameConfig(){}return GameConfig.init=function(){(0,Laya.ClassUtils.regClass)("view/bigItem.ts",a.default)},GameConfig.width=640,GameConfig.height=1136,GameConfig.scaleMode="fixedwidth",GameConfig.screenMode="none",GameConfig.alignV="top",GameConfig.alignH="left",GameConfig.startScene="test/Big.scene",GameConfig.sceneRoot="",GameConfig.debug=!1,GameConfig.stat=!1,GameConfig.physicsDebug=!1,GameConfig.exportSceneToJson=!0,GameConfig}();i.default=n,n.init()},{"./view/bigItem":5}],2:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=e("./GameConfig"),n=e("./view/BigRank");new(function(){function Main(){Laya.isWXOpenDataContext=!0,Laya.isWXPosMsg=!0,Laya.init(a.default.width,a.default.height,!1),Laya.stage.scaleMode=a.default.scaleMode,Laya.stage.screenMode=a.default.screenMode,Laya.stage.alignV=a.default.alignV,Laya.stage.alignH=a.default.alignH,Laya.Browser.onMiniGame?wx.onMessage(function(e){"res/atlas/rank.atlas"==e.url&&Laya.loader.load("res/atlas/rank.atlas",Laya.Handler.create(this,this.onComplete))}.bind(this)):Laya.loader.load("res/atlas/rank.atlas",Laya.Handler.create(this,this.onComplete))}return Main.prototype.onComplete=function(){(new n.default).init()},Main}())},{"./GameConfig":1,"./view/BigRank":4}],3:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=Laya.ClassUtils.regClass;!function(e){!function(e){var t=function(e){function BigUI(){return e.call(this)||this}return __extends(BigUI,e),BigUI.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.createView(BigUI.uiView)},BigUI.uiView={type:"Scene",props:{width:600,height:940},compId:2,child:[{type:"List",props:{y:0,x:0,var:"_list",vScrollBarSkin:" ",spaceY:14,repeatY:6,repeatX:1,elasticEnabled:!0},compId:3,child:[{type:"bigItem",props:{runtime:"view/bigItem.ts",renderType:"render"},compId:5}]},{type:"Box",props:{y:181,x:80,visible:!1,var:"box_info"},compId:8,child:[{type:"Image",props:{y:100,x:-20,width:100,var:"img_head",skin:"rank/touxiangdi.png",height:100},compId:6},{type:"Label",props:{y:100,x:200,width:200,var:"lbl_name",height:28,fontSize:28,color:"#42caff",align:"center"},compId:7}]}],loadList:["rank/touxiangdi.png"],loadList3D:[]},BigUI}(Laya.Scene);e.BigUI=t,a("ui.test.BigUI",t);var i=function(e){function BigItemUI(){return e.call(this)||this}return __extends(BigItemUI,e),BigItemUI.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.createView(BigItemUI.uiView)},BigItemUI.uiView={type:"View",props:{width:600,height:145},compId:2,child:[{type:"Image",props:{y:0,x:0,width:600,skin:"rank/neirongdi2.png",sizeGrid:"67,53,65,50",height:145},compId:11},{type:"Sprite",props:{y:21,x:105,texture:"rank/touxiangdi.png"},compId:15},{type:"Image",props:{y:32,x:115,width:80,var:"img_head",height:80},compId:3},{type:"Label",props:{y:55,x:221,width:208,var:"text_name",text:"名字",overflow:"scroll",height:34,fontSize:34,color:"#5e5d5d",align:"center"},compId:4},{type:"Label",props:{y:55,x:449,width:137,var:"text_score",text:"分数",height:34,fontSize:34,color:"#5e5d5d",align:"center"},compId:5},{type:"Label",props:{y:55,x:35,width:35,var:"txt_index",text:"1",height:34,fontSize:34,color:"#5e5d5d",align:"center"},compId:12},{type:"Image",props:{y:32,x:14,var:"img_rank",skin:"rank/pm1.png"},compId:14}],loadList:["rank/neirongdi2.png","rank/touxiangdi.png","rank/pm1.png"],loadList3D:[]},BigItemUI}(Laya.View);e.BigItemUI=i,a("ui.test.BigItemUI",i)}(e.test||(e.test={}))}(i.ui||(i.ui={}))},{}],4:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(e){function BigRank(){var t=e.call(this)||this;return t._key="wxd49d276632ca1786",t.arr=[{index:1,avatarIP:"",UserName:"测试用户1",RankValue:100},{index:2,avatarIP:"",UserName:"测试用户2",RankValue:75},{index:3,avatarIP:"",UserName:"测试用户3",RankValue:50},{index:4,avatarIP:"",UserName:"测试用户4",RankValue:25}],t}return __extends(BigRank,e),BigRank.prototype.init=function(){Laya.stage.addChild(this),this.setlist(this.arr),Laya.Browser.onMiniGame&&(wx.onMessage(this.recevieData.bind(this)),this.getFriendData())},BigRank.prototype.getFriendData=function(){var e=this;wx.getFriendCloudStorage({keyList:[this._key],success:function(t){var i,a,n,o=[];if(console.log("-----------------getFriendCloudStorage------------"),t.data){for(var r=0;r<t.data.length;r++)(a=t.data[r]).KVDataList.length&&(n=a.KVDataList[0]).key==e._key&&(n=JSON.parse(n.value),(i={}).avatarIP=a.avatarUrl,i.UserName=a.nickname,i.openID=a.openid,i.RankValue=n.wxgame.value1,i.update_time=n.wxgame.update_time,o.push(i));o=o.sort(function(e,t){return t.RankValue-e.RankValue});for(r=0;r<o.length;r++)o[r].index=r+1;e.setlist(o)}},fail:function(e){console.log("------------------获取托管数据失败--------------------"),console.log(e)}})},BigRank.prototype.recevieData=function(e){switch(e.type){case"getList":this.getFriendData();break;case"setData":this.setSelfData(e.value);break;case"initlist":this.setlist(e.value);break;case"showinfo":this._list.visible=!1,this.box_info.visible=!0,this.showInfo()}},BigRank.prototype.showInfo=function(){var e=this;wx.getPotentialFriendList&&wx.getPotentialFriendList({success:function(t){if(t&&t.list&&t.list.length>0){var i=t.list[0];e.img_head.skin=i.avatarUrl,e.lbl_name.text=i.nickname}},fail:function(){},complete:function(){}})},BigRank.prototype.setSelfData=function(e){var t=[],i={wxgame:{}};i.wxgame.value1=e,i.wxgame.update_time=Laya.Browser.now(),t.push({key:this._key,value:JSON.stringify(i)}),wx.setUserCloudStorage({KVDataList:t,success:function(e){console.log("-----success:"+JSON.stringify(e))},fail:function(e){console.log("-----fail:"+JSON.stringify(e))},complete:function(e){console.log("-----complete:"+JSON.stringify(e))}})},BigRank.prototype.setlist=function(e){this._list.visible=!0,this.box_info.visible=!1,this._list.array=e,this._list.refresh()},BigRank}(e("../ui/layaMaxUI").ui.test.BigUI);i.default=a},{"../ui/layaMaxUI":3}],5:[function(e,t,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(e){function BigItem(){return e.call(this)||this}return __extends(BigItem,e),Object.defineProperty(BigItem.prototype,"dataSource",{set:function(e){e&&(e.index<4?(this.img_rank.visible=!0,this.img_rank.skin="rank/pm"+e.index+".png"):this.img_rank.visible=!1,this.txt_index.text=e.index,this.img_head.skin=e.avatarIP,this.text_name.text=e.UserName,this.text_score.text=e.RankValue)},enumerable:!0,configurable:!0}),BigItem}(e("../ui/layaMaxUI").ui.test.BigItemUI);i.default=a},{"../ui/layaMaxUI":3}]},{},[2]);